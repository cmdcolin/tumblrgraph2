!function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";var r=t("cytoscape"),i=t("underscore"),o=t("cytoscape-cola"),a=t("cytoscape-cose-bilkent"),s=t("cytoscape-dagre"),u=t("cytoscape-springy"),c=t("cytoscape-spread"),l=t("cytoscape-ngraph.forcelayout"),h=t("cytoscape-panzoom"),f=t("dagre"),d=t("springy"),p=t("cytoscape-cola/cola");$(function(){function t(){var t={},o={},a=$("#notes").val(),s=$("#layout option:selected").text().trim();a.split("\n").forEach(function(e){var r=e.match(/(\S+) reblogged this from (\S+)/);r&&(t[r[1]]?t[r[1]].score+=5:t[r[1]]={id:r[1],name:r[1],score:1},t[r[2]]?t[r[2]].score+=5:t[r[2]]={id:r[2],name:r[2],score:1},o[r[1]+","+r[2]]||(o[r[1]+","+r[2]]={source:r[1],target:r[2]})),(r=e.match(/(\S+) posted this/))&&(n=r[1])});var u=i.map(t,function(t){return{data:t}}),c=i.map(o,function(t){return{data:t}});e=r({container:$("#cy"),style:r.stylesheet().selector("node").style({content:"data(name)","text-valign":"center","text-outline-width":2,"text-outline-color":"#000",color:"#fff"}).selector("edge").css({"target-arrow-shape":"triangle","curve-style":"haystack"}),elements:{nodes:u,edges:c},textureOnViewport:!0,pixelRatio:1,motionBlur:!0,layout:{name:s,padding:10,randomize:!0,animate:!0,repulsion:1}});var l={zoomFactor:.05,zoomDelay:45,minZoom:.1,maxZoom:10,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit:function(){return!1},fitAnimationDuration:1e3,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"};if(e.panzoom(l),$("#color_by_bfs").prop("checked")){var h=1;e.elements().bfs("#"+n,function(t,e){e>h&&(h=e)},!1),e.elements().bfs("#"+n,function(t,e){this.style("background-color","hsl("+150*e/h+",80%,55%)")},!1)}}var e,n;o(r,p),s(r,f),u(r,d),c(r),a(r),l(r),h(r,$),$("#myform").submit(function(){return t(),!1}),$("#save_button").on("click",function(){$("#output").append($("<a/>").attr({href:e.png({scale:3})}).append("Download picture"))}),$("#animate_graph").on("click",function(){function t(e,n){if(n<e.length)setTimeout(function(){e[n].style("visibility","visible"),i.add($("[data-id=layer2-node]")[0]),t(e,n+1)},r);else{var o=i.compile(),a=window.URL.createObjectURL(o);$("#output").empty(),$("#output").append($("<a/>").attr({href:a,download:"video.webm"}).append("Download video"))}}var r=$("#animate_speed").val(),i=new Whammy.Video(1e3/r);e.elements("node").forEach(function(t){t.style("visibility","hidden")});var o=[];e.elements().bfs("#"+n,function(){o.push(this)},!1),t(o,0)}),t()})},{cytoscape:124,"cytoscape-cola":4,"cytoscape-cola/cola":3,"cytoscape-cose-bilkent":37,"cytoscape-dagre":38,"cytoscape-ngraph.forcelayout":39,"cytoscape-panzoom":40,"cytoscape-spread":41,"cytoscape-springy":42,dagre:150,springy:204,underscore:205}],2:[function(t,e,n){},{}],3:[function(t,e,n){var r;!function(t){function e(t,e,n,i,o){function a(t,e){m=[],p=0,g=0,y=h;for(var n=0;n<t.length;n++){s(t[n],e)}return Math.abs(c()-o)}function s(t,e){for(var n=void 0,i=0;i<m.length;i++)if(m[i].space_left>=t.height&&m[i].x+m[i].width+t.width+r.PADDING-e<=r.FLOAT_EPSILON){n=m[i];break}m.push(t),void 0!==n?(t.x=n.x+n.width+r.PADDING,t.y=n.bottom,t.space_left=t.height,t.bottom=t.y,n.space_left-=t.height+r.PADDING,n.bottom+=t.height+r.PADDING):(t.y=y,y+=t.height+r.PADDING,t.x=l,t.bottom=t.y,t.space_left=t.height),t.y+t.height-g>-r.FLOAT_EPSILON&&(g=t.y+t.height-h),t.x+t.width-p>-r.FLOAT_EPSILON&&(p=t.x+t.width-l)}function u(t){var e=0;return t.forEach(function(t){return e+=t.width+r.PADDING}),e}function c(){return p/g}void 0===o&&(o=1);var l=0,h=0,f=e,d=n,o=void 0!==o?o:1,i=void 0!==i?i:0,p=0,g=0,v=0,y=0,m=[];0!=t.length&&(function(t){function e(t){var e=Number.MAX_VALUE,n=Number.MAX_VALUE,r=0,o=0;t.array.forEach(function(t){var a=void 0!==t.width?t.width:i,s=void 0!==t.height?t.height:i;a/=2,s/=2,r=Math.max(t.x+a,r),e=Math.min(t.x-a,e),o=Math.max(t.y+s,o),n=Math.min(t.y-s,n)}),t.width=r-e,t.height=o-n}t.forEach(function(t){e(t)})}(t),function(t,e){var n=Number.POSITIVE_INFINITY,i=0;t.sort(function(t,e){return e.height-t.height}),v=t.reduce(function(t,e){return t.width<e.width?t.width:e.width});for(var o=g=v,s=y=u(t),c=0,l=Number.MAX_VALUE,h=Number.MAX_VALUE,f=-1,d=Number.MAX_VALUE,p=Number.MAX_VALUE;d>v||p>r.FLOAT_EPSILON;){if(1!=f)var g=s-(s-o)/r.GOLDEN_SECTION,l=a(t,g);if(0!=f)var y=o+(s-o)/r.GOLDEN_SECTION,h=a(t,y);if(d=Math.abs(g-y),p=Math.abs(l-h),l<n&&(n=l,i=g),h<n&&(n=h,i=y),l>h?(o=g,g=y,l=h,f=1):(s=y,y=g,h=l,f=0),c++>100)break}a(t,i)}(t,o),function(t){t.forEach(function(t){var e={x:0,y:0};t.array.forEach(function(t){e.x+=t.x,e.y+=t.y}),e.x/=t.array.length,e.y/=t.array.length;var n={x:e.x-t.width/2,y:e.y-t.height/2},r={x:t.x-n.x+f/2-p/2,y:t.y-n.y+d/2-g/2};t.array.forEach(function(t){t.x+=r.x,t.y+=r.y})})}(t))}function n(t,e){function n(t,e){if(void 0===r[t.index]){e&&(a++,o.push({array:[]})),r[t.index]=a,o[a-1].array.push(t);var s=i[t.index];if(s)for(var u=0;u<s.length;u++)n(s[u],!1)}}for(var r={},i={},o=[],a=0,s=0;s<e.length;s++){var u=e[s],c=u.source,l=u.target;i[c.index]?i[c.index].push(l):i[c.index]=[l],i[l.index]?i[l.index].push(c):i[l.index]=[c]}for(var s=0;s<t.length;s++){var h=t[s];r[h.index]||n(h,!0)}return o}var r={PADDING:10,GOLDEN_SECTION:(1+Math.sqrt(5))/2,FLOAT_EPSILON:1e-4,MAX_INERATIONS:100};t.applyPacking=e,t.separateGraphs=n}(r||(r={}));var r;!function(t){!function(t){function e(t,e,n){for(var o=t.map(function(t){return new i(t.desiredCenter)}),a=[],u=t.length,c=0;c<u-1;c++){var l=t[c],h=t[c+1];a.push(new r(o[c],o[c+1],(l.size+h.size)/2))}var f=o[0],d=o[u-1],p=t[0].size/2,g=t[u-1].size/2,v=null,y=null;return e&&(v=new i(e,1e3*f.weight),o.push(v),a.push(new r(v,f,p))),n&&(y=new i(n,1e3*d.weight),o.push(y),a.push(new r(d,y,g))),new s(o,a).solve(),{newCenters:o.slice(0,t.length).map(function(t){return t.position()}),lowerBound:v?v.position():f.position()-p,upperBound:y?y.position():d.position()+g}}var n=function(){function t(t){this.scale=t,this.AB=0,this.AD=0,this.A2=0}return t.prototype.addVariable=function(t){var e=this.scale/t.scale,n=t.offset/t.scale,r=t.weight;this.AB+=r*e*n,this.AD+=r*e*t.desiredPosition,this.A2+=r*e*e},t.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},t}();t.PositionStats=n;var r=function(){function t(t,e,n,r){void 0===r&&(r=!1),this.left=t,this.right=e,this.gap=n,this.equality=r,this.active=!1,this.unsatisfiable=!1,this.left=t,this.right=e,this.gap=n,this.equality=r}return t.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},t}();t.Constraint=r;var i=function(){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=1),this.desiredPosition=t,this.weight=e,this.scale=n,this.offset=0}return t.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},t.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},t.prototype.visitNeighbours=function(t,e){var n=function(n,r){return n.active&&t!==r&&e(n,r)};this.cOut.forEach(function(t){return n(t,t.right)}),this.cIn.forEach(function(t){return n(t,t.left)})},t}();t.Variable=i;var o=function(){function t(t){this.vars=[],t.offset=0,this.ps=new n(t.scale),this.addVariable(t)}return t.prototype.addVariable=function(t){t.block=this,this.vars.push(t),this.ps.addVariable(t),this.posn=this.ps.getPosn()},t.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var t=0,e=this.vars.length;t<e;++t)this.ps.addVariable(this.vars[t]);this.posn=this.ps.getPosn()},t.prototype.compute_lm=function(t,e,n){var r=this,i=t.dfdv();return t.visitNeighbours(e,function(e,o){var a=r.compute_lm(o,t,n);o===e.right?(i+=a*e.left.scale,e.lm=a):(i+=a*e.right.scale,e.lm=-a),n(e)}),i/t.scale},t.prototype.populateSplitBlock=function(t,e){var n=this;t.visitNeighbours(e,function(e,r){r.offset=t.offset+(r===e.right?e.gap:-e.gap),n.addVariable(r),n.populateSplitBlock(r,t)})},t.prototype.traverse=function(t,e,n,r){var i=this;void 0===n&&(n=this.vars[0]),void 0===r&&(r=null),n.visitNeighbours(r,function(r,o){e.push(t(r)),i.traverse(t,e,o,n)})},t.prototype.findMinLM=function(){var t=null;return this.compute_lm(this.vars[0],null,function(e){!e.equality&&(null===t||e.lm<t.lm)&&(t=e)}),t},t.prototype.findMinLMBetween=function(t,e){this.compute_lm(t,null,function(){});var n=null;return this.findPath(t,null,e,function(t,e){!t.equality&&t.right===e&&(null===n||t.lm<n.lm)&&(n=t)}),n},t.prototype.findPath=function(t,e,n,r){var i=this,o=!1;return t.visitNeighbours(e,function(e,a){o||a!==n&&!i.findPath(a,t,n,r)||(o=!0,r(e,a))}),o},t.prototype.isActiveDirectedPathBetween=function(t,e){if(t===e)return!0;for(var n=t.cOut.length;n--;){var r=t.cOut[n];if(r.active&&this.isActiveDirectedPathBetween(r.right,e))return!0}return!1},t.split=function(e){return e.active=!1,[t.createSplitBlock(e.left),t.createSplitBlock(e.right)]},t.createSplitBlock=function(e){var n=new t(e);return n.populateSplitBlock(e,null),n},t.prototype.splitBetween=function(e,n){var r=this.findMinLMBetween(e,n);if(null!==r){var i=t.split(r);return{constraint:r,lb:i[0],rb:i[1]}}return null},t.prototype.mergeAcross=function(t,e,n){e.active=!0;for(var r=0,i=t.vars.length;r<i;++r){var o=t.vars[r];o.offset+=n,this.addVariable(o)}this.posn=this.ps.getPosn()},t.prototype.cost=function(){for(var t=0,e=this.vars.length;e--;){var n=this.vars[e],r=n.position()-n.desiredPosition;t+=r*r*n.weight}return t},t}();t.Block=o;var a=function(){function t(t){this.vs=t;var e=t.length;for(this.list=new Array(e);e--;){var n=new o(t[e]);this.list[e]=n,n.blockInd=e}}return t.prototype.cost=function(){for(var t=0,e=this.list.length;e--;)t+=this.list[e].cost();return t},t.prototype.insert=function(t){t.blockInd=this.list.length,this.list.push(t)},t.prototype.remove=function(t){var e=this.list.length-1,n=this.list[e];this.list.length=e,t!==n&&(this.list[t.blockInd]=n,n.blockInd=t.blockInd)},t.prototype.merge=function(t){var e=t.left.block,n=t.right.block,r=t.right.offset-t.left.offset-t.gap;e.vars.length<n.vars.length?(n.mergeAcross(e,t,r),this.remove(e)):(e.mergeAcross(n,t,-r),this.remove(n))},t.prototype.forEach=function(t){this.list.forEach(t)},t.prototype.updateBlockPositions=function(){this.list.forEach(function(t){return t.updateWeightedPosition()})},t.prototype.split=function(t){var e=this;this.updateBlockPositions(),this.list.forEach(function(n){var r=n.findMinLM();null!==r&&r.lm<s.LAGRANGIAN_TOLERANCE&&(n=r.left.block,o.split(r).forEach(function(t){return e.insert(t)}),e.remove(n),t.push(r))})},t}();t.Blocks=a;var s=function(){function t(t,e){this.vs=t,this.cs=e,this.vs=t,t.forEach(function(t){t.cIn=[],t.cOut=[]}),this.cs=e,e.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),this.inactive=e.map(function(t){return t.active=!1,t}),this.bs=null}return t.prototype.cost=function(){return this.bs.cost()},t.prototype.setStartingPositions=function(t){this.inactive=this.cs.map(function(t){return t.active=!1,t}),this.bs=new a(this.vs),this.bs.forEach(function(e,n){return e.posn=t[n]})},t.prototype.setDesiredPositions=function(t){this.vs.forEach(function(e,n){return e.desiredPosition=t[n]})},t.prototype.mostViolated=function(){for(var e=Number.MAX_VALUE,n=null,r=this.inactive,i=r.length,o=i,a=0;a<i;++a){var s=r[a];if(!s.unsatisfiable){var u=s.slack();if((s.equality||u<e)&&(e=u,n=s,o=a,s.equality))break}}return o!==i&&(e<t.ZERO_UPPERBOUND&&!n.active||n.equality)&&(r[o]=r[i-1],r.length=i-1),n},t.prototype.satisfy=function(){null==this.bs&&(this.bs=new a(this.vs)),this.bs.split(this.inactive);for(var e=null;(e=this.mostViolated())&&(e.equality||e.slack()<t.ZERO_UPPERBOUND&&!e.active);){var n=e.left.block;if(n!==e.right.block)this.bs.merge(e);else{if(n.isActiveDirectedPathBetween(e.right,e.left)){e.unsatisfiable=!0;continue}var r=n.splitBetween(e.left,e.right);if(null===r){e.unsatisfiable=!0;continue}this.bs.insert(r.lb),this.bs.insert(r.rb),this.bs.remove(n),this.inactive.push(r.constraint),e.slack()>=0?this.inactive.push(e):this.bs.merge(e)}}},t.prototype.solve=function(){this.satisfy();for(var t=Number.MAX_VALUE,e=this.bs.cost();Math.abs(t-e)>1e-4;)this.satisfy(),t=e,e=this.bs.cost();return e},t.LAGRANGIAN_TOLERANCE=-1e-4,t.ZERO_UPPERBOUND=-1e-10,t}();t.Solver=s,t.removeOverlapInOneDimension=e}(t.vpsc||(t.vpsc={}))}(r||(r={}));var r,i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};!function(t){!function(t){var e=function(){function t(){this.findIter=function(t){for(var e=this._root,n=this.iterator();null!==e;){var r=this._comparator(t,e.data);if(0===r)return n._cursor=e,n;n._ancestors.push(e),e=e.get_child(r>0)}return null}}return t.prototype.clear=function(){this._root=null,this.size=0},t.prototype.find=function(t){for(var e=this._root;null!==e;){var n=this._comparator(t,e.data);if(0===n)return e.data;e=e.get_child(n>0)}return null},t.prototype.lowerBound=function(t){return this._bound(t,this._comparator)},t.prototype.upperBound=function(t){function e(t,e){return n(e,t)}var n=this._comparator;return this._bound(t,e)},t.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},t.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},t.prototype.iterator=function(){return new n(this)},t.prototype.each=function(t){for(var e,n=this.iterator();null!==(e=n.next());)t(e)},t.prototype.reach=function(t){for(var e,n=this.iterator();null!==(e=n.prev());)t(e)},t.prototype._bound=function(t,e){for(var n=this._root,r=this.iterator();null!==n;){var i=this._comparator(t,n.data);if(0===i)return r._cursor=n,r;r._ancestors.push(n),n=n.get_child(i>0)}for(var o=r._ancestors.length-1;o>=0;--o)if(n=r._ancestors[o],e(t,n.data)>0)return r._cursor=n,r._ancestors.length=o,r;return r._ancestors.length=0,r},t}();t.TreeBase=e;var n=function(){function t(t){this._tree=t,this._ancestors=[],this._cursor=null}return t.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},t.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else if(null===this._cursor.right){var e;do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===e)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},t.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else if(null===this._cursor.left){var e;do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===e)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},t.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},t.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},t}();t.Iterator=n;var r=function(){function t(t){this.data=t,this.left=null,this.right=null,this.red=!0}return t.prototype.get_child=function(t){return t?this.right:this.left},t.prototype.set_child=function(t,e){t?this.right=e:this.left=e},t}(),o=function(t){function e(e){t.call(this),this._root=null,this._comparator=e,this.size=0}return i(e,t),e.prototype.insert=function(t){var n=!1;if(null===this._root)this._root=new r(t),n=!0,this.size++;else{var i=new r(void 0),o=!1,a=!1,s=null,u=i,c=null,l=this._root;for(u.right=this._root;;){if(null===l?(l=new r(t),c.set_child(o,l),n=!0,this.size++):e.is_red(l.left)&&e.is_red(l.right)&&(l.red=!0,l.left.red=!1,l.right.red=!1),e.is_red(l)&&e.is_red(c)){var h=u.right===s;l===c.get_child(a)?u.set_child(h,e.single_rotate(s,!a)):u.set_child(h,e.double_rotate(s,!a))}var f=this._comparator(l.data,t);if(0===f)break;a=o,o=f<0,null!==s&&(u=s),s=c,c=l,l=l.get_child(o)}this._root=i.right}return this._root.red=!1,n},e.prototype.remove=function(t){if(null===this._root)return!1;var n=new r(void 0),i=n;i.right=this._root;for(var o=null,a=null,s=null,u=!0;null!==i.get_child(u);){var c=u;a=o,o=i,i=i.get_child(u);var l=this._comparator(t,i.data);if(u=l>0,0===l&&(s=i),!e.is_red(i)&&!e.is_red(i.get_child(u)))if(e.is_red(i.get_child(!u))){var h=e.single_rotate(i,u);o.set_child(c,h),o=h}else if(!e.is_red(i.get_child(!u))){var f=o.get_child(!c);if(null!==f)if(e.is_red(f.get_child(!c))||e.is_red(f.get_child(c))){var d=a.right===o;e.is_red(f.get_child(c))?a.set_child(d,e.double_rotate(o,c)):e.is_red(f.get_child(!c))&&a.set_child(d,e.single_rotate(o,c));var p=a.get_child(d);p.red=!0,i.red=!0,p.left.red=!1,p.right.red=!1}else o.red=!1,f.red=!0,i.red=!0}}return null!==s&&(s.data=i.data,o.set_child(o.right===i,i.get_child(null===i.left)),this.size--),this._root=n.right,null!==this._root&&(this._root.red=!1),null!==s},e.is_red=function(t){return null!==t&&t.red},e.single_rotate=function(t,e){var n=t.get_child(!e);return t.set_child(!e,n.get_child(e)),n.set_child(e,t),t.red=!0,n.red=!1,n},e.double_rotate=function(t,n){return t.set_child(!n,e.single_rotate(t.get_child(!n),!n)),e.single_rotate(t,n)},e}(e);t.RBTree=o}(t.vpsc||(t.vpsc={}))}(r||(r={}));var r;!function(t){!function(t){function e(t){return t.bounds=void 0!==t.leaves?t.leaves.reduce(function(t,e){return e.bounds.union(t)},v.empty()):v.empty(),void 0!==t.groups&&(t.bounds=t.groups.reduce(function(t,n){return e(n).union(t)},t.bounds)),t.bounds=t.bounds.inflate(t.padding),t.bounds}function n(t,e,n){var r=t.rayIntersection(e.cx(),e.cy())||{x:t.cx(),y:t.cy()},i=e.rayIntersection(t.cx(),t.cy())||{x:e.cx(),y:e.cy()},o=i.x-r.x,a=i.y-r.y,s=Math.sqrt(o*o+a*a),u=s-n;return{sourceIntersection:r,targetIntersection:i,arrowStart:{x:r.x+u*o/s,y:r.y+u*a/s}}}function r(t,e,n){var r=e.rayIntersection(t.x,t.y);r||(r={x:e.cx(),y:e.cy()});var i=r.x-t.x,o=r.y-t.y,a=Math.sqrt(i*i+o*o);return{x:r.x-n*i/a,y:r.y-n*o/a}}function o(t,e){return t.pos>e.pos?1:t.pos<e.pos?-1:t.isOpen?-1:e.isOpen?1:0}function a(){return new t.RBTree(function(t,e){return t.pos-e.pos})}function s(t,e,n,r){void 0===r&&(r=!1);var i=t.padding,o=void 0!==t.groups?t.groups.length:0,a=void 0!==t.leaves?t.leaves.length:0,c=o?t.groups.reduce(function(t,r){return t.concat(s(r,e,n,!0))},[]):[],l=(r?2:0)+a+o,h=new Array(l),f=new Array(l),d=0,p=function(t,e){f[d]=t,h[d++]=e};if(r){var g=t.bounds,v=e.getCentre(g),y=e.getSize(g)/2,m=e.getOpen(g),x=e.getClose(g),b=v-y+i/2,w=v+y-i/2;t.minVar.desiredPosition=b,p(e.makeRect(m,x,b,i),t.minVar),t.maxVar.desiredPosition=w,p(e.makeRect(m,x,w,i),t.maxVar)}a&&t.leaves.forEach(function(t){return p(t.bounds,t.variable)}),o&&t.groups.forEach(function(t){var n=t.bounds;p(e.makeRect(e.getOpen(n),e.getClose(n),e.getCentre(n),e.getSize(n)),t.minVar)});var _=u(f,h,e,n);return o&&(h.forEach(function(t){t.cOut=[],t.cIn=[]}),_.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),t.groups.forEach(function(t){var n=(t.padding-e.getSize(t.bounds))/2;t.minVar.cIn.forEach(function(t){return t.gap+=n}),t.minVar.cOut.forEach(function(e){e.left=t.maxVar,e.gap+=n})})),c.concat(_)}function u(e,n,r,i){var s,u=e.length,c=2*u;console.assert(n.length>=u);var l=new Array(c);for(s=0;s<u;++s){var h=e[s],f=new y(n[s],h,r.getCentre(h));l[s]=new m(!0,f,r.getOpen(h)),l[s+u]=new m(!1,f,r.getClose(h))}l.sort(o);var d=new Array,p=a();for(s=0;s<c;++s){var g=l[s],f=g.v;if(g.isOpen)p.insert(f),r.findNeighbours(f,p);else{p.remove(f);var v=function(e,n){var o=(r.getSize(e.r)+r.getSize(n.r))/2+i;d.push(new t.Constraint(e.v,n.v,o))},x=function(t,e,n){for(var r,i=f[t].iterator();null!==(r=i[t]());)n(r,f),r[e].remove(f)};x("prev","next",function(t,e){return v(t,e)}),x("next","prev",function(t,e){return v(e,t)})}}return console.assert(0===p.size),d}function c(t,e){var n=function(n,r){for(var i,o=e.findIter(t);null!==(i=o[n]());){var a=i.r.overlapX(t.r);if((a<=0||a<=i.r.overlapY(t.r))&&(t[n].insert(i),i[r].insert(t)),a<=0)break}};n("next","prev"),n("prev","next")}function l(t,e){var n=function(n,r){var i=e.findIter(t)[n]();null!==i&&i.r.overlapX(t.r)>0&&(t[n].insert(i),i[r].insert(t))};n("next","prev"),n("prev","next")}function h(t,e){return u(t,e,x,1e-6)}function f(t,e){return u(t,e,b,1e-6)}function d(t){return s(t,x,1e-6)}function p(t){return s(t,b,1e-6)}function g(e){var n=e.map(function(e){return new t.Variable(e.cx())}),r=t.generateXConstraints(e,n),i=new t.Solver(n,r);i.solve(),n.forEach(function(t,n){return e[n].setXCentre(t.position())}),n=e.map(function(e){return new t.Variable(e.cy())}),r=t.generateYConstraints(e,n),i=new t.Solver(n,r),i.solve(),n.forEach(function(t,n){return e[n].setYCentre(t.position())})}t.computeGroupBounds=e;var v=function(){function t(t,e,n,r){this.x=t,this.X=e,this.y=n,this.Y=r}return t.empty=function(){return new t(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},t.prototype.cx=function(){return(this.x+this.X)/2},t.prototype.cy=function(){return(this.y+this.Y)/2},t.prototype.overlapX=function(t){var e=this.cx(),n=t.cx();return e<=n&&t.x<this.X?this.X-t.x:n<=e&&this.x<t.X?t.X-this.x:0},t.prototype.overlapY=function(t){var e=this.cy(),n=t.cy();return e<=n&&t.y<this.Y?this.Y-t.y:n<=e&&this.y<t.Y?t.Y-this.y:0},t.prototype.setXCentre=function(t){var e=t-this.cx();this.x+=e,this.X+=e},t.prototype.setYCentre=function(t){var e=t-this.cy();this.y+=e,this.Y+=e},t.prototype.width=function(){return this.X-this.x},t.prototype.height=function(){return this.Y-this.y},t.prototype.union=function(e){return new t(Math.min(this.x,e.x),Math.max(this.X,e.X),Math.min(this.y,e.y),Math.max(this.Y,e.Y))},t.prototype.lineIntersections=function(e,n,r,i){for(var o=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],a=[],s=0;s<4;++s){var u=t.lineIntersection(e,n,r,i,o[s][0],o[s][1],o[s][2],o[s][3]);null!==u&&a.push({x:u.x,y:u.y})}return a},t.prototype.rayIntersection=function(t,e){var n=this.lineIntersections(this.cx(),this.cy(),t,e);return n.length>0?n[0]:null},t.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y},{x:this.x,y:this.y}]},t.lineIntersection=function(t,e,n,r,i,o,a,s){var u=n-t,c=a-i,l=r-e,h=s-o,f=h*u-c*l;if(0==f)return null;var d=t-i,p=e-o,g=c*p-h*d,v=g/f,y=u*p-l*d,m=y/f;return v>=0&&v<=1&&m>=0&&m<=1?{x:t+v*u,y:e+v*l}:null},t.prototype.inflate=function(e){return new t(this.x-e,this.X+e,this.y-e,this.Y+e)},t}();t.Rectangle=v,t.makeEdgeBetween=n,t.makeEdgeTo=r;var y=function(){function t(t,e,n){this.v=t,this.r=e,this.pos=n,this.prev=a(),this.next=a()}return t}(),m=function(){function t(t,e,n){this.isOpen=t,this.v=e,this.pos=n}return t}(),x={getCentre:function(t){return t.cx()},getOpen:function(t){return t.y},getClose:function(t){return t.Y},getSize:function(t){return t.width()},makeRect:function(t,e,n,r){return new v(n-r/2,n+r/2,t,e)},findNeighbours:c},b={getCentre:function(t){return t.cy()},getOpen:function(t){return t.x},getClose:function(t){return t.X},getSize:function(t){return t.height()},makeRect:function(t,e,n,r){return new v(t,e,n-r/2,n+r/2)},findNeighbours:l};t.generateXConstraints=h,t.generateYConstraints=f,t.generateXGroupConstraints=d,t.generateYGroupConstraints=p,t.removeOverlaps=g;var w=function(t){function e(e,n){t.call(this,0,n),this.index=e}return i(e,t),e}(t.Variable);t.IndexedVariable=w;var _=function(){function n(n,r,i,o,a){var s=this;if(void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=!1),this.nodes=n,this.groups=r,this.rootGroup=i,this.avoidOverlaps=a,this.variables=n.map(function(t,e){return t.variable=new w(e,1)}),o&&this.createConstraints(o),a&&i&&void 0!==i.groups){n.forEach(function(e){if(!e.width||!e.height)return void(e.bounds=new t.Rectangle(e.x,e.x,e.y,e.y));var n=e.width/2,r=e.height/2;e.bounds=new t.Rectangle(e.x-n,e.x+n,e.y-r,e.y+r)}),e(i);var u=n.length;r.forEach(function(t){s.variables[u]=t.minVar=new w(u++,void 0!==t.stiffness?t.stiffness:.01),s.variables[u]=t.maxVar=new w(u++,void 0!==t.stiffness?t.stiffness:.01)})}}return n.prototype.createSeparation=function(e){return new t.Constraint(this.nodes[e.left].variable,this.nodes[e.right].variable,e.gap,void 0!==e.equality&&e.equality)},n.prototype.makeFeasible=function(t){var e=this;if(this.avoidOverlaps){var n="x",r="width";"x"===t.axis&&(n="y",r="height");var i=t.offsets.map(function(t){return e.nodes[t.node]}).sort(function(t,e){return t[n]-e[n]}),o=null;i.forEach(function(t){o&&(t[n]=o[n]+o[r]+1),o=t})}},n.prototype.createAlignment=function(e){var n=this,r=this.nodes[e.offsets[0].node].variable;this.makeFeasible(e);var i="x"===e.axis?this.xConstraints:this.yConstraints;e.offsets.slice(1).forEach(function(e){var o=n.nodes[e.node].variable;i.push(new t.Constraint(r,o,e.offset,!0))})},n.prototype.createConstraints=function(t){var e=this,n=function(t){return void 0===t.type||"separation"===t.type};this.xConstraints=t.filter(function(t){return"x"===t.axis&&n(t)}).map(function(t){return e.createSeparation(t)}),this.yConstraints=t.filter(function(t){return"y"===t.axis&&n(t)}).map(function(t){return e.createSeparation(t)}),t.filter(function(t){return"alignment"===t.type}).forEach(function(t){return e.createAlignment(t)})},n.prototype.setupVariablesAndBounds=function(t,e,n,r){this.nodes.forEach(function(i,o){i.fixed?(i.variable.weight=i.fixedWeight?i.fixedWeight:1e3,n[o]=r(i)):i.variable.weight=1;var a=(i.width||0)/2,s=(i.height||0)/2,u=t[o],c=e[o];i.bounds=new v(u-a,u+a,c-s,c+s)})},n.prototype.xProject=function(t,e,n){(this.rootGroup||this.avoidOverlaps||this.xConstraints)&&this.project(t,e,t,n,function(t){return t.px},this.xConstraints,d,function(t){return t.bounds.setXCentre(n[t.variable.index]=t.variable.position())},function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.x=e-i,t.bounds.X=r+i})},n.prototype.yProject=function(t,e,n){(this.rootGroup||this.yConstraints)&&this.project(t,e,e,n,function(t){return t.py},this.yConstraints,p,function(t){return t.bounds.setYCentre(n[t.variable.index]=t.variable.position())},function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.y=e-i,t.bounds.Y=r+i})},n.prototype.projectFunctions=function(){var t=this;return[function(e,n,r){return t.xProject(e,n,r)},function(e,n,r){return t.yProject(e,n,r)}]},n.prototype.project=function(t,n,r,i,o,a,s,u,c){this.setupVariablesAndBounds(t,n,i,o),this.rootGroup&&this.avoidOverlaps&&(e(this.rootGroup),a=a.concat(s(this.rootGroup))),this.solve(this.variables,a,r,i),this.nodes.forEach(u),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(c),e(this.rootGroup))},n.prototype.solve=function(e,n,r,i){var o=new t.Solver(e,n);o.setStartingPositions(r),o.setDesiredPositions(i),o.solve()},n}();t.Projection=_}(t.vpsc||(t.vpsc={}))}(r||(r={}));var r;!function(t){!function(e){function n(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)}function r(t,e,r){return n(t,e,r)>0}function o(t,e,r){return n(t,e,r)<0}function a(t){var e,r=t.slice(0).sort(function(t,e){return t.x!==e.x?e.x-t.x:e.y-t.y}),i=t.length,o=r[0].x;for(e=1;e<i&&r[e].x===o;++e);var a=e-1,s=[];if(s.push(r[0]),a===i-1)r[a].y!==r[0].y&&s.push(r[a]);else{var u,c=i-1,l=r[i-1].x;for(e=i-2;e>=0&&r[e].x===l;e--);for(u=e+1,e=a;++e<=u;)if(!(n(r[0],r[u],r[e])>=0&&e<u)){for(;s.length>1&&!(n(s[s.length-2],s[s.length-1],r[e])>0);)s.length-=1;0!=e&&s.push(r[e])}c!=u&&s.push(r[c]);var h=s.length;for(e=u;--e>=a;)if(!(n(r[c],r[a],r[e])>=0&&e>a)){for(;s.length>h&&!(n(s[s.length-2],s[s.length-1],r[e])>0);)s.length-=1;0!=e&&s.push(r[e])}}return s}function s(t,e,n){e.slice(0).sort(function(e,n){return Math.atan2(e.y-t.y,e.x-t.x)-Math.atan2(n.y-t.y,n.x-t.x)}).forEach(n)}function u(t,e){return{rtan:c(t,e),ltan:l(t,e)}}function c(t,e){var n,i,a,s,u,c=e.length-1;if(o(t,e[1],e[0])&&!r(t,e[c-1],e[0]))return 0;for(n=0,i=c;;){if(i-n==1)return r(t,e[n],e[i])?n:i;if(a=Math.floor((n+i)/2),(u=o(t,e[a+1],e[a]))&&!r(t,e[a-1],e[a]))return a;s=r(t,e[n+1],e[n]),s?u?i=a:r(t,e[n],e[a])?i=a:n=a:u&&o(t,e[n],e[a])?i=a:n=a}}function l(t,e){var n,i,a,s,u,c=e.length-1;if(r(t,e[c-1],e[0])&&!o(t,e[1],e[0]))return 0;for(n=0,i=c;;){if(i-n==1)return o(t,e[n],e[i])?n:i;if(a=Math.floor((n+i)/2),u=o(t,e[a+1],e[a]),r(t,e[a-1],e[a])&&!u)return a;s=o(t,e[n+1],e[n]),s?u?o(t,e[n],e[a])?i=a:n=a:i=a:u?n=a:r(t,e[n],e[a])?i=a:n=a}}function h(t,e,n,r,i,o){var a,s;a=n(e[0],t),s=r(t[a],e);for(var u=!1;!u;){for(u=!0;;){if(a===t.length-1&&(a=0),i(e[s],t[a],t[a+1]))break;++a}for(;;){if(0===s&&(s=e.length-1),o(t[a],e[s],e[s-1]))break;--s,u=!1}}return{t1:a,t2:s}}function f(t,e){var n=d(e,t);return{t1:n.t2,t2:n.t1}}function d(t,e){return h(t,e,c,l,r,o)}function p(t,e){return h(t,e,l,l,o,o)}function g(t,e){return h(t,e,c,c,r,r)}function v(e,n){for(var r=[],i=1,o=n.length;i<o;++i){var a=t.vpsc.Rectangle.lineIntersection(e.x1,e.y1,e.x2,e.y2,n[i-1].x,n[i-1].y,n[i].x,n[i].y);a&&r.push(a)}return r}function y(t,e){for(var r=t.length-1,i=e.length-1,o=new N,a=0;a<r;++a)for(var s=0;s<i;++s){var u=t[0==a?r-1:a-1],c=t[a],l=t[a+1],h=e[0==s?i-1:s-1],f=e[s],d=e[s+1],p=n(u,c,f),g=n(c,h,f),v=n(c,f,d),y=n(h,f,c),m=n(f,u,c),x=n(f,c,l);p>=0&&g>=0&&v<0&&y>=0&&m>=0&&x<0?o.ll=new k(a,s):p<=0&&g<=0&&v>0&&y<=0&&m<=0&&x>0?o.rr=new k(a,s):p<=0&&g>0&&v<=0&&y>=0&&m<0&&x>=0?o.rl=new k(a,s):p>=0&&g<0&&v>=0&&y<=0&&m>0&&x<=0&&(o.lr=new k(a,s))}return o}function m(t,e){for(var n=1,r=e.length;n<r;++n)if(o(e[n-1],e[n],t))return!1;return!0}function x(t,e){return!t.every(function(t){return!m(t,e)})}function b(t,e){if(x(t,e))return!0;if(x(e,t))return!0;for(var n=1,r=t.length;n<r;++n){var i=t[n],o=t[n-1];if(v(new _(o.x,o.y,i.x,i.y),e).length>0)return!0}return!1}var w=function(){function t(){}return t}();e.Point=w;var _=function(){function t(t,e,n,r){this.x1=t,this.y1=e,this.x2=n,this.y2=r}return t}();e.LineSegment=_;var E=function(t){function e(){t.apply(this,arguments)}return i(e,t),e}(w);e.PolyPoint=E,e.isLeft=n,e.ConvexHull=a,e.clockwiseRadialSweep=s,e.tangent_PolyPolyC=h,e.LRtangent_PolyPolyC=f,e.RLtangent_PolyPolyC=d,e.LLtangent_PolyPolyC=p,e.RRtangent_PolyPolyC=g;var k=function(){function t(t,e){this.t1=t,this.t2=e}return t}();e.BiTangent=k;var N=function(){function t(){}return t}();e.BiTangents=N;var L=function(t){function e(){t.apply(this,arguments)}return i(e,t),e}(w);e.TVGPoint=L;var S=function(){function t(t,e,n,r){this.id=t,this.polyid=e,this.polyvertid=n,this.p=r,r.vv=this}return t}();e.VisibilityVertex=S;var T=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.length=function(){var t=this.source.p.x-this.target.p.x,e=this.source.p.y-this.target.p.y;return Math.sqrt(t*t+e*e)},t}();e.VisibilityEdge=T;var A=function(){function t(t,n){if(this.P=t,this.V=[],this.E=[],n)this.V=n.V.slice(0),this.E=n.E.slice(0);else{for(var r=t.length,i=0;i<r;i++)for(var o=t[i],a=0;a<o.length;++a){var s=o[a],u=new S(this.V.length,i,a,s);this.V.push(u),a>0&&this.E.push(new T(o[a-1].vv,u))}for(var i=0;i<r-1;i++)for(var c=t[i],a=i+1;a<r;a++){var l=t[a],h=e.tangents(c,l);for(var f in h){var d=h[f],p=c[d.t1],g=l[d.t2];this.addEdgeIfVisible(p,g,i,a)}}}}return t.prototype.addEdgeIfVisible=function(t,e,n,r){this.intersectsPolys(new _(t.x,t.y,e.x,e.y),n,r)||this.E.push(new T(t.vv,e.vv))},t.prototype.addPoint=function(t,e){var n=this.P.length;this.V.push(new S(this.V.length,n,0,t));for(var r=0;r<n;++r)if(r!==e){var i=this.P[r],o=u(t,i)
;this.addEdgeIfVisible(t,i[o.ltan],e,r),this.addEdgeIfVisible(t,i[o.rtan],e,r)}return t.vv},t.prototype.intersectsPolys=function(t,e,n){for(var r=0,i=this.P.length;r<i;++r)if(r!=e&&r!=n&&v(t,this.P[r]).length>0)return!0;return!1},t}();e.TangentVisibilityGraph=A,e.tangents=y,e.polysOverlap=b}(t.geom||(t.geom={}))}(r||(r={}));var r;!function(t){var e=function(){function t(){this.locks={}}return t.prototype.add=function(t,e){this.locks[t]=e},t.prototype.clear=function(){this.locks={}},t.prototype.isEmpty=function(){for(var t in this.locks)return!1;return!0},t.prototype.apply=function(t){for(var e in this.locks)t(e,this.locks[e])},t}();t.Locks=e;var n=function(){function t(t,n,i){void 0===i&&(i=null),this.D=n,this.G=i,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new r,this.project=null,this.x=t,this.k=t.length;var o=this.n=t[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new e,this.minD=Number.MAX_VALUE;for(var a,s=o;s--;)for(a=o;--a>s;){var u=n[s][a];u>0&&u<this.minD&&(this.minD=u)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),s=this.k;s--;){for(this.g[s]=new Array(o),this.H[s]=new Array(o),a=o;a--;)this.H[s][a]=new Array(o);this.Hd[s]=new Array(o),this.a[s]=new Array(o),this.b[s]=new Array(o),this.c[s]=new Array(o),this.d[s]=new Array(o),this.e[s]=new Array(o),this.ia[s]=new Array(o),this.ib[s]=new Array(o),this.xtmp[s]=new Array(o)}}return t.createSquareMatrix=function(t,e){for(var n=new Array(t),r=0;r<t;++r){n[r]=new Array(t);for(var i=0;i<t;++i)n[r][i]=e(r,i)}return n},t.prototype.offsetDir=function(){for(var t=this,e=new Array(this.k),n=0,r=0;r<this.k;++r){var i=e[r]=this.random.getNextBetween(.01,1)-.5;n+=i*i}return n=Math.sqrt(n),e.map(function(e){return e*=t.minD/n})},t.prototype.computeDerivatives=function(t){var e=this,n=this.n;if(!(n<1)){for(var r,i=new Array(this.k),o=new Array(this.k),a=new Array(this.k),s=0,u=0;u<n;++u){for(r=0;r<this.k;++r)a[r]=this.g[r][u]=0;for(var c=0;c<n;++c)if(u!==c){for(var l=n;l--;){var h=0;for(r=0;r<this.k;++r){var f=i[r]=t[r][u]-t[r][c];h+=o[r]=f*f}if(h>1e-9)break;var d=this.offsetDir();for(r=0;r<this.k;++r)t[r][c]+=d[r]}var p=Math.sqrt(h),g=this.D[u][c],v=null!=this.G?this.G[u][c]:1;if(v>1&&p>g||!isFinite(g))for(r=0;r<this.k;++r)this.H[r][u][c]=0;else{v>1&&(v=1);var y=g*g,m=2*v*(p-g)/(y*p),x=p*p*p,b=2*-v/(y*x);for(isFinite(m)||console.log(m),r=0;r<this.k;++r)this.g[r][u]+=i[r]*m,a[r]-=this.H[r][u][c]=b*(x+g*(o[r]-h)+p*h)}}for(r=0;r<this.k;++r)s=Math.max(s,this.H[r][u][u]=a[r])}for(var w=this.snapGridSize/2,_=this.snapGridSize,E=this.snapStrength,k=E/(w*w),N=this.numGridSnapNodes,u=0;u<N;++u)for(r=0;r<this.k;++r){var L=this.x[r][u],S=L/_,T=S%1,A=S-T,D=Math.abs(T),f=D<=.5?L-A*_:L>0?L-(A+1)*_:L-(A-1)*_;-w<f&&f<=w&&(this.scaleSnapByMaxH?(this.g[r][u]+=s*k*f,this.H[r][u][u]+=s*k):(this.g[r][u]+=k*f,this.H[r][u][u]+=k))}this.locks.isEmpty()||this.locks.apply(function(n,i){for(r=0;r<e.k;++r)e.H[r][n][n]+=s,e.g[r][n]-=s*(i[r]-t[r][n])})}},t.dotProd=function(t,e){for(var n=0,r=t.length;r--;)n+=t[r]*e[r];return n},t.rightMultiply=function(e,n,r){for(var i=e.length;i--;)r[i]=t.dotProd(e[i],n)},t.prototype.computeStepSize=function(e){for(var n=0,r=0,i=0;i<this.k;++i)n+=t.dotProd(this.g[i],e[i]),t.rightMultiply(this.H[i],e[i],this.Hd[i]),r+=t.dotProd(e[i],this.Hd[i]);return 0!==r&&isFinite(r)?1*n/r:0},t.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var t=this.computeStepSize(this.g),e=0;e<this.k;++e)this.takeDescentStep(this.x[e],this.g[e],t);return this.computeStress()},t.copy=function(t,e){for(var n=t.length,r=e[0].length,i=0;i<n;++i)for(var o=0;o<r;++o)e[i][o]=t[i][o]},t.prototype.stepAndProject=function(e,n,r,i){t.copy(e,n),this.takeDescentStep(n[0],r[0],i),this.project&&this.project[0](e[0],e[1],n[0]),this.takeDescentStep(n[1],r[1],i),this.project&&this.project[1](n[0],e[1],n[1]);for(var o=2;o<this.k;o++)this.takeDescentStep(n[o],r[o],i)},t.mApply=function(t,e,n){for(var r=t;r-- >0;)for(var i=e;i-- >0;)n(r,i)},t.prototype.matrixApply=function(e){t.mApply(this.k,this.n,e)},t.prototype.computeNextPosition=function(t,e){var n=this;this.computeDerivatives(t);var r=this.computeStepSize(this.g);if(this.stepAndProject(t,e,this.g,r),this.project){this.matrixApply(function(r,i){return n.e[r][i]=t[r][i]-e[r][i]});var i=this.computeStepSize(this.e);i=Math.max(.2,Math.min(i,1)),this.stepAndProject(t,e,this.e,i)}},t.prototype.run=function(t){for(var e=Number.MAX_VALUE,n=!1;!n&&t-- >0;){var r=this.rungeKutta();n=Math.abs(e/r-1)<this.threshold,e=r}return e},t.prototype.rungeKutta=function(){var e=this;this.computeNextPosition(this.x,this.a),t.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),t.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var n=0;return this.matrixApply(function(t,r){var i=(e.a[t][r]+2*e.b[t][r]+2*e.c[t][r]+e.d[t][r])/6,o=e.x[t][r]-i;n+=o*o,e.x[t][r]=i}),n},t.mid=function(e,n,r){t.mApply(e.length,e[0].length,function(t,i){return r[t][i]=e[t][i]+(n[t][i]-e[t][i])/2})},t.prototype.takeDescentStep=function(t,e,n){for(var r=0;r<this.n;++r)t[r]=t[r]-n*e[r]},t.prototype.computeStress=function(){for(var t=0,e=0,n=this.n-1;e<n;++e)for(var r=e+1,i=this.n;r<i;++r){for(var o=0,a=0;a<this.k;++a){var s=this.x[a][e]-this.x[a][r];o+=s*s}o=Math.sqrt(o);var u=this.D[e][r];if(isFinite(u)){var c=u-o,l=u*u;t+=c*c/l}}return t},t.zeroDistance=1e-10,t}();t.Descent=n;var r=function(){function t(t){void 0===t&&(t=1),this.seed=t,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return t.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},t.prototype.getNextBetween=function(t,e){return t+this.getNext()*(e-t)},t}();t.PseudoRandom=r}(r||(r={}));var r;!function(t){!function(t){function e(t,n,r){t.forAll(function(t){if(t.isLeaf())n.leaves||(n.leaves=[]),n.leaves.push(t.id);else{var i=n;if(t.gid=r.length,!t.isIsland()||t.isPredefined()){if(i={id:t.gid},t.isPredefined())for(var o in t.definition)i[o]=t.definition[o];n.groups||(n.groups=[]),n.groups.push(t.gid),r.push(i)}e(t.children,i,r)}})}function n(t,e){var n={};for(var r in t)r in e&&(n[r]=t[r]);return n}function r(e,n,r,i){for(var o=e.length,a=new t.Configuration(o,n,r,i);a.greedyMerge(););var s=[],u=a.getGroupHierarchy(s);return s.forEach(function(t){var n=function(n){var r=t[n];"number"==typeof r&&(t[n]=e[r])};n("source"),n("target")}),{groups:u,powerEdges:s}}var i=function(){function t(t,e,n){this.source=t,this.target=e,this.type=n}return t}();t.PowerEdge=i;var o=function(){function t(t,e,n,r){var i=this;if(this.linkAccessor=n,this.modules=new Array(t),this.roots=[],r)this.initModulesFromGroup(r);else{this.roots.push(new s);for(var o=0;o<t;++o)this.roots[0].add(this.modules[o]=new a(o))}this.R=e.length,e.forEach(function(t){var e=i.modules[n.getSourceIndex(t)],r=i.modules[n.getTargetIndex(t)],o=n.getType(t);e.outgoing.add(o,r),r.incoming.add(o,e)})}return t.prototype.initModulesFromGroup=function(t){var e=new s;this.roots.push(e);for(var n=0;n<t.leaves.length;++n){var r=t.leaves[n],i=new a(r.id);this.modules[r.id]=i,e.add(i)}if(t.groups)for(var o=0;o<t.groups.length;++o){var c=t.groups[o],l={};for(var h in c)"leaves"!==h&&"groups"!==h&&c.hasOwnProperty(h)&&(l[h]=c[h]);e.add(new a(-1-o,new u,new u,this.initModulesFromGroup(c),l))}return e},t.prototype.merge=function(t,e,n){void 0===n&&(n=0);var r=t.incoming.intersection(e.incoming),i=t.outgoing.intersection(e.outgoing),o=new s;o.add(t),o.add(e);var u=new a(this.modules.length,i,r,o);this.modules.push(u);var c=function(n,r,i){n.forAll(function(n,o){n.forAll(function(n){var a=n[r];a.add(o,u),a.remove(o,t),a.remove(o,e),t[i].remove(o,n),e[i].remove(o,n)})})};return c(i,"incoming","outgoing"),c(r,"outgoing","incoming"),this.R-=r.count()+i.count(),this.roots[n].remove(t),this.roots[n].remove(e),this.roots[n].add(u),u},t.prototype.rootMerges=function(t){void 0===t&&(t=0);for(var e=this.roots[t].modules(),n=e.length,r=new Array(n*(n-1)),i=0,o=0,a=n-1;o<a;++o)for(var s=o+1;s<n;++s){var u=e[o],c=e[s];r[i]={id:i,nEdges:this.nEdges(u,c),a:u,b:c},i++}return r},t.prototype.greedyMerge=function(){for(var t=0;t<this.roots.length;++t)if(!(this.roots[t].modules().length<2)){var e=this.rootMerges(t).sort(function(t,e){return t.nEdges==e.nEdges?t.id-e.id:t.nEdges-e.nEdges}),n=e[0];if(!(n.nEdges>=this.R))return this.merge(n.a,n.b,t),!0}},t.prototype.nEdges=function(t,e){var n=t.incoming.intersection(e.incoming),r=t.outgoing.intersection(e.outgoing);return this.R-n.count()-r.count()},t.prototype.getGroupHierarchy=function(t){var n=this,r=[],o={};return e(this.roots[0],o,r),this.allEdges().forEach(function(e){var o=n.modules[e.source],a=n.modules[e.target];t.push(new i(void 0===o.gid?e.source:r[o.gid],void 0===a.gid?e.target:r[a.gid],e.type))}),r},t.prototype.allEdges=function(){var e=[];return t.getEdges(this.roots[0],e),e},t.getEdges=function(e,n){e.forAll(function(e){e.getEdges(n),t.getEdges(e.children,n)})},t}();t.Configuration=o;var a=function(){function t(t,e,n,r,i){void 0===e&&(e=new u),void 0===n&&(n=new u),void 0===r&&(r=new s),this.id=t,this.outgoing=e,this.incoming=n,this.children=r,this.definition=i}return t.prototype.getEdges=function(t){var e=this;this.outgoing.forAll(function(n,r){n.forAll(function(n){t.push(new i(e.id,n.id,r))})})},t.prototype.isLeaf=function(){return 0===this.children.count()},t.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},t.prototype.isPredefined=function(){return void 0!==this.definition},t}();t.Module=a;var s=function(){function t(){this.table={}}return t.prototype.count=function(){return Object.keys(this.table).length},t.prototype.intersection=function(e){var r=new t;return r.table=n(this.table,e.table),r},t.prototype.intersectionCount=function(t){return this.intersection(t).count()},t.prototype.contains=function(t){return t in this.table},t.prototype.add=function(t){this.table[t.id]=t},t.prototype.remove=function(t){delete this.table[t.id]},t.prototype.forAll=function(t){for(var e in this.table)t(this.table[e])},t.prototype.modules=function(){var t=[];return this.forAll(function(e){e.isPredefined()||t.push(e)}),t},t}();t.ModuleSet=s;var u=function(){function t(){this.sets={},this.n=0}return t.prototype.count=function(){return this.n},t.prototype.contains=function(t){var e=!1;return this.forAllModules(function(n){e||n.id!=t||(e=!0)}),e},t.prototype.add=function(t,e){(t in this.sets?this.sets[t]:this.sets[t]=new s).add(e),++this.n},t.prototype.remove=function(t,e){var n=this.sets[t];n.remove(e),0===n.count()&&delete this.sets[t],--this.n},t.prototype.forAll=function(t){for(var e in this.sets)t(this.sets[e],e)},t.prototype.forAllModules=function(t){this.forAll(function(e,n){return e.forAll(t)})},t.prototype.intersection=function(e){var n=new t;return this.forAll(function(t,r){if(r in e.sets){var i=t.intersection(e.sets[r]),o=i.count();o>0&&(n.sets[r]=i,n.n+=o)}}),n},t}();t.LinkSets=u,t.getGroups=r}(t.powergraph||(t.powergraph={}))}(r||(r={}));var r;!function(t){function e(t,e){var n={};for(var r in t)n[r]={};for(var r in e)n[r]={};return Object.keys(n).length}function n(t,e){var n=0;for(var r in t)void 0!==e[r]&&++n;return n}function r(t,e){var n={},r=function(t,e){void 0===n[t]&&(n[t]={}),n[t][e]={}};return t.forEach(function(t){var n=e.getSourceIndex(t),i=e.getTargetIndex(t);r(n,i),r(i,n)}),n}function i(t,e,n,i){var o=r(t,i);t.forEach(function(t){var r=o[i.getSourceIndex(t)],a=o[i.getTargetIndex(t)];i.setLength(t,1+e*n(r,a))})}function o(t,r,o){void 0===o&&(o=1),i(t,o,function(t,r){return Math.sqrt(e(t,r)-n(t,r))},r)}function a(t,r,o){void 0===o&&(o=1),i(t,o,function(t,r){return Math.min(Object.keys(t).length,Object.keys(r).length)<1.1?0:n(t,r)/e(t,r)},r)}function s(t,e,n,r){var i=u(t,e,r),o={};i.forEach(function(t,e){return t.forEach(function(t){return o[t]=e})});var a=[];return e.forEach(function(t){var e=r.getSourceIndex(t),i=r.getTargetIndex(t);o[e]!==o[i]&&a.push({axis:n,left:e,right:i,gap:r.getMinSeparation(t)})}),a}function u(t,e,n){function r(t){t.index=t.lowlink=o++,a.push(t),t.onStack=!0;for(var e=0,n=t.out;e<n.length;e++){var i=n[e];void 0===i.index?(r(i),t.lowlink=Math.min(t.lowlink,i.lowlink)):i.onStack&&(t.lowlink=Math.min(t.lowlink,i.index))}if(t.lowlink===t.index){for(var u=[];a.length&&(i=a.pop(),i.onStack=!1,u.push(i),i!==t););s.push(u.map(function(t){return t.id}))}}for(var i=[],o=0,a=[],s=[],u=0;u<t;u++)i.push({id:u,out:[]});for(var c=0;c<e.length;c++){var l=e[c],h=i[n.getSourceIndex(l)],f=i[n.getTargetIndex(l)];h.out.push(f)}for(var d=0;d<i.length;d++){var p=i[d];void 0===p.index&&r(p)}return s}t.symmetricDiffLinkLengths=o,t.jaccardLinkLengths=a,t.generateDirectedEdgeConstraints=s,t.stronglyConnectedComponents=u}(r||(r={}));var r,o=function(){function t(t){this.elem=t,this.subheaps=[]}return t.prototype.toString=function(t){for(var e="",n=!1,r=0;r<this.subheaps.length;++r){var i=this.subheaps[r];i.elem?(n&&(e+=","),e+=i.toString(t),n=!0):n=!1}return""!==e&&(e="("+e+")"),(this.elem?t(this.elem):"")+e},t.prototype.forEach=function(t){this.empty()||(t(this.elem,this),this.subheaps.forEach(function(e){return e.forEach(t)}))},t.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(t,e){return t+e.count()},0)},t.prototype.min=function(){return this.elem},t.prototype.empty=function(){return null==this.elem},t.prototype.contains=function(t){if(this===t)return!0;for(var e=0;e<this.subheaps.length;e++)if(this.subheaps[e].contains(t))return!0;return!1},t.prototype.isHeap=function(t){var e=this;return this.subheaps.every(function(n){return t(e.elem,n.elem)&&n.isHeap(t)})},t.prototype.insert=function(e,n){return this.merge(new t(e),n)},t.prototype.merge=function(t,e){return this.empty()?t:t.empty()?this:e(this.elem,t.elem)?(this.subheaps.push(t),this):(t.subheaps.push(this),t)},t.prototype.removeMin=function(t){return this.empty()?null:this.mergePairs(t)},t.prototype.mergePairs=function(e){if(0==this.subheaps.length)return new t(null);if(1==this.subheaps.length)return this.subheaps[0];var n=this.subheaps.pop().merge(this.subheaps.pop(),e),r=this.mergePairs(e);return n.merge(r,e)},t.prototype.decreaseKey=function(e,n,r,i){var o=e.removeMin(i);e.elem=o.elem,e.subheaps=o.subheaps,null!==r&&null!==o.elem&&r(e.elem,e);var a=new t(n);return null!==r&&r(n,a),this.merge(a,i)},t}(),a=function(){function t(t){this.lessThan=t}return t.prototype.top=function(){return this.empty()?null:this.root.elem},t.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var n,r,i=0;r=t[i];++i)n=new o(r),this.root=this.empty()?n:this.root.merge(n,this.lessThan);return n},t.prototype.empty=function(){return!this.root||!this.root.elem},t.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},t.prototype.forEach=function(t){this.root.forEach(t)},t.prototype.pop=function(){if(this.empty())return null;var t=this.root.min();return this.root=this.root.removeMin(this.lessThan),t},t.prototype.reduceKey=function(t,e,n){void 0===n&&(n=null),this.root=this.root.decreaseKey(t,e,n,this.lessThan)},t.prototype.toString=function(t){return this.root.toString(t)},t.prototype.count=function(){return this.root.count()},t}();!function(t){!function(t){var e=function(){function t(t,e){this.id=t,this.distance=e}return t}(),n=function(){function t(t){this.id=t,this.neighbours=[]}return t}(),r=function(){function t(t,e,n){this.node=t,this.prev=e,this.d=n}return t}(),i=function(){function t(t,r,i,o,a){this.n=t,this.es=r,this.neighbours=new Array(this.n);for(var s=this.n;s--;)this.neighbours[s]=new n(s);for(s=this.es.length;s--;){var u=this.es[s],c=i(u),l=o(u),h=a(u);this.neighbours[c].neighbours.push(new e(l,h)),this.neighbours[l].neighbours.push(new e(c,h))}}return t.prototype.DistanceMatrix=function(){for(var t=new Array(this.n),e=0;e<this.n;++e)t[e]=this.dijkstraNeighbours(e);return t},t.prototype.DistancesFromNode=function(t){return this.dijkstraNeighbours(t)},t.prototype.PathFromNodeToNode=function(t,e){return this.dijkstraNeighbours(t,e)},t.prototype.PathFromNodeToNodeWithPrevCost=function(t,e,n){var i=new a(function(t,e){return t.d<=e.d}),o=this.neighbours[t],s=new r(o,null,0),u={};for(i.push(s);!i.empty()&&(s=i.pop(),o=s.node,o.id!==e);)for(var c=o.neighbours.length;c--;){var l=o.neighbours[c],h=this.neighbours[l.id];if(!s.prev||h.id!==s.prev.node.id){var f=h.id+","+o.id;if(!(f in u&&u[f]<=s.d)){var d=s.prev?n(s.prev.node.id,o.id,h.id):0,p=s.d+l.distance+d;u[f]=p,i.push(new r(h,s,p))}}}for(var g=[];s.prev;)s=s.prev,g.push(s.node.id);return g},t.prototype.dijkstraNeighbours=function(t,e){void 0===e&&(e=-1);for(var n=new a(function(t,e){return t.d<=e.d}),r=this.neighbours.length,i=new Array(r);r--;){var o=this.neighbours[r];o.d=r===t?0:Number.POSITIVE_INFINITY,o.q=n.push(o)}for(;!n.empty();){var s=n.pop();if(i[s.id]=s.d,s.id===e){for(var u=[],c=s;void 0!==c.prev;)u.push(c.prev.id),c=c.prev;return u}for(r=s.neighbours.length;r--;){var l=s.neighbours[r],c=this.neighbours[l.id],h=s.d+l.distance;s.d!==Number.MAX_VALUE&&c.d>h&&(c.d=h,c.prev=s,n.reduceKey(c.q,c,function(t,e){return t.q=e}))}}return i},t}();t.Calculator=i}(t.shortestpaths||(t.shortestpaths={}))}(r||(r={}));var r;!function(t){function e(t){return void 0!==t.leaves||void 0!==t.groups}!function(t){t[t.start=0]="start",t[t.tick=1]="tick",t[t.end=2]="end"}(t.EventType||(t.EventType={}));var n=t.EventType,r=function(){function r(){var t=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:r.getSourceIndex,getTargetIndex:r.getTargetIndex,setLength:r.setLinkLength,getType:function(e){return"function"==typeof t._linkType?t._linkType(e):0}}}return r.prototype.on=function(t,e){return this.event||(this.event={}),"string"==typeof t?this.event[n[t]]=e:this.event[t]=e,this},r.prototype.trigger=function(t){this.event&&void 0!==this.event[t.type]&&this.event[t.type](t)},r.prototype.kick=function(){for(;!this.tick(););},r.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:n.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var t,e,r=this._nodes.length;this._links.length;for(this._descent.locks.clear(),e=0;e<r;++e)if(t=this._nodes[e],t.fixed){void 0!==t.px&&void 0!==t.py||(t.px=t.x,t.py=t.y);var i=[t.px,t.py];this._descent.locks.add(e,i)}var o=this._descent.rungeKutta();return 0===o?this._alpha=0:void 0!==this._lastStress&&(this._alpha=o),this._lastStress=o,this.updateNodePositions(),this.trigger({type:n.tick,alpha:this._alpha,stress:this._lastStress}),!1},r.prototype.updateNodePositions=function(){for(var t,e=this._descent.x[0],n=this._descent.x[1],r=this._nodes.length;r--;)t=this._nodes[r],t.x=e[r],t.y=n[r]},r.prototype.nodes=function(t){if(!t){if(0===this._nodes.length&&this._links.length>0){var e=0;this._links.forEach(function(t){e=Math.max(e,t.source,t.target)}),this._nodes=new Array(++e);for(var n=0;n<e;++n)this._nodes[n]={}}return this._nodes}return this._nodes=t,this},r.prototype.groups=function(t){var e=this;return t?(this._groups=t,this._rootGroup={},this._groups.forEach(function(t){void 0===t.padding&&(t.padding=1),void 0!==t.leaves&&t.leaves.forEach(function(n,r){"number"==typeof n&&((t.leaves[r]=e._nodes[n]).parent=t)}),void 0!==t.groups&&t.groups.forEach(function(n,r){"number"==typeof n&&((t.groups[r]=e._groups[n]).parent=t)})}),this._rootGroup.leaves=this._nodes.filter(function(t){return void 0===t.parent}),this._rootGroup.groups=this._groups.filter(function(t){return void 0===t.parent}),this):this._groups},r.prototype.powerGraphGroups=function(e){var n=t.powergraph.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(n.groups),e(n),this},r.prototype.avoidOverlaps=function(t){return arguments.length?(this._avoidOverlaps=t,this):this._avoidOverlaps},r.prototype.handleDisconnected=function(t){return arguments.length?(this._handleDisconnected=t,this):this._handleDisconnected},r.prototype.flowLayout=function(t,e){return arguments.length||(t="y"),this._directedLinkConstraints={axis:t,getMinSeparation:"number"==typeof e?function(){return e}:e},this},r.prototype.links=function(t){return arguments.length?(this._links=t,this):this._links},r.prototype.constraints=function(t){return arguments.length?(this._constraints=t,this):this._constraints},r.prototype.distanceMatrix=function(t){return arguments.length?(this._distanceMatrix=t,this):this._distanceMatrix},r.prototype.size=function(t){return t?(this._canvasSize=t,this):this._canvasSize},r.prototype.defaultNodeSize=function(t){return t?(this._defaultNodeSize=t,this):this._defaultNodeSize},r.prototype.groupCompactness=function(t){return t?(this._groupCompactness=t,this):this._groupCompactness},r.prototype.linkDistance=function(t){return t?(this._linkDistance="function"==typeof t?t:+t,this._linkLengthCalculator=null,this):this._linkDistance},r.prototype.linkType=function(t){return this._linkType=t,this},r.prototype.convergenceThreshold=function(t){return t?(this._threshold="function"==typeof t?t:+t,this):this._threshold},r.prototype.alpha=function(t){return arguments.length?(t=+t,this._alpha?this._alpha=t>0?t:0:t>0&&(this._running||(this._running=!0,this.trigger({type:n.start,alpha:this._alpha=t}),this.kick())),this):this._alpha},r.prototype.getLinkLength=function(t){return"function"==typeof this._linkDistance?+this._linkDistance(t):this._linkDistance},r.setLinkLength=function(t,e){t.length=e},r.prototype.getLinkType=function(t){return"function"==typeof this._linkType?this._linkType(t):0},r.prototype.symmetricDiffLinkLengths=function(e,n){var r=this;return void 0===n&&(n=1),this.linkDistance(function(t){return e*t.length}),this._linkLengthCalculator=function(){return t.symmetricDiffLinkLengths(r._links,r.linkAccessor,n)},this},r.prototype.jaccardLinkLengths=function(e,n){var r=this;return void 0===n&&(n=1),this.linkDistance(function(t){return e*t.length}),this._linkLengthCalculator=function(){return t.jaccardLinkLengths(r._links,r.linkAccessor,n)},this},r.prototype.start=function(e,n,i,o,a){var s=this;void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=!0);var u,c=this.nodes().length,l=c+2*this._groups.length,h=(this._links.length,this._canvasSize[0]),f=this._canvasSize[1],d=new Array(l),p=new Array(l),g=null,v=this._avoidOverlaps;this._nodes.forEach(function(t,e){t.index=e,void 0===t.x&&(t.x=h/2,t.y=f/2),d[e]=t.x,p[e]=t.y}),this._linkLengthCalculator&&this._linkLengthCalculator();var y;this._distanceMatrix?y=this._distanceMatrix:(y=new t.shortestpaths.Calculator(l,this._links,r.getSourceIndex,r.getTargetIndex,function(t){return s.getLinkLength(t)}).DistanceMatrix(),g=t.Descent.createSquareMatrix(l,function(){return 2}),this._links.forEach(function(t){"number"==typeof t.source&&(t.source=s._nodes[t.source]),"number"==typeof t.target&&(t.target=s._nodes[t.target])}),this._links.forEach(function(t){var e=r.getSourceIndex(t),n=r.getTargetIndex(t);g[e][n]=g[n][e]=t.weight||1}));var m=t.Descent.createSquareMatrix(l,function(t,e){return y[t][e]});if(this._rootGroup&&void 0!==this._rootGroup.groups){var u=c,x=function(t,e,n,r){g[t][e]=g[e][t]=n,m[t][e]=m[e][t]=r};this._groups.forEach(function(t){x(u,u+1,s._groupCompactness,.1),d[u]=0,p[u++]=0,d[u]=0,p[u++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var b=this._constraints||[];this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,b=b.concat(t.generateDirectedEdgeConstraints(c,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new t.Descent([d,p],m),this._descent.locks.clear();for(var u=0;u<c;++u){var w=this._nodes[u];if(w.fixed){w.px=w.x,w.py=w.y;var _=[w.x,w.y];this._descent.locks.add(u,_)}}if(this._descent.threshold=this._threshold,this.initialLayout(e,d,p),b.length>0&&(this._descent.project=new t.vpsc.Projection(this._nodes,this._groups,this._rootGroup,b).projectFunctions()),this._descent.run(n),this.separateOverlappingComponents(h,f),this.avoidOverlaps(v),v&&(this._nodes.forEach(function(t,e){t.x=d[e],t.y=p[e]}),this._descent.project=new t.vpsc.Projection(this._nodes,this._groups,this._rootGroup,b,!0).projectFunctions(),this._nodes.forEach(function(t,e){d[e]=t.x,p[e]=t.y})),this._descent.G=g,this._descent.run(i),o){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=c,this._descent.scaleSnapByMaxH=c!=l;var E=t.Descent.createSquareMatrix(l,function(t,e){return t>=c||e>=c?g[t][e]:0});this._descent.G=E,this._descent.run(o)}return this.updateNodePositions(),this.separateOverlappingComponents(h,f),a?this.resume():this},r.prototype.initialLayout=function(e,n,r){if(this._groups.length>0&&e>0){var i=this._nodes.length,o=this._links.map(function(t){return{source:t.source.index,target:t.target.index}}),a=this._nodes.map(function(t){return{index:t.index}});this._groups.forEach(function(t,e){a.push({index:t.index=i+e})}),this._groups.forEach(function(t,e){void 0!==t.leaves&&t.leaves.forEach(function(e){return o.push({source:t.index,target:e.index})}),void 0!==t.groups&&t.groups.forEach(function(e){return o.push({source:t.index,target:e.index})})}),(new t.Layout).size(this.size()).nodes(a).links(o).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(e,0,0,0,!1),this._nodes.forEach(function(t){n[t.index]=a[t.index].x,r[t.index]=a[t.index].y})}else this._descent.run(e)},r.prototype.separateOverlappingComponents=function(e,n){var r=this;if(!this._distanceMatrix&&this._handleDisconnected){var i=this._descent.x[0],o=this._descent.x[1];this._nodes.forEach(function(t,e){t.x=i[e],t.y=o[e]});var a=t.separateGraphs(this._nodes,this._links);t.applyPacking(a,e,n,this._defaultNodeSize),this._nodes.forEach(function(t,e){r._descent.x[0][e]=t.x,r._descent.x[1][e]=t.y,t.bounds&&(t.bounds.setXCentre(t.x),t.bounds.setYCentre(t.y))})}},r.prototype.resume=function(){return this.alpha(.1)},r.prototype.stop=function(){return this.alpha(0)},r.prototype.prepareEdgeRouting=function(e){void 0===e&&(e=0),this._visibilityGraph=new t.geom.TangentVisibilityGraph(this._nodes.map(function(t){return t.bounds.inflate(-e).vertices()}))},r.prototype.routeEdge=function(e,n){var r=[],i=new t.geom.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),o={x:e.source.x,y:e.source.y},a={x:e.target.x,y:e.target.y},s=i.addPoint(o,e.source.index),u=i.addPoint(a,e.target.index);i.addEdgeIfVisible(o,a,e.source.index,e.target.index),void 0!==n&&n(i);var c=function(t){return t.source.id},l=function(t){return t.target.id},h=function(t){return t.length()},f=new t.shortestpaths.Calculator(i.V.length,i.E,c,l,h),d=f.PathFromNodeToNode(s.id,u.id);if(1===d.length||d.length===i.V.length){var p=t.vpsc.makeEdgeBetween(e.source.innerBounds,e.target.innerBounds,5);r=[p.sourceIntersection,p.arrowStart]}else{for(var g=d.length-2,v=i.V[d[g]].p,y=i.V[d[0]].p,r=[e.source.innerBounds.rayIntersection(v.x,v.y)],m=g;m>=0;--m)r.push(i.V[d[m]].p);r.push(t.vpsc.makeEdgeTo(y,e.target.innerBounds,5))}return r},r.getSourceIndex=function(t){return"number"==typeof t.source?t.source:t.source.index},r.getTargetIndex=function(t){return"number"==typeof t.target?t.target:t.target.index},r.linkId=function(t){return r.getSourceIndex(t)+"-"+r.getTargetIndex(t)},r.dragStart=function(t){e(t)?r.storeOffset(t,r.dragOrigin(t)):(r.stopNode(t),t.fixed|=2)},r.stopNode=function(t){t.px=t.x,t.py=t.y},r.storeOffset=function(t,e){void 0!==t.leaves&&t.leaves.forEach(function(t){t.fixed|=2,r.stopNode(t),t._dragGroupOffsetX=t.x-e.x,t._dragGroupOffsetY=t.y-e.y}),void 0!==t.groups&&t.groups.forEach(function(t){return r.storeOffset(t,e)})},r.dragOrigin=function(t){return e(t)?{x:t.bounds.cx(),y:t.bounds.cy()}:t},r.drag=function(t,n){e(t)?(void 0!==t.leaves&&t.leaves.forEach(function(e){t.bounds.setXCentre(n.x),t.bounds.setYCentre(n.y),e.px=e._dragGroupOffsetX+n.x,e.py=e._dragGroupOffsetY+n.y}),void 0!==t.groups&&t.groups.forEach(function(t){return r.drag(t,n)})):(t.px=n.x,t.py=n.y)},r.dragEnd=function(t){e(t)?(void 0!==t.leaves&&t.leaves.forEach(function(t){r.dragEnd(t),delete t._dragGroupOffsetX,delete t._dragGroupOffsetY}),void 0!==t.groups&&t.groups.forEach(r.dragEnd)):t.fixed&=-7},r.mouseOver=function(t){t.fixed|=4,t.px=t.x,t.py=t.y},r.mouseOut=function(t){t.fixed&=-5},r}();t.Layout=r}(r||(r={}));var r;!function(t){function e(t){return new n(t)}var n=function(e){function n(n){e.call(this);var r=n;r.trigger&&(this.trigger=r.trigger),r.kick&&(this.kick=r.kick),r.drag&&(this.drag=r.drag),r.on&&(this.on=r.on),this.dragstart=this.dragStart=t.Layout.dragStart,this.dragend=this.dragEnd=t.Layout.dragEnd}return i(n,e),n.prototype.trigger=function(t){},n.prototype.kick=function(){},n.prototype.drag=function(){},n.prototype.on=function(t,e){return this},n}(t.Layout);t.LayoutAdaptor=n,t.adaptor=e}(r||(r={}));var r;!function(t){function e(t,e,r,i){return t.cola.start(0,0,0,10,!1),n(t.cola.nodes(),t.cola.groups(),r,i).routeEdges(t.powerGraph.powerEdges,e,function(t){return t.source.routerNode.id},function(t){return t.target.routerNode.id})}function n(e,n,r,i){e.forEach(function(t){t.routerNode={name:t.name,bounds:t.bounds.inflate(-r)}}),n.forEach(function(t){t.routerNode={bounds:t.bounds.inflate(-i),children:(void 0!==t.groups?t.groups.map(function(t){return e.length+t.id}):[]).concat(void 0!==t.leaves?t.leaves.map(function(t){return t.index}):[])}});var o=e.concat(n).map(function(t,e){return t.routerNode.id=e,t.routerNode});return new t.GridRouter(o,{getChildren:function(t){return t.children},getBounds:function(t){return t.bounds}},r-i)}function r(e,n,r,i,o){var a;e.nodes.forEach(function(t,e){return t.index=e}),(new t.Layout).avoidOverlaps(!1).nodes(e.nodes).links(e.links).powerGraphGroups(function(t){a=t,a.groups.forEach(function(t){return t.padding=r})});var s=e.nodes.length,u=[],c=e.nodes.slice(0);return c.forEach(function(t,e){return t.index=e}),a.groups.forEach(function(t){var e=t.index=t.id+s;c.push(t),void 0!==t.leaves&&t.leaves.forEach(function(t){return u.push({source:e,target:t.index})}),void 0!==t.groups&&t.groups.forEach(function(t){return u.push({source:e,target:t.id+s})})}),a.powerEdges.forEach(function(t){u.push({source:t.source.index,target:t.target.index})}),(new t.Layout).size(n).nodes(c).links(u).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new t.Layout).convergenceThreshold(.001).size(n).avoidOverlaps(!0).nodes(e.nodes).links(e.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(t){a=t,a.groups.forEach(function(t){t.padding=r})}).start(50,0,100,0,!1),powerGraph:a}}t.gridify=e,t.powerGraphGridLayout=r}(r||(r={}));var r;!function(t){function e(){return new n}var n=function(e){function n(){e.call(this),this.event=d3.dispatch(t.EventType[t.EventType.start],t.EventType[t.EventType.tick],t.EventType[t.EventType.end]);var n=this;this.drag=function(){if(!e)var e=d3.behavior.drag().origin(t.Layout.dragOrigin).on("dragstart.d3adaptor",t.Layout.dragStart).on("drag.d3adaptor",function(e){t.Layout.drag(e,d3.event),n.resume()}).on("dragend.d3adaptor",t.Layout.dragEnd);if(!arguments.length)return e
;this.call(e)}}return i(n,e),n.prototype.trigger=function(e){var n={type:t.EventType[e.type],alpha:e.alpha,stress:e.stress};this.event[n.type](n)},n.prototype.kick=function(){var t=this;d3.timer(function(){return e.prototype.tick.call(t)})},n.prototype.on=function(e,n){return"string"==typeof e?this.event.on(e,n):this.event.on(t.EventType[e],n),this},n}(t.Layout);t.D3StyleLayoutAdaptor=n,t.d3adaptor=e}(r||(r={}));var r;!function(t){var e=function(){function t(t,e,n){this.id=t,this.rect=e,this.children=n,this.leaf=void 0===n||0===n.length}return t}();t.NodeWrapper=e;var n=function(){function t(t,e,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null),this.id=t,this.x=e,this.y=n,this.node=r,this.line=i}return t}();t.Vert=n;var r=function(){function t(e,n){this.s=e,this.t=n;var r=t.findMatch(e,n),i=n.slice(0).reverse(),o=t.findMatch(e,i);r.length>=o.length?(this.length=r.length,this.si=r.si,this.ti=r.ti,this.reversed=!1):(this.length=o.length,this.si=o.si,this.ti=n.length-o.ti-o.length,this.reversed=!0)}return t.findMatch=function(t,e){for(var n=t.length,r=e.length,i={length:0,si:-1,ti:-1},o=new Array(n),a=0;a<n;a++){o[a]=new Array(r);for(var s=0;s<r;s++)if(t[a]===e[s]){var u=o[a][s]=0===a||0===s?1:o[a-1][s-1]+1;u>i.length&&(i.length=u,i.si=a-u+1,i.ti=s-u+1)}else o[a][s]=0}return i},t.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},t}();t.LongestCommonSubsequence=r;var i=function(){function r(r,i,o){var a=this;void 0===o&&(o=12),this.originalnodes=r,this.groupPadding=o,this.leaves=null,this.nodes=r.map(function(t,n){return new e(n,i.getBounds(t),i.getChildren(t))}),this.leaves=this.nodes.filter(function(t){return t.leaf}),this.groups=this.nodes.filter(function(t){return!t.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(t){return t.children.forEach(function(e){return a.nodes[e].parent=t})}),this.root={children:[]},this.nodes.forEach(function(t){void 0===t.parent&&(t.parent=a.root,a.root.children.push(t.id)),t.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(t,e){return a.getDepth(t)-a.getDepth(e)}),this.backToFront.slice(0).reverse().filter(function(t){return!t.leaf}).forEach(function(e){var n=t.vpsc.Rectangle.empty();e.children.forEach(function(t){return n=n.union(a.nodes[t].rect)}),e.rect=n.inflate(a.groupPadding)});var s=this.midPoints(this.cols.map(function(t){return t.pos})),u=this.midPoints(this.rows.map(function(t){return t.pos})),c=s[0],l=s[s.length-1],h=u[0],f=u[u.length-1],d=this.rows.map(function(t){return{x1:c,x2:l,y1:t.pos,y2:t.pos}}).concat(u.map(function(t){return{x1:c,x2:l,y1:t,y2:t}})),p=this.cols.map(function(t){return{x1:t.pos,x2:t.pos,y1:h,y2:f}}).concat(s.map(function(t){return{x1:t,x2:t,y1:h,y2:f}})),g=d.concat(p);g.forEach(function(t){return t.verts=[]}),this.verts=[],this.edges=[],d.forEach(function(t){return p.forEach(function(e){var r=new n(a.verts.length,e.x1,t.y1);t.verts.push(r),e.verts.push(r),a.verts.push(r);for(var i=a.backToFront.length;i-- >0;){var o=a.backToFront[i],s=o.rect,u=Math.abs(r.x-s.cx()),c=Math.abs(r.y-s.cy());if(u<s.width()/2&&c<s.height()/2){r.node=o;break}}})}),g.forEach(function(t,e){a.nodes.forEach(function(e,r){e.rect.lineIntersections(t.x1,t.y1,t.x2,t.y2).forEach(function(r,i){var o=new n(a.verts.length,r.x,r.y,e,t);a.verts.push(o),t.verts.push(o),e.ports.push(o)})});var r=Math.abs(t.y1-t.y2)<.1,i=function(t,e){return r?e.x-t.x:e.y-t.y};t.verts.sort(i);for(var o=1;o<t.verts.length;o++){var s=t.verts[o-1],u=t.verts[o];s.node&&s.node===u.node&&s.node.leaf||a.edges.push({source:s.id,target:u.id,length:Math.abs(i(s,u))})}})}return r.prototype.avg=function(t){return t.reduce(function(t,e){return t+e})/t.length},r.prototype.getGridLines=function(t){for(var e=[],n=this.leaves.slice(0,this.leaves.length);n.length>0;){var r=n.filter(function(e){return e.rect["overlap"+t.toUpperCase()](n[0].rect)}),i={nodes:r,pos:this.avg(r.map(function(e){return e.rect["c"+t]()}))};e.push(i),i.nodes.forEach(function(t){return n.splice(n.indexOf(t),1)})}return e.sort(function(t,e){return t.pos-e.pos}),e},r.prototype.getDepth=function(t){for(var e=0;t.parent!==this.root;)e++,t=t.parent;return e},r.prototype.midPoints=function(t){for(var e=t[1]-t[0],n=[t[0]-e/2],r=1;r<t.length;r++)n.push((t[r]+t[r-1])/2);return n.push(t[t.length-1]+e/2),n},r.prototype.findLineage=function(t){var e=[t];do{t=t.parent,e.push(t)}while(t!==this.root);return e.reverse()},r.prototype.findAncestorPathBetween=function(t,e){for(var n=this.findLineage(t),r=this.findLineage(e),i=0;n[i]===r[i];)i++;return{commonAncestor:n[i-1],lineages:n.slice(i).concat(r.slice(i))}},r.prototype.siblingObstacles=function(t,e){var n=this,r=this.findAncestorPathBetween(t,e),i={};r.lineages.forEach(function(t){return i[t.id]={}});var o=r.commonAncestor.children.filter(function(t){return!(t in i)});return r.lineages.filter(function(t){return t.parent!==r.commonAncestor}).forEach(function(t){return o=o.concat(t.parent.children.filter(function(e){return e!==t.id}))}),o.map(function(t){return n.nodes[t]})},r.getSegmentSets=function(t,e,n){for(var r=[],i=0;i<t.length;i++)for(var o=t[i],a=0;a<o.length;a++){var s=o[a];s.edgeid=i,s.i=a;var u=s[1][e]-s[0][e];Math.abs(u)<.1&&r.push(s)}r.sort(function(t,n){return t[0][e]-n[0][e]});for(var c=[],l=null,h=0;h<r.length;h++){var s=r[h];(!l||Math.abs(s[0][e]-l.pos)>.1)&&(l={pos:s[0][e],segments:[]},c.push(l)),l.segments.push(s)}return c},r.nudgeSegs=function(e,n,r,i,o,a){var s=i.length;if(!(s<=1)){for(var u=i.map(function(n){return new t.vpsc.Variable(n[0][e])}),c=[],l=0;l<s;l++)for(var h=0;h<s;h++)if(l!==h){var f=i[l],d=i[h],p=f.edgeid,g=d.edgeid,v=-1,y=-1;"x"==e?o(p,g)&&(f[0][n]<f[1][n]?(v=h,y=l):(v=l,y=h)):o(p,g)&&(f[0][n]<f[1][n]?(v=l,y=h):(v=h,y=l)),v>=0&&c.push(new t.vpsc.Constraint(u[v],u[y],a))}new t.vpsc.Solver(u,c).solve(),u.forEach(function(t,n){var o=i[n],a=t.position();o[0][e]=o[1][e]=a;var s=r[o.edgeid];o.i>0&&(s[o.i-1][1][e]=a),o.i<s.length-1&&(s[o.i+1][0][e]=a)})}},r.nudgeSegments=function(t,e,n,i,o){for(var a=r.getSegmentSets(t,e,n),s=0;s<a.length;s++){for(var u=a[s],c=[],l=0;l<u.segments.length;l++){var h=u.segments[l];c.push({type:0,s:h,pos:Math.min(h[0][n],h[1][n])}),c.push({type:1,s:h,pos:Math.max(h[0][n],h[1][n])})}c.sort(function(t,e){return t.pos-e.pos+t.type-e.type});var f=[],d=0;c.forEach(function(a){0===a.type?(f.push(a.s),d++):d--,0==d&&(r.nudgeSegs(e,n,t,f,i,o),f=[])})}},r.prototype.routeEdges=function(e,n,r,i){var o=this,a=e.map(function(t){return o.route(r(t),i(t))}),s=t.GridRouter.orderEdges(a),u=a.map(function(e){return t.GridRouter.makeSegments(e)});return t.GridRouter.nudgeSegments(u,"x","y",s,n),t.GridRouter.nudgeSegments(u,"y","x",s,n),t.GridRouter.unreverseEdges(u,a),u},r.unreverseEdges=function(t,e){t.forEach(function(t,n){e[n].reversed&&(t.reverse(),t.forEach(function(t){t.reverse()}))})},r.angleBetween2Lines=function(t,e){var n=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),r=Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x),i=n-r;return(i>Math.PI||i<-Math.PI)&&(i=r-n),i},r.isLeft=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)<=0},r.getOrder=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];void 0===e[r.l]&&(e[r.l]={}),e[r.l][r.r]=!0}return function(t,n){return void 0!==e[t]&&e[t][n]}},r.orderEdges=function(e){for(var n=[],i=0;i<e.length-1;i++)for(var o=i+1;o<e.length;o++){var a,s,u,c=e[i],l=e[o],h=new t.LongestCommonSubsequence(c,l);0!==h.length&&(h.reversed&&(l.reverse(),l.reversed=!0,h=new t.LongestCommonSubsequence(c,l)),(h.si<=0||h.ti<=0)&&(h.si+h.length>=c.length||h.ti+h.length>=l.length)?n.push({l:i,r:o}):(h.si+h.length>=c.length||h.ti+h.length>=l.length?(a=c[h.si+1],u=c[h.si-1],s=l[h.ti-1]):(a=c[h.si+h.length-2],s=c[h.si+h.length],u=l[h.ti+h.length]),r.isLeft(a,s,u)?n.push({l:o,r:i}):n.push({l:i,r:o})))}return t.GridRouter.getOrder(n)},r.makeSegments=function(t){function e(t){return{x:t.x,y:t.y}}for(var n=[],r=e(t[0]),i=1;i<t.length;i++){var o=e(t[i]),a=i<t.length-1?t[i+1]:null;a&&function(t,e,n){return Math.abs((e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x))<.001}(r,o,a)||(n.push([r,o]),r=o)}return n},r.prototype.route=function(e,n){var r=this,i=this.nodes[e],o=this.nodes[n];this.obstacles=this.siblingObstacles(i,o);var a={};this.obstacles.forEach(function(t){return a[t.id]=t}),this.passableEdges=this.edges.filter(function(t){var e=r.verts[t.source],n=r.verts[t.target];return!(e.node&&e.node.id in a||n.node&&n.node.id in a)});for(var s=1;s<i.ports.length;s++){var u=i.ports[0].id,c=i.ports[s].id;this.passableEdges.push({source:u,target:c,length:0})}for(var s=1;s<o.ports.length;s++){var u=o.ports[0].id,c=o.ports[s].id;this.passableEdges.push({source:u,target:c,length:0})}var l=function(t){return t.source},h=function(t){return t.target},f=function(t){return t.length},d=new t.shortestpaths.Calculator(this.verts.length,this.passableEdges,l,h,f),p=function(t,e,n){var a=r.verts[t],s=r.verts[e],u=r.verts[n],c=Math.abs(u.x-a.x),l=Math.abs(u.y-a.y);return a.node===i&&a.node===s.node||s.node===o&&s.node===u.node?0:c>1&&l>1?1e3:0},g=d.PathFromNodeToNodeWithPrevCost(i.ports[0].id,o.ports[0].id,p),v=g.reverse().map(function(t){return r.verts[t]});return v.push(this.nodes[o.id].ports[0]),v.filter(function(t,e){return!(e<v.length-1&&v[e+1].node===i&&t.node===i||e>0&&t.node===o&&v[e-1].node===o)})},r.getRoutePath=function(t,e,n,i){var o={routepath:"M "+t[0][0].x+" "+t[0][0].y+" ",arrowpath:""};if(t.length>1)for(var a=0;a<t.length;a++){var s=t[a],u=s[1].x,c=s[1].y,l=u-s[0].x,h=c-s[0].y;if(a<t.length-1){Math.abs(l)>0?u-=l/Math.abs(l)*e:c-=h/Math.abs(h)*e,o.routepath+="L "+u+" "+c+" ";var f=t[a+1],d=f[0].x,p=f[0].y,g=f[1].x,v=f[1].y;l=g-d,h=v-p;var y,m,x=r.angleBetween2Lines(s,f)<0?1:0;Math.abs(l)>0?(y=d+l/Math.abs(l)*e,m=p):(y=d,m=p+h/Math.abs(h)*e);var b=Math.abs(y-u),w=Math.abs(m-c);o.routepath+="A "+b+" "+w+" 0 0 "+x+" "+y+" "+m+" "}else{var _,E,k=[u,c];Math.abs(l)>0?(u-=l/Math.abs(l)*i,_=[u,c+n],E=[u,c-n]):(c-=h/Math.abs(h)*i,_=[u+n,c],E=[u-n,c]),o.routepath+="L "+u+" "+c+" ",i>0&&(o.arrowpath="M "+k[0]+" "+k[1]+" L "+_[0]+" "+_[1]+" L "+E[0]+" "+E[1])}}else{var _,E,s=t[0],u=s[1].x,c=s[1].y,l=u-s[0].x,h=c-s[0].y,k=[u,c];Math.abs(l)>0?(u-=l/Math.abs(l)*i,_=[u,c+n],E=[u,c-n]):(c-=h/Math.abs(h)*i,_=[u+n,c],E=[u-n,c]),o.routepath+="L "+u+" "+c+" ",i>0&&(o.arrowpath="M "+k[0]+" "+k[1]+" L "+_[0]+" "+_[1]+" L "+E[0]+" "+E[1])}return o},r}();t.GridRouter=i}(r||(r={}));var r;!function(t){var e=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.actualLength=function(t){var e=this;return Math.sqrt(t.reduce(function(t,n){var r=n[e.target]-n[e.source];return t+r*r},0))},t}();t.Link3D=e;var n=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n}return t}();t.Node3D=n;var r=function(){function e(t,n,r){var i=this;void 0===r&&(r=1),this.nodes=t,this.links=n,this.idealLinkLength=r,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(e.k);for(var o=0;o<e.k;++o)this.result[o]=new Array(t.length);t.forEach(function(t,n){for(var r=0,o=e.dims;r<o.length;r++){var a=o[r];void 0===t[a]&&(t[a]=Math.random())}i.result[0][n]=t.x,i.result[1][n]=t.y,i.result[2][n]=t.z})}return e.prototype.linkLength=function(t){return t.actualLength(this.result)},e.prototype.start=function(e){var n=this;void 0===e&&(e=100);var r=this.nodes.length,o=new i;this.useJaccardLinkLengths&&t.jaccardLinkLengths(this.links,o,1.5),this.links.forEach(function(t){return t.length*=n.idealLinkLength});var a=new t.shortestpaths.Calculator(r,this.links,function(t){return t.source},function(t){return t.target},function(t){return t.length}).DistanceMatrix(),s=t.Descent.createSquareMatrix(r,function(t,e){return a[t][e]}),u=t.Descent.createSquareMatrix(r,function(){return 2});this.links.forEach(function(t){var e=t.source,n=t.target;return u[e][n]=u[n][e]=1}),this.descent=new t.Descent(this.result,s),this.descent.threshold=.001,this.descent.G=u,this.constraints&&(this.descent.project=new t.vpsc.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var c=0;c<this.nodes.length;c++){var l=this.nodes[c];l.fixed&&this.descent.locks.add(c,[l.x,l.y,l.z])}return this.descent.run(e),this},e.prototype.tick=function(){this.descent.locks.clear();for(var t=0;t<this.nodes.length;t++){var e=this.nodes[t];e.fixed&&this.descent.locks.add(t,[e.x,e.y,e.z])}return this.descent.rungeKutta()},e.dims=["x","y","z"],e.k=e.dims.length,e}();t.Layout3D=r;var i=function(){function t(){}return t.prototype.getSourceIndex=function(t){return t.source},t.prototype.getTargetIndex=function(t){return t.target},t.prototype.getLength=function(t){return t.length},t.prototype.setLength=function(t,e){t.length=e},t}()}(r||(r={})),void 0!==e&&(e.exports=r)},{}],4:[function(t,e,n){!function(){"use strict";var n=function(t,e){function n(t){var e=this.options={};for(var n in s)e[n]=s[n];for(var n in t)e[n]=t[n]}if(t&&e){var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,i=function(t){return"string"==typeof t},o=function(t){return"number"==typeof t},a=function(t){return null!=t&&typeof t==typeof{}},s={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,nodeSpacing:function(t){return 10},flow:void 0,alignment:void 0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1};n.prototype.run=function(){var t=this,n=this.options;t.manuallyStopped=!1;var s=n.cy,u=n.eles,c=u.nodes(),l=u.edges(),h=!1,f=n.boundingBox||{x1:0,y1:0,w:s.width(),h:s.height()};void 0===f.x2&&(f.x2=f.x1+f.w),void 0===f.w&&(f.w=f.x2-f.x1),void 0===f.y2&&(f.y2=f.y1+f.h),void 0===f.h&&(f.h=f.y2-f.y1);var d=function(t,e){if("function"==typeof t){return t.apply(e,[e])}return t},p=function(){for(var t=0;t<c.length;t++){var e=c[t],r=e.scratch("cola");if(!r.updatedDims){var i=d(n.nodeSpacing,e);r.width=e.outerWidth()+2*i,r.height=e.outerHeight()+2*i}}c.positions(function(t,e){var n,r=e.scratch().cola;return e.grabbed()||e.isParent()||(n={x:f.x1+r.x,y:f.y1+r.y},o(n.x)&&o(n.y)||(n=void 0)),n}),c.updateCompoundBounds(),h||(v(),h=!0),n.fit&&s.fit(n.padding)},g=function(){n.ungrabifyWhileSimulating&&x.grabify(),s.off("destroy",b),c.off("grab free position",w),c.off("lock unlock",_),t.one("layoutstop",n.stop),t.trigger({type:"layoutstop",layout:t})},v=function(){t.one("layoutready",n.ready),t.trigger({type:"layoutready",layout:t})},y=n.refresh;n.refresh<0?(Math.abs(n.refresh),y=1):y=Math.max(1,y);var m=t.adaptor=e.adaptor({trigger:function(t){var r=e.EventType?e.EventType.tick:null,i=e.EventType?e.EventType.end:null;switch(t.type){case"tick":case r:n.animate&&p();break;case"end":case i:p(),n.infinite||g()}},kick:function(){var e=function(){if(t.manuallyStopped)return g(),!0;var e=m.tick();return e&&n.infinite&&m.resume(),e},i=function(){for(var t,n=0;n<y&&!t;n++)t=t||e();return t};if(n.animate){var o=function(){i()||r(o)};r(o)}else for(;!e(););},on:function(t,e){},drag:function(){}});t.adaptor=m;var x=c.filter(":grabbable");n.ungrabifyWhileSimulating&&x.ungrabify();var b;s.one("destroy",b=function(e){t.stop()});var w;c.on("grab free position",w=function(t){var e=this,n=e.scratch().cola,r=e.position();if(t.cyTarget===e||t.target===e)switch(t.type){case"grab":m.dragstart(n),m.resume();break;case"free":m.dragend(n);break;case"position":n.px===r.x-f.x1&&n.py===r.y-f.y1||(n.px=r.x-f.x1,n.py=r.y-f.y1,m.resume())}});var _;c.on("lock unlock",_=function(t){var e=this,n=e.scratch().cola;n.fixed=e.locked(),e.locked()?m.dragstart(n):m.dragend(n)});var E=c.stdFilter(function(t){return!t.isParent()});if(m.nodes(E.map(function(t,e){var r=d(n.nodeSpacing,t),i=t.position(),o=t.boundingBox();return t.scratch().cola={x:n.randomize||void 0===i.x?Math.round(Math.random()*f.w):i.x,y:n.randomize||void 0===i.y?Math.round(Math.random()*f.h):i.y,width:o.w+2*r,height:o.h+2*r,index:e,fixed:t.locked()}})),n.alignment){var k=[],N=[];E.forEach(function(t){var e=d(n.alignment,t),r=t.scratch().cola,i=r.index;e&&(null!=e.x&&k.push({node:i,offset:e.x}),null!=e.y&&N.push({node:i,offset:e.y}))});var L=[];k.length>0&&L.push({type:"alignment",axis:"x",offsets:k}),N.length>0&&L.push({type:"alignment",axis:"y",offsets:N}),m.constraints(L)}m.groups(c.stdFilter(function(t){return t.isParent()}).map(function(t,e){var r=d(n.nodeSpacing,t),i=function(e){return parseFloat(t.style("padding-"+e))},o=i("left")+r,a=i("right")+r,s=i("top")+r,u=i("bottom")+r;return t.scratch().cola={index:e,padding:Math.max(o,a,s,u),leaves:t.children().stdFilter(function(t){return!t.isParent()}).map(function(t){return t[0].scratch().cola.index}),fixed:t.locked()},t}).map(function(t){return t.scratch().cola.groups=t.children().stdFilter(function(t){return t.isParent()}).map(function(t){return t.scratch().cola.index}),t.scratch().cola}));var S,T;null!=n.edgeLength?(S=n.edgeLength,T="linkDistance"):null!=n.edgeSymDiffLength?(S=n.edgeSymDiffLength,T="symmetricDiffLinkLengths"):null!=n.edgeJaccardLength?(S=n.edgeJaccardLength,T="jaccardLinkLengths"):(S=100,T="linkDistance");var A=function(t){return t.calcLength};if(m.links(l.stdFilter(function(t){return!t.source().isParent()&&!t.target().isParent()}).map(function(t,e){var n=t.scratch().cola={source:t.source()[0].scratch().cola.index,target:t.target()[0].scratch().cola.index};return null!=S&&(n.calcLength=d(S,t)),n})),m.size([f.w,f.h]),null!=S&&m[T](A),n.flow){var D;i(n.flow)?D={axis:n.flow,minSeparation:50}:o(n.flow)?D={axis:"y",minSeparation:n.flow}:a(n.flow)?(D=n.flow,D.axis=D.axis||"y",D.minSeparation=null!=D.minSeparation?D.minSeparation:50):D={axis:"y",minSeparation:50},m.flowLayout(D.axis,D.minSeparation)}return t.trigger({type:"layoutstart",layout:t}),m.avoidOverlaps(n.avoidOverlap).handleDisconnected(n.handleDisconnected).start(n.unconstrIter,n.userConstIter,n.allConstIter),n.infinite||setTimeout(function(){t.manuallyStopped||m.stop()},n.maxSimulationTime),this},n.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},t("layout","cola",n)}};void 0!==e&&e.exports&&(e.exports=function(e,r){n(e,r||t("webcola"))}),"undefined"!=typeof define&&define.amd&&define("cytoscape-cola",function(){return n}),"undefined"!=typeof cytoscape&&"undefined"!=typeof cola&&n(cytoscape,cola)}()},{webcola:206}],5:[function(t,e,n){function r(){}var i=t("./FDLayoutConstants");for(var o in i)r[o]=i[o];r.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,r.DEFAULT_RADIAL_SEPARATION=i.DEFAULT_EDGE_LENGTH,r.DEFAULT_COMPONENT_SEPERATION=60,e.exports=r},{"./FDLayoutConstants":14}],6:[function(t,e,n){function r(t,e,n){i.call(this,t,e,n)}var i=t("./FDLayoutEdge");r.prototype=Object.create(i.prototype);for(var o in i)r[o]=i[o];e.exports=r},{"./FDLayoutEdge":15}],7:[function(t,e,n){function r(t,e,n){i.call(this,t,e,n)}var i=t("./LGraph");r.prototype=Object.create(i.prototype);for(var o in i)r[o]=i[o];e.exports=r},{"./LGraph":23}],8:[function(t,e,n){function r(t){i.call(this,t)}var i=t("./LGraphManager");r.prototype=Object.create(i.prototype);for(var o in i)r[o]=i[o];e.exports=r},{"./LGraphManager":24}],9:[function(t,e,n){function r(){i.call(this)}var i=t("./FDLayout"),o=t("./CoSEGraphManager"),a=t("./CoSEGraph"),s=t("./CoSENode"),u=t("./CoSEEdge"),c=t("./CoSEConstants"),l=t("./FDLayoutConstants"),h=t("./LayoutConstants"),f=t("./Point"),d=t("./PointD"),p=t("./Layout"),g=t("./Integer"),v=t("./IGeometry"),y=t("./LGraph"),m=t("./Transform");r.prototype=Object.create(i.prototype);for(var x in i)r[x]=i[x];r.prototype.newGraphManager=function(){var t=new o(this);return this.graphManager=t,t},r.prototype.newGraph=function(t){return new a(null,this.graphManager,t)},r.prototype.newNode=function(t){return new s(this.graphManager,t)},r.prototype.newEdge=function(t){return new u(null,null,t)},r.prototype.initParameters=function(){i.prototype.initParameters.call(this,arguments),this.isSubLayout||(c.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=c.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=c.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=l.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=l.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=l.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=l.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=l.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=l.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR)},r.prototype.layout=function(){return h.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},r.prototype.classicLayout=function(){if(this.calculateNodesToApplyGravitationTo(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),!this.incremental){var t=this.getFlatForest();t.length>0?this.positionNodesRadially(t):this.positionNodesRandomly()}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},r.prototype.tick=function(){if(++this.totalIterations===this.maxIterations)return!0;if(this.totalIterations%l.CONVERGENCE_CHECK_PERIOD==0){if(this.isConverged())return!0;this.coolingFactor=this.initialCoolingFactor*((this.maxIterations-this.totalIterations)/this.maxIterations),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},r.prototype.getPositionsData=function(){for(var t=this.graphManager.getAllNodes(),e={},n=0;n<t.length;n++){var r=t[n].rect,i=t[n].id;e[i]={id:i,x:r.getCenterX(),y:r.getCenterY(),w:r.width,h:r.height}}return e},r.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var t=!1;if("during"===l.ANIMATE)this.emit("layoutstarted");else{for(;!t;)t=this.tick();this.graphManager.updateBounds()}},r.prototype.calculateNodesToApplyGravitationTo=function(){var t,e,n=[],r=this.graphManager.getGraphs(),i=r.length;for(e=0;e<i;e++)t=r[e],t.updateConnected(),t.isConnected||(n=n.concat(t.getNodes()));this.graphManager.setAllNodesToApplyGravitation(n)},r.prototype.createBendpoints=function(){var t=[];t=t.concat(this.graphManager.getAllEdges());var e,n=new HashSet;for(e=0;e<t.length;e++){var r=t[e];if(!n.contains(r)){var i=r.getSource(),o=r.getTarget();if(i==o)r.getBendpoints().push(new d),r.getBendpoints().push(new d),this.createDummyNodesForBendpoints(r),n.add(r);else{var a=[];if(a=a.concat(i.getEdgeListToNode(o)),a=a.concat(o.getEdgeListToNode(i)),!n.contains(a[0])){if(a.length>1){var s;for(s=0;s<a.length;s++){var u=a[s];u.getBendpoints().push(new d),this.createDummyNodesForBendpoints(u)}}n.addAll(list)}}}if(n.size()==t.length)break}},r.prototype.positionNodesRadially=function(t){for(var e=new f(0,0),n=Math.ceil(Math.sqrt(t.length)),i=0,o=0,a=0,s=new d(0,0),u=0;u<t.length;u++){u%n==0&&(a=0,o=i,0!=u&&(o+=c.DEFAULT_COMPONENT_SEPERATION),i=0);var l=t[u],g=p.findCenterOfTree(l);e.x=a,e.y=o,s=r.radialLayout(l,g,e),s.y>i&&(i=Math.floor(s.y)),a=Math.floor(s.x+c.DEFAULT_COMPONENT_SEPERATION)}this.transform(new d(h.WORLD_CENTER_X-s.x/2,h.WORLD_CENTER_Y-s.y/2))},r.radialLayout=function(t,e,n){var i=Math.max(this.maxDiagonalInTree(t),c.DEFAULT_RADIAL_SEPARATION);r.branchRadialLayout(e,null,0,359,0,i);var o=y.calculateBounds(t),a=new m;a.setDeviceOrgX(o.getMinX()),a.setDeviceOrgY(o.getMinY()),a.setWorldOrgX(n.x),a.setWorldOrgY(n.y);for(var s=0;s<t.length;s++){t[s].transform(a)}var u=new d(o.getMaxX(),o.getMaxY());return a.inverseTransformPoint(u)},r.branchRadialLayout=function(t,e,n,i,o,a){var s=(i-n+1)/2;s<0&&(s+=180);var u=(s+n)%360,c=u*v.TWO_PI/360,l=(Math.cos(c),o*Math.cos(c)),h=o*Math.sin(c);t.setCenter(l,h);var f=[];f=f.concat(t.getEdges());var d=f.length;null!=e&&d--;for(var p,g=0,y=f.length,m=t.getEdgesBetween(e);m.length>1;){var x=m[0];m.splice(0,1);var b=f.indexOf(x);b>=0&&f.splice(b,1),y--,d--}p=null!=e?(f.indexOf(m[0])+1)%y:0;for(var w=Math.abs(i-n)/d,_=p;g!=d;_=++_%y){var E=f[_].getOtherEnd(t);if(E!=e){var k=(n+g*w)%360,N=(k+w)%360;r.branchRadialLayout(E,t,k,N,o+a,a),g++}}},r.maxDiagonalInTree=function(t){for(var e=g.MIN_VALUE,n=0;n<t.length;n++){var r=t[n],i=r.getDiagonal();i>e&&(e=i)}return e},r.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},e.exports=r},{"./CoSEConstants":5,"./CoSEEdge":6,"./CoSEGraph":7,"./CoSEGraphManager":8,"./CoSENode":10,"./FDLayout":13,"./FDLayoutConstants":14,"./IGeometry":19,"./Integer":21,"./LGraph":23,"./Layout":27,"./LayoutConstants":28,"./Point":29,"./PointD":30,"./Transform":34}],10:[function(t,e,n){function r(t,e,n,r){i.call(this,t,e,n,r)}var i=t("./FDLayoutNode"),o=t("./IMath");r.prototype=Object.create(i.prototype);for(var a in i)r[a]=i[a];r.prototype.move=function(){var t=this.graphManager.getLayout();this.displacementX=t.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX),this.displacementY=t.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY),Math.abs(this.displacementX)>t.coolingFactor*t.maxNodeDisplacement&&(this.displacementX=t.coolingFactor*t.maxNodeDisplacement*o.sign(this.displacementX)),Math.abs(this.displacementY)>t.coolingFactor*t.maxNodeDisplacement&&(this.displacementY=t.coolingFactor*t.maxNodeDisplacement*o.sign(this.displacementY)),null==this.child?this.moveBy(this.displacementX,this.displacementY):0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),t.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},r.prototype.propogateDisplacementToChildren=function(t,e){for(var n,r=this.getChild().getNodes(),i=0;i<r.length;i++)n=r[i],null==n.getChild()?(n.moveBy(t,e),n.displacementX+=t,n.displacementY+=e):n.propogateDisplacementToChildren(t,e)},r.prototype.setPred1=function(t){this.pred1=t},r.prototype.getPred1=function(){return pred1},r.prototype.getPred2=function(){return pred2},r.prototype.setNext=function(t){this.next=t},r.prototype.getNext=function(){return next},r.prototype.setProcessed=function(t){this.processed=t},r.prototype.isProcessed=function(){return processed},e.exports=r},{"./FDLayoutNode":16,"./IMath":20}],11:[function(t,e,n){function r(t,e){this.width=0,this.height=0,null!==t&&null!==e&&(this.height=e,this.width=t)}r.prototype.getWidth=function(){return this.width},r.prototype.setWidth=function(t){this.width=t},r.prototype.getHeight=function(){return this.height},r.prototype.setHeight=function(t){this.height=t},e.exports=r},{}],12:[function(t,e,n){function r(){this.listeners=[]}var i=r.prototype;i.addListener=function(t,e){this.listeners.push({event:t,callback:e})},i.removeListener=function(t,e){for(var n=this.listeners.length;n>=0;n--){var r=this.listeners[n];r.event===t&&r.callback===e&&this.listeners.splice(n,1)}},i.emit=function(t,e){for(var n=0;n<this.listeners.length;n++){var r=this.listeners[n];t===r.event&&r.callback(e)}},e.exports=r},{}],13:[function(t,e,n){function r(){i.call(this),this.useSmartIdealEdgeLengthCalculation=o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=o.DEFAULT_EDGE_LENGTH,this.springConstant=o.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=o.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=o.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=o.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=1,this.initialCoolingFactor=1,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=o.MAX_ITERATIONS}var i=t("./Layout"),o=t("./FDLayoutConstants"),a=t("./LayoutConstants"),s=t("./IGeometry"),u=t("./IMath");r.prototype=Object.create(i.prototype);for(var c in i)r[c]=i[c];r.prototype.initParameters=function(){i.prototype.initParameters.call(this,arguments),this.layoutQuality==a.DRAFT_QUALITY?(this.displacementThresholdPerNode+=.3,this.maxIterations*=.8):this.layoutQuality==a.PROOF_QUALITY&&(this.displacementThresholdPerNode-=.3,this.maxIterations*=1.2),this.totalIterations=0,this.notAnimatedIterations=0},r.prototype.calcIdealEdgeLengths=function(){for(var t,e,n,r,i,s,u=this.getGraphManager().getAllEdges(),c=0;c<u.length;c++)t=u[c],t.idealLength=this.idealEdgeLength,t.isInterGraph&&(n=t.getSource(),r=t.getTarget(),i=t.getSourceInLca().getEstimatedSize(),s=t.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(t.idealLength+=i+s-2*a.SIMPLE_NODE_SIZE),e=t.getLca().getInclusionTreeDepth(),t.idealLength+=o.DEFAULT_EDGE_LENGTH*o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(n.getInclusionTreeDepth()+r.getInclusionTreeDepth()-2*e))},r.prototype.initSpringEmbedder=function(){this.incremental?(this.coolingFactor=.8,this.initialCoolingFactor=.8,this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT_INCREMENTAL):(this.coolingFactor=1,this.initialCoolingFactor=1,this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},r.prototype.calcSpringForces=function(){for(var t,e=this.getAllEdges(),n=0;n<e.length;n++)t=e[n],this.calcSpringForce(t,t.idealLength)},r.prototype.calcRepulsionForces=function(){var t,e,n,r,i=this.getAllNodes();for(t=0;t<i.length;t++)for(n=i[t],e=t+1;e<i.length;e++)r=i[e],n.getOwner()==r.getOwner()&&this.calcRepulsionForce(n,r)},r.prototype.calcGravitationalForces=function(){for(var t,e=this.getAllNodesToApplyGravitation(),n=0;n<e.length;n++)t=e[n],this.calcGravitationalForce(t)},r.prototype.moveNodes=function(){for(var t,e=this.getAllNodes(),n=0;n<e.length;n++)t=e[n],t.move()},r.prototype.calcSpringForce=function(t,e){var n,r,i,o,a=t.getSource(),s=t.getTarget();if(this.uniformLeafNodeSizes&&null==a.getChild()&&null==s.getChild())t.updateLengthSimple();else if(t.updateLength(),t.isOverlapingSourceAndTarget)return;n=t.getLength(),r=this.springConstant*(n-e),i=r*(t.lengthX/n),o=r*(t.lengthY/n),a.springForceX+=i,a.springForceY+=o,s.springForceX-=i,s.springForceY-=o},r.prototype.calcRepulsionForce=function(t,e){var n,r,i,a,c,l,h,f=t.getRect(),d=e.getRect(),p=new Array(2),g=new Array(4);f.intersects(d)?(s.calcSeparationAmount(f,d,p,o.DEFAULT_EDGE_LENGTH/2),l=p[0],h=p[1]):(this.uniformLeafNodeSizes&&null==t.getChild()&&null==e.getChild()?(n=d.getCenterX()-f.getCenterX(),r=d.getCenterY()-f.getCenterY()):(s.getIntersection(f,d,g),n=g[2]-g[0],r=g[3]-g[1]),Math.abs(n)<o.MIN_REPULSION_DIST&&(n=u.sign(n)*o.MIN_REPULSION_DIST),Math.abs(r)<o.MIN_REPULSION_DIST&&(r=u.sign(r)*o.MIN_REPULSION_DIST),i=n*n+r*r,a=Math.sqrt(i),c=this.repulsionConstant/i,l=c*n/a,h=c*r/a),t.repulsionForceX-=l,t.repulsionForceY-=h,e.repulsionForceX+=l,e.repulsionForceY+=h},r.prototype.calcGravitationalForce=function(t){var e,n,r,i,o,a,s,u;e=t.getOwner(),n=(e.getRight()+e.getLeft())/2,r=(e.getTop()+e.getBottom())/2,i=t.getCenterX()-n,o=t.getCenterY()-r,a=Math.abs(i),s=Math.abs(o),t.getOwner()==this.graphManager.getRoot()?(Math.floor(80),u=Math.floor(e.getEstimatedSize()*this.gravityRangeFactor),(a>u||s>u)&&(t.gravitationForceX=-this.gravityConstant*i,t.gravitationForceY=-this.gravityConstant*o)):(u=Math.floor(e.getEstimatedSize()*this.compoundGravityRangeFactor),(a>u||s>u)&&(t.gravitationForceX=-this.gravityConstant*i*this.compoundGravityConstant,
t.gravitationForceY=-this.gravityConstant*o*this.compoundGravityConstant))},r.prototype.isConverged=function(){var t,e=!1;return this.totalIterations>this.maxIterations/3&&(e=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),t=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,t||e},r.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},r.prototype.calcRepulsionRange=function(){return 0},e.exports=r},{"./FDLayoutConstants":14,"./IGeometry":19,"./IMath":20,"./Layout":27,"./LayoutConstants":28}],14:[function(t,e,n){function r(){}var i=t("./LayoutConstants");for(var o in i)r[o]=i[o];r.MAX_ITERATIONS=2500,r.DEFAULT_EDGE_LENGTH=50,r.DEFAULT_SPRING_STRENGTH=.45,r.DEFAULT_REPULSION_STRENGTH=4500,r.DEFAULT_GRAVITY_STRENGTH=.4,r.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,r.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,r.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,r.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,r.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,r.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,r.MAX_NODE_DISPLACEMENT=3*r.MAX_NODE_DISPLACEMENT_INCREMENTAL,r.MIN_REPULSION_DIST=r.DEFAULT_EDGE_LENGTH/10,r.CONVERGENCE_CHECK_PERIOD=100,r.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,r.MIN_EDGE_LENGTH=1,r.GRID_CALCULATION_CHECK_PERIOD=10,e.exports=r},{"./LayoutConstants":28}],15:[function(t,e,n){function r(t,e,n){i.call(this,t,e,n),this.idealLength=o.DEFAULT_EDGE_LENGTH}var i=t("./LEdge"),o=t("./FDLayoutConstants");r.prototype=Object.create(i.prototype);for(var a in i)r[a]=i[a];e.exports=r},{"./FDLayoutConstants":14,"./LEdge":22}],16:[function(t,e,n){function r(t,e,n,r){i.call(this,t,e,n,r),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}var i=t("./LNode");r.prototype=Object.create(i.prototype);for(var o in i)r[o]=i[o];r.prototype.setGridCoordinates=function(t,e,n,r){this.startX=t,this.finishX=e,this.startY=n,this.finishY=r},e.exports=r},{"./LNode":26}],17:[function(t,e,n){function r(){this.map={},this.keys=[]}var i=t("./UniqueIDGeneretor");r.prototype.put=function(t,e){var n=i.createID(t);this.contains(n)||(this.map[n]=e,this.keys.push(t))},r.prototype.contains=function(t){i.createID(t);return null!=this.map[t]},r.prototype.get=function(t){var e=i.createID(t);return this.map[e]},r.prototype.keySet=function(){return this.keys},e.exports=r},{"./UniqueIDGeneretor":35}],18:[function(t,e,n){function r(){this.set={}}var i=t("./UniqueIDGeneretor");r.prototype.add=function(t){var e=i.createID(t);this.contains(e)||(this.set[e]=t)},r.prototype.remove=function(t){delete this.set[i.createID(t)]},r.prototype.clear=function(){this.set={}},r.prototype.contains=function(t){return this.set[i.createID(t)]==t},r.prototype.isEmpty=function(){return 0===this.size()},r.prototype.size=function(){return Object.keys(this.set).length},r.prototype.addAllTo=function(t){for(var e=Object.keys(this.set),n=e.length,r=0;r<n;r++)t.push(this.set[e[r]])},r.prototype.size=function(){return Object.keys(this.set).length},r.prototype.addAll=function(t){for(var e=t.length,n=0;n<e;n++){var r=t[n];this.add(r)}},e.exports=r},{"./UniqueIDGeneretor":35}],19:[function(t,e,n){function r(){}r.calcSeparationAmount=function(t,e,n,i){if(!t.intersects(e))throw"assert failed";var o=new Array(2);r.decideDirectionsForOverlappingNodes(t,e,o),n[0]=Math.min(t.getRight(),e.getRight())-Math.max(t.x,e.x),n[1]=Math.min(t.getBottom(),e.getBottom())-Math.max(t.y,e.y),t.getX()<=e.getX()&&t.getRight()>=e.getRight()?n[0]+=Math.min(e.getX()-t.getX(),t.getRight()-e.getRight()):e.getX()<=t.getX()&&e.getRight()>=t.getRight()&&(n[0]+=Math.min(t.getX()-e.getX(),e.getRight()-t.getRight())),t.getY()<=e.getY()&&t.getBottom()>=e.getBottom()?n[1]+=Math.min(e.getY()-t.getY(),t.getBottom()-e.getBottom()):e.getY()<=t.getY()&&e.getBottom()>=t.getBottom()&&(n[1]+=Math.min(t.getY()-e.getY(),e.getBottom()-t.getBottom()));var a=Math.abs((e.getCenterY()-t.getCenterY())/(e.getCenterX()-t.getCenterX()));e.getCenterY()==t.getCenterY()&&e.getCenterX()==t.getCenterX()&&(a=1);var s=a*n[0],u=n[1]/a;n[0]<u?u=n[0]:s=n[1],n[0]=-1*o[0]*(u/2+i),n[1]=-1*o[1]*(s/2+i)},r.decideDirectionsForOverlappingNodes=function(t,e,n){t.getCenterX()<e.getCenterX()?n[0]=-1:n[0]=1,t.getCenterY()<e.getCenterY()?n[1]=-1:n[1]=1},r.getIntersection2=function(t,e,n){var i=t.getCenterX(),o=t.getCenterY(),a=e.getCenterX(),s=e.getCenterY();if(t.intersects(e))return n[0]=i,n[1]=o,n[2]=a,n[3]=s,!0;var u=t.getX(),c=t.getY(),l=t.getRight(),h=t.getX(),f=t.getBottom(),d=t.getRight(),p=t.getWidthHalf(),g=t.getHeightHalf(),v=e.getX(),y=e.getY(),m=e.getRight(),x=e.getX(),b=e.getBottom(),w=e.getRight(),_=e.getWidthHalf(),E=e.getHeightHalf(),k=!1,N=!1;if(i==a){if(o>s)return n[0]=i,n[1]=c,n[2]=a,n[3]=b,!1;if(o<s)return n[0]=i,n[1]=f,n[2]=a,n[3]=y,!1}else if(o==s){if(i>a)return n[0]=u,n[1]=o,n[2]=m,n[3]=s,!1;if(i<a)return n[0]=l,n[1]=o,n[2]=v,n[3]=s,!1}else{var L,S,T,A,D,M,P=t.height/t.width,I=e.height/e.width,C=(s-o)/(a-i);if(-P==C?i>a?(n[0]=h,n[1]=f,k=!0):(n[0]=l,n[1]=c,k=!0):P==C&&(i>a?(n[0]=u,n[1]=c,k=!0):(n[0]=d,n[1]=f,k=!0)),-I==C?a>i?(n[2]=x,n[3]=b,N=!0):(n[2]=m,n[3]=y,N=!0):I==C&&(a>i?(n[2]=v,n[3]=y,N=!0):(n[2]=w,n[3]=b,N=!0)),k&&N)return!1;if(i>a?o>s?(L=r.getCardinalDirection(P,C,4),S=r.getCardinalDirection(I,C,2)):(L=r.getCardinalDirection(-P,C,3),S=r.getCardinalDirection(-I,C,1)):o>s?(L=r.getCardinalDirection(-P,C,1),S=r.getCardinalDirection(-I,C,3)):(L=r.getCardinalDirection(P,C,2),S=r.getCardinalDirection(I,C,4)),!k)switch(L){case 1:A=c,T=i+-g/C,n[0]=T,n[1]=A;break;case 2:T=d,A=o+p*C,n[0]=T,n[1]=A;break;case 3:A=f,T=i+g/C,n[0]=T,n[1]=A;break;case 4:T=h,A=o+-p*C,n[0]=T,n[1]=A}if(!N)switch(S){case 1:M=y,D=a+-E/C,n[2]=D,n[3]=M;break;case 2:D=w,M=s+_*C,n[2]=D,n[3]=M;break;case 3:M=b,D=a+E/C,n[2]=D,n[3]=M;break;case 4:D=x,M=s+-_*C,n[2]=D,n[3]=M}}return!1},r.getCardinalDirection=function(t,e,n){return t>e?n:1+n%4},r.getIntersection=function(t,e,n,i){if(null==i)return r.getIntersection2(t,e,n);var o,a,s,u,c,l,h,f,d,p=t.x,g=t.y,v=e.x,y=e.y,m=n.x,x=n.y,b=i.x,w=i.y;return s=y-g,c=p-v,h=v*g-p*y,u=w-x,l=m-b,f=b*x-m*w,0==(d=s*l-u*c)?null:(o=(c*f-l*h)/d,a=(u*h-s*f)/d,new Point(o,a))},r.HALF_PI=.5*Math.PI,r.ONE_AND_HALF_PI=1.5*Math.PI,r.TWO_PI=2*Math.PI,r.THREE_PI=3*Math.PI,e.exports=r},{}],20:[function(t,e,n){function r(){}r.sign=function(t){return t>0?1:t<0?-1:0},r.floor=function(t){return t<0?Math.ceil(t):Math.floor(t)},r.ceil=function(t){return t<0?Math.floor(t):Math.ceil(t)},e.exports=r},{}],21:[function(t,e,n){function r(){}r.MAX_VALUE=2147483647,r.MIN_VALUE=-2147483648,e.exports=r},{}],22:[function(t,e,n){function r(t,e,n){i.call(this,n),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=n,this.bendpoints=[],this.source=t,this.target=e}var i=t("./LGraphObject"),o=t("./IGeometry"),a=t("./IMath");r.prototype=Object.create(i.prototype);for(var s in i)r[s]=i[s];r.prototype.getSource=function(){return this.source},r.prototype.getTarget=function(){return this.target},r.prototype.isInterGraph=function(){return this.isInterGraph},r.prototype.getLength=function(){return this.length},r.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},r.prototype.getBendpoints=function(){return this.bendpoints},r.prototype.getLca=function(){return this.lca},r.prototype.getSourceInLca=function(){return this.sourceInLca},r.prototype.getTargetInLca=function(){return this.targetInLca},r.prototype.getOtherEnd=function(t){if(this.source===t)return this.target;if(this.target===t)return this.source;throw"Node is not incident with this edge"},r.prototype.getOtherEndInGraph=function(t,e){for(var n=this.getOtherEnd(t),r=e.getGraphManager().getRoot();;){if(n.getOwner()==e)return n;if(n.getOwner()==r)break;n=n.getOwner().getParent()}return null},r.prototype.updateLength=function(){var t=new Array(4);this.isOverlapingSourceAndTarget=o.getIntersection(this.target.getRect(),this.source.getRect(),t),this.isOverlapingSourceAndTarget||(this.lengthX=t[0]-t[2],this.lengthY=t[1]-t[3],Math.abs(this.lengthX)<1&&(this.lengthX=a.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},r.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=a.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},e.exports=r},{"./IGeometry":19,"./IMath":20,"./LGraphObject":25}],23:[function(t,e,n){function r(t,e,n){i.call(this,n),this.estimatedSize=o.MIN_VALUE,this.margin=a.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=t,null!=e&&e instanceof s?this.graphManager=e:null!=e&&e instanceof Layout&&(this.graphManager=e.graphManager)}var i=t("./LGraphObject"),o=t("./Integer"),a=t("./LayoutConstants"),s=t("./LGraphManager"),u=t("./LNode"),c=t("./HashSet"),l=t("./RectangleD"),h=t("./Point");r.prototype=Object.create(i.prototype);for(var f in i)r[f]=i[f];r.prototype.getNodes=function(){return this.nodes},r.prototype.getEdges=function(){return this.edges},r.prototype.getGraphManager=function(){return this.graphManager},r.prototype.getParent=function(){return this.parent},r.prototype.getLeft=function(){return this.left},r.prototype.getRight=function(){return this.right},r.prototype.getTop=function(){return this.top},r.prototype.getBottom=function(){return this.bottom},r.prototype.isConnected=function(){return this.isConnected},r.prototype.add=function(t,e,n){if(null==e&&null==n){var r=t;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(r)>-1)throw"Node already in graph!";return r.owner=this,this.getNodes().push(r),r}var i=t;if(!(this.getNodes().indexOf(e)>-1&&this.getNodes().indexOf(n)>-1))throw"Source or target not in graph!";if(e.owner!=n.owner||e.owner!=this)throw"Both owners must be this graph!";return e.owner!=n.owner?null:(i.source=e,i.target=n,i.isInterGraph=!1,this.getEdges().push(i),e.edges.push(i),n!=e&&n.edges.push(i),i)},r.prototype.remove=function(t){var e=t;if(t instanceof u){if(null==e)throw"Node is null!";if(null==e.owner||e.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var n,r=e.edges.slice(),i=r.length,o=0;o<i;o++)n=r[o],n.isInterGraph?this.graphManager.remove(n):n.source.owner.remove(n);var a=this.nodes.indexOf(e);if(a==-1)throw"Node not in owner node list!";this.nodes.splice(a,1)}else if(t instanceof LEdge){var n=t;if(null==n)throw"Edge is null!";if(null==n.source||null==n.target)throw"Source and/or target is null!";if(null==n.source.owner||null==n.target.owner||n.source.owner!=this||n.target.owner!=this)throw"Source and/or target owner is invalid!";var s=n.source.edges.indexOf(n),c=n.target.edges.indexOf(n);if(!(s>-1&&c>-1))throw"Source and/or target doesn't know this edge!";n.source.edges.splice(s,1),n.target!=n.source&&n.target.edges.splice(c,1);var a=n.source.owner.getEdges().indexOf(n);if(a==-1)throw"Not in owner's edge list!";n.source.owner.getEdges().splice(a,1)}},r.prototype.updateLeftTop=function(){for(var t,e,n=o.MAX_VALUE,r=o.MAX_VALUE,i=this.getNodes(),a=i.length,s=0;s<a;s++){var u=i[s];t=Math.floor(u.getTop()),e=Math.floor(u.getLeft()),n>t&&(n=t),r>e&&(r=e)}return n==o.MAX_VALUE?null:(this.left=r-this.margin,this.top=n-this.margin,new h(this.left,this.top))},r.prototype.updateBounds=function(t){for(var e,n,r,i,a=o.MAX_VALUE,s=-o.MAX_VALUE,u=o.MAX_VALUE,c=-o.MAX_VALUE,h=this.nodes,f=h.length,d=0;d<f;d++){var p=h[d];t&&null!=p.child&&p.updateBounds(),e=Math.floor(p.getLeft()),n=Math.floor(p.getRight()),r=Math.floor(p.getTop()),i=Math.floor(p.getBottom()),a>e&&(a=e),s<n&&(s=n),u>r&&(u=r),c<i&&(c=i)}var g=new l(a,u,s-a,c-u);a==o.MAX_VALUE&&(this.left=Math.floor(this.parent.getLeft()),this.right=Math.floor(this.parent.getRight()),this.top=Math.floor(this.parent.getTop()),this.bottom=Math.floor(this.parent.getBottom())),this.left=g.x-this.margin,this.right=g.x+g.width+this.margin,this.top=g.y-this.margin,this.bottom=g.y+g.height+this.margin},r.calculateBounds=function(t){for(var e,n,r,i,a=o.MAX_VALUE,s=-o.MAX_VALUE,u=o.MAX_VALUE,c=-o.MAX_VALUE,h=t.length,f=0;f<h;f++){var d=t[f];e=Math.floor(d.getLeft()),n=Math.floor(d.getRight()),r=Math.floor(d.getTop()),i=Math.floor(d.getBottom()),a>e&&(a=e),s<n&&(s=n),u>r&&(u=r),c<i&&(c=i)}return new l(a,u,s-a,c-u)},r.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},r.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},r.prototype.calcEstimatedSize=function(){for(var t=0,e=this.nodes,n=e.length,r=0;r<n;r++){t+=e[r].calcEstimatedSize()}return this.estimatedSize=0==t?a.EMPTY_COMPOUND_NODE_SIZE:Math.floor(t/Math.sqrt(this.nodes.length)),Math.floor(this.estimatedSize)},r.prototype.updateConnected=function(){if(0==this.nodes.length)return void(this.isConnected=!0);var t,e,n=[],r=new c,i=this.nodes[0];for(n=n.concat(i.withChildren());n.length>0;){i=n.shift(),r.add(i),t=i.getEdges();for(var o=t.length,a=0;a<o;a++){e=t[a].getOtherEndInGraph(i,this),null==e||r.contains(e)||(n=n.concat(e.withChildren()))}}if(this.isConnected=!1,r.size()>=this.nodes.length){var s=0,o=r.size();for(var u in r.set){r.set[u].owner==this&&s++}s==this.nodes.length&&(this.isConnected=!0)}},e.exports=r},{"./HashSet":18,"./Integer":21,"./LGraphManager":24,"./LGraphObject":25,"./LNode":26,"./LayoutConstants":28,"./Point":29,"./RectangleD":32}],24:[function(t,e,n){function r(t){this.layout=t,this.graphs=[],this.edges=[]}r.prototype.addRoot=function(){var t=this.layout.newGraph(),e=this.layout.newNode(null),n=this.add(t,e);return this.setRootGraph(n),this.rootGraph},r.prototype.add=function(t,e,n,r,i){if(null==n&&null==r&&null==i){if(null==t)throw"Graph is null!";if(null==e)throw"Parent node is null!";if(this.graphs.indexOf(t)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(t),null!=t.parent)throw"Already has a parent!";if(null!=e.child)throw"Already has a child!";return t.parent=e,e.child=t,t}i=n,r=e,n=t;var o=r.getOwner(),a=i.getOwner();if(null==o||o.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==a||a.getGraphManager()!=this)throw"Target not in this graph mgr!";if(o==a)return n.isInterGraph=!1,o.add(n,r,i);if(n.isInterGraph=!0,n.source=r,n.target=i,this.edges.indexOf(n)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(n),null==n.source||null==n.target)throw"Edge source and/or target is null!";if(n.source.edges.indexOf(n)!=-1||n.target.edges.indexOf(n)!=-1)throw"Edge already in source and/or target incidency list!";return n.source.edges.push(n),n.target.edges.push(n),n},r.prototype.remove=function(t){if(t instanceof LGraph){var e=t;if(e.getGraphManager()!=this)throw"Graph not in this graph mgr";if(e!=this.rootGraph&&(null==e.parent||e.parent.graphManager!=this))throw"Invalid parent node!";var n=[];n=n.concat(e.getEdges());for(var r,i=n.length,o=0;o<i;o++)r=n[o],e.remove(r);var a=[];a=a.concat(e.getNodes());var s;i=a.length;for(var o=0;o<i;o++)s=a[o],e.remove(s);e==this.rootGraph&&this.setRootGraph(null);var u=this.graphs.indexOf(e);this.graphs.splice(u,1),e.parent=null}else if(t instanceof LEdge){if(null==(r=t))throw"Edge is null!";if(!r.isInterGraph)throw"Not an inter-graph edge!";if(null==r.source||null==r.target)throw"Source and/or target is null!";if(r.source.edges.indexOf(r)==-1||r.target.edges.indexOf(r)==-1)throw"Source and/or target doesn't know this edge!";var u=r.source.edges.indexOf(r);if(r.source.edges.splice(u,1),u=r.target.edges.indexOf(r),r.target.edges.splice(u,1),null==r.source.owner||null==r.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(r.source.owner.getGraphManager().edges.indexOf(r)==-1)throw"Not in owner graph manager's edge list!";var u=r.source.owner.getGraphManager().edges.indexOf(r);r.source.owner.getGraphManager().edges.splice(u,1)}},r.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},r.prototype.getGraphs=function(){return this.graphs},r.prototype.getAllNodes=function(){if(null==this.allNodes){for(var t=[],e=this.getGraphs(),n=e.length,r=0;r<n;r++)t=t.concat(e[r].getNodes());this.allNodes=t}return this.allNodes},r.prototype.resetAllNodes=function(){this.allNodes=null},r.prototype.resetAllEdges=function(){this.allEdges=null},r.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},r.prototype.getAllEdges=function(){if(null==this.allEdges){for(var t=[],e=this.getGraphs(),n=(e.length,0);n<e.length;n++)t=t.concat(e[n].getEdges());t=t.concat(this.edges),this.allEdges=t}return this.allEdges},r.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},r.prototype.setAllNodesToApplyGravitation=function(t){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=t},r.prototype.getRoot=function(){return this.rootGraph},r.prototype.setRootGraph=function(t){if(t.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=t,null==t.parent&&(t.parent=this.layout.newNode("Root node"))},r.prototype.getLayout=function(){return this.layout},r.prototype.isOneAncestorOfOther=function(t,e){if(null==t||null==e)throw"assert failed";if(t==e)return!0;for(var n,r=t.getOwner();;){if(null==(n=r.getParent()))break;if(n==e)return!0;if(null==(r=n.getOwner()))break}for(r=e.getOwner();;){if(null==(n=r.getParent()))break;if(n==t)return!0;if(null==(r=n.getOwner()))break}return!1},r.prototype.calcLowestCommonAncestors=function(){for(var t,e,n,r,i,o=this.getAllEdges(),a=o.length,s=0;s<a;s++)if(t=o[s],e=t.source,n=t.target,t.lca=null,t.sourceInLca=e,t.targetInLca=n,e!=n){for(r=e.getOwner();null==t.lca;){for(i=n.getOwner();null==t.lca;){if(i==r){t.lca=i;break}if(i==this.rootGraph)break;if(null!=t.lca)throw"assert failed";t.targetInLca=i.getParent(),i=t.targetInLca.getOwner()}if(r==this.rootGraph)break;null==t.lca&&(t.sourceInLca=r.getParent(),r=t.sourceInLca.getOwner())}if(null==t.lca)throw"assert failed"}else t.lca=e.getOwner()},r.prototype.calcLowestCommonAncestor=function(t,e){if(t==e)return t.getOwner();for(var n=t.getOwner();;){if(null==n)break;for(var r=e.getOwner();;){if(null==r)break;if(r==n)return r;r=r.getParent().getOwner()}n=n.getParent().getOwner()}return n},r.prototype.calcInclusionTreeDepths=function(t,e){null==t&&null==e&&(t=this.rootGraph,e=1);for(var n,r=t.getNodes(),i=r.length,o=0;o<i;o++)n=r[o],n.inclusionTreeDepth=e,null!=n.child&&this.calcInclusionTreeDepths(n.child,e+1)},r.prototype.includesInvalidEdge=function(){for(var t,e=this.edges.length,n=0;n<e;n++)if(t=this.edges[n],this.isOneAncestorOfOther(t.source,t.target))return!0;return!1},e.exports=r},{}],25:[function(t,e,n){function r(t){this.vGraphObject=t}e.exports=r},{}],26:[function(t,e,n){function r(t,e,n,r){null==n&&null==r&&(r=e),i.call(this,r),null!=t.graphManager&&(t=t.graphManager),this.estimatedSize=o.MIN_VALUE,this.inclusionTreeDepth=o.MAX_VALUE,this.vGraphObject=r,this.edges=[],this.graphManager=t,this.rect=null!=n&&null!=e?new a(e.x,e.y,n.width,n.height):new a}var i=t("./LGraphObject"),o=t("./Integer"),a=t("./RectangleD"),s=t("./LayoutConstants"),u=t("./RandomSeed"),c=t("./PointD"),l=t("./HashSet");r.prototype=Object.create(i.prototype);for(var h in i)r[h]=i[h];r.prototype.getEdges=function(){return this.edges},r.prototype.getChild=function(){return this.child},r.prototype.getOwner=function(){if(null!=this.owner&&!(null==this.owner||this.owner.getNodes().indexOf(this)>-1))throw"assert failed";return this.owner},r.prototype.getWidth=function(){return this.rect.width},r.prototype.setWidth=function(t){this.rect.width=t},r.prototype.getHeight=function(){return this.rect.height},r.prototype.setHeight=function(t){this.rect.height=t},r.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},r.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},r.prototype.getCenter=function(){return new c(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},r.prototype.getLocation=function(){return new c(this.rect.x,this.rect.y)},r.prototype.getRect=function(){return this.rect},r.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},r.prototype.setRect=function(t,e){this.rect.x=t.x,this.rect.y=t.y,this.rect.width=e.width,this.rect.height=e.height},r.prototype.setCenter=function(t,e){this.rect.x=t-this.rect.width/2,this.rect.y=e-this.rect.height/2},r.prototype.setLocation=function(t,e){this.rect.x=t,this.rect.y=e},r.prototype.moveBy=function(t,e){this.rect.x+=t,this.rect.y+=e},r.prototype.getEdgeListToNode=function(t){var e,n=[];for(var r in this.edges)if(e=r,e.target==t){if(e.source!=this)throw"Incorrect edge source!";n.push(e)}return n},r.prototype.getEdgesBetween=function(t){var e,n=[];for(var r in this.edges){if(e=this.edges[r],e.source!=this&&e.target!=this)throw"Incorrect edge source and/or target";e.target!=t&&e.source!=t||n.push(e)}return n},r.prototype.getNeighborsList=function(){var t,e=new l;for(var n in this.edges)if(t=this.edges[n],t.source==this)e.add(t.target);else{if(!t.target==this)throw"Incorrect incidency!";e.add(t.source)}return e},r.prototype.withChildren=function(){var t,e=[];if(e.push(this),null!=this.child)for(var n=this.child.getNodes(),r=0;r<n.length;r++)t=n[r],e=e.concat(t.withChildren());return e},r.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},r.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=Math.floor((this.rect.width+this.rect.height)/2):(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},r.prototype.scatter=function(){var t,e,n=-s.INITIAL_WORLD_BOUNDARY,r=s.INITIAL_WORLD_BOUNDARY;t=s.WORLD_CENTER_X+u.nextDouble()*(r-n)+n;var i=-s.INITIAL_WORLD_BOUNDARY,o=s.INITIAL_WORLD_BOUNDARY;e=s.WORLD_CENTER_Y+u.nextDouble()*(o-i)+i,this.rect.x=t,this.rect.y=e},r.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var t=this.getChild();t.updateBounds(!0),this.rect.x=t.getLeft(),this.rect.y=t.getTop(),this.setWidth(t.getRight()-t.getLeft()+2*s.COMPOUND_NODE_MARGIN),this.setHeight(t.getBottom()-t.getTop()+2*s.COMPOUND_NODE_MARGIN+s.LABEL_HEIGHT)}},r.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==o.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},r.prototype.transform=function(t){var e=this.rect.x;e>s.WORLD_BOUNDARY?e=s.WORLD_BOUNDARY:e<-s.WORLD_BOUNDARY&&(e=-s.WORLD_BOUNDARY);var n=this.rect.y;n>s.WORLD_BOUNDARY?n=s.WORLD_BOUNDARY:n<-s.WORLD_BOUNDARY&&(n=-s.WORLD_BOUNDARY);var r=new c(e,n),i=t.inverseTransformPoint(r);this.setLocation(i.x,i.y)},r.prototype.getLeft=function(){return this.rect.x},r.prototype.getRight=function(){return this.rect.x+this.rect.width},r.prototype.getTop=function(){return this.rect.y},r.prototype.getBottom=function(){return this.rect.y+this.rect.height},r.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},e.exports=r},{"./HashSet":18,"./Integer":21,"./LGraphObject":25,"./LayoutConstants":28,"./PointD":30,"./RandomSeed":31,"./RectangleD":32}],27:[function(t,e,n){function r(t){f.call(this),this.layoutQuality=i.DEFAULT_QUALITY,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=i.DEFAULT_INCREMENTAL,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new o,this.graphManager=new a(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=t&&(this.isRemoteUse=t)}var i=t("./LayoutConstants"),o=t("./HashMap"),a=t("./LGraphManager"),s=t("./LNode"),u=t("./LEdge"),c=t("./LGraph"),l=t("./PointD"),h=t("./Transform"),f=t("./Emitter"),d=t("./HashSet");r.RANDOM_SEED=1,r.prototype=Object.create(f.prototype),r.prototype.getGraphManager=function(){return this.graphManager},r.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},r.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},r.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},r.prototype.newGraphManager=function(){var t=new a(this);return this.graphManager=t,t},r.prototype.newGraph=function(t){return new c(null,this.graphManager,t)},r.prototype.newNode=function(t){return new s(this.graphManager,t)},r.prototype.newEdge=function(t){return new u(null,null,t)},r.prototype.runLayout=function(){this.isLayoutFinished=!1,this.initParameters();var t;if(null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge())t=!1;else{if(this.isSubLayout||(new Date).getTime(),t=this.layout(),!this.isSubLayout){(new Date).getTime()}}return t&&(this.isSubLayout||this.doPostLayout()),this.isLayoutFinished=!0,t},r.prototype.doPostLayout=function(){this.transform(),this.update()},r.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var t=this.graphManager.getAllEdges(),e=0;e<t.length;e++)t[e];for(var n=this.graphManager.getRoot().getNodes(),e=0;e<n.length;e++)n[e];this.update(this.graphManager.getRoot())}},r.prototype.update=function(t){if(null==t)this.update2();else if(t instanceof s){var e=t;if(null!=e.getChild())for(var n=e.getChild().getNodes(),r=0;r<n.length;r++)update(n[r]);if(null!=e.vGraphObject){var i=e.vGraphObject;i.update(e)}}else if(t instanceof u){var o=t;if(null!=o.vGraphObject){var a=o.vGraphObject;a.update(o)}}else if(t instanceof c){var l=t;if(null!=l.vGraphObject){var h=l.vGraphObject;h.update(l)}}},r.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=i.DEFAULT_QUALITY,this.animationDuringLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.incremental=i.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(animationOnLayout=!1)},r.prototype.transform=function(t){if(void 0==t)this.transform(new l(0,0));else{var e=new h,n=this.graphManager.getRoot().updateLeftTop();if(null!=n){e.setWorldOrgX(t.x),e.setWorldOrgY(t.y),e.setDeviceOrgX(n.x),e.setDeviceOrgY(n.y);for(var r,i=this.getAllNodes(),o=0;o<i.length;o++)r=i[o],r.transform(e)}}},r.prototype.positionNodesRandomly=function(t){if(void 0==t)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var e,n,r=t.getNodes(),i=0;i<r.length;i++)e=r[i],n=e.getChild(),null==n?e.scatter():0==n.getNodes().length?e.scatter():(this.positionNodesRandomly(n),e.updateBounds())},r.prototype.getFlatForest=function(){for(var t=[],e=!0,n=this.graphManager.getRoot().getNodes(),r=!0,i=0;i<n.length;i++)null!=n[i].getChild()&&(r=!1);if(!r)return t;var a=new d,s=[],u=new o,c=[];for(c=c.concat(n);c.length>0&&e;){for(s.push(c[0]);s.length>0&&e;){var l=s[0];s.splice(0,1),a.add(l);for(var h=l.getEdges(),i=0;i<h.length;i++){var f=h[i].getOtherEnd(l);if(u.get(l)!=f){if(a.contains(f)){e=!1;break}s.push(f),u.put(f,l)}}}if(e){var p=[];a.addAllTo(p),t.push(p);for(var i=0;i<p.length;i++){var g=p[i],v=c.indexOf(g);v>-1&&c.splice(v,1)}a=new d,u=new o}else t=[]}return t},r.prototype.createDummyNodesForBendpoints=function(t){for(var e=[],n=t.source,r=this.graphManager.calcLowestCommonAncestor(t.source,t.target),i=0;i<t.bendpoints.length;i++){var o=this.newNode(null);o.setRect(new Point(0,0),new Dimension(1,1)),r.add(o);var a=this.newEdge(null);this.graphManager.add(a,n,o),e.add(o),n=o}var a=this.newEdge(null);return this.graphManager.add(a,n,t.target),this.edgeToDummyNodes.put(t,e),t.isInterGraph()?this.graphManager.remove(t):r.remove(t),e},r.prototype.createBendpointsFromDummyNodes=function(){var t=[];t=t.concat(this.graphManager.getAllEdges()),t=this.edgeToDummyNodes.keySet().concat(t);for(var e=0;e<t.length;e++){var n=t[e];if(n.bendpoints.length>0){for(var r=this.edgeToDummyNodes.get(n),i=0;i<r.length;i++){var o=r[i],a=new l(o.getCenterX(),o.getCenterY()),s=n.bendpoints.get(i);s.x=a.x,s.y=a.y,o.getOwner().remove(o)}this.graphManager.add(n,n.source,n.target)}}},r.transform=function(t,e,n,r){if(void 0!=n&&void 0!=r){var i=e;if(t<=50){i-=(e-e/n)/50*(50-t)}else{i+=(e*r-e)/50*(t-50)}return i}var o,a;return t<=50?(o=9*e/500,a=e/10):(o=9*e/50,a=-8*e),o*t+a},r.findCenterOfTree=function(t){var e=[];e=e.concat(t);var n=[],r=new o,i=!1,a=null;1!=e.length&&2!=e.length||(i=!0,a=e[0]);for(var s=0;s<e.length;s++){var u=e[s],c=u.getNeighborsList().size();r.put(u,u.getNeighborsList().size()),1==c&&n.push(u)}var l=[];for(l=l.concat(n);!i;){var h=[];h=h.concat(l),l=[];for(var s=0;s<e.length;s++){var u=e[s],f=e.indexOf(u);f>=0&&e.splice(f,1);var d=u.getNeighborsList();for(var p in d.set){var g=d.set[p];if(n.indexOf(g)<0){var v=r.get(g),y=v-1;1==y&&l.push(g),r.put(g,y)}}}n=n.concat(l),1!=e.length&&2!=e.length||(i=!0,a=e[0])}return a},r.prototype.setGraphManager=function(t){this.graphManager=t},e.exports=r},{"./Emitter":12,"./HashMap":17,"./HashSet":18,"./LEdge":22,"./LGraph":23,"./LGraphManager":24,"./LNode":26,"./LayoutConstants":28,"./PointD":30,"./Transform":34}],28:[function(t,e,n){function r(){}r.PROOF_QUALITY=0,r.DEFAULT_QUALITY=1,r.DRAFT_QUALITY=2,r.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,r.DEFAULT_INCREMENTAL=!1,r.DEFAULT_ANIMATION_ON_LAYOUT=!0,r.DEFAULT_ANIMATION_DURING_LAYOUT=!1,r.DEFAULT_ANIMATION_PERIOD=50,r.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,r.DEFAULT_GRAPH_MARGIN=10,r.LABEL_HEIGHT=20,r.COMPOUND_NODE_MARGIN=5,r.SIMPLE_NODE_SIZE=40,r.SIMPLE_NODE_HALF_SIZE=r.SIMPLE_NODE_SIZE/2,r.EMPTY_COMPOUND_NODE_SIZE=40,r.MIN_EDGE_LENGTH=1,r.WORLD_BOUNDARY=1e6,r.INITIAL_WORLD_BOUNDARY=r.WORLD_BOUNDARY/1e3,r.WORLD_CENTER_X=1200,r.WORLD_CENTER_Y=900,e.exports=r},{}],29:[function(t,e,n){function r(t,e,n){this.x=null,this.y=null,null==t&&null==e&&null==n?(this.x=0,this.y=0):"number"==typeof t&&"number"==typeof e&&null==n?(this.x=t,this.y=e):"Point"==t.constructor.name&&null==e&&null==n&&(n=t,this.x=n.x,this.y=n.y)}r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.getLocation=function(){return new r(this.x,this.y)},r.prototype.setLocation=function(t,e,n){"Point"==t.constructor.name&&null==e&&null==n?(n=t,this.setLocation(n.x,n.y)):"number"==typeof t&&"number"==typeof e&&null==n&&(parseInt(t)==t&&parseInt(e)==e?this.move(t,e):(this.x=Math.floor(t+.5),this.y=Math.floor(e+.5)))},r.prototype.move=function(t,e){this.x=t,this.y=e},r.prototype.translate=function(t,e){this.x+=t,this.y+=e},r.prototype.equals=function(t){if("Point"==t.constructor.name){var e=t;return this.x==e.x&&this.y==e.y}return this==t},r.prototype.toString=function(){return(new r).constructor.name+"[x="+this.x+",y="+this.y+"]"},e.exports=r},{}],30:[function(t,e,n){function r(t,e){null==t&&null==e?(this.x=0,this.y=0):(this.x=t,this.y=e)}r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.setX=function(t){this.x=t},r.prototype.setY=function(t){this.y=t},r.prototype.getDifference=function(t){
return new DimensionD(this.x-t.x,this.y-t.y)},r.prototype.getCopy=function(){return new r(this.x,this.y)},r.prototype.translate=function(t){return this.x+=t.width,this.y+=t.height,this},e.exports=r},{}],31:[function(t,e,n){function r(){}r.seed=1,r.x=0,r.nextDouble=function(){return r.x=1e4*Math.sin(r.seed++),r.x-Math.floor(r.x)},e.exports=r},{}],32:[function(t,e,n){function r(t,e,n,r){this.x=0,this.y=0,this.width=0,this.height=0,null!=t&&null!=e&&null!=n&&null!=r&&(this.x=t,this.y=e,this.width=n,this.height=r)}r.prototype.getX=function(){return this.x},r.prototype.setX=function(t){this.x=t},r.prototype.getY=function(){return this.y},r.prototype.setY=function(t){this.y=t},r.prototype.getWidth=function(){return this.width},r.prototype.setWidth=function(t){this.width=t},r.prototype.getHeight=function(){return this.height},r.prototype.setHeight=function(t){this.height=t},r.prototype.getRight=function(){return this.x+this.width},r.prototype.getBottom=function(){return this.y+this.height},r.prototype.intersects=function(t){return!(this.getRight()<t.x)&&(!(this.getBottom()<t.y)&&(!(t.getRight()<this.x)&&!(t.getBottom()<this.y)))},r.prototype.getCenterX=function(){return this.x+this.width/2},r.prototype.getMinX=function(){return this.getX()},r.prototype.getMaxX=function(){return this.getX()+this.width},r.prototype.getCenterY=function(){return this.y+this.height/2},r.prototype.getMinY=function(){return this.getY()},r.prototype.getMaxY=function(){return this.getY()+this.height},r.prototype.getWidthHalf=function(){return this.width/2},r.prototype.getHeightHalf=function(){return this.height/2},e.exports=r},{}],33:[function(t,e,n){e.exports=function(t){t.toBeTiled={},t.getToBeTiled=function(e){var n=e.data("id");if(null!=t.toBeTiled[n])return t.toBeTiled[n];var r=e.children();if(null==r||0==r.length)return t.toBeTiled[n]=!1,!1;for(var i=0;i<r.length;i++){var o=r[i];if(t.getNodeDegree(o)>0)return t.toBeTiled[n]=!1,!1;if(null!=o.children()&&0!=o.children().length){if(!t.getToBeTiled(o))return t.toBeTiled[n]=!1,!1}else t.toBeTiled[o.data("id")]=!1}return t.toBeTiled[n]=!0,!0},t.getNodeDegree=function(e){var n=e.id();return t.options.eles.edges().filter(function(t,e){"number"==typeof t&&(t=e);var r=t.data("source"),i=t.data("target");if(r!=i&&(r==n||i==n))return!0}).length},t.getNodeDegreeWithChildren=function(e){for(var n=t.getNodeDegree(e),r=e.children(),i=0;i<r.length;i++){var o=r[i];n+=t.getNodeDegreeWithChildren(o)}return n},t.groupZeroDegreeMembers=function(){for(var e=[],n=[],r=this,i={},o=0;o<t.options.eles.nodes().length;o++)i[t.options.eles.nodes()[o].id()]=!0;for(var a=t.options.eles.nodes().filter(function(t,e){"number"==typeof t&&(t=e);var n=t.data("parent");return void 0==n||i[n]||(n=void 0),0==r.getNodeDegreeWithChildren(t)&&(void 0==n||void 0!=n&&!r.getToBeTiled(t.parent()[0]))}),o=0;o<a.length;o++){var s=a[o],u=s.parent().id();void 0==u||i[u]||(u=void 0),void 0===e[u]&&(e[u]=[]),e[u]=e[u].concat(s)}for(var u in e)if(e[u].length>1){var c="DummyCompound_"+u;if(n[c]=e[u],t.options.cy.getElementById(c).empty()){t.options.cy.add({group:"nodes",data:{id:c,parent:u}});var l=t.options.cy.nodes()[t.options.cy.nodes().length-1];t.options.eles=t.options.eles.union(l),l.hide();for(var o=0;o<e[u].length;o++){0==o&&l.scratch("coseBilkent",{tempchildren:[]});var s=e[u][o],h=s.scratch("coseBilkent");h||(h={},s.scratch("coseBilkent",h)),h.dummy_parent_id=c,t.options.cy.add({group:"nodes",data:{parent:c,width:s.width(),height:s.height()}});var f=t.options.cy.nodes()[t.options.cy.nodes().length-1];f.hide(),f.css("width",f.data("width")),f.css("height",f.data("height")),f.width(),l.scratch("coseBilkent").tempchildren.push(f)}}}return n},t.performDFSOnCompounds=function(e){var n=[],r=t.getTopMostNodes(t.options.eles.nodes());return t.fillCompexOrderByDFS(n,r),n},t.fillCompexOrderByDFS=function(e,n){for(var r=0;r<n.length;r++){var i=n[r];t.fillCompexOrderByDFS(e,i.children()),t.getToBeTiled(i)&&e.push(i)}},t.clearCompounds=function(){var e=[],n=t.performDFSOnCompounds(t.options);t.compoundOrder=n,t.processChildrenList(t.root,t.getTopMostNodes(t.options.eles.nodes()),t.layout);for(var r=0;r<n.length;r++){var i=t.idToLNode[n[r].id()];e[n[r].id()]=n[r].children(),i.child=null}return t.tileCompoundMembers(e)},t.clearZeroDegreeMembers=function(e){var n=[];for(var r in e){var i=t.idToLNode[r];n[r]=t.tileNodes(e[r]),i.rect.width=n[r].width,i.rect.height=n[r].height}return n},t.repopulateCompounds=function(e){for(var n=t.compoundOrder.length-1;n>=0;n--){var r=t.compoundOrder[n].id(),i=t.idToLNode[r],o=parseInt(t.compoundOrder[n].css("padding-left")),a=parseInt(t.compoundOrder[n].css("padding-top"));t.adjustLocations(e[r],i.rect.x,i.rect.y,o,a)}},t.repopulateZeroDegreeMembers=function(e){for(var n in e){var r=t.cy.getElementById(n),i=t.idToLNode[n],o=parseInt(r.css("padding-left")),a=parseInt(r.css("padding-top"));t.adjustLocations(e[n],i.rect.x,i.rect.y,o,a);for(var s=r.scratch("coseBilkent").tempchildren,n=0;n<s.length;n++)s[n].remove();r.remove()}},t.adjustLocations=function(e,n,r,i,o){n+=i,r+=o;for(var a=n,s=0;s<e.rows.length;s++){var u=e.rows[s];n=a;for(var c=0,l=0;l<u.length;l++){var h=u[l];t.cy.getElementById(h.id);h.rect.x=n,h.rect.y=r,n+=h.rect.width+e.horizontalPadding,h.rect.height>c&&(c=h.rect.height)}r+=c+e.verticalPadding}},t.tileCompoundMembers=function(e){var n=[];for(var r in e){var i=t.idToLNode[r];n[r]=t.tileNodes(e[r]),i.rect.width=n[r].width+20,i.rect.height=n[r].height+20}return n},t.tileNodes=function(e){for(var n=this,r="function"==typeof n.options.tilingPaddingVertical?n.options.tilingPaddingVertical.call():n.options.tilingPaddingVertical,i="function"==typeof n.options.tilingPaddingHorizontal?n.options.tilingPaddingHorizontal.call():n.options.tilingPaddingHorizontal,o={rows:[],rowWidth:[],rowHeight:[],width:20,height:20,verticalPadding:r,horizontalPadding:i},a=[],s=0;s<e.length;s++){var u=e[s],c=t.idToLNode[u.id()];if(!u.scratch("coseBilkent")||!u.scratch("coseBilkent").dummy_parent_id){c.owner.remove(c),t.gm.resetAllNodes(),t.gm.getAllNodes()}a.push(c)}a.sort(function(t,e){return t.rect.width*t.rect.height>e.rect.width*e.rect.height?-1:t.rect.width*t.rect.height<e.rect.width*e.rect.height?1:0});for(var s=0;s<a.length;s++){var c=a[s],l=t.cy.getElementById(c.id).parent()[0],h=0;l&&(h=parseInt(l.css("padding-left"))+parseInt(l.css("padding-right"))),0==o.rows.length?t.insertNodeToRow(o,c,0,h):t.canAddHorizontal(o,c.rect.width,c.rect.height)?t.insertNodeToRow(o,c,t.getShortestRowIndex(o),h):t.insertNodeToRow(o,c,o.rows.length,h),t.shiftToLastRow(o)}return o},t.insertNodeToRow=function(t,e,n,r){var i=r;if(n==t.rows.length){var o=[];t.rows.push(o),t.rowWidth.push(i),t.rowHeight.push(0)}var a=t.rowWidth[n]+e.rect.width;t.rows[n].length>0&&(a+=t.horizontalPadding),t.rowWidth[n]=a,t.width<a&&(t.width=a);var s=e.rect.height;n>0&&(s+=t.verticalPadding);var u=0;s>t.rowHeight[n]&&(u=t.rowHeight[n],t.rowHeight[n]=s,u=t.rowHeight[n]-u),t.height+=u,t.rows[n].push(e)},t.getShortestRowIndex=function(t){for(var e=-1,n=Number.MAX_VALUE,r=0;r<t.rows.length;r++)t.rowWidth[r]<n&&(e=r,n=t.rowWidth[r]);return e},t.getLongestRowIndex=function(t){for(var e=-1,n=Number.MIN_VALUE,r=0;r<t.rows.length;r++)t.rowWidth[r]>n&&(e=r,n=t.rowWidth[r]);return e},t.canAddHorizontal=function(e,n,r){var i=t.getShortestRowIndex(e);if(i<0)return!0;var o=e.rowWidth[i];if(o+e.horizontalPadding+n<=e.width)return!0;var a=0;e.rowHeight[i]<r&&i>0&&(a=r+e.verticalPadding-e.rowHeight[i]);var s;s=e.width-o>=n+e.horizontalPadding?(e.height+a)/(o+n+e.horizontalPadding):(e.height+a)/e.width,a=r+e.verticalPadding;var u;return u=e.width<n?(e.height+a)/n:(e.height+a)/e.width,u<1&&(u=1/u),s<1&&(s=1/s),s<u},t.shiftToLastRow=function(e){var n=t.getLongestRowIndex(e),r=e.rowWidth.length-1,i=e.rows[n],o=i[i.length-1],a=o.width+e.horizontalPadding;if(e.width-e.rowWidth[r]>a&&n!=r){i.splice(-1,1),e.rows[r].push(o),e.rowWidth[n]=e.rowWidth[n]-a,e.rowWidth[r]=e.rowWidth[r]+a,e.width=e.rowWidth[t.getLongestRowIndex(e)];for(var s=Number.MIN_VALUE,u=0;u<i.length;u++)i[u].height>s&&(s=i[u].height);n>0&&(s+=e.verticalPadding);var c=e.rowHeight[n]+e.rowHeight[r];e.rowHeight[n]=s,e.rowHeight[r]<o.height+e.verticalPadding&&(e.rowHeight[r]=o.height+e.verticalPadding);var l=e.rowHeight[n]+e.rowHeight[r];e.height+=l-c,t.shiftToLastRow(e)}},t.preLayout=function(){var e=t.groupZeroDegreeMembers();t.tiledMemberPack=t.clearCompounds(),t.tiledZeroDegreeNodes=t.clearZeroDegreeMembers(e)},t.postLayout=function(){for(var e=t.options.eles.nodes(),n=0;n<e.length;n++)t.getToBeTiled(e[n]);t.repopulateZeroDegreeMembers(t.tiledZeroDegreeNodes),t.repopulateCompounds(t.tiledMemberPack),t.options.cy.nodes().updateCompoundBounds()}}},{}],34:[function(t,e,n){function r(t,e){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}var i=t("./PointD");r.prototype.getWorldOrgX=function(){return this.lworldOrgX},r.prototype.setWorldOrgX=function(t){this.lworldOrgX=t},r.prototype.getWorldOrgY=function(){return this.lworldOrgY},r.prototype.setWorldOrgY=function(t){this.lworldOrgY=t},r.prototype.getWorldExtX=function(){return this.lworldExtX},r.prototype.setWorldExtX=function(t){this.lworldExtX=t},r.prototype.getWorldExtY=function(){return this.lworldExtY},r.prototype.setWorldExtY=function(t){this.lworldExtY=t},r.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},r.prototype.setDeviceOrgX=function(t){this.ldeviceOrgX=t},r.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},r.prototype.setDeviceOrgY=function(t){this.ldeviceOrgY=t},r.prototype.getDeviceExtX=function(){return this.ldeviceExtX},r.prototype.setDeviceExtX=function(t){this.ldeviceExtX=t},r.prototype.getDeviceExtY=function(){return this.ldeviceExtY},r.prototype.setDeviceExtY=function(t){this.ldeviceExtY=t},r.prototype.transformX=function(t){var e=0,n=this.lworldExtX;return 0!=n&&(e=this.ldeviceOrgX+(t-this.lworldOrgX)*this.ldeviceExtX/n),e},r.prototype.transformY=function(t){var e=0,n=this.lworldExtY;return 0!=n&&(e=this.ldeviceOrgY+(t-this.lworldOrgY)*this.ldeviceExtY/n),e},r.prototype.inverseTransformX=function(t){var e=0,n=this.ldeviceExtX;return 0!=n&&(e=this.lworldOrgX+(t-this.ldeviceOrgX)*this.lworldExtX/n),e},r.prototype.inverseTransformY=function(t){var e=0,n=this.ldeviceExtY;return 0!=n&&(e=this.lworldOrgY+(t-this.ldeviceOrgY)*this.lworldExtY/n),e},r.prototype.inverseTransformPoint=function(t){return new i(this.inverseTransformX(t.x),this.inverseTransformY(t.y))},e.exports=r},{"./PointD":30}],35:[function(t,e,n){function r(){}r.lastID=0,r.createID=function(t){return r.isPrimitive(t)?t:null!=t.uniqueID?t.uniqueID:(t.uniqueID=r.getString(),r.lastID++,t.uniqueID)},r.getString=function(t){return null==t&&(t=r.lastID),"Object#"+t},r.isPrimitive=function(t){var e=typeof t;return null==t||"object"!=e&&"function"!=e},e.exports=r},{}],36:[function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)n[r]=t[r];for(var r in e)n[r]=e[r];return n}function i(t){f(this),this.options=r(d,t),p(this.options)}var o=t("./DimensionD"),a=(t("./HashMap"),t("./HashSet"),t("./IGeometry"),t("./IMath"),t("./Integer"),t("./Point"),t("./PointD")),s=(t("./RandomSeed"),t("./RectangleD"),t("./Transform"),t("./UniqueIDGeneretor"),t("./LGraphObject"),t("./LGraph"),t("./LEdge"),t("./LGraphManager"),t("./LNode"),t("./Layout"),t("./LayoutConstants")),u=(t("./FDLayout"),t("./FDLayoutConstants")),c=(t("./FDLayoutEdge"),t("./FDLayoutNode"),t("./CoSEConstants")),l=(t("./CoSEEdge"),t("./CoSEGraph"),t("./CoSEGraphManager"),t("./CoSELayout")),h=t("./CoSENode"),f=t("./TilingExtension"),d={ready:function(){},stop:function(){},refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8},p=function(t){null!=t.nodeRepulsion&&(c.DEFAULT_REPULSION_STRENGTH=u.DEFAULT_REPULSION_STRENGTH=t.nodeRepulsion),null!=t.idealEdgeLength&&(c.DEFAULT_EDGE_LENGTH=u.DEFAULT_EDGE_LENGTH=t.idealEdgeLength),null!=t.edgeElasticity&&(c.DEFAULT_SPRING_STRENGTH=u.DEFAULT_SPRING_STRENGTH=t.edgeElasticity),null!=t.nestingFactor&&(c.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=u.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=t.nestingFactor),null!=t.gravity&&(c.DEFAULT_GRAVITY_STRENGTH=u.DEFAULT_GRAVITY_STRENGTH=t.gravity),null!=t.numIter&&(c.MAX_ITERATIONS=u.MAX_ITERATIONS=t.numIter),null!=t.gravityRange&&(c.DEFAULT_GRAVITY_RANGE_FACTOR=u.DEFAULT_GRAVITY_RANGE_FACTOR=t.gravityRange),null!=t.gravityCompound&&(c.DEFAULT_COMPOUND_GRAVITY_STRENGTH=u.DEFAULT_COMPOUND_GRAVITY_STRENGTH=t.gravityCompound),null!=t.gravityRangeCompound&&(c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=t.gravityRangeCompound),c.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=!t.randomize,c.ANIMATE=u.ANIMATE=t.animate};i.prototype.run=function(){var t,e,n=this.options,r=(this.idToLNode={},this.layout=new l),i=this;this.cy=this.options.cy,this.cy.trigger("layoutstart");var o=r.newGraphManager();this.gm=o;var a=this.options.eles.nodes(),s=this.options.eles.edges();this.root=o.addRoot(),this.options.tile?this.preLayout():this.processChildrenList(this.root,this.getTopMostNodes(a),r);for(var u=0;u<s.length;u++){var c=s[u],h=this.idToLNode[c.data("source")],f=this.idToLNode[c.data("target")];o.add(r.newEdge(),h,f).id=c.id()}var d=function(t,e){"number"==typeof t&&(t=e);var n=t.data("id"),r=i.idToLNode[n];return{x:r.getRect().getCenterX(),y:r.getRect().getCenterY()}},p=function(){for(var r,o=function(){n.fit&&n.cy.fit(n.eles.nodes(),n.padding),t||(t=!0,i.cy.one("layoutready",n.ready),i.cy.trigger({type:"layoutready",layout:i}))},a=i.options.refresh,s=0;s<a&&!r;s++)r=i.layout.tick();if(r)return i.options.tile&&i.postLayout(),i.options.eles.nodes().positions(d),o(),i.cy.one("layoutstop",i.options.stop),i.cy.trigger("layoutstop"),e&&cancelAnimationFrame(e),i.options.eles.nodes().removeScratch("coseBilkent"),void(t=!1);var u=i.layout.getPositionsData();n.eles.nodes().positions(function(t,e){if("number"==typeof t&&(t=e),t.scratch("coseBilkent")&&t.scratch("coseBilkent").dummy_parent_id){var n=t.scratch("coseBilkent").dummy_parent_id;return{x:n.x,y:n.y}}for(var r=t.data("id"),i=u[r],o=this;null==i;)o=o.parent()[0],i=u[o.id()],u[r]=i;return{x:i.x,y:i.y}}),o(),e=requestAnimationFrame(p)};return r.addListener("layoutstarted",function(){"during"===i.options.animate&&(e=requestAnimationFrame(p))}),r.runLayout(),"during"!==this.options.animate&&setTimeout(function(){i.options.tile&&i.postLayout(),i.options.eles.nodes().layoutPositions(i,i.options,d),i.options.eles.nodes().removeScratch("coseBilkent"),t=!1},0),this},i.prototype.getTopMostNodes=function(t){for(var e={},n=0;n<t.length;n++)e[t[n].id()]=!0;return t.filter(function(t,n){"number"==typeof t&&(t=n);for(var r=t.parent()[0];null!=r;){if(e[r.id()])return!1;r=r.parent()[0]}return!0})},i.prototype.processChildrenList=function(t,e,n){for(var r=e.length,i=0;i<r;i++){var s=e[i];this.options.eles.nodes().length;var u,c=s.children();if(u=null!=s.width()&&null!=s.height()?t.add(new h(n.graphManager,new a(s.position("x"),s.position("y")),new o(parseFloat(s.width()),parseFloat(s.height())))):t.add(new h(this.graphManager)),u.id=s.data("id"),this.idToLNode[s.data("id")]=u,isNaN(u.rect.x)&&(u.rect.x=0),isNaN(u.rect.y)&&(u.rect.y=0),null!=c&&c.length>0){var l;l=n.getGraphManager().add(n.newGraph(),u),this.processChildrenList(l,c,n)}}},i.prototype.stop=function(){return this.stopped=!0,this.trigger("layoutstop"),this},e.exports=function(t){return i}},{"./CoSEConstants":5,"./CoSEEdge":6,"./CoSEGraph":7,"./CoSEGraphManager":8,"./CoSELayout":9,"./CoSENode":10,"./DimensionD":11,"./FDLayout":13,"./FDLayoutConstants":14,"./FDLayoutEdge":15,"./FDLayoutNode":16,"./HashMap":17,"./HashSet":18,"./IGeometry":19,"./IMath":20,"./Integer":21,"./LEdge":22,"./LGraph":23,"./LGraphManager":24,"./LGraphObject":25,"./LNode":26,"./Layout":27,"./LayoutConstants":28,"./Point":29,"./PointD":30,"./RandomSeed":31,"./RectangleD":32,"./TilingExtension":33,"./Transform":34,"./UniqueIDGeneretor":35}],37:[function(t,e,n){"use strict";var r=t("./Layout"),i=function(t){t("layout","cose-bilkent",r(t))};"undefined"!=typeof cytoscape?i(cytoscape):"undefined"!=typeof define&&define.amd&&define([],i),e.exports=i},{"./Layout":36}],38:[function(t,e,n){!function(){"use strict";var n=function(t,e){function n(t){var e=this.options={};for(var n in i)e[n]=i[n];for(var n in t)e[n]=t[n]}if(t&&e){var r=function(t){return"function"==typeof t},i={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,minLen:function(t){return 1},edgeWeight:function(t){return 1},fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,boundingBox:void 0,ready:function(){},stop:function(){}};n.prototype.run=function(){var t=this.options,n=this,i=t.cy,o=t.eles,a=function(t,e){return r(e)?e.apply(t,[t]):e},s=t.boundingBox||{x1:0,y1:0,w:i.width(),h:i.height()};void 0===s.x2&&(s.x2=s.x1+s.w),void 0===s.w&&(s.w=s.x2-s.x1),void 0===s.y2&&(s.y2=s.y1+s.h),void 0===s.h&&(s.h=s.y2-s.y1);var u=new e.graphlib.Graph({multigraph:!0,compound:!0}),c={},l=function(t,e){null!=e&&(c[t]=e)};l("nodesep",t.nodeSep),l("edgesep",t.edgeSep),l("ranksep",t.rankSep),l("rankdir",t.rankDir),u.setGraph(c),u.setDefaultEdgeLabel(function(){return{}}),u.setDefaultNodeLabel(function(){return{}});for(var h=o.nodes(),f=0;f<h.length;f++){var d=h[f],p=d.boundingBox();u.setNode(d.id(),{width:p.w,height:p.h,name:d.id()})}for(var f=0;f<h.length;f++){var d=h[f];d.isChild()&&u.setParent(d.id(),d.parent().id())}for(var g=o.edges().stdFilter(function(t){return!t.source().isParent()&&!t.target().isParent()}),f=0;f<g.length;f++){var v=g[f];u.setEdge(v.source().id(),v.target().id(),{minlen:a(v,t.minLen),weight:a(v,t.edgeWeight),name:v.id()},v.id())}e.layout(u);for(var y=u.nodes(),f=0;f<y.length;f++){var m=y[f],x=u.node(m);i.getElementById(m).scratch().dagre=x}var b;t.boundingBox?(b={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)},h.forEach(function(t){var e=t.scratch().dagre;b.x1=Math.min(b.x1,e.x),b.x2=Math.max(b.x2,e.x),b.y1=Math.min(b.y1,e.y),b.y2=Math.max(b.y2,e.y)}),b.w=b.x2-b.x1,b.h=b.y2-b.y1):b=s;var w=function(e){if(t.boundingBox){var n=0===b.w?0:(e.x-b.x1)/b.w,r=0===b.h?0:(e.y-b.y1)/b.h;return{x:s.x1+n*s.w,y:s.y1+r*s.h}}return e};return h.layoutPositions(n,t,function(){var t=this.scratch().dagre;return w({x:t.x,y:t.y})}),this},t("layout","dagre",n)}};void 0!==e&&e.exports&&(e.exports=function(e,r){n(e,r||t("dagre"))}),"undefined"!=typeof define&&define.amd&&define("cytoscape-dagre",function(){return n}),"undefined"!=typeof cytoscape&&"undefined"!=typeof dagre&&n(cytoscape,dagre)}()},{dagre:150}],39:[function(t,e,n){(function(r){!function(t){if("object"==typeof n&&void 0!==e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;i="undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this,(i.cytoscapeNgraph||(i.cytoscapeNgraph={})).forcelayout=t()}}(function(){var e;return function e(n,r,i){function o(s,u){if(!r[s]){if(!n[s]){var c="function"==typeof t&&t;if(!u&&c)return c(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var h=r[s]={exports:{}};n[s][0].call(h.exports,function(t){var e=n[s][1][t];return o(e?e:t)},h,h.exports,e,n,r,i)}return r[s].exports}for(var a="function"==typeof t&&t,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){function r(e,n){function r(){if(!k)return D.postMessage(T),L}function f(t,e,n,r){D.postMessage({kind:h.setNodePosition,payload:{nodeId:t,x:e,y:n,z:r}}),E(A[t],{x:e,y:n,z:r})}function d(){return w}function p(t,e){D.postMessage({kind:h.pinNode,payload:{nodeId:t.id,isPinned:e}}),S[t.id]=e}function g(t){return S[t.id]}function v(t){return A[t]}function y(t){return _||m(),_[t]}function m(){_=Object.create(null),e.forEachLink(function(t){_[t.id]={from:v(t.fromId),to:v(t.toId)}})}function x(t){var e=t.data.kind,n=t.data.payload;e===h.cycleComplete&&(b(n.positions,n.systemStable),w=n.bbox,M.fire("cycle",n.iterations,n.systemStable)),e===h.initDone&&(k=!1,r())}function b(t,e){function n(e){var n=t[e],r=A[e];r?E(r,n):A[e]=n}L=e,Object.keys(t).forEach(n)}n=l(n);var w,_,E=n.is3d?i:o,k=!1,N=!1,L=!1,S=Object.create(null),T={kind:h.step},A=Object.create(null),D=a(t("./lib/layoutWorker.js"));D.addEventListener("message",x),function(){if(N)throw new Error("Init request is already sent to the worker");D.postMessage({kind:h.init,payload:{graph:s(e),options:JSON.stringify(n)}}),N=!0}(),function(){function t(t){A[t.id]=r.getNodePosition(t.id)}var r=c(e,n);e.forEachNode(t),w=r.getGraphRect()}();var M={step:r,getNodePosition:v,getLinkPosition:y,pinNode:p,setNodePosition:f,getGraphRect:d,isNodePinned:g};return u(M),M}function i(t,e){t.x=e.x,t.y=e.y,t.z=e.z}function o(t,e){t.x=e.x,t.y=e.y}var a=t("webworkify"),s=t("ngraph.tojson"),u=t("ngraph.events"),c=t("./lib/createLayout.js"),l=t("./options.js"),h=t("./lib/messages.js");e.exports=r},{"./lib/createLayout.js":2,"./lib/layoutWorker.js":3,"./lib/messages.js":4,"./options.js":5,"ngraph.events":6,"ngraph.tojson":35,webworkify:39}],2:[function(t,e,n){function r(t,e){return e=e||{},e.is3d?i(t,e.physics):o(t,e.physics)}var i=t("ngraph.forcelayout3d"),o=i.get2dLayout;e.exports=r},{"ngraph.forcelayout3d":16}],3:[function(t,e,n){function r(t){function e(t){var e=t.data.kind,i=t.data.payload;if(e===s.init){v=o(i.graph);c(v,JSON.parse(i.options))}else e===s.step?h():e===s.pinNode?r(i.nodeId,i.isPinned):e===s.setNodePosition&&n(i.nodeId,i.x,i.y,i.z)}function n(t,e,n,r){u(),p.setNodePosition.apply(p,arguments),b=!1,h()}function r(t,e){u();var n=v.getNode(t);n&&p.pinNode(n,e)}function u(){if(!v)throw new Error("Pin node requested without initialied graph");if(!p)throw new Error("Layout was not created. Something is really wrong here")}function c(e,n){n=a(n),g=n.async,p=i(e,n),e.forEachNode(l),t.postMessage({kind:s.initDone})}function l(t){w[t.id]=p.getNodePosition(t.id)}function h(){u(),m=!0,x||f()}function f(){if(b)return void(x=0);x=setTimeout(function(){d(),m||!g.waitForStep?(m=!1,f()):x=0},0)}function d(){for(var e=0;e<g.stepsPerCycle;++e)b=p.step(),y+=1;y>=g.maxIterations&&(b=!0),t.postMessage({kind:s.cycleComplete,payload:{positions:w,systemStable:b,bbox:p.getGraphRect(),iterations:y}})}var p,g,v,y=0,m=!1,x=0,b=!1,w=Object.create(null);t.addEventListener("message",e)}var i=t("./createLayout.js"),o=t("ngraph.fromjson"),a=t("../options.js"),s=t("./messages.js");e.exports=r},{"../options.js":5,"./createLayout.js":2,"./messages.js":4,"ngraph.fromjson":22}],4:[function(t,e,n){e.exports={init:10,initDone:11,step:12,cycleComplete:13,pinNode:41,setNodePosition:43}},{}],5:[function(t,e,n){function r(t){t=t||{},t.is3d="boolean"==typeof t.is3d&&t.is3d;var e=t.async=t.async||{};return e.stepsPerCycle="number"==typeof e.stepsPerCycle?e.stepsPerCycle:5,e.maxIterations="number"==typeof e.maxIterations?e.maxIterations:Number.POSITIVE_INFINITY,e.waitForStep="boolean"!=typeof e.waitForStep||e.waitForStep,t}e.exports=r},{}],6:[function(t,e,n){function r(t){var e=Object.create(null);return{on:function(n,r,i){if("function"!=typeof r)throw new Error("callback is expected to be a function");var o=e[n];return o||(o=e[n]=[]),o.push({callback:r,ctx:i}),t},off:function(n,r){if(void 0===n)return e=Object.create(null),t;if(e[n]){if("function"!=typeof r)delete e[n];else for(var i=e[n],o=0;o<i.length;++o)i[o].callback===r&&i.splice(o,1)}return t},fire:function(n){var r=e[n];if(!r)return t;var i;arguments.length>1&&(i=Array.prototype.splice.call(arguments,1));for(var o=0;o<r.length;++o){var a=r[o];a.callback.apply(a.ctx,i)}return t}}}function i(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}e.exports=function(t){i(t);var e=r(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},{}],7:[function(t,e,n){function r(t,e,n){if("[object Array]"===Object.prototype.toString.call(n))for(var r=0;r<n.length;++r)i(t,e,n[r]);else for(var o in t)i(t,e,o)}function i(t,e,n){if(t.hasOwnProperty(n)){if("function"==typeof e[n])return;e[n]=function(r){return void 0!==r?(t[n]=r,e):t[n]}}}e.exports=r},{}],8:[function(t,e,n){function r(e,n){function r(t,n){var r;if(void 0===n)r="string"==typeof t?t:t.id;else{var i=e.hasLink(t,n);if(!i)return;r=i.id}return x[r]}function o(t){return m[t]}function a(t){for(var e=0;e<t.length;++e){var n=t[e];"add"===n.changeType?(n.node&&s(n.node.id),n.link&&c(n.link)):"remove"===n.changeType&&(n.node&&u(n.node),n.link&&l(n.link))}}function s(t){var n=m[t];if(!n){var r=e.getNode(t);if(!r)throw new Error("initBody() was called with unknown node id");var i=r.position;if(!i){var o=h(r);i=y.getBestNewBodyPosition(o)}n=y.addBodyAt(i),m[t]=n,f(t),d(r)&&(n.isPinned=!0)}}function u(t){var e=t.id,n=m[e];n&&(m[e]=null,delete m[e],y.removeBody(n))}function c(t){f(t.fromId),f(t.toId);var e=m[t.fromId],n=m[t.toId],r=y.addSpring(e,n,t.length);b(t,r),x[t.id]=r}function l(t){var n=x[t.id];if(n){var r=e.getNode(t.fromId),i=e.getNode(t.toId);r&&f(r.id),i&&f(i.id),delete x[t.id],y.removeSpring(n)}}function h(t){var e=[];if(!t.links)return e;for(var n=Math.min(t.links.length,2),r=0;r<n;++r){var i=t.links[r],o=i.fromId!==t.id?m[i.fromId]:m[i.toId];o&&o.pos&&e.push(o)}return e}function f(t){m[t].mass=g(t)}function d(t){return t&&(t.isPinned||t.data&&t.data.isPinned)}function p(t){var e=m[t];return e||(s(t),e=m[t]),e}function g(t){return 1+e.getLinks(t).length/3}if(!e)throw new Error("Graph structure cannot be undefined");var v=t("ngraph.physics.simulator"),y=v(n),m="function"==typeof Object.create?Object.create(null):{},x={},b=y.settings.springTransform||i;return function(){e.forEachNode(function(t){s(t.id)}),e.forEachLink(c)}(),function(){e.on("changed",a)}(),{step:function(){return y.step()},getNodePosition:function(t){return p(t).pos},setNodePosition:function(t){var e=p(t);e.setPosition.apply(e,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(t){var e=x[t];if(e)return{from:e.from.pos,to:e.to.pos}},getGraphRect:function(){return y.getBBox()},pinNode:function(t,e){p(t.id).isPinned=!!e},isNodePinned:function(t){return p(t.id).isPinned},dispose:function(){e.off("changed",a)},getBody:o,getSpring:r,simulator:y}}function i(){}e.exports=r,e.exports.simulator=t("ngraph.physics.simulator")},{"ngraph.physics.simulator":9}],9:[function(t,e,n){function r(e){function n(){var t,e=h.length;if(e)for(d.insertBodies(h);e--;)t=h[e],t.isPinned||(t.force.reset(),d.updateBodyForce(t),v.update(t));for(e=f.length;e--;)g.update(f[e])}var r=t("./lib/spring"),i=t("ngraph.expose");e=t("ngraph.merge")(e,{springLength:30,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20,stableThreshold:.009});var o=e.createQuadTree||t("ngraph.quadtreebh"),a=e.createBounds||t("./lib/bounds"),s=e.createDragForce||t("./lib/dragForce"),u=e.createSpringForce||t("./lib/springForce"),c=e.integrator||t("./lib/eulerIntegrator"),l=e.createBody||t("./lib/createBody"),h=[],f=[],d=o(e),p=a(h,e),g=u(e),v=s(e),y={bodies:h,springs:f,settings:e,step:function(){n();var t=c(h,e.timeStep);return p.update(),t<e.stableThreshold},addBody:function(t){if(!t)throw new Error("Body is required");return h.push(t),t},addBodyAt:function(t){if(!t)throw new Error("Body position is required");var e=l(t);return h.push(e),e},removeBody:function(t){if(t){var e=h.indexOf(t);if(!(e<0))return h.splice(e,1),0===h.length&&p.reset(),!0}},addSpring:function(t,e,n,i,o){if(!t||!e)throw new Error("Cannot add null spring to force simulator");"number"!=typeof n&&(n=-1);var a=new r(t,e,n,o>=0?o:-1,i);return f.push(a),a},removeSpring:function(t){if(t){var e=f.indexOf(t);return e>-1?(f.splice(e,1),!0):void 0}},getBestNewBodyPosition:function(t){return p.getBestNewPosition(t)},getBBox:function(){return p.box},gravity:function(t){return void 0!==t?(e.gravity=t,d.options({gravity:t}),this):e.gravity},theta:function(t){return void 0!==t?(e.theta=t,d.options({theta:t}),this):e.theta}};return i(e,y),y}e.exports=r},{"./lib/bounds":10,"./lib/createBody":11,"./lib/dragForce":12,"./lib/eulerIntegrator":13,"./lib/spring":14,"./lib/springForce":15,"ngraph.expose":7,"ngraph.merge":24,"ngraph.quadtreebh":26}],10:[function(t,e,n){e.exports=function(e,n){function r(){var t=e.length;if(0!==t){for(var n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MIN_VALUE;t--;){var s=e[t];s.isPinned?(s.pos.x=s.prevPos.x,s.pos.y=s.prevPos.y):(s.prevPos.x=s.pos.x,s.prevPos.y=s.pos.y),s.pos.x<n&&(n=s.pos.x),s.pos.x>i&&(i=s.pos.x),s.pos.y<r&&(r=s.pos.y),s.pos.y>a&&(a=s.pos.y)}o.x1=n,o.x2=i,o.y1=r,o.y2=a}}var i=t("ngraph.random").random(42),o={x1:0,y1:0,x2:0,y2:0};return{box:o,update:r,reset:function(){o.x1=o.y1=0,o.x2=o.y2=0},getBestNewPosition:function(t){var e=o,r=0,a=0;if(t.length){for(var s=0;s<t.length;++s)r+=t[s].pos.x,a+=t[s].pos.y;r/=t.length,a/=t.length}else r=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2;var u=n.springLength;return{x:r+i.next(u)-u/2,y:a+i.next(u)-u/2}}}}},{"ngraph.random":34}],11:[function(t,e,n){var r=t("ngraph.physics.primitives");e.exports=function(t){return new r.Body(t)}},{"ngraph.physics.primitives":25}],12:[function(t,e,n){e.exports=function(e){var n=t("ngraph.merge"),r=t("ngraph.expose");e=n(e,{dragCoeff:.02});var i={update:function(t){t.force.x-=e.dragCoeff*t.velocity.x,t.force.y-=e.dragCoeff*t.velocity.y}};return r(e,i,["dragCoeff"]),i}},{"ngraph.expose":7,"ngraph.merge":24}],13:[function(t,e,n){function r(t,e){var n,r=0,i=0,o=0,a=0,s=t.length;for(n=0;n<s;++n){var u=t[n],c=e/u.mass;u.velocity.x+=c*u.force.x,u.velocity.y+=c*u.force.y;var l=u.velocity.x,h=u.velocity.y,f=Math.sqrt(l*l+h*h);f>1&&(u.velocity.x=l/f,u.velocity.y=h/f),r=e*u.velocity.x,o=e*u.velocity.y,u.pos.x+=r,u.pos.y+=o,i+=Math.abs(r),a+=Math.abs(o)}return(i*i+a*a)/t.length}e.exports=r},{}],14:[function(t,e,n){function r(t,e,n,r,i){this.from=t,this.to=e,this.length=n,this.coeff=r,this.weight="number"==typeof i?i:1}e.exports=r},{}],15:[function(t,e,n){e.exports=function(e){var n=t("ngraph.merge"),r=t("ngraph.random").random(42),i=t("ngraph.expose");e=n(e,{springCoeff:2e-4,springLength:80});var o={update:function(t){var n=t.from,i=t.to,o=t.length<0?e.springLength:t.length,a=i.pos.x-n.pos.x,s=i.pos.y-n.pos.y,u=Math.sqrt(a*a+s*s);0===u&&(a=(r.nextDouble()-.5)/50,s=(r.nextDouble()-.5)/50,u=Math.sqrt(a*a+s*s));var c=u-o,l=(!t.coeff||t.coeff<0?e.springCoeff:t.coeff)*c/u*t.weight;n.force.x+=l*a,n.force.y+=l*s,i.force.x-=l*a,i.force.y-=l*s}};return i(e,o,["springCoeff","springLength"]),o}},{"ngraph.expose":7,"ngraph.merge":24,"ngraph.random":34}],16:[function(t,e,n){function r(e,n){return n=t("ngraph.merge")(n,{createQuadTree:t("ngraph.quadtreebh3d"),createBounds:t("./lib/bounds"),createDragForce:t("./lib/dragForce"),createSpringForce:t("./lib/springForce"),integrator:t("./lib/eulerIntegrator"),createBody:t("./lib/createBody")}),r.get2dLayout(e,n)}e.exports=r,r.get2dLayout=t("ngraph.forcelayout")},{"./lib/bounds":17,"./lib/createBody":18,"./lib/dragForce":19,"./lib/eulerIntegrator":20,"./lib/springForce":21,"ngraph.forcelayout":8,"ngraph.merge":24,"ngraph.quadtreebh3d":30}],17:[function(t,e,n){e.exports=function(e,n){function r(){var t=e.length;if(0!==t){for(var n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MAX_VALUE,a=Number.MIN_VALUE,s=Number.MIN_VALUE,u=Number.MIN_VALUE;t--;){var c=e[t];c.isPinned?(c.pos.x=c.prevPos.x,c.pos.y=c.prevPos.y,c.pos.z=c.prevPos.z):(c.prevPos.x=c.pos.x,c.prevPos.y=c.pos.y,c.prevPos.z=c.pos.z),c.pos.x<n&&(n=c.pos.x),c.pos.x>a&&(a=c.pos.x),c.pos.y<r&&(r=c.pos.y),c.pos.y>s&&(s=c.pos.y),c.pos.z<i&&(i=c.pos.z),c.pos.z>u&&(u=c.pos.z)}o.x1=n,o.x2=a,o.y1=r,o.y2=s,o.z1=i,o.z2=u}}var i=t("ngraph.random").random(42),o={x1:0,y1:0,z1:0,x2:0,y2:0,z2:0};return{box:o,update:r,reset:function(){o.x1=o.y1=0,
o.x2=o.y2=0,o.z1=o.z2=0},getBestNewPosition:function(t){var e=o,r=0,a=0,s=0;if(t.length){for(var u=0;u<t.length;++u)r+=t[u].pos.x,a+=t[u].pos.y,s+=t[u].pos.z;r/=t.length,a/=t.length,s/=t.length}else r=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,s=(e.z1+e.z2)/2;var c=n.springLength;return{x:r+i.next(c)-c/2,y:a+i.next(c)-c/2,z:s+i.next(c)-c/2}}}}},{"ngraph.random":34}],18:[function(t,e,n){var r=t("ngraph.physics.primitives");e.exports=function(t){return new r.Body3d(t)}},{"ngraph.physics.primitives":25}],19:[function(t,e,n){e.exports=function(e){var n=t("ngraph.merge"),r=t("ngraph.expose");e=n(e,{dragCoeff:.02});var i={update:function(t){t.force.x-=e.dragCoeff*t.velocity.x,t.force.y-=e.dragCoeff*t.velocity.y,t.force.z-=e.dragCoeff*t.velocity.z}};return r(e,i,["dragCoeff"]),i}},{"ngraph.expose":7,"ngraph.merge":24}],20:[function(t,e,n){function r(t,e){var n,r=0,i=0,o=0,a=0,s=0,u=0,c=t.length;for(n=0;n<c;++n){var l=t[n],h=e/l.mass;l.velocity.x+=h*l.force.x,l.velocity.y+=h*l.force.y,l.velocity.z+=h*l.force.z;var f=l.velocity.x,d=l.velocity.y,p=l.velocity.z,g=Math.sqrt(f*f+d*d+p*p);g>1&&(l.velocity.x=f/g,l.velocity.y=d/g,l.velocity.z=p/g),r=e*l.velocity.x,o=e*l.velocity.y,s=e*l.velocity.z,l.pos.x+=r,l.pos.y+=o,l.pos.z+=s,i+=Math.abs(r),a+=Math.abs(o),u+=Math.abs(s)}return(i*i+a*a+u*u)/t.length}e.exports=r},{}],21:[function(t,e,n){e.exports=function(e){var n=t("ngraph.merge"),r=t("ngraph.random").random(42),i=t("ngraph.expose");e=n(e,{springCoeff:2e-4,springLength:80});var o={update:function(t){var n=t.from,i=t.to,o=t.length<0?e.springLength:t.length,a=i.pos.x-n.pos.x,s=i.pos.y-n.pos.y,u=i.pos.z-n.pos.z,c=Math.sqrt(a*a+s*s+u*u);0===c&&(a=(r.nextDouble()-.5)/50,s=(r.nextDouble()-.5)/50,u=(r.nextDouble()-.5)/50,c=Math.sqrt(a*a+s*s+u*u));var l=c-o,h=(!t.coeff||t.coeff<0?e.springCoeff:t.coeff)*l/c*t.weight;n.force.x+=h*a,n.force.y+=h*s,n.force.z+=h*u,i.force.x-=h*a,i.force.y-=h*s,i.force.z-=h*u}};return i(e,o,["springCoeff","springLength"]),o}},{"ngraph.expose":7,"ngraph.merge":24,"ngraph.random":34}],22:[function(t,e,n){function r(t,e,n){var r;e=e||i,n=n||i,r="string"==typeof t?JSON.parse(t):t;var a,s=o();if(void 0===r.links||void 0===r.nodes)throw new Error("Cannot load graph without links and nodes");for(a=0;a<r.nodes.length;++a){var u=e(r.nodes[a]);if(!u.hasOwnProperty("id"))throw new Error("Graph node format is invalid: Node id is missing");s.addNode(u.id,u.data)}for(a=0;a<r.links.length;++a){var c=n(r.links[a]);if(!c.hasOwnProperty("fromId")||!c.hasOwnProperty("toId"))throw new Error("Graph link format is invalid. Both fromId and toId are required");s.addLink(c.fromId,c.toId,c.data)}return s}function i(t){return t}e.exports=r;var o=t("ngraph.graph")},{"ngraph.graph":23}],23:[function(t,e,n){function r(t){function e(t,e){O.push({link:t,changeType:e})}function n(t,e){O.push({node:t,changeType:e})}function r(t,e){if(void 0===t)throw new Error("Invalid node identifier");F();var n=u(t);return n?B(n,"update"):(n=new o(t),M++,B(n,"add")),n.data=e,T[t]=n,z(),n}function u(t){return T[t]}function h(t){var e=u(t);if(!e)return!1;if(F(),e.links)for(;e.links.length;){var n=e.links[0];v(n)}return delete T[t],M--,B(e,"remove"),z(),!0}function f(t,e,n){F();var i=u(t)||r(t),o=u(e)||r(e),s=C(t,e,n);return A.push(s),a(i,s),t!==e&&a(o,s),R(s,"add"),z(),s}function d(t,e,n){return new s(t,e,n,c(t,e))}function p(t,e,n){var r=c(t,e),i=D.hasOwnProperty(r);if(i||y(t,e)){i||(D[r]=0);var o="@"+ ++D[r];r=c(t+o,e+o)}return new s(t,e,n,r)}function g(t){var e=u(t);return e?e.links:null}function v(t){if(!t)return!1;var e=i(t,A);if(e<0)return!1;F(),A.splice(e,1);var n=u(t.fromId),r=u(t.toId);return n&&(e=i(t,n.links))>=0&&n.links.splice(e,1),r&&(e=i(t,r.links))>=0&&r.links.splice(e,1),R(t,"remove"),z(),!0}function y(t,e){var n,r=u(t);if(!r||!r.links)return null;for(n=0;n<r.links.length;++n){var i=r.links[n];if(i.fromId===t&&i.toId===e)return i}return null}function m(){F(),I(function(t){h(t.id)}),z()}function x(t){var e,n;if("function"==typeof t)for(e=0,n=A.length;e<n;++e)t(A[e])}function b(t,e,n){var r=u(t);if(r&&r.links&&"function"==typeof e)return n?_(r.links,t,e):w(r.links,t,e)}function w(t,e,n){for(var r=0;r<t.length;++r){var i=t[r];if(n(T[i.fromId===e?i.toId:i.fromId],i))return!0}}function _(t,e,n){for(var r=0;r<t.length;++r){var i=t[r];if(i.fromId===e&&n(T[i.toId],i))return!0}}function E(){}function k(){P+=1}function N(){0===(P-=1)&&O.length>0&&(j.fire("changed",O),O.length=0)}function L(t){if("function"==typeof t)for(var e=Object.keys(T),n=0;n<e.length;++n)if(t(T[e[n]]))return!0}function S(t){if("function"==typeof t){var e;for(e in T)if(t(T[e]))return!0}}t=t||{},void 0===t.uniqueLinkId&&(t.uniqueLinkId=!0);var T="function"==typeof Object.create?Object.create(null):{},A=[],D={},M=0,P=0,I=function(){return Object.keys?L:S}(),C=t.uniqueLinkId?p:d,O=[],R=E,B=E,F=E,z=E,j={addNode:r,addLink:f,removeLink:v,removeNode:h,getNode:u,getNodesCount:function(){return M},getLinksCount:function(){return A.length},getLinks:g,forEachNode:I,forEachLinkedNode:b,forEachLink:x,beginUpdate:F,endUpdate:z,clear:m,hasLink:y,getLink:y};return l(j),function(){function t(){return j.beginUpdate=F=k,j.endUpdate=z=N,R=e,B=n,j.on=r,r.apply(j,arguments)}var r=j.on;j.on=t}(),j}function i(t,e){if(!e)return-1;if(e.indexOf)return e.indexOf(t);var n,r=e.length;for(n=0;n<r;n+=1)if(e[n]===t)return n;return-1}function o(t){this.id=t,this.links=null,this.data=null}function a(t,e){t.links?t.links.push(e):t.links=[e]}function s(t,e,n,r){this.fromId=t,this.toId=e,this.data=n,this.id=r}function u(t){var e,n,r,i=0;if(0==t.length)return i;for(e=0,r=t.length;e<r;e++)n=t.charCodeAt(e),i=(i<<5)-i+n,i|=0;return i}function c(t,e){return u(t.toString()+"👉 "+e.toString())}e.exports=r;var l=t("ngraph.events")},{"ngraph.events":6}],24:[function(t,e,n){function r(t,e){var n;if(t||(t={}),e)for(n in e)if(e.hasOwnProperty(n)){var i=t.hasOwnProperty(n),o=typeof e[n],a=!i||typeof t[n]!==o;a?t[n]=e[n]:"object"===o&&(t[n]=r(t[n],e[n]))}return t}e.exports=r},{}],25:[function(t,e,n){function r(t,e){this.pos=new i(t,e),this.prevPos=new i(t,e),this.force=new i,this.velocity=new i,this.mass=1}function i(t,e){t&&"number"!=typeof t?(this.x="number"==typeof t.x?t.x:0,this.y="number"==typeof t.y?t.y:0):(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0)}function o(t,e,n){this.pos=new a(t,e,n),this.prevPos=new a(t,e,n),this.force=new a,this.velocity=new a,this.mass=1}function a(t,e,n){t&&"number"!=typeof t?(this.x="number"==typeof t.x?t.x:0,this.y="number"==typeof t.y?t.y:0,this.z="number"==typeof t.z?t.z:0):(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.z="number"==typeof n?n:0)}e.exports={Body:r,Vector2d:i,Body3d:o,Vector3d:a},r.prototype.setPosition=function(t,e){this.prevPos.x=this.pos.x=t,this.prevPos.y=this.pos.y=e},i.prototype.reset=function(){this.x=this.y=0},o.prototype.setPosition=function(t,e,n){this.prevPos.x=this.pos.x=t,this.prevPos.y=this.pos.y=e,this.prevPos.z=this.pos.z=n},a.prototype.reset=function(){this.x=this.y=this.z=0}},{}],26:[function(t,e,n){function r(t,e){return 0===e?t.quad0:1===e?t.quad1:2===e?t.quad2:3===e?t.quad3:null}function i(t,e,n){0===e?t.quad0=n:1===e?t.quad1=n:2===e?t.quad2=n:3===e&&(t.quad3=n)}e.exports=function(e){e=e||{},e.gravity="number"==typeof e.gravity?e.gravity:-1,e.theta="number"==typeof e.theta?e.theta:.8;var n=t("ngraph.random").random(1984),o=t("./node"),a=t("./insertStack"),s=t("./isSamePosition"),u=e.gravity,c=[],l=new a,h=e.theta,f=[],d=0,p=function(){var t=f[d];return t?(t.quad0=null,t.quad1=null,t.quad2=null,t.quad3=null,t.body=null,t.mass=t.massX=t.massY=0,t.left=t.right=t.top=t.bottom=0):(t=new o,f[d]=t),++d,t},g=p(),v=function(t){for(l.reset(),l.push(g,t);!l.isEmpty();){var e=l.pop(),o=e.node,a=e.body;if(o.body){var u=o.body;if(o.body=null,s(u.pos,a.pos)){var c=3;do{var h=n.nextDouble(),f=(o.right-o.left)*h,d=(o.bottom-o.top)*h;u.pos.x=o.left+f,u.pos.y=o.top+d,c-=1}while(c>0&&s(u.pos,a.pos));if(0===c&&s(u.pos,a.pos))return}l.push(o,u),l.push(o,a)}else{var v=a.pos.x,y=a.pos.y;o.mass=o.mass+a.mass,o.massX=o.massX+a.mass*v,o.massY=o.massY+a.mass*y;var m=0,x=o.left,b=(o.right+x)/2,w=o.top,_=(o.bottom+w)/2;if(v>b){m+=1;var E=x;x=b,b+=b-E}if(y>_){m+=2;var k=w;w=_,_+=_-k}var N=r(o,m);N?l.push(N,a):(N=p(),N.left=x,N.top=w,N.right=b,N.bottom=_,N.body=a,i(o,m,N))}}},y=function(t){var e,r,i,o,a=c,s=0,l=0,f=1,d=0,p=1;for(a[0]=g;f;){var v=a[d],y=v.body;f-=1,d+=1;var m=y!==t;y&&m?(r=y.pos.x-t.pos.x,i=y.pos.y-t.pos.y,o=Math.sqrt(r*r+i*i),0===o&&(r=(n.nextDouble()-.5)/50,i=(n.nextDouble()-.5)/50,o=Math.sqrt(r*r+i*i)),e=u*y.mass*t.mass/(o*o*o),s+=e*r,l+=e*i):m&&(r=v.massX/v.mass-t.pos.x,i=v.massY/v.mass-t.pos.y,o=Math.sqrt(r*r+i*i),0===o&&(r=(n.nextDouble()-.5)/50,i=(n.nextDouble()-.5)/50,o=Math.sqrt(r*r+i*i)),(v.right-v.left)/o<h?(e=u*v.mass*t.mass/(o*o*o),s+=e*r,l+=e*i):(v.quad0&&(a[p]=v.quad0,f+=1,p+=1),v.quad1&&(a[p]=v.quad1,f+=1,p+=1),v.quad2&&(a[p]=v.quad2,f+=1,p+=1),v.quad3&&(a[p]=v.quad3,f+=1,p+=1)))}t.force.x+=s,t.force.y+=l};return{insertBodies:function(t){var e,n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MIN_VALUE,o=Number.MIN_VALUE,a=t.length;for(e=a;e--;){var s=t[e].pos.x,u=t[e].pos.y;s<n&&(n=s),s>i&&(i=s),u<r&&(r=u),u>o&&(o=u)}var c=i-n,l=o-r;for(c>l?o=r+c:i=n+l,d=0,g=p(),g.left=n,g.right=i,g.top=r,g.bottom=o,e=a-1,e>0&&(g.body=t[e]);e--;)v(t[e])},updateBodyForce:y,options:function(t){return t?("number"==typeof t.gravity&&(u=t.gravity),"number"==typeof t.theta&&(h=t.theta),this):{gravity:u,theta:h}}}}},{"./insertStack":27,"./isSamePosition":28,"./node":29,"ngraph.random":34}],27:[function(t,e,n){function r(){this.stack=[],this.popIdx=0}function i(t,e){this.node=t,this.body=e}e.exports=r,r.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,e){var n=this.stack[this.popIdx];n?(n.node=t,n.body=e):this.stack[this.popIdx]=new i(t,e),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}}},{}],28:[function(t,e,n){e.exports=function(t,e){var n=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);return n<1e-8&&r<1e-8}},{}],29:[function(t,e,n){e.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}},{}],30:[function(t,e,n){function r(t,e){return 0===e?t.quad0:1===e?t.quad1:2===e?t.quad2:3===e?t.quad3:4===e?t.quad4:5===e?t.quad5:6===e?t.quad6:7===e?t.quad7:null}function i(t,e,n){0===e?t.quad0=n:1===e?t.quad1=n:2===e?t.quad2=n:3===e?t.quad3=n:4===e?t.quad4=n:5===e?t.quad5=n:6===e?t.quad6=n:7===e&&(t.quad7=n)}e.exports=function(e){e=e||{},e.gravity="number"==typeof e.gravity?e.gravity:-1,e.theta="number"==typeof e.theta?e.theta:.8;var n=t("ngraph.random").random(1984),o=t("./node"),a=t("./insertStack"),s=t("./isSamePosition"),u=e.gravity,c=[],l=new a,h=e.theta,f=[],d=0,p=function(){var t=f[d];return t?(t.quad0=null,t.quad4=null,t.quad1=null,t.quad5=null,t.quad2=null,t.quad6=null,t.quad3=null,t.quad7=null,t.body=null,t.mass=t.massX=t.massY=t.massZ=0,t.left=t.right=t.top=t.bottom=t.front=t.back=0):(t=new o,f[d]=t),++d,t},g=p(),v=function(t){for(l.reset(),l.push(g,t);!l.isEmpty();){var e=l.pop(),o=e.node,a=e.body;if(o.body){var u=o.body;if(o.body=null,s(u.pos,a.pos)){var c=3;do{var h=n.nextDouble(),f=(o.right-o.left)*h,d=(o.bottom-o.top)*h,v=(o.front-o.back)*h;u.pos.x=o.left+f,u.pos.y=o.top+d,u.pos.z=o.back+v,c-=1}while(c>0&&s(u.pos,a.pos));if(0===c&&s(u.pos,a.pos))return}l.push(o,u),l.push(o,a)}else{var y=a.pos.x,m=a.pos.y,x=a.pos.z;o.mass+=a.mass,o.massX+=a.mass*y,o.massY+=a.mass*m,o.massZ+=a.mass*x;var b=0,w=o.left,_=(o.right+w)/2,E=o.top,k=(o.bottom+E)/2,N=o.back,L=(o.front+N)/2;if(y>_){b+=1;var S=w;w=_,_+=_-S}if(m>k){b+=2;var T=E;E=k,k+=k-T}if(x>L){b+=4;var A=N;N=L,L=N+(N-A)}var D=r(o,b);D?l.push(D,a):(D=p(),D.left=w,D.top=E,D.right=_,D.bottom=k,D.back=N,D.front=L,D.body=a,i(o,b,D))}}},y=function(t){var e,r,i,o,a,s=c,l=0,f=0,d=0,p=1,v=0,y=1;for(s[0]=g;p;){var m=s[v],x=m.body;p-=1,v+=1;var b=x!==t;x&&b?(r=x.pos.x-t.pos.x,i=x.pos.y-t.pos.y,o=x.pos.z-t.pos.z,a=Math.sqrt(r*r+i*i+o*o),0===a&&(r=(n.nextDouble()-.5)/50,i=(n.nextDouble()-.5)/50,o=(n.nextDouble()-.5)/50,a=Math.sqrt(r*r+i*i+o*o)),e=u*x.mass*t.mass/(a*a*a),l+=e*r,f+=e*i,d+=e*o):b&&(r=m.massX/m.mass-t.pos.x,i=m.massY/m.mass-t.pos.y,o=m.massZ/m.mass-t.pos.z,a=Math.sqrt(r*r+i*i+o*o),0===a&&(r=(n.nextDouble()-.5)/50,i=(n.nextDouble()-.5)/50,o=(n.nextDouble()-.5)/50,a=Math.sqrt(r*r+i*i+o*o)),(m.right-m.left)/a<h?(e=u*m.mass*t.mass/(a*a*a),l+=e*r,f+=e*i,d+=e*o):(m.quad0&&(s[y]=m.quad0,p+=1,y+=1),m.quad1&&(s[y]=m.quad1,p+=1,y+=1),m.quad2&&(s[y]=m.quad2,p+=1,y+=1),m.quad3&&(s[y]=m.quad3,p+=1,y+=1),m.quad4&&(s[y]=m.quad4,p+=1,y+=1),m.quad5&&(s[y]=m.quad5,p+=1,y+=1),m.quad6&&(s[y]=m.quad6,p+=1,y+=1),m.quad7&&(s[y]=m.quad7,p+=1,y+=1)))}t.force.x+=l,t.force.y+=f,t.force.z+=d};return{insertBodies:function(t){var e,n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MAX_VALUE,o=Number.MIN_VALUE,a=Number.MIN_VALUE,s=Number.MIN_VALUE,u=t.length;for(e=u;e--;){var c=t[e].pos,l=c.x,h=c.y,f=c.z;l<n&&(n=l),l>o&&(o=l),h<r&&(r=h),h>a&&(a=h),f<i&&(i=f),f>s&&(s=f)}var y=Math.max(o-n,Math.max(a-r,s-i));for(o=n+y,a=r+y,s=i+y,d=0,g=p(),g.left=n,g.right=o,g.top=r,g.bottom=a,g.back=i,g.front=s,e=u-1,e>0&&(g.body=t[e]);e--;)v(t[e])},updateBodyForce:y,options:function(t){return t?("number"==typeof t.gravity&&(u=t.gravity),"number"==typeof t.theta&&(h=t.theta),this):{gravity:u,theta:h}}}}},{"./insertStack":31,"./isSamePosition":32,"./node":33,"ngraph.random":34}],31:[function(t,e,n){function r(){this.stack=[],this.popIdx=0}function i(t,e){this.node=t,this.body=e}e.exports=r,r.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,e){var n=this.stack[this.popIdx];n?(n.node=t,n.body=e):this.stack[this.popIdx]=new i(t,e),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}}},{}],32:[function(t,e,n){e.exports=function(t,e){var n=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y),i=Math.abs(t.z-e.z);return n<1e-8&&r<1e-8&&i<1e-8}},{}],33:[function(t,e,n){e.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.quad4=null,this.quad5=null,this.quad6=null,this.quad7=null,this.mass=0,this.massX=0,this.massY=0,this.massZ=0,this.left=0,this.top=0,this.bottom=0,this.right=0,this.front=0,this.back=0}},{}],34:[function(t,e,n){function r(t){var e="number"==typeof t?t:+new Date,n=function(){return e=e+2127912214+(e<<12)&4294967295,e=4294967295&(3345072700^e^e>>>19),e=e+374761393+(e<<5)&4294967295,e=4294967295&(e+3550635116^e<<9),e=e+4251993797+(e<<3)&4294967295,(268435455&(e=4294967295&(3042594569^e^e>>>16)))/268435456};return{next:function(t){return Math.floor(n()*t)},nextDouble:function(){return n()}}}function i(t,e){var n=e||r();if("function"!=typeof n.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(e){var r,i,o;for(r=t.length-1;r>0;--r)i=n.next(r+1),o=t[i],t[i]=t[r],t[r]=o,e(o);t.length&&e(t[0])},shuffle:function(){var e,r,i;for(e=t.length-1;e>0;--e)r=n.next(e+1),i=t[r],t[r]=t[e],t[e]=i;return t}}}e.exports={random:r,randomIterator:i}},{}],35:[function(t,e,n){function r(t,e,n){function r(t){s.nodes.push(u(t))}function i(t){s.links.push(c(t))}function o(t){var e={id:t.id};return void 0!==t.data&&(e.data=t.data),e}function a(t){var e={fromId:t.fromId,toId:t.toId};return void 0!==t.data&&(e.data=t.data),e}var s={nodes:[],links:[]},u=e||o,c=n||a;return t.forEachNode(r),t.forEachLink(i),JSON.stringify(s)}e.exports=r},{}],36:[function(t,e,n){function r(){f&&l&&(f=!1,l.length?h=l.concat(h):d=-1,h.length&&i())}function i(){if(!f){var t=s(r);f=!0;for(var e=h.length;e;){for(l=h,h=[];++d<e;)l&&l[d].run();d=-1,e=h.length}l=null,f=!1,u(t)}}function o(t,e){this.fun=t,this.array=e}function a(){}var s,u,c=e.exports={};!function(){try{s=setTimeout}catch(t){s=function(){throw new Error("setTimeout is not defined")}}try{u=clearTimeout}catch(t){u=function(){throw new Error("clearTimeout is not defined")}}}();var l,h=[],f=!1,d=-1;c.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new o(t,e)),1!==h.length||f||s(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=a,c.addListener=a,c.once=a,c.off=a,c.removeListener=a,c.removeAllListeners=a,c.emit=a,c.binding=function(t){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(t){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],37:[function(t,n,r){(function(t){!function(t){"use strict";if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof r&&"object"==typeof n)n.exports=t();else if("function"==typeof e&&e.amd)e(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var i="undefined"!=typeof window?window:self,o=i.Q;i.Q=t(),i.Q.noConflict=function(){return i.Q=o,this}}}(function(){"use strict";function e(t){return function(){return H.apply(t,arguments)}}function n(t){return t===Object(t)}function r(t){return"[object StopIteration]"===et(t)||t instanceof q}function i(t,e){if(V&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&t.stack.indexOf(nt)===-1){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+nt+"\n");t.stack=o(i)}}function o(t){for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var i=e[r];u(i)||a(i)||!i||n.push(i)}return n.join("\n")}function a(t){return t.indexOf("(module.js:")!==-1||t.indexOf("(node.js:")!==-1}function s(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function u(t){var e=s(t);if(!e)return!1;var n=e[0],r=e[1];return n===G&&r>=Y&&r<=st}function c(){if(V)try{throw new Error}catch(r){var t=r.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],n=s(e);if(!n)return;return G=n[0],n[1]}}function l(t){return t instanceof p?t:m(t)?S(t):L(t)}function h(){function t(t){e=t,o.source=t,$(n,function(e,n){l.nextTick(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,r=void 0}var e,n=[],r=[],i=K(h.prototype),o=K(p.prototype);if(o.promiseDispatch=function(t,i,o){var a=W(arguments);n?(n.push(a),"when"===i&&o[1]&&r.push(o[1])):l.nextTick(function(){e.promiseDispatch.apply(e,a)})},o.valueOf=function(){if(n)return o;var t=v(e);return y(t)&&(e=t),t},o.inspect=function(){return e?e.inspect():{state:"pending"}},l.longStackSupport&&V)try{throw new Error}catch(t){o.stack=t.stack.substring(t.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(n){e||t(l(n))},i.fulfill=function(n){e||t(L(n))},i.reject=function(n){e||t(N(n))},i.notify=function(t){e||$(r,function(e,n){l.nextTick(function(){n(t)})},void 0)},i}function f(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=h();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function d(t){return f(function(e,n){for(var r=0,i=t.length;r<i;r++)l(t[r]).then(e,n)})}function p(t,e,n){void 0===e&&(e=function(t){return N(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=K(p.prototype);if(r.promiseDispatch=function(n,i,o){var a;try{a=t[i]?t[i].apply(r,o):e.call(r,i,o)}catch(t){a=N(t)}n&&n(a)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function g(t,e,n,r){return l(t).then(e,n,r)}function v(t){if(y(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function y(t){return t instanceof p}function m(t){return n(t)&&"function"==typeof t.then}function x(t){return y(t)&&"pending"===t.inspect().state}function b(t){return!y(t)||"fulfilled"===t.inspect().state}function w(t){return y(t)&&"rejected"===t.inspect().state}function _(){rt.length=0,it.length=0,at||(at=!0)}function E(e,n){at&&("object"==typeof t&&"function"==typeof t.emit&&l.nextTick.runAfter(function(){Z(it,e)!==-1&&(t.emit("unhandledRejection",n,e),ot.push(e))}),it.push(e),n&&void 0!==n.stack?rt.push(n.stack):rt.push("(no stack) "+n))}function k(e){if(at){var n=Z(it,e);n!==-1&&("object"==typeof t&&"function"==typeof t.emit&&l.nextTick.runAfter(function(){var r=Z(ot,e);r!==-1&&(t.emit("rejectionHandled",rt[n],e),ot.splice(r,1))}),it.splice(n,1),rt.splice(n,1))}}function N(t){var e=p({when:function(e){return e&&k(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return E(e,t),e}function L(t){return p({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},delete:function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return tt(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function S(t){var e=h();return l.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.promise}function T(t){return p({isDef:function(){}},function(e,n){return C(t,e,n)},function(){return l(t).inspect()})}function A(t,e,n){return l(t).spread(e,n)}function D(t){return function(){function e(t,e){var a;if("undefined"==typeof StopIteration){try{a=n[t](e)}catch(t){return N(t)}return a.done?l(a.value):g(a.value,i,o)}try{a=n[t](e)}catch(t){return r(t)?l(t.value):N(t)}return g(a,i,o)}var n=t.apply(this,arguments),i=e.bind(e,"next"),o=e.bind(e,"throw");return i()}}function M(t){l.done(l.async(t)())}function P(t){throw new q(t)}function I(t){return function(){return A([this,O(arguments)],function(e,n){return t.apply(e,n)})}}function C(t,e,n){return l(t).dispatch(e,n)}function O(t){return g(t,function(t){var e=0,n=h();return $(t,function(r,i,o){var a;y(i)&&"fulfilled"===(a=i.inspect()).state?t[o]=a.value:(++e,g(i,function(r){t[o]=r,0==--e&&n.resolve(t)},n.reject,function(t){n.notify({index:o,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function R(t){if(0===t.length)return l.resolve();var e=l.defer(),n=0;return $(t,function(r,i,o){function a(t){e.resolve(t)}function s(){0===--n&&e.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function u(t){e.notify({index:o,value:t})}var c=t[o];n++,g(c,a,s,u)},void 0),e.promise}function B(t){return g(t,function(t){return t=Q(t,l),g(O(Q(t,function(t){return g(t,X,X)})),function(){return t})})}function F(t){return l(t).allSettled()}function z(t,e){return l(t).then(void 0,void 0,e)}function j(t,e){return l(t).nodeify(e)}var V=!1;try{throw new Error}catch(t){V=!!t.stack}var G,q,Y=c(),X=function(){},U=function(){function e(){for(var t,e;r.next;)r=r.next,t=r.task,r.task=void 0,e=r.domain,e&&(r.domain=void 0,e.enter()),n(t,e);for(;u.length;)t=u.pop(),n(t);o=!1}function n(t,n){try{t()}catch(t){if(s)throw n&&n.exit(),setTimeout(e,0),n&&n.enter(),t;setTimeout(function(){throw t},0)}n&&n.exit()}var r={task:void 0,next:null},i=r,o=!1,a=void 0,s=!1,u=[];if(U=function(e){i=i.next={task:e,domain:s&&t.domain,next:null},o||(o=!0,a())},"object"==typeof t&&"[object process]"===t.toString()&&t.nextTick)s=!0,a=function(){t.nextTick(e)};else if("function"==typeof setImmediate)a="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=function(){a=l,c.port1.onmessage=e,e()};var l=function(){c.port2.postMessage(0)};a=function(){setTimeout(e,0),l()}}else a=function(){setTimeout(e,0)};return U.runAfter=function(t){u.push(t),o||(o=!0,a())},U}(),H=Function.call,W=e(Array.prototype.slice),$=e(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;n<r;n++)n in this&&(e=t(e,this[n],n));return e}),Z=e(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),Q=e(Array.prototype.map||function(t,e){var n=this,r=[];return $(n,function(i,o,a){r.push(t.call(e,o,a,n))},void 0),r}),K=Object.create||function(t){function e(){}return e.prototype=t,new e},J=e(Object.prototype.hasOwnProperty),tt=Object.keys||function(t){var e=[];for(var n in t)J(t,n)&&e.push(n);return e},et=e(Object.prototype.toString);q="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var nt="From previous event:";l.resolve=l,l.nextTick=U,l.longStackSupport=!1,"object"==typeof t&&t&&t.env&&t.env.Q_DEBUG&&(l.longStackSupport=!0),l.defer=h,h.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(W(arguments,1)):t.resolve(n)}},l.Promise=f,l.promise=f,f.race=d,f.all=O,f.reject=N,f.resolve=l,l.passByCopy=function(t){return t},p.prototype.passByCopy=function(){return this},l.join=function(t,e){return l(t).join(e)},p.prototype.join=function(t){return l([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},l.race=d,p.prototype.race=function(){return this.then(l.race)},l.makePromise=p,p.prototype.toString=function(){return"[object Promise]"},p.prototype.then=function(t,e,n){function r(e){try{return"function"==typeof t?t(e):e}catch(t){return N(t)}}function o(t){if("function"==typeof e){i(t,s);try{return e(t)}catch(t){return N(t)}}return N(t)}function a(t){return"function"==typeof n?n(t):t}var s=this,u=h(),c=!1;return l.nextTick(function(){s.promiseDispatch(function(t){c||(c=!0,u.resolve(r(t)))},"when",[function(t){c||(c=!0,u.resolve(o(t)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=a(t)}catch(t){if(n=!0,!l.onerror)throw t;l.onerror(t)}n||u.notify(e)}]),u.promise},l.tap=function(t,e){return l(t).tap(e)},p.prototype.tap=function(t){return t=l(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},l.when=g,p.prototype.thenResolve=function(t){return this.then(function(){return t})},l.thenResolve=function(t,e){return l(t).thenResolve(e)},p.prototype.thenReject=function(t){return this.then(function(){throw t})},l.thenReject=function(t,e){return l(t).thenReject(e)},l.nearer=v,l.isPromise=y,l.isPromiseAlike=m,l.isPending=x,p.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=b,p.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=w,p.prototype.isRejected=function(){return"rejected"===this.inspect().state};var rt=[],it=[],ot=[],at=!0;l.resetUnhandledRejections=_,l.getUnhandledReasons=function(){return rt.slice()},l.stopUnhandledRejectionTracking=function(){_(),at=!1},_(),l.reject=N,l.fulfill=L,l.master=T,l.spread=A,p.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},l.async=D,l.spawn=M,l.return=P,l.promised=I,l.dispatch=C,p.prototype.dispatch=function(t,e){var n=this,r=h();return l.nextTick(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},l.get=function(t,e){return l(t).dispatch("get",[e])},p.prototype.get=function(t){return this.dispatch("get",[t])},l.set=function(t,e,n){return l(t).dispatch("set",[e,n])},p.prototype.set=function(t,e){return this.dispatch("set",[t,e])},l.del=l.delete=function(t,e){return l(t).dispatch("delete",[e])},p.prototype.del=p.prototype.delete=function(t){return this.dispatch("delete",[t])},l.mapply=l.post=function(t,e,n){return l(t).dispatch("post",[e,n])},p.prototype.mapply=p.prototype.post=function(t,e){return this.dispatch("post",[t,e])},l.send=l.mcall=l.invoke=function(t,e){return l(t).dispatch("post",[e,W(arguments,2)])},p.prototype.send=p.prototype.mcall=p.prototype.invoke=function(t){return this.dispatch("post",[t,W(arguments,1)])},l.fapply=function(t,e){return l(t).dispatch("apply",[void 0,e])},p.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},l.try=l.fcall=function(t){return l(t).dispatch("apply",[void 0,W(arguments,1)])},p.prototype.fcall=function(){return this.dispatch("apply",[void 0,W(arguments)])},l.fbind=function(t){var e=l(t),n=W(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(W(arguments))])}},p.prototype.fbind=function(){var t=this,e=W(arguments);return function(){return t.dispatch("apply",[this,e.concat(W(arguments))])}},l.keys=function(t){return l(t).dispatch("keys",[])},p.prototype.keys=function(){return this.dispatch("keys",[])},l.all=O,p.prototype.all=function(){return O(this)},l.any=R,p.prototype.any=function(){return R(this)},l.allResolved=function(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}(B,"allResolved","allSettled"),p.prototype.allResolved=function(){return B(this)},l.allSettled=F,p.prototype.allSettled=function(){return this.then(function(t){return O(Q(t,function(t){function e(){return t.inspect()}return t=l(t),t.then(e,e)}))})},l.fail=l.catch=function(t,e){return l(t).then(void 0,e)},p.prototype.fail=p.prototype.catch=function(t){return this.then(void 0,t)},l.progress=z,p.prototype.progress=function(t){return this.then(void 0,void 0,t)},l.fin=l.finally=function(t,e){return l(t).finally(e)},p.prototype.fin=p.prototype.finally=function(t){return t=l(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},l.done=function(t,e,n,r){return l(t).done(e,n,r)},p.prototype.done=function(e,n,r){var o=function(t){l.nextTick(function(){if(i(t,a),!l.onerror)throw t;l.onerror(t)})},a=e||n||r?this.then(e,n,r):this;"object"==typeof t&&t&&t.domain&&(o=t.domain.bind(o)),a.then(void 0,o)},l.timeout=function(t,e,n){return l(t).timeout(e,n)},p.prototype.timeout=function(t,e){var n=h(),r=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},l.delay=function(t,e){return void 0===e&&(e=t,t=void 0),l(t).delay(e)},p.prototype.delay=function(t){return this.then(function(e){var n=h();return setTimeout(function(){n.resolve(e)},t),n.promise})},l.nfapply=function(t,e){return l(t).nfapply(e)},p.prototype.nfapply=function(t){var e=h(),n=W(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},l.nfcall=function(t){var e=W(arguments,1);return l(t).nfapply(e)},p.prototype.nfcall=function(){var t=W(arguments),e=h();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},l.nfbind=l.denodeify=function(t){var e=W(arguments,1);return function(){var n=e.concat(W(arguments)),r=h();return n.push(r.makeNodeResolver()),l(t).fapply(n).fail(r.reject),r.promise}},p.prototype.nfbind=p.prototype.denodeify=function(){var t=W(arguments);return t.unshift(this),l.denodeify.apply(void 0,t)},l.nbind=function(t,e){var n=W(arguments,2);return function(){function r(){return t.apply(e,arguments)}var i=n.concat(W(arguments)),o=h();return i.push(o.makeNodeResolver()),l(r).fapply(i).fail(o.reject),o.promise}},p.prototype.nbind=function(){var t=W(arguments,0);return t.unshift(this),l.nbind.apply(void 0,t)},l.nmapply=l.npost=function(t,e,n){return l(t).npost(e,n)},p.prototype.nmapply=p.prototype.npost=function(t,e){var n=W(e||[]),r=h();return n.push(r.makeNodeResolver()),this.dispatch("post",[t,n]).fail(r.reject),r.promise},l.nsend=l.nmcall=l.ninvoke=function(t,e){var n=W(arguments,2),r=h();return n.push(r.makeNodeResolver()),l(t).dispatch("post",[e,n]).fail(r.reject),r.promise},p.prototype.nsend=p.prototype.nmcall=p.prototype.ninvoke=function(t){var e=W(arguments,1),n=h();return e.push(n.makeNodeResolver()),
this.dispatch("post",[t,e]).fail(n.reject),n.promise},l.nodeify=j,p.prototype.nodeify=function(t){if(!t)return this;this.then(function(e){l.nextTick(function(){t(null,e)})},function(e){l.nextTick(function(){t(e)})})},l.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var st=c();return l})}).call(this,t("_process"))},{_process:36}],38:[function(t,n,r){(function(){function t(t){function e(e,n,r,i,o,a){for(;o>=0&&o<a;o+=t){var s=i?i[o]:o;r=n(r,e[s],s,e)}return r}return function(n,r,i,o){r=_(r,o,4);var a=!A(n)&&w.keys(n),s=(a||n).length,u=t>0?0:s-1;return arguments.length<3&&(i=n[a?a[u]:u],u+=t),e(n,r,i,a,u,s)}}function i(t){return function(e,n,r){n=E(n,r);for(var i=T(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}function o(t,e,n){return function(r,i,o){var a=0,s=T(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=e(d.call(r,a,s),w.isNaN),o>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&o<s;o+=t)if(r[o]===i)return o;return-1}}function a(t,e){var n=C.length,r=t.constructor,i=w.isFunction(r)&&r.prototype||l,o="constructor";for(w.has(t,o)&&!w.contains(e,o)&&e.push(o);n--;)(o=C[n])in t&&t[o]!==i[o]&&!w.contains(e,o)&&e.push(o)}var s=this,u=s._,c=Array.prototype,l=Object.prototype,h=Function.prototype,f=c.push,d=c.slice,p=l.toString,g=l.hasOwnProperty,v=Array.isArray,y=Object.keys,m=h.bind,x=Object.create,b=function(){},w=function(t){return t instanceof w?t:this instanceof w?void(this._wrapped=t):new w(t)};void 0!==r?(void 0!==n&&n.exports&&(r=n.exports=w),r._=w):s._=w,w.VERSION="1.8.3";var _=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},E=function(t,e,n){return null==t?w.identity:w.isFunction(t)?_(t,e,n):w.isObject(t)?w.matcher(t):w.property(t)};w.iteratee=function(t,e){return E(t,e,1/0)};var k=function(t,e){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),s=a.length,u=0;u<s;u++){var c=a[u];e&&void 0!==n[c]||(n[c]=o[c])}return n}},N=function(t){if(!w.isObject(t))return{};if(x)return x(t);b.prototype=t;var e=new b;return b.prototype=null,e},L=function(t){return function(e){return null==e?void 0:e[t]}},S=Math.pow(2,53)-1,T=L("length"),A=function(t){var e=T(t);return"number"==typeof e&&e>=0&&e<=S};w.each=w.forEach=function(t,e,n){e=_(e,n);var r,i;if(A(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=w.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},w.map=w.collect=function(t,e,n){e=E(e,n);for(var r=!A(t)&&w.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o},w.reduce=w.foldl=w.inject=t(1),w.reduceRight=w.foldr=t(-1),w.find=w.detect=function(t,e,n){var r;if(void 0!==(r=A(t)?w.findIndex(t,e,n):w.findKey(t,e,n))&&r!==-1)return t[r]},w.filter=w.select=function(t,e,n){var r=[];return e=E(e,n),w.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},w.reject=function(t,e,n){return w.filter(t,w.negate(E(e)),n)},w.every=w.all=function(t,e,n){e=E(e,n);for(var r=!A(t)&&w.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},w.some=w.any=function(t,e,n){e=E(e,n);for(var r=!A(t)&&w.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},w.contains=w.includes=w.include=function(t,e,n,r){return A(t)||(t=w.values(t)),("number"!=typeof n||r)&&(n=0),w.indexOf(t,e,n)>=0},w.invoke=function(t,e){var n=d.call(arguments,2),r=w.isFunction(e);return w.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},w.pluck=function(t,e){return w.map(t,w.property(e))},w.where=function(t,e){return w.filter(t,w.matcher(e))},w.findWhere=function(t,e){return w.find(t,w.matcher(e))},w.max=function(t,e,n){var r,i,o=-(1/0),a=-(1/0);if(null==e&&null!=t){t=A(t)?t:w.values(t);for(var s=0,u=t.length;s<u;s++)(r=t[s])>o&&(o=r)}else e=E(e,n),w.each(t,function(t,n,r){((i=e(t,n,r))>a||i===-(1/0)&&o===-(1/0))&&(o=t,a=i)});return o},w.min=function(t,e,n){var r,i,o=1/0,a=1/0;if(null==e&&null!=t){t=A(t)?t:w.values(t);for(var s=0,u=t.length;s<u;s++)(r=t[s])<o&&(o=r)}else e=E(e,n),w.each(t,function(t,n,r){((i=e(t,n,r))<a||i===1/0&&o===1/0)&&(o=t,a=i)});return o},w.shuffle=function(t){for(var e,n=A(t)?t:w.values(t),r=n.length,i=Array(r),o=0;o<r;o++)e=w.random(0,o),e!==o&&(i[o]=i[e]),i[e]=n[o];return i},w.sample=function(t,e,n){return null==e||n?(A(t)||(t=w.values(t)),t[w.random(t.length-1)]):w.shuffle(t).slice(0,Math.max(0,e))},w.sortBy=function(t,e,n){return e=E(e,n),w.pluck(w.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var D=function(t){return function(e,n,r){var i={};return n=E(n,r),w.each(e,function(r,o){t(i,r,n(r,o,e))}),i}};w.groupBy=D(function(t,e,n){w.has(t,n)?t[n].push(e):t[n]=[e]}),w.indexBy=D(function(t,e,n){t[n]=e}),w.countBy=D(function(t,e,n){w.has(t,n)?t[n]++:t[n]=1}),w.toArray=function(t){return t?w.isArray(t)?d.call(t):A(t)?w.map(t,w.identity):w.values(t):[]},w.size=function(t){return null==t?0:A(t)?t.length:w.keys(t).length},w.partition=function(t,e,n){e=E(e,n);var r=[],i=[];return w.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},w.first=w.head=w.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:w.initial(t,t.length-e)},w.initial=function(t,e,n){return d.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},w.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:w.rest(t,Math.max(0,t.length-e))},w.rest=w.tail=w.drop=function(t,e,n){return d.call(t,null==e||n?1:e)},w.compact=function(t){return w.filter(t,w.identity)};var M=function(t,e,n,r){for(var i=[],o=0,a=r||0,s=T(t);a<s;a++){var u=t[a];if(A(u)&&(w.isArray(u)||w.isArguments(u))){e||(u=M(u,e,n));var c=0,l=u.length;for(i.length+=l;c<l;)i[o++]=u[c++]}else n||(i[o++]=u)}return i};w.flatten=function(t,e){return M(t,e,!1)},w.without=function(t){return w.difference(t,d.call(arguments,1))},w.uniq=w.unique=function(t,e,n,r){w.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=E(n,r));for(var i=[],o=[],a=0,s=T(t);a<s;a++){var u=t[a],c=n?n(u,a,t):u;e?(a&&o===c||i.push(u),o=c):n?w.contains(o,c)||(o.push(c),i.push(u)):w.contains(i,u)||i.push(u)}return i},w.union=function(){return w.uniq(M(arguments,!0,!0))},w.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=T(t);r<i;r++){var o=t[r];if(!w.contains(e,o)){for(var a=1;a<n&&w.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},w.difference=function(t){var e=M(arguments,!0,!0,1);return w.filter(t,function(t){return!w.contains(e,t)})},w.zip=function(){return w.unzip(arguments)},w.unzip=function(t){for(var e=t&&w.max(t,T).length||0,n=Array(e),r=0;r<e;r++)n[r]=w.pluck(t,r);return n},w.object=function(t,e){for(var n={},r=0,i=T(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},w.findIndex=i(1),w.findLastIndex=i(-1),w.sortedIndex=function(t,e,n,r){n=E(n,r,1);for(var i=n(e),o=0,a=T(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o},w.indexOf=o(1,w.findIndex,w.sortedIndex),w.lastIndexOf=o(-1,w.findLastIndex),w.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i};var P=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=N(t.prototype),a=t.apply(o,i);return w.isObject(a)?a:o};w.bind=function(t,e){if(m&&t.bind===m)return m.apply(t,d.call(arguments,1));if(!w.isFunction(t))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),r=function(){return P(t,r,e,this,n.concat(d.call(arguments)))};return r},w.partial=function(t){var e=d.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),a=0;a<i;a++)o[a]=e[a]===w?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return P(t,n,this,this,o)};return n},w.bindAll=function(t){var e,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)n=arguments[e],t[n]=w.bind(t[n],t);return t},w.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return w.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},w.delay=function(t,e){var n=d.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},w.defer=w.partial(w.delay,w,1),w.throttle=function(t,e,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:w.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var c=w.now();s||n.leading!==!1||(s=c);var l=e-(c-s);return r=this,i=arguments,l<=0||l>e?(a&&(clearTimeout(a),a=null),s=c,o=t.apply(r,i),a||(r=i=null)):a||n.trailing===!1||(a=setTimeout(u,l)),o}},w.debounce=function(t,e,n){var r,i,o,a,s,u=function(){var c=w.now()-a;c<e&&c>=0?r=setTimeout(u,e-c):(r=null,n||(s=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=w.now();var c=n&&!r;return r||(r=setTimeout(u,e)),c&&(s=t.apply(o,i),o=i=null),s}},w.wrap=function(t,e){return w.partial(e,t)},w.negate=function(t){return function(){return!t.apply(this,arguments)}},w.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},w.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},w.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},w.once=w.partial(w.before,2);var I=!{toString:null}.propertyIsEnumerable("toString"),C=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];w.keys=function(t){if(!w.isObject(t))return[];if(y)return y(t);var e=[];for(var n in t)w.has(t,n)&&e.push(n);return I&&a(t,e),e},w.allKeys=function(t){if(!w.isObject(t))return[];var e=[];for(var n in t)e.push(n);return I&&a(t,e),e},w.values=function(t){for(var e=w.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},w.mapObject=function(t,e,n){e=E(e,n);for(var r,i=w.keys(t),o=i.length,a={},s=0;s<o;s++)r=i[s],a[r]=e(t[r],r,t);return a},w.pairs=function(t){for(var e=w.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},w.invert=function(t){for(var e={},n=w.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},w.functions=w.methods=function(t){var e=[];for(var n in t)w.isFunction(t[n])&&e.push(n);return e.sort()},w.extend=k(w.allKeys),w.extendOwn=w.assign=k(w.keys),w.findKey=function(t,e,n){e=E(e,n);for(var r,i=w.keys(t),o=0,a=i.length;o<a;o++)if(r=i[o],e(t[r],r,t))return r},w.pick=function(t,e,n){var r,i,o={},a=t;if(null==a)return o;w.isFunction(e)?(i=w.allKeys(a),r=_(e,n)):(i=M(arguments,!1,!1,1),r=function(t,e,n){return e in n},a=Object(a));for(var s=0,u=i.length;s<u;s++){var c=i[s],l=a[c];r(l,c,a)&&(o[c]=l)}return o},w.omit=function(t,e,n){if(w.isFunction(e))e=w.negate(e);else{var r=w.map(M(arguments,!1,!1,1),String);e=function(t,e){return!w.contains(r,e)}}return w.pick(t,e,n)},w.defaults=k(w.allKeys,!0),w.create=function(t,e){var n=N(t);return e&&w.extendOwn(n,e),n},w.clone=function(t){return w.isObject(t)?w.isArray(t)?t.slice():w.extend({},t):t},w.tap=function(t,e){return e(t),t},w.isMatch=function(t,e){var n=w.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0};var O=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof w&&(t=t._wrapped),e instanceof w&&(e=e._wrapped);var i=p.call(t);if(i!==p.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(w.isFunction(a)&&a instanceof a&&w.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),o){if((u=t.length)!==e.length)return!1;for(;u--;)if(!O(t[u],e[u],n,r))return!1}else{var c,l=w.keys(t);if(u=l.length,w.keys(e).length!==u)return!1;for(;u--;)if(c=l[u],!w.has(e,c)||!O(t[c],e[c],n,r))return!1}return n.pop(),r.pop(),!0};w.isEqual=function(t,e){return O(t,e)},w.isEmpty=function(t){return null==t||(A(t)&&(w.isArray(t)||w.isString(t)||w.isArguments(t))?0===t.length:0===w.keys(t).length)},w.isElement=function(t){return!(!t||1!==t.nodeType)},w.isArray=v||function(t){return"[object Array]"===p.call(t)},w.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},w.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){w["is"+t]=function(e){return p.call(e)==="[object "+t+"]"}}),w.isArguments(arguments)||(w.isArguments=function(t){return w.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(w.isFunction=function(t){return"function"==typeof t||!1}),w.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},w.isNaN=function(t){return w.isNumber(t)&&t!==+t},w.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===p.call(t)},w.isNull=function(t){return null===t},w.isUndefined=function(t){return void 0===t},w.has=function(t,e){return null!=t&&g.call(t,e)},w.noConflict=function(){return s._=u,this},w.identity=function(t){return t},w.constant=function(t){return function(){return t}},w.noop=function(){},w.property=L,w.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},w.matcher=w.matches=function(t){return t=w.extendOwn({},t),function(e){return w.isMatch(e,t)}},w.times=function(t,e,n){var r=Array(Math.max(0,t));e=_(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},w.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},w.now=Date.now||function(){return(new Date).getTime()};var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=w.invert(R),F=function(t){var e=function(e){return t[e]},n="(?:"+w.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};w.escape=F(R),w.unescape=F(B),w.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),w.isFunction(r)?r.call(t):r};var z=0;w.uniqueId=function(t){var e=++z+"";return t?t+e:e},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=function(t){return"\\"+j[t]};w.template=function(t,e,n){!e&&n&&(e=n),e=w.defaults({},e,w.templateSettings);var r=RegExp([(e.escape||/(.)^/).source,(e.interpolate||/(.)^/).source,(e.evaluate||/(.)^/).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,a,s){return o+=t.slice(i,s).replace(/\\|'|\r|\n|\u2028|\u2029/g,V),i=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var s=function(t){return a.call(this,t,w)},u=e.variable||"obj";return s.source="function("+u+"){\n"+o+"}",s},w.chain=function(t){var e=w(t);return e._chain=!0,e};var G=function(t,e){return t._chain?w(e).chain():e};w.mixin=function(t){w.each(w.functions(t),function(e){var n=w[e]=t[e];w.prototype[e]=function(){var t=[this._wrapped];return f.apply(t,arguments),G(this,n.apply(w,t))}})},w.mixin(w),w.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=c[t];w.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],G(this,n)}}),w.each(["concat","join","slice"],function(t){var e=c[t];w.prototype[t]=function(){return G(this,e.apply(this._wrapped,arguments))}}),w.prototype.value=function(){return this._wrapped},w.prototype.valueOf=w.prototype.toJSON=w.prototype.value,w.prototype.toString=function(){return""+this._wrapped},"function"==typeof e&&e.amd&&e("underscore",[],function(){return w})}).call(this)},{}],39:[function(t,e,n){var r=arguments[3],i=arguments[4],o=arguments[5],a=JSON.stringify;e.exports=function(t,e){for(var n,s=Object.keys(o),u=0,c=s.length;u<c;u++){var l=s[u],h=o[l].exports;if(h===t||h&&h.default===t){n=l;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var f={},u=0,c=s.length;u<c;u++){var l=s[u];f[l]=l}i[n]=[Function(["require","module","exports"],"("+t+")(self)"),f]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[n]=n,i[d]=[Function(["require"],"var f = require("+a(n)+");(f.default ? f.default : f)(self);"),p];var g="("+r+")({"+Object.keys(i).map(function(t){return a(t)+":["+i[t][0]+","+a(i[t][1])+"]"}).join(",")+"},{},["+a(d)+"])",v=window.URL||window.webkitURL||window.mozURL||window.msURL,y=new Blob([g],{type:"text/javascript"});if(e&&e.bare)return y;var m=v.createObjectURL(y),x=new Worker(m);return x.objectURL=m,x}},{}],40:[function(t,e,n){"use strict";var r=t("ngraph.graph"),i=t("underscore"),o=(t("Q"),t("ngraph.asyncforce")),a=function(t){function e(t){this.options=a({},n,t),this.layoutOptions=a({},n,t),delete this.layoutOptions.cy,delete this.layoutOptions.eles}if(t){var n={async:{maxIterations:1e3,stepsPerCycle:30,waitForStep:!1},physics:{springLength:100,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20,iterations:1e4,fit:!0,stableThreshold:9e-6},iterations:1e4,refreshInterval:16,refreshIterations:10,stableThreshold:2,animate:!0,fit:!0},a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t};return e.prototype.l=o,e.prototype.g=r,e.prototype.run=function(){var t=this;t.trigger({type:"layoutstart",layout:t});var e=this.options,n=this.layoutOptions,r=this,o=r.g(),a=e.cy,s=e.eles,u=s.nodes(),c=u.parents();u=u.difference(c),u=u.filterFn(function(t){return t.connectedEdges().length>0});var l,h=s.edges(),f={},d=!0,p=function(e){u.positions(function(t,e){if(!e.data("dragging"))return l.getNodePosition(e.id())}),n.async&&setTimeout(function(){t.trigger({type:"layoutstop",layout:t}),t.trigger({type:"layoutready",layout:t})},500),n.fit&&a.fit(n.padding),d&&(t.trigger("layoutready"),d=!1)};o.on("changed",function(t){}),i.each(u,function(t,e){t.on("tapstart",function(t){t.cyTarget.data("dragging",!0)}),t.on("tapend",function(t){t.cyTarget.removeData("dragging")}),t.on("position","node[dragging]",function(t){l.setNodePosition&&t.cyTarget.data("dragging")&&l.setNodePosition(t.cyTarget.data().id)}),o.addNode(t.data().id)}),i.each(h,function(t,e){f[t.data().source+":"+t.data().target]||f[t.data().target+":"+t.data().source]||(f[t.data().source+":"+t.data().target]=t,o.addLink(t.data().source,t.data().target))}),l=r.l(o,n),i.each(u,function(t,e){var n=t.data();n.pin?(l.pinNode(n.id,!0),t.removeData("pin"),t.data("unpin",!0)):n.unpin&&(l.pinNode(n.id,!1),t.removeData("unpin"))});var g=n.iterations;this.on("layoutstop",function(){n.iterations=0}),l.on("stable",function(){console.log("got Stable event"),g=0}),n.animate||(n.refreshInterval=0);var v;if(l.on("cycle",function(){p()}),n.async)return this;var y=function(){if(n.animate)0!=g?v&&0!=g||(v=setTimeout(function(){g--,v=null,!!l.step()&&(g=0),y()},n.refreshInterval)):(t.trigger({type:"layoutstop",layout:t}),t.trigger({type:"layoutready",layout:t}));else{for(var e=0;e<n.iterations;e++)l.step();t.trigger({type:"layoutstop",layout:t}),t.trigger({type:"layoutready",layout:t})}};return y(),this},e.prototype.stop=function(){return this.thread&&this.thread.stop(),this.trigger("layoutstop"),this},e.prototype.destroy=function(){return this.thread&&this.thread.stop(),this},e}};e.exports=function(t){return a(t)}},{Q:37,"ngraph.asyncforce":1,"ngraph.graph":23,underscore:38}],41:[function(t,n,r){"use strict";!function(){var r=t("./impl.js"),i=function(t){t("layout","cytoscape-ngraph.forcelayout",r(t))};void 0!==n&&n.exports&&(n.exports=i),void 0!==e&&e.amd&&e("cytoscape-ngraph.forcelayout",function(){return i}),"undefined"!=typeof cytoscape&&i(cytoscape)}()},{"./impl.js":40}]},{},[41])(41)})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],40:[function(t,e,n){!function(){"use strict";var t=function(t,e){t&&(e.fn.cyPanzoom=e.fn.cytoscapePanzoom=function(t){return r.apply(this,[t,e]),this},t("core","panzoom",function(t){var n=this;return r.apply(n.container(),[t,e]),this}))},n={zoomFactor:.05,zoomDelay:45,minZoom:.1,maxZoom:10,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit:function(){return!1},fitAnimationDuration:1e3,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"},r=function(t,e){var r=e.extend(!0,{},n,t),i=t,o={destroy:function(){var t=e(this),n=t.find(".cy-panzoom");n.data("winbdgs").forEach(function(t){e(window).unbind(t.evt,t.fn)}),n.data("cybdgs").forEach(function(e){t.cytoscape("get").off(e.evt,e.fn)}),n.remove()},init:function(){window;return e(this).each(function(){function t(t){var e={x:t.originalEvent.pageX-L.offset().left-L.width()/2,y:t.originalEvent.pageY-L.offset().top-L.height()/2},n=r.panDragAreaSize,i=Math.sqrt(e.x*e.x+e.y*e.y),o=Math.min(i/n,1);return i<r.panInactiveArea?{x:NaN,y:NaN}:(e={x:e.x/i,y:e.y/i},o=Math.max(r.panMinPercentSpeed,o),{x:-1*e.x*(o*r.panDistance),y:-1*e.y*(o*r.panDistance)})}function n(){clearInterval(O),v("mousemove",B),P.hide()}function i(t){var e=t,n=Math.sqrt(e.x*e.x+e.y*e.y),i={x:-1*e.x/n,y:-1*e.y/n},o=L.width(),a=L.height(),s=n/r.panDistance,u=Math.max(r.panIndicatorMinOpacity,s),c=255-Math.round(255*u);P.show().css({left:o/2*i.x+o/2,top:a/2*i.y+a/2,background:"rgb("+c+", "+c+", "+c+")"})}function o(){var t=f.cytoscape("get");t.pan(),t.zoom();I=f.width()/2,C=f.height()/2}function a(){R=!0,o()}function s(){R=!1}function u(t){var e=f.cytoscape("get");R||o(),e.zoom({level:t,renderedPosition:{x:I,y:C}})}function c(t,e){void 0===e&&(e=0);var n=V,i=0+n,o=E.height()-k.height()-2*n,a=t.pageY-E.offset().top-e;a<i&&(a=i),a>o&&(a=o);var s=1-(a-i)/(o-i);k.css("top",a);var c=r.minZoom,l=r.maxZoom,h=Math.log(c)/Math.log(l),f=(1-h)*s+h,d=Math.pow(l,f);d<c?d=c:d>l&&(d=l),u(d)}function l(){var t=f.cytoscape("get"),e=t.zoom(),n=r.minZoom,i=r.maxZoom,o=Math.log(n)/Math.log(i),a=Math.log(e)/Math.log(i),s=1-(a-o)/(1-o),u=V,c=E.height()-k.height()-2*V,l=s*(c-u);l<u&&(l=u),l>c&&(l=c),k.css("top",l)}function h(t,e){var n;t.bind("mousedown",function(t){if(t.preventDefault(),t.stopPropagation(),0==t.button){var i=f.cytoscape("get"),o=function(){var t=i.zoom(),n=i.zoom()*e;n<r.minZoom&&(n=r.minZoom),n>r.maxZoom&&(n=r.maxZoom),n==r.maxZoom&&t==r.maxZoom||n==r.minZoom&&t==r.minZoom||u(n)};return a(),o(),n=setInterval(o,r.zoomDelay),!1}}),g("mouseup blur",function(){clearInterval(n),s()})}var f=e(this),d=[],p=e(window),g=function(t,e){d.push({evt:t,fn:e}),p.bind(t,e)},v=function(t,e){for(var n=0;n<d.length;n++){var r=d[n];if(r.evt===t&&r.fn===e){d.splice(n,1);break}}p.unbind(t,e)},y=[],m=f.cytoscape("get"),x=e('<div class="cy-panzoom"></div>');f.prepend(x),x.css("position","absolute"),x.data("winbdgs",d),x.data("cybdgs",y),r.zoomOnly&&x.addClass("cy-panzoom-zoom-only");var b=e('<div class="cy-panzoom-zoom-in cy-panzoom-zoom-button"><span class="icon '+r.zoomInIcon+'"></span></div>');x.append(b);var w=e('<div class="cy-panzoom-zoom-out cy-panzoom-zoom-button"><span class="icon '+r.zoomOutIcon+'"></span></div>');x.append(w);var _=e('<div class="cy-panzoom-reset cy-panzoom-zoom-button"><span class="icon '+r.resetIcon+'"></span></div>');x.append(_);var E=e('<div class="cy-panzoom-slider"></div>');x.append(E),E.append('<div class="cy-panzoom-slider-background"></div>');var k=e('<div class="cy-panzoom-slider-handle"><span class="icon '+r.sliderHandleIcon+'"></span></div>');E.append(k);var N=e('<div class="cy-panzoom-no-zoom-tick"></div>');E.append(N);var L=e('<div class="cy-panzoom-panner"></div>');x.append(L);var S=e('<div class="cy-panzoom-panner-handle"></div>');L.append(S);var T=e('<div class="cy-panzoom-pan-up cy-panzoom-pan-button"></div>'),A=e('<div class="cy-panzoom-pan-down cy-panzoom-pan-button"></div>'),D=e('<div class="cy-panzoom-pan-left cy-panzoom-pan-button"></div>'),M=e('<div class="cy-panzoom-pan-right cy-panzoom-pan-button"></div>');L.append(T).append(A).append(D).append(M);var P=e('<div class="cy-panzoom-pan-indicator"></div>');L.append(P);var I,C,O,R=!1,B=function(e){e.stopPropagation(),e.preventDefault(),clearInterval(O);var n=t(e);if(isNaN(n.x)||isNaN(n.y))return void P.hide();i(n),O=setInterval(function(){f.cytoscape("get").panBy(n)},r.panSpeed)};S.bind("mousedown",function(t){B(t),g("mousemove",B)}),S.bind("mouseup",function(){n()}),g("mouseup blur",function(){n()}),E.bind("mousedown",function(){return!1});var F,z,j=!1,V=2;k.bind("mousedown",F=function(t){var e=t.target===k[0]?t.offsetY:0;j=!0,a(),k.addClass("active");var n=0;return g("mousemove",z=function(t){var r=+new Date;return r>n+10&&(n=r,c(t,e),!1)}),g("mouseup",function(){v("mousemove",z),j=!1,k.removeClass("active"),s()}),!1}),E.bind("mousedown",function(t){t.target!==k[0]&&(F(t),c(t))}),l(),function(t,e){y.push({evt:t,fn:e}),m.on(t,e)}("zoom",function(){j||l()}),function(){var t=r.minZoom,e=r.maxZoom,n=Math.log(t)/Math.log(e),i=Math.log(1)/Math.log(e),o=1-(i-n)/(1-n);if(o>1||o<0)return void N.hide();var a=V,s=E.height()-k.height()-2*V,u=o*(s-a);u<a&&(u=a),u>s&&(u=s),N.css("top",u)}(),h(b,1+r.zoomFactor),h(w,1-r.zoomFactor),_.bind("mousedown",function(t){if(0==t.button){var e=f.cytoscape("get"),n=r.fitSelector?e.elements(r.fitSelector):e.elements();if(0===n.size())e.reset();else{("function"==typeof r.animateOnFit?r.animateOnFit.call():r.animateOnFit)?e.animate({fit:{eles:n,padding:r.fitPadding}},{duration:r.fitAnimationDuration}):e.fit(n,r.fitPadding)}return!1}})})}};return o[i]?o[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?(e.error("No such function `"+i+"` for jquery.cytoscapePanzoom"),e(this)):o.init.apply(this,arguments)};void 0!==e&&e.exports&&(e.exports=t),"undefined"!=typeof define&&define.amd&&define("cytoscape-panzoom",function(){return t}),"undefined"!=typeof cytoscape&&"undefined"!=typeof jQuery&&t(cytoscape,jQuery)}()},{}],41:[function(t,n,r){(function(i){!function(t){if("object"==typeof r&&void 0!==n)n.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:void 0!==i?i:"undefined"!=typeof self?self:this,e.cytoscapeSpread=t()}}(function(){return function e(n,r,i){function o(s,u){if(!r[s]){if(!n[s]){var c="function"==typeof t&&t;if(!u&&c)return c(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var h=r[s]={exports:{}};n[s][0].call(h.exports,function(t){var e=n[s][1][t];return o(e?e:t)},h,h.exports,e,n,r,i)}return r[s].exports}for(var a="function"==typeof t&&t,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,n,r){window.foograph={insertVertex:function(t){this.vertices.push(t),this.vertexCount++},insertEdge:function(t,e,n,r,i){var o=new foograph.Edge(t,e,r,i),a=new foograph.Edge(null,e,n,null);return n.edges.push(o),r.reverseEdges.push(a),o},removeEdge:function(t,e){for(var n=t.edges.length-1;n>=0;n--)if(t.edges[n].endVertex==e){t.edges.splice(n,1);break}for(var n=e.reverseEdges.length-1;n>=0;n--)if(e.reverseEdges[n].endVertex==t){e.reverseEdges.splice(n,1);break}},removeVertex:function(t){for(var e=t.edges.length-1;e>=0;e--)this.removeEdge(t,t.edges[e].endVertex);for(var e=t.reverseEdges.length-1;e>=0;e--)this.removeEdge(t.reverseEdges[e].endVertex,t);for(var e=this.vertices.length-1;e>=0;e--)if(this.vertices[e]==t){this.vertices.splice(e,1);break}this.vertexCount--},plot:function(t){var e=0;for(e=0;e<this.vertices.length;e++){var n=this.vertices[e];if(!n.hidden)for(var r=0;r<n.edges.length;r++){var i=n.edges[r];i.hidden||i.draw(t,n)}}for(e=0;e<this.vertices.length;e++)n=this.vertices[e],n.hidden||n.draw(t)},Graph:function(t,e){this.label=t,this.vertices=new Array,this.directed=e,this.vertexCount=0,this.insertVertex=foograph.insertVertex,this.removeVertex=foograph.removeVertex,this.insertEdge=foograph.insertEdge,this.removeEdge=foograph.removeEdge,this.plot=foograph.plot},Vertex:function(t,e,n,r){this.label=t,this.edges=new Array,this.reverseEdges=new Array,this.x=e,this.y=n,this.dx=0,this.dy=0,this.level=-1,this.numberOfParents=0,this.hidden=!1,this.fixed=!1,this.style=null!=r?r:new foograph.VertexStyle("ellipse",80,40,"#ffffff","#000000",!0)},VertexStyle:function(t,e,n,r,i,o){this.shape=t,this.width=e,this.height=n,this.fillColor=r,this.borderColor=i,this.showLabel=o},Edge:function(t,e,n,r){this.label=t,this.weight=e,this.endVertex=n,this.style=null,this.hidden=!1,this.curved=!1,this.controlX=-1,this.controlY=-1,this.original=null,this.style=null!=r?r:new foograph.EdgeStyle(2,"#000000",!0,!1)},EdgeStyle:function(t,e,n,r){this.width=t,this.color=e,this.showArrow=n,this.showLabel=r},RandomVertexLayout:function(t,e){this.width=t,this.height=e},ForceDirectedVertexLayout:function(t,e,n,r,i){this.width=t,this.height=e,this.iterations=n,this.randomize=r,this.eps=i,this.callback=function(){}},A:1.5,R:.5},foograph.Vertex.prototype.toString=function(){return"[v:"+this.label+"] "},foograph.Edge.prototype.toString=function(){return"[e:"+this.endVertex.label+"] "},foograph.Vertex.prototype.draw=function(t){var e=this.x,n=this.y,r=this.style.width,i=this.style.height,o=this.style.shape;t.setStroke(2),t.setColor(this.style.fillColor),"rect"==o?(t.fillRect(e,n,r,i),t.setColor(this.style.borderColor),t.drawRect(e,n,r,i)):(t.fillEllipse(e,n,r,i),t.setColor(this.style.borderColor),t.drawEllipse(e,n,r,i)),this.style.showLabel&&t.drawStringRect(this.label,e,n+i/2-7,r,"center")},foograph.Graph.prototype.normalize=function(t,e,n){for(var r in this.vertices){var i=this.vertices[r];i.oldX=i.x,i.oldY=i.y}var o=.1*t,a=.9*t,s=.1*e,u=.9*e;null==n&&(n=!0);var c=Number.MAX_VALUE,l=Number.MAX_VALUE,h=Number.MIN_VALUE,f=Number.MIN_VALUE;for(var d in this.vertices){var i=this.vertices[d];i.x<c&&(c=i.x),i.y<l&&(l=i.y),i.x>h&&(h=i.x),i.y>f&&(f=i.y)}var p=(a-o)/(h-c),g=(u-s)/(f-l);n&&(p=Math.min(p,g),g=Math.min(p,g));var v=Number.MIN_VALUE,y=Number.MIN_VALUE;for(var r in this.vertices){var i=this.vertices[r];i.x=(i.x-c)*p,i.y=(i.y-l)*g,i.x>v&&(v=i.x),i.y>y&&(y=i.y)}var m=(t-v)/2,x=(e-y)/2;for(var r in this.vertices){var i=this.vertices[r];i.x+=m,i.y+=x}},foograph.Edge.prototype.draw=function(t,e){function n(t){return(1-t)*(1-t)*c+2*(1-t)*t*d+t*t*h}function r(t){return(1-t)*(1-t)*l+2*(1-t)*t*p+t*t*f}function i(t,e){var n=0;return t>0&&e>=0&&(n=Math.atan(e/t)),t>0&&e<0&&(n=Math.atan(e/t)+2*Math.PI),t<0&&(n=Math.atan(e/t)+Math.PI),(t=0)&&(n=Math.PI/2),(t=0)&&(n=3*Math.PI/2),n}function o(t,e){return Math.sqrt(t*t+e*e)}var a,s,u,c=Math.round(e.x+e.style.width/2),l=Math.round(e.y+e.style.height/2),h=Math.round(this.endVertex.x+this.endVertex.style.width/2),f=Math.round(this.endVertex.y+this.endVertex.style.height/2),d=this.controlX,p=this.controlY;if(t.setStroke(this.style.width),t.setColor(this.style.color),this.curved){this.curved=!1;for(var g,v,y=0,m=c,x=l;y<.9;)y+=.1,g=n(y),v=r(y),t.drawLine(m,x,g,v),m=g,x=v;a=m,s=x,u=i(n(.8)-a,r(.8)-s)}else t.drawLine(c,l,h,f),a=h,s=f,u=i(c-a,l-s);this.style.showArrow&&function(e,n,r){var a=0,s=0,u=50,c=5,l=50,h=-5,f=o(u,c),d=o(l,h),p=i(u,c),g=i(l,h);p+=e,g+=e,u=f*Math.cos(p),c=f*Math.sin(p),l=d*Math.cos(g),h=d*Math.sin(g),a+=n,s+=r,u+=n,c+=r,l+=n,h+=r,
t.fillPolygon(new Array(a,u,l),new Array(s,c,h))}(u,a,s),this.style.showLabel},foograph.RandomVertexLayout.prototype.layout=function(t){for(var e=0;e<t.vertices.length;e++){var n=t.vertices[e];n.x=Math.round(Math.random()*this.width),n.y=Math.round(Math.random()*this.height)}},foograph.ForceDirectedVertexLayout.prototype.__identifyComponents=function(t){var n=new Array,r=new Array;for(var i in t.vertices){var o=t.vertices[i];o.__dfsVisited=!1}for(var a in t.vertices){var o=t.vertices[a];o.__dfsVisited||o.hidden||function(t){function e(t){o.push(t),t.__dfsVisited=!0;for(var e in t.edges){var n=t.edges[e];n.hidden||i.push(n.endVertex)}for(var e in t.reverseEdges)t.reverseEdges[e].hidden||i.push(t.reverseEdges[e].endVertex)}var i=new Array,o=new Array,a=new foograph.Vertex("component_center",-1,-1);for(a.hidden=!0,n.push(a),r.push(o),e(t);i.length>0;){var s=i.pop();s.__dfsVisited||s.hidden||e(s)}}(o)}if(n.length>1){for(var i in n)t.insertVertex(n[i]);for(var i in r)for(var s in r[i])edge=t.insertEdge("",1,r[i][s],n[i]),edge.hidden=!0;for(var i in n)for(var s in n)i!=s&&(e=t.insertEdge("",3,n[i],n[s]),e.hidden=!0);return n}return null},foograph.ForceDirectedVertexLayout.prototype.layout=function(t){this.graph=t;var e=this.width*this.height,n=Math.sqrt(e/t.vertexCount),r=this.width/10,i=r/(this.iterations+1),o=this.eps;centers=this.__identifyComponents(t),this.randomize&&(randomLayout=new foograph.RandomVertexLayout(this.width,this.height),randomLayout.layout(t));for(var a=0;a<this.iterations;a++){for(var s in t.vertices){var u=t.vertices[s];if(u.dx=0,u.dy=0,!u.fixed)for(var c in t.vertices){var l=t.vertices[c];if(u!=l&&!l.fixed){var h=u.x-l.x,f=u.y-l.y,d=Math.max(o,Math.sqrt(h*h+f*f)),p=function(t){return foograph.R*n*n/t}(d);u.dx=u.dx+h/d*p,u.dy=u.dy+f/d*p}}}for(var g in t.vertices){var u=t.vertices[g];if(!u.fixed)for(var v in u.edges){var y=u.edges[v],l=y.endVertex,h=u.x-l.x,f=u.y-l.y,d=Math.max(o,Math.sqrt(h*h+f*f)),p=function(t){return foograph.A*t*t/n}(d),d=Math.max(o,Math.sqrt(h*h+f*f));u.dx=u.dx-h/d*p,u.dy=u.dy-f/d*p,l.dx=l.dx+h/d*p,l.dy=l.dy+f/d*p}}for(var m in t.vertices){var u=t.vertices[m];if(!u.fixed){var d=Math.max(o,Math.sqrt(u.dx*u.dx+u.dy*u.dy));u.x=u.x+u.dx/d*Math.min(d,r),u.y=u.y+u.dy/d*Math.min(d,r),u.x=Math.round(u.x),u.y=Math.round(u.y)}}r-=i,a%10==0&&this.callback()}if(centers)for(var x in centers)t.removeVertex(centers[x]);t.normalize(this.width,this.height,!0)},n.exports=foograph},{}],2:[function(t,e,n){"use strict";var r=t("./layout"),i=function(t){t("layout","spread",r(t))};"undefined"!=typeof cytoscape&&i(cytoscape),e.exports=i},{"./layout":3}],3:[function(t,e,n){function r(t){var e=this.options={};for(var n in s)e[n]=s[n];for(var n in t)e[n]=t[n]}var i,o=t("./foograph"),a=t("./rhill-voronoi-core"),s={animate:!0,ready:void 0,stop:void 0,fit:!0,minDist:20,padding:20,expandingFactor:-1,maxFruchtermanReingoldIterations:50,maxExpandIterations:4,boundingBox:void 0,randomize:!1};r.prototype.run=function(){function t(t){for(var e=t.vertices,i=[],o=0;o<e.length;++o){var a=e[o];i[a.id]={x:a.x,y:a.y}}u.positions(function(t,e){var n=e.id(),r=i[n];return{x:Math.round(g.x1+r.x),y:Math.round(g.y1+r.y)}}),n.fit&&r.fit(n.padding),r.nodes().rtrigger("position")}var e=this,n=this.options,r=n.cy,s=n.boundingBox||{x1:0,y1:0,w:r.width(),h:r.height()};void 0===s.x2&&(s.x2=s.x1+s.w),void 0===s.w&&(s.w=s.x2-s.x1),void 0===s.y2&&(s.y2=s.y1+s.h),void 0===s.h&&(s.h=s.y2-s.y1);var u=r.nodes(),c=r.edges(),l=r.width(),h=r.height(),f=s,d=n.padding,p=Math.max(1,.8*Math.log(u.length));u.length<100&&(p/=2),e.trigger({type:"layoutstart",layout:e});var g={x1:0,y1:0,x2:l*p,y2:h*p};f&&(g.x1=f.x1,g.y1=f.y1,g.x2=f.x2,g.y2=f.y2),g.x1+=d,g.y1+=d,g.x2-=d,g.y2-=d;var v=g.x2-g.x1,y=g.y2-g.y1,m=Date.now();if(u.size()<=1){u.positions({x:Math.round((g.x1+g.x2)/2),y:Math.round((g.y1+g.y2)/2)}),n.fit&&r.fit(n.padding);var x=Date.now();return console.info("Layout on "+u.size()+" nodes took "+(x-m)+" ms"),e.one("layoutready",n.ready),e.trigger("layoutready"),e.one("layoutstop",n.stop),void e.trigger("layoutstop")}var b={width:v,height:y,minDist:n.minDist,expFact:n.expandingFactor,expIt:0,maxExpIt:n.maxExpandIterations,vertices:[],edges:[],startTime:m,maxFruchtermanReingoldIterations:n.maxFruchtermanReingoldIterations};u.each(function(t,e){var r=e.id(),i=e.position();n.randomize&&(i={x:Math.round(g.x1+(g.x2-g.x1)*Math.random()),y:Math.round(g.y1+(g.y2-g.y1)*Math.random())}),b.vertices.push({id:r,x:i.x,y:i.y})}),c.each(function(){var t=this.source().id(),e=this.target().id();b.edges.push({src:t,tgt:e})});var w=e.thread;w&&!w.stopped()||(w=e.thread=i(),w.require(o,"foograph"),w.require(a,"Voronoi"));var _=!1;return w.on("message",function(r){var i=r.message;n.animate&&(t(i),_||(e.trigger("layoutready"),_=!0))}),e.one("layoutready",n.ready),w.pass(b).run(function(t){function e(t){for(var e,n,r,i=t.halfedges,o=0,a=0,s=0,u=0;u<i.length;++u)e=i[u].getEndpoint(),n=i[u].getStartpoint(),o+=e.x*n.y,o-=e.y*n.x,r=e.x*n.y-n.x*e.y,a+=(e.x+n.x)*r,s+=(e.y+n.y)*r;return o/=2,r=6*o,{x:a/r,y:s/r}}function n(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function r(t){for(var e=0,r=0;r<t.length;++r){var i=t[r];null!=i.lSite&&null!=i.rSite&&n(i.lSite,i.rSite)<u&&++e}return e}o=_ref_("foograph"),a=_ref_("Voronoi");for(var i=t.width,s=t.height,u=t.minDist,c=t.expFact,l=t.maxExpIt,h=t.maxFruchtermanReingoldIterations,f=function(){t.width=i,t.height=s,t.expIt=j,t.expFact=c,t.vertices=[];for(var e=0;e<k.length;++e)t.vertices.push({id:k[e].label,x:k[e].x,y:k[e].y})},d=function(){broadcast(t)},p=new o.Graph("FRgraph",!1),g={},v=t.vertices,y=0;y<v.length;++y){var m=v[y].id,x=new o.Vertex(m,Math.round(Math.random()*s),Math.round(Math.random()*s));g[m]=x,p.insertVertex(x)}for(var b=t.edges,w=0;w<b.length;++w){var _=b[w].src,E=b[w].tgt;p.insertEdge("",1,g[_],g[E])}var k=p.vertices,N=h,L=new o.ForceDirectedVertexLayout(i,s,N,!1,u);if(L.callback=function(){f(),d()},L.layout(p),f(),d(),l<=0)return t;for(var S=new a,T={xl:0,xr:i,yt:0,yb:s},A=[],D=0;D<k.length;++D)A[k[D].label]=k[D];for(var M=S.compute(k,T),P=M.cells,D=0;D<P.length;++D){var I=P[D],C=I.site,O=e(I),R=A[C.label];R.x=O.x,R.y=O.y}c<0&&(c=Math.max(.05,Math.min(.1,u/Math.sqrt(i*s/k.length)*.5)));for(var B=r(M.edges),F=B<=0||l<=0,z=0,j=0;!F;){++z;for(var V=0;V<=4;++V){S.recycle(M),M=S.compute(k,T);for(var D=0;D<P.length;++D){var I=P[D],C=I.site,O=e(I),R=A[C.label];R.x=O.x,R.y=O.y}}var G=r(M.edges);G<=0?F=!0:(G>=B||z>=4)&&(j>=l?F=!0:(i+=i*c,s+=s*c,T={xl:0,xr:i,yt:0,yb:s},++j,z=0)),B=G,f(),d()}return f(),t}).then(function(r){var i=r.vertices;t(r);var o=r.startTime,a=new Date;console.info("Layout on "+i.length+" nodes took "+(a-o)+" ms"),e.one("layoutstop",n.stop),n.animate||e.trigger("layoutready"),e.trigger("layoutstop"),w.stop()}),this},r.prototype.stop=function(){this.thread&&this.thread.stop(),this.trigger("layoutstop")},r.prototype.destroy=function(){this.thread&&this.thread.stop()},e.exports=function(t){return i=t.Thread,r}},{"./foograph":1,"./rhill-voronoi-core":4}],4:[function(t,e,n){function r(){this.vertices=null,this.edges=null,this.cells=null,this.toRecycle=null,this.beachsectionJunkyard=[],this.circleEventJunkyard=[],this.vertexJunkyard=[],this.edgeJunkyard=[],this.cellJunkyard=[]}r.prototype.reset=function(){if(this.beachline||(this.beachline=new this.RBTree),this.beachline.root)for(var t=this.beachline.getFirst(this.beachline.root);t;)this.beachsectionJunkyard.push(t),t=t.rbNext;this.beachline.root=null,this.circleEvents||(this.circleEvents=new this.RBTree),this.circleEvents.root=this.firstCircleEvent=null,this.vertices=[],this.edges=[],this.cells=[]},r.prototype.sqrt=function(t){return Math.sqrt(t)},r.prototype.abs=function(t){return Math.abs(t)},r.prototype.ε=r.ε=1e-9,r.prototype.invε=r.invε=1/r.ε,r.prototype.equalWithEpsilon=function(t,e){return this.abs(t-e)<1e-9},r.prototype.greaterThanWithEpsilon=function(t,e){return t-e>1e-9},r.prototype.greaterThanOrEqualWithEpsilon=function(t,e){return e-t<1e-9},r.prototype.lessThanWithEpsilon=function(t,e){return e-t>1e-9},r.prototype.lessThanOrEqualWithEpsilon=function(t,e){return t-e<1e-9},r.prototype.RBTree=function(){this.root=null},r.prototype.RBTree.prototype.rbInsertSuccessor=function(t,e){var n;if(t){if(e.rbPrevious=t,e.rbNext=t.rbNext,t.rbNext&&(t.rbNext.rbPrevious=e),t.rbNext=e,t.rbRight){for(t=t.rbRight;t.rbLeft;)t=t.rbLeft;t.rbLeft=e}else t.rbRight=e;n=t}else this.root?(t=this.getFirst(this.root),e.rbPrevious=null,e.rbNext=t,t.rbPrevious=e,t.rbLeft=e,n=t):(e.rbPrevious=e.rbNext=null,this.root=e,n=null);e.rbLeft=e.rbRight=null,e.rbParent=n,e.rbRed=!0;var r,i;for(t=e;n&&n.rbRed;)r=n.rbParent,n===r.rbLeft?(i=r.rbRight,i&&i.rbRed?(n.rbRed=i.rbRed=!1,r.rbRed=!0,t=r):(t===n.rbRight&&(this.rbRotateLeft(n),t=n,n=t.rbParent),n.rbRed=!1,r.rbRed=!0,this.rbRotateRight(r))):(i=r.rbLeft,i&&i.rbRed?(n.rbRed=i.rbRed=!1,r.rbRed=!0,t=r):(t===n.rbLeft&&(this.rbRotateRight(n),t=n,n=t.rbParent),n.rbRed=!1,r.rbRed=!0,this.rbRotateLeft(r))),n=t.rbParent;this.root.rbRed=!1},r.prototype.RBTree.prototype.rbRemoveNode=function(t){t.rbNext&&(t.rbNext.rbPrevious=t.rbPrevious),t.rbPrevious&&(t.rbPrevious.rbNext=t.rbNext),t.rbNext=t.rbPrevious=null;var e,n=t.rbParent,r=t.rbLeft,i=t.rbRight;e=r?i?this.getFirst(i):r:i,n?n.rbLeft===t?n.rbLeft=e:n.rbRight=e:this.root=e;var o;if(r&&i?(o=e.rbRed,e.rbRed=t.rbRed,e.rbLeft=r,r.rbParent=e,e!==i?(n=e.rbParent,e.rbParent=t.rbParent,t=e.rbRight,n.rbLeft=t,e.rbRight=i,i.rbParent=e):(e.rbParent=n,n=e,t=e.rbRight)):(o=t.rbRed,t=e),t&&(t.rbParent=n),!o){if(t&&t.rbRed)return void(t.rbRed=!1);var a;do{if(t===this.root)break;if(t===n.rbLeft){if(a=n.rbRight,a.rbRed&&(a.rbRed=!1,n.rbRed=!0,this.rbRotateLeft(n),a=n.rbRight),a.rbLeft&&a.rbLeft.rbRed||a.rbRight&&a.rbRight.rbRed){a.rbRight&&a.rbRight.rbRed||(a.rbLeft.rbRed=!1,a.rbRed=!0,this.rbRotateRight(a),a=n.rbRight),a.rbRed=n.rbRed,n.rbRed=a.rbRight.rbRed=!1,this.rbRotateLeft(n),t=this.root;break}}else if(a=n.rbLeft,a.rbRed&&(a.rbRed=!1,n.rbRed=!0,this.rbRotateRight(n),a=n.rbLeft),a.rbLeft&&a.rbLeft.rbRed||a.rbRight&&a.rbRight.rbRed){a.rbLeft&&a.rbLeft.rbRed||(a.rbRight.rbRed=!1,a.rbRed=!0,this.rbRotateLeft(a),a=n.rbLeft),a.rbRed=n.rbRed,n.rbRed=a.rbLeft.rbRed=!1,this.rbRotateRight(n),t=this.root;break}a.rbRed=!0,t=n,n=n.rbParent}while(!t.rbRed);t&&(t.rbRed=!1)}},r.prototype.RBTree.prototype.rbRotateLeft=function(t){var e=t,n=t.rbRight,r=e.rbParent;r?r.rbLeft===e?r.rbLeft=n:r.rbRight=n:this.root=n,n.rbParent=r,e.rbParent=n,e.rbRight=n.rbLeft,e.rbRight&&(e.rbRight.rbParent=e),n.rbLeft=e},r.prototype.RBTree.prototype.rbRotateRight=function(t){var e=t,n=t.rbLeft,r=e.rbParent;r?r.rbLeft===e?r.rbLeft=n:r.rbRight=n:this.root=n,n.rbParent=r,e.rbParent=n,e.rbLeft=n.rbRight,e.rbLeft&&(e.rbLeft.rbParent=e),n.rbRight=e},r.prototype.RBTree.prototype.getFirst=function(t){for(;t.rbLeft;)t=t.rbLeft;return t},r.prototype.RBTree.prototype.getLast=function(t){for(;t.rbRight;)t=t.rbRight;return t},r.prototype.Diagram=function(t){this.site=t},r.prototype.Cell=function(t){this.site=t,this.halfedges=[],this.closeMe=!1},r.prototype.Cell.prototype.init=function(t){return this.site=t,this.halfedges=[],this.closeMe=!1,this},r.prototype.createCell=function(t){var e=this.cellJunkyard.pop();return e?e.init(t):new this.Cell(t)},r.prototype.Cell.prototype.prepareHalfedges=function(){for(var t,e=this.halfedges,n=e.length;n--;)t=e[n].edge,t.vb&&t.va||e.splice(n,1);return e.sort(function(t,e){return e.angle-t.angle}),e.length},r.prototype.Cell.prototype.getNeighborIds=function(){for(var t,e=[],n=this.halfedges.length;n--;)t=this.halfedges[n].edge,null!==t.lSite&&t.lSite.voronoiId!=this.site.voronoiId?e.push(t.lSite.voronoiId):null!==t.rSite&&t.rSite.voronoiId!=this.site.voronoiId&&e.push(t.rSite.voronoiId);return e},r.prototype.Cell.prototype.getBbox=function(){for(var t,e,n,r=this.halfedges,i=r.length,o=1/0,a=1/0,s=-(1/0),u=-(1/0);i--;)t=r[i].getStartpoint(),e=t.x,n=t.y,e<o&&(o=e),n<a&&(a=n),e>s&&(s=e),n>u&&(u=n);return{x:o,y:a,width:s-o,height:u-a}},r.prototype.Cell.prototype.pointIntersection=function(t,e){for(var n,r,i,o,a=this.halfedges,s=a.length;s--;){if(n=a[s],r=n.getStartpoint(),i=n.getEndpoint(),!(o=(e-r.y)*(i.x-r.x)-(t-r.x)*(i.y-r.y)))return 0;if(o>0)return-1}return 1},r.prototype.Vertex=function(t,e){this.x=t,this.y=e},r.prototype.Edge=function(t,e){this.lSite=t,this.rSite=e,this.va=this.vb=null},r.prototype.Halfedge=function(t,e,n){if(this.site=e,this.edge=t,n)this.angle=Math.atan2(n.y-e.y,n.x-e.x);else{var r=t.va,i=t.vb;this.angle=t.lSite===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}},r.prototype.createHalfedge=function(t,e,n){return new this.Halfedge(t,e,n)},r.prototype.Halfedge.prototype.getStartpoint=function(){return this.edge.lSite===this.site?this.edge.va:this.edge.vb},r.prototype.Halfedge.prototype.getEndpoint=function(){return this.edge.lSite===this.site?this.edge.vb:this.edge.va},r.prototype.createVertex=function(t,e){var n=this.vertexJunkyard.pop();return n?(n.x=t,n.y=e):n=new this.Vertex(t,e),this.vertices.push(n),n},r.prototype.createEdge=function(t,e,n,r){var i=this.edgeJunkyard.pop();return i?(i.lSite=t,i.rSite=e,i.va=i.vb=null):i=new this.Edge(t,e),this.edges.push(i),n&&this.setEdgeStartpoint(i,t,e,n),r&&this.setEdgeEndpoint(i,t,e,r),this.cells[t.voronoiId].halfedges.push(this.createHalfedge(i,t,e)),this.cells[e.voronoiId].halfedges.push(this.createHalfedge(i,e,t)),i},r.prototype.createBorderEdge=function(t,e,n){var r=this.edgeJunkyard.pop();return r?(r.lSite=t,r.rSite=null):r=new this.Edge(t,null),r.va=e,r.vb=n,this.edges.push(r),r},r.prototype.setEdgeStartpoint=function(t,e,n,r){t.va||t.vb?t.lSite===n?t.vb=r:t.va=r:(t.va=r,t.lSite=e,t.rSite=n)},r.prototype.setEdgeEndpoint=function(t,e,n,r){this.setEdgeStartpoint(t,n,e,r)},r.prototype.Beachsection=function(){},r.prototype.createBeachsection=function(t){var e=this.beachsectionJunkyard.pop();return e||(e=new this.Beachsection),e.site=t,e},r.prototype.leftBreakPoint=function(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var a=t.rbPrevious;if(!a)return-(1/0);n=a.site;var s=n.x,u=n.y,c=u-e;if(!c)return s;var l=s-r,h=1/o-1/c,f=l/c;return h?(-f+this.sqrt(f*f-2*h*(l*l/(-2*c)-u+c/2+i-o/2)))/h+r:(r+s)/2},r.prototype.rightBreakPoint=function(t,e){var n=t.rbNext;if(n)return this.leftBreakPoint(n,e);var r=t.site;return r.y===e?r.x:1/0},r.prototype.detachBeachsection=function(t){this.detachCircleEvent(t),this.beachline.rbRemoveNode(t),this.beachsectionJunkyard.push(t)},r.prototype.removeBeachsection=function(t){var e=t.circleEvent,n=e.x,r=e.ycenter,i=this.createVertex(n,r),o=t.rbPrevious,a=t.rbNext,s=[t],u=Math.abs;this.detachBeachsection(t);for(var c=o;c.circleEvent&&u(n-c.circleEvent.x)<1e-9&&u(r-c.circleEvent.ycenter)<1e-9;)o=c.rbPrevious,s.unshift(c),this.detachBeachsection(c),c=o;s.unshift(c),this.detachCircleEvent(c);for(var l=a;l.circleEvent&&u(n-l.circleEvent.x)<1e-9&&u(r-l.circleEvent.ycenter)<1e-9;)a=l.rbNext,s.push(l),this.detachBeachsection(l),l=a;s.push(l),this.detachCircleEvent(l);var h,f=s.length;for(h=1;h<f;h++)l=s[h],c=s[h-1],this.setEdgeStartpoint(l.edge,c.site,l.site,i);c=s[0],l=s[f-1],l.edge=this.createEdge(c.site,l.site,void 0,i),this.attachCircleEvent(c),this.attachCircleEvent(l)},r.prototype.addBeachsection=function(t){for(var e,n,r,i,o=t.x,a=t.y,s=this.beachline.root;s;)if((r=this.leftBreakPoint(s,a)-o)>1e-9)s=s.rbLeft;else{if(!((i=o-this.rightBreakPoint(s,a))>1e-9)){r>-1e-9?(e=s.rbPrevious,n=s):i>-1e-9?(e=s,n=s.rbNext):e=n=s;break}if(!s.rbRight){e=s;break}s=s.rbRight}var u=this.createBeachsection(t);if(this.beachline.rbInsertSuccessor(e,u),e||n){if(e===n)return this.detachCircleEvent(e),n=this.createBeachsection(e.site),this.beachline.rbInsertSuccessor(u,n),u.edge=n.edge=this.createEdge(e.site,u.site),this.attachCircleEvent(e),void this.attachCircleEvent(n);if(e&&!n)return void(u.edge=this.createEdge(e.site,u.site));if(e!==n){this.detachCircleEvent(e),this.detachCircleEvent(n);var c=e.site,l=c.x,h=c.y,f=t.x-l,d=t.y-h,p=n.site,g=p.x-l,v=p.y-h,y=2*(f*v-d*g),m=f*f+d*d,x=g*g+v*v,b=this.createVertex((v*m-d*x)/y+l,(f*x-g*m)/y+h);return this.setEdgeStartpoint(n.edge,c,p,b),u.edge=this.createEdge(c,t,void 0,b),n.edge=this.createEdge(t,p,void 0,b),this.attachCircleEvent(e),void this.attachCircleEvent(n)}}},r.prototype.CircleEvent=function(){this.arc=null,this.rbLeft=null,this.rbNext=null,this.rbParent=null,this.rbPrevious=null,this.rbRed=!1,this.rbRight=null,this.site=null,this.x=this.y=this.ycenter=0},r.prototype.attachCircleEvent=function(t){var e=t.rbPrevious,n=t.rbNext;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i.x,s=i.y,u=r.x-a,c=r.y-s,l=o.x-a,h=o.y-s,f=2*(u*h-c*l);if(!(f>=-2e-12)){var d=u*u+c*c,p=l*l+h*h,g=(h*d-c*p)/f,v=(u*p-l*d)/f,y=v+s,m=this.circleEventJunkyard.pop();m||(m=new this.CircleEvent),m.arc=t,m.site=i,m.x=g+a,m.y=y+this.sqrt(g*g+v*v),m.ycenter=y,t.circleEvent=m;for(var x=null,b=this.circleEvents.root;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.rbLeft){x=b.rbPrevious;break}b=b.rbLeft}else{if(!b.rbRight){x=b;break}b=b.rbRight}this.circleEvents.rbInsertSuccessor(x,m),x||(this.firstCircleEvent=m)}}}},r.prototype.detachCircleEvent=function(t){var e=t.circleEvent;e&&(e.rbPrevious||(this.firstCircleEvent=e.rbNext),this.circleEvents.rbRemoveNode(e),this.circleEventJunkyard.push(e),t.circleEvent=null)},r.prototype.connectEdge=function(t,e){var n=t.vb;if(n)return!0;var r,i,o=t.va,a=e.xl,s=e.xr,u=e.yt,c=e.yb,l=t.lSite,h=t.rSite,f=l.x,d=l.y,p=h.x,g=h.y,v=(f+p)/2,y=(d+g)/2;if(this.cells[l.voronoiId].closeMe=!0,this.cells[h.voronoiId].closeMe=!0,g!==d&&(r=(f-p)/(g-d),i=y-r*v),void 0===r){if(v<a||v>=s)return!1;if(f>p){if(!o||o.y<u)o=this.createVertex(v,u);else if(o.y>=c)return!1;n=this.createVertex(v,c)}else{if(!o||o.y>c)o=this.createVertex(v,c);else if(o.y<u)return!1;n=this.createVertex(v,u)}}else if(r<-1||r>1)if(f>p){if(!o||o.y<u)o=this.createVertex((u-i)/r,u);else if(o.y>=c)return!1;n=this.createVertex((c-i)/r,c)}else{if(!o||o.y>c)o=this.createVertex((c-i)/r,c);else if(o.y<u)return!1;n=this.createVertex((u-i)/r,u)}else if(d<g){if(!o||o.x<a)o=this.createVertex(a,r*a+i);else if(o.x>=s)return!1;n=this.createVertex(s,r*s+i)}else{if(!o||o.x>s)o=this.createVertex(s,r*s+i);else if(o.x<a)return!1;n=this.createVertex(a,r*a+i)}return t.va=o,t.vb=n,!0},r.prototype.clipEdge=function(t,e){var n=t.va.x,r=t.va.y,i=t.vb.x,o=t.vb.y,a=0,s=1,u=i-n,c=o-r,l=n-e.xl;if(0===u&&l<0)return!1;var h=-l/u;if(u<0){if(h<a)return!1;h<s&&(s=h)}else if(u>0){if(h>s)return!1;h>a&&(a=h)}if(l=e.xr-n,0===u&&l<0)return!1;if(h=l/u,u<0){if(h>s)return!1;h>a&&(a=h)}else if(u>0){if(h<a)return!1;h<s&&(s=h)}if(l=r-e.yt,0===c&&l<0)return!1;if(h=-l/c,c<0){if(h<a)return!1;h<s&&(s=h)}else if(c>0){if(h>s)return!1;h>a&&(a=h)}if(l=e.yb-r,0===c&&l<0)return!1;if(h=l/c,c<0){if(h>s)return!1;h>a&&(a=h)}else if(c>0){if(h<a)return!1;h<s&&(s=h)}return a>0&&(t.va=this.createVertex(n+a*u,r+a*c)),s<1&&(t.vb=this.createVertex(n+s*u,r+s*c)),(a>0||s<1)&&(this.cells[t.lSite.voronoiId].closeMe=!0,this.cells[t.rSite.voronoiId].closeMe=!0),!0},r.prototype.clipEdges=function(t){for(var e,n=this.edges,r=n.length,i=Math.abs;r--;)e=n[r],(!this.connectEdge(e,t)||!this.clipEdge(e,t)||i(e.va.x-e.vb.x)<1e-9&&i(e.va.y-e.vb.y)<1e-9)&&(e.va=e.vb=null,n.splice(r,1))},r.prototype.closeCells=function(t){for(var e,n,r,i,o,a,s,u,c,l=t.xl,h=t.xr,f=t.yt,d=t.yb,p=this.cells,g=p.length,v=Math.abs;g--;)if(e=p[g],e.prepareHalfedges()&&e.closeMe){for(r=e.halfedges,i=r.length,n=0;n<i;){if(a=r[n].getEndpoint(),u=r[(n+1)%i].getStartpoint(),v(a.x-u.x)>=1e-9||v(a.y-u.y)>=1e-9)switch(!0){case this.equalWithEpsilon(a.x,l)&&this.lessThanWithEpsilon(a.y,d):if(c=this.equalWithEpsilon(u.x,l),s=this.createVertex(l,c?u.y:d),o=this.createBorderEdge(e.site,a,s),n++,r.splice(n,0,this.createHalfedge(o,e.site,null)),i++,c)break;a=s;case this.equalWithEpsilon(a.y,d)&&this.lessThanWithEpsilon(a.x,h):if(c=this.equalWithEpsilon(u.y,d),s=this.createVertex(c?u.x:h,d),o=this.createBorderEdge(e.site,a,s),n++,r.splice(n,0,this.createHalfedge(o,e.site,null)),i++,c)break;a=s;case this.equalWithEpsilon(a.x,h)&&this.greaterThanWithEpsilon(a.y,f):if(c=this.equalWithEpsilon(u.x,h),s=this.createVertex(h,c?u.y:f),o=this.createBorderEdge(e.site,a,s),n++,r.splice(n,0,this.createHalfedge(o,e.site,null)),i++,c)break;a=s;case this.equalWithEpsilon(a.y,f)&&this.greaterThanWithEpsilon(a.x,l):if(c=this.equalWithEpsilon(u.y,f),s=this.createVertex(c?u.x:l,f),o=this.createBorderEdge(e.site,a,s),n++,r.splice(n,0,this.createHalfedge(o,e.site,null)),i++,c)break;if(a=s,c=this.equalWithEpsilon(u.x,l),s=this.createVertex(l,c?u.y:d),o=this.createBorderEdge(e.site,a,s),n++,r.splice(n,0,this.createHalfedge(o,e.site,null)),i++,c)break;if(a=s,c=this.equalWithEpsilon(u.y,d),s=this.createVertex(c?u.x:h,d),o=this.createBorderEdge(e.site,a,s),n++,r.splice(n,0,this.createHalfedge(o,e.site,null)),i++,c)break;if(a=s,c=this.equalWithEpsilon(u.x,h),s=this.createVertex(h,c?u.y:f),o=this.createBorderEdge(e.site,a,s),n++,r.splice(n,0,this.createHalfedge(o,e.site,null)),i++,c)break;default:throw"Voronoi.closeCells() > this makes no sense!"}n++}e.closeMe=!1}},r.prototype.quantizeSites=function(t){for(var e,n=this.ε,r=t.length;r--;)e=t[r],e.x=Math.floor(e.x/n)*n,e.y=Math.floor(e.y/n)*n},r.prototype.recycle=function(t){if(t){if(!(t instanceof this.Diagram))throw"Voronoi.recycleDiagram() > Need a Diagram object.";this.toRecycle=t}},r.prototype.compute=function(t,e){var n=new Date;this.reset(),this.toRecycle&&(this.vertexJunkyard=this.vertexJunkyard.concat(this.toRecycle.vertices),this.edgeJunkyard=this.edgeJunkyard.concat(this.toRecycle.edges),this.cellJunkyard=this.cellJunkyard.concat(this.toRecycle.cells),this.toRecycle=null);var r=t.slice(0);r.sort(function(t,e){var n=e.y-t.y;return n?n:e.x-t.x});for(var i,o,a,s=r.pop(),u=0,c=this.cells;;)if(a=this.firstCircleEvent,s&&(!a||s.y<a.y||s.y===a.y&&s.x<a.x))s.x===i&&s.y===o||(c[u]=this.createCell(s),s.voronoiId=u++,this.addBeachsection(s),o=s.y,i=s.x),s=r.pop();else{if(!a)break;this.removeBeachsection(a.arc)}this.clipEdges(e),this.closeCells(e);var l=new Date,h=new this.Diagram;return h.cells=this.cells,h.edges=this.edges,h.vertices=this.vertices,h.execTime=l.getTime()-n.getTime(),this.reset(),h},e.exports=r},{}]},{},[2])(2)})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],42:[function(t,e,n){!function(){"use strict";var n=function(t,e){function n(t){var e=this.options={};for(var n in r)e[n]=r[n];for(var n in t)e[n]=t[n]}if(t&&e){var r={animate:!0,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,randomize:!1,infinite:!1,ready:void 0,stop:void 0,stiffness:400,repulsion:400,damping:.5,edgeLength:function(t){var e=t.data("length");if(void 0!==e&&!isNaN(e))return e}};n.prototype.run=function(){function t(t){var e=t.scratch("springy").model.id,n=x.layout.nodePoints[e].p,r=t.position(),i=null!=r.x&&null!=r.y?g(t.position()):{x:4*Math.random()-2,y:4*Math.random()-2};n.x=i.x,n.y=i.y}var n=this,r=this,i=this.options;i.random=i.randomize;var o=!1,a=i.cy;n.trigger({type:"layoutstart",layout:n});var s=i.eles,u=s.nodes().not(":parent"),c=s.edges(),l=i.boundingBox||{x1:0,y1:0,w:a.width(),h:a.height()};void 0===l.x2&&(l.x2=l.x1+l.w),void 0===l.w&&(l.w=l.x2-l.x1),void 0===l.y2&&(l.y2=l.y1+l.h),void 0===l.h&&(l.h=l.y2-l.y1);var h=new e.Graph;u.each(function(t,e){e.scratch("springy",{model:h.newNode({element:e})})}),c.each(function(t,e){var n=e.source().scratch("springy").model,r=e.target().scratch("springy").model;e.scratch("springy",{model:h.newEdge(n,r,{element:e,length:i.edgeLength.call(e,e)})})});var f=window.sim=new e.Layout.ForceDirected(h,i.stiffness,i.repulsion,i.damping);i.infinite&&(f.minEnergyThreshold=-(1/0));var d=f.getBoundingBox(),p=function(t){d=f.getBoundingBox();var n=d.topright.subtract(d.bottomleft),r=t.subtract(d.bottomleft).divide(n.x).x*l.w+l.x1,i=t.subtract(d.bottomleft).divide(n.y).y*l.h+l.x1;return new e.Vector(r,i)},g=function(t){d=f.getBoundingBox();var n=d.topright.subtract(d.bottomleft),r=(t.x-l.x1)/l.w*n.x+d.bottomleft.x,i=(t.y-l.y1)/l.h*n.y+d.bottomleft.y;return new e.Vector(r,i)},v=a.collection(),y=a.nodes().size(),m=1,x=new e.Renderer(f,function(){r.stopped||v.length>0&&i.animate&&(o=!0,v.positions(function(t,e){return e.scratch("springy").position}),i.fit&&a.fit(i.padding),v=a.collection(),o=!1)},function(t,e,n){},function(t,e){if(!r.stopped){var o=p(e),a=t.data.element;a.locked()||a.grabbed()||(a.scratch("springy").position={x:o.x,y:o.y},v.merge(a)),m==y&&(n.one("layoutready",i.ready),n.trigger({type:"layoutready",layout:n})),m++}});u.each(function(e,n){i.random||t(n)});var b;u.on("position",b=function(){o||t(this)});var w=u.filter(":grabbable");return r.stopSystem=function(){r.stopped=!0,h.filterNodes(function(){return!1}),i.ungrabifyWhileSimulating&&w.grabify(),i.fit&&a.fit(i.padding),u.off("drag position",b),n.one("layoutstop",i.stop),n.trigger({type:"layoutstop",layout:n}),r.stopSystem=null},function(){r.stopped=!1,i.ungrabifyWhileSimulating&&w.ungrabify(),x.start()}(),i.infinite||setTimeout(function(){r.stop()},i.maxSimulationTime),this},n.prototype.stop=function(){return null!=this.stopSystem&&this.stopSystem(),this},t("layout","springy",n)}};void 0!==e&&e.exports&&(e.exports=function(e,r){n(e,r||t("springy"))}),"undefined"!=typeof define&&define.amd&&define("cytoscape-springy",function(){return n}),"undefined"!=typeof cytoscape&&"undefined"!=typeof Springy&&n(cytoscape,Springy)}()},{springy:204}],43:[function(t,e,n){"use strict"},{}],44:[function(t,e,n){"use strict";var r=t("./util"),i=t("./is"),o=t("./promise"),a=function(t,e,n){if(!(this instanceof a))return new a(t,e,n);var o=this._private=r.extend({duration:1e3},e,n);o.target=t,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&i.fn(o.complete)&&o.completes.push(o.complete),this.length=1,this[0]=this},s=a.prototype;r.extend(s,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var e,n=t.target._private.animation;e=t.queue?n.queue:n.current,e.push(this),i.elementOrCollection(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return 1===t.progress&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var e=this._private;return void 0===t?e.progress*e.duration:this.progress(t/e.duration)},progress:function(t){var e=this._private,n=e.playing;return void 0===t?e.progress:(n&&this.pause(),e.progress=t,e.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var t=this._private,e=t.playing;e&&this.pause(),t.progress=1-t.progress,t.started=!1;var n=function(e,n){var r=t[e];t[e]=t[n],t[n]=r};n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition");for(var r=0;r<t.style.length;r++){var i=t.style[r],o=i.name,a=t.startStyle[o];t.startStyle[o]=i,t.style[r]=a}return e&&this.play(),this},promise:function(t){var e,n=this._private;switch(t){case"frame":e=n.frames;break;default:case"complete":case"completed":e=n.completes}return new o(function(t,n){e.push(function(){t()})})}}),s.complete=s.completed,e.exports=a},{"./is":125,"./promise":128,"./util":142}],45:[function(t,e,n){"use strict";var r=t("../../is"),i={aStar:function(t){var e=this;t=t||{};var n=function(t,e,r,o){if(t==e)return o.push(i.getElementById(e)),o;if(e in r){var a=r[e],s=d[e];return o.push(i.getElementById(e)),o.push(i.getElementById(s)),n(t,a,r,o)}},i=this._private.cy;if(null!=t&&null!=t.root){var o=r.string(t.root)?this.filter(t.root)[0]:t.root[0];if(null!=t.goal){var a=r.string(t.goal)?this.filter(t.goal)[0]:t.goal[0];if(null!=t.heuristic&&r.fn(t.heuristic))var s=t.heuristic;else var s=function(){return 0};if(null!=t.weight&&r.fn(t.weight))var u=t.weight;else var u=function(t){return 1};if(null!=t.directed)var c=t.directed;else var c=!1;var l=[],h=[o.id()],f={},d={},p={},g={};p[o.id()]=0,g[o.id()]=s(o);for(var v=this.edges().stdFilter(function(t){return!t.isLoop()}),y=this.nodes(),m=0;h.length>0;){var x=function(t,e){if(0!==t.length){for(var n=0,r=e[t[0]],i=1;i<t.length;i++){var o=e[t[i]];o<r&&(r=o,n=i)}return n}}(h,g),b=i.getElementById(h[x]);if(m++,b.id()==a.id()){var w=n(o.id(),a.id(),f,[]);return w.reverse(),{found:!0,distance:p[b.id()],path:e.spawn(w),steps:m}}l.push(b.id()),h.splice(x,1);var _=b.connectedEdges();c&&(_=_.stdFilter(function(t){return t.data("source")===b.id()})),_=_.intersect(v);for(var E=0;E<_.length;E++){var k=_[E],N=k.connectedNodes().stdFilter(function(t){return t.id()!==b.id()}).intersect(y);if(l.indexOf(N.id())==-1){var L=p[b.id()]+u.apply(k,[k]);h.indexOf(N.id())!=-1?L<p[N.id()]&&(p[N.id()]=L,g[N.id()]=L+s(N),f[N.id()]=b.id()):(p[N.id()]=L,g[N.id()]=L+s(N),h.push(N.id()),f[N.id()]=b.id(),d[N.id()]=k.id())}}}return{found:!1,distance:void 0,path:void 0,steps:m}}}}};e.exports=i},{"../../is":125}],46:[function(t,e,n){"use strict";var r=t("../../is"),i=t("../../util"),o={bellmanFord:function(t){var e=this;if(t=t||{},null!=t.weight&&r.fn(t.weight))var n=t.weight;else var n=function(t){return 1};if(null!=t.directed)var o=t.directed;else var o=!1;if(null!=t.root){if(r.string(t.root))var a=this.filter(t.root)[0];else var a=t.root[0];for(var s=this._private.cy,u=this.edges().stdFilter(function(t){return!t.isLoop()}),c=this.nodes(),l=c.length,h={},f=0;f<l;f++)h[c[f].id()]=f;for(var d=[],p=[],g=[],f=0;f<l;f++)c[f].id()===a.id()?d[f]=0:d[f]=1/0,p[f]=void 0;for(var v=!1,f=1;f<l;f++){v=!1;for(var y=0;y<u.length;y++){var m=h[u[y].source().id()],x=h[u[y].target().id()],b=n.apply(u[y],[u[y]]),w=d[m]+b;if(w<d[x]&&(d[x]=w,p[x]=m,g[x]=u[y],v=!0),!o){var w=d[x]+b;w<d[m]&&(d[m]=w,p[m]=x,g[m]=u[y],v=!0)}}if(!v)break}if(v)for(var y=0;y<u.length;y++){var m=h[u[y].source().id()],x=h[u[y].target().id()],b=n.apply(u[y],[u[y]]);if(d[m]+b<d[x])return i.error("Graph contains a negative weight cycle for Bellman-Ford"),{pathTo:void 0,distanceTo:void 0,hasNegativeWeightCycle:!0}}for(var _=[],f=0;f<l;f++)_.push(c[f].id());return{distanceTo:function(t){if(r.string(t))var e=s.filter(t)[0].id();else var e=t.id();return d[h[e]]},pathTo:function(t){if(r.string(t))var n=s.filter(t)[0].id();else var n=t.id();var i=[],o=function(t,e,n,r,i,o){for(;;){if(i.push(s.getElementById(r[n])),i.push(o[n]),e===n)return i;var a=t[n];if(void 0===a)return;n=a}}(p,h[a.id()],h[n],_,i,g);return null!=o&&o.reverse(),e.spawn(o)},hasNegativeWeightCycle:!1}}}};e.exports=o},{"../../is":125,"../../util":142}],47:[function(t,e,n){"use strict";var r=t("../../is"),i=t("../../heap"),o={betweennessCentrality:function(t){t=t||{};var e,n;r.fn(t.weight)?(n=t.weight,e=!0):e=!1;for(var o=null!=t.directed&&t.directed,a=this._private.cy,s=this.nodes(),u={},c={},l=0,h={set:function(t,e){c[t]=e,e>l&&(l=e)},get:function(t){return c[t]}},f=0;f<s.length;f++){var d=s[f],p=d.id();u[p]=o?d.outgoers().nodes():d.openNeighborhood().nodes(),h.set(p,0)}for(var g=0;g<s.length;g++){for(var v=s[g].id(),y=[],m={},x={},b={},w=new i(function(t,e){return b[t]-b[e]}),f=0;f<s.length;f++){var p=s[f].id();m[p]=[],x[p]=0,b[p]=1/0}for(x[v]=1,b[v]=0,w.push(v);!w.empty();){var d=w.pop();if(y.push(d),e)for(var _=0;_<u[d].length;_++){var E,k=u[d][_],N=a.getElementById(d);E=N.edgesTo(k).length>0?N.edgesTo(k)[0]:k.edgesTo(N)[0];var L=n.apply(E,[E]);k=k.id(),b[k]>b[d]+L&&(b[k]=b[d]+L,w.nodes.indexOf(k)<0?w.push(k):w.updateItem(k),x[k]=0,m[k]=[]),b[k]==b[d]+L&&(x[k]=x[k]+x[d],m[k].push(d))}else for(var _=0;_<u[d].length;_++){var k=u[d][_].id();b[k]==1/0&&(w.push(k),b[k]=b[d]+1),b[k]==b[d]+1&&(x[k]=x[k]+x[d],m[k].push(d))}}
for(var S={},f=0;f<s.length;f++)S[s[f].id()]=0;for(;y.length>0;)for(var k=y.pop(),_=0;_<m[k].length;_++){var d=m[k][_];S[d]=S[d]+x[d]/x[k]*(1+S[k]),k!=s[g].id()&&h.set(k,h.get(k)+S[k])}}var T={betweenness:function(t){if(r.string(t))var t=a.filter(t).id();else var t=t.id();return h.get(t)},betweennessNormalized:function(t){if(0==l)return 0;if(r.string(t))var t=a.filter(t).id();else var t=t.id();return h.get(t)/l}};return T.betweennessNormalised=T.betweennessNormalized,T}};o.bc=o.betweennessCentrality,e.exports=o},{"../../heap":123,"../../is":125}],48:[function(t,e,n){"use strict";var r=t("../../is"),i=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(e,n,i){var o,a,s;r.plainObject(e)&&!r.elementOrCollection(e)&&(o=e,e=o.roots||o.root,n=o.visit,i=o.directed,a=o.std,s=o.thisArg),i=2!==arguments.length||r.fn(n)?i:n,n=r.fn(n)?n:function(){};for(var u,c=this._private.cy,l=e=r.string(e)?this.filter(e):e,h=[],f=[],d={},p={},g={},v=0,y=this.nodes(),m=this.edges(),x=0;x<l.length;x++)l[x].isNode()&&(h.unshift(l[x]),t.bfs&&(g[l[x].id()]=!0,f.push(l[x])),p[l[x].id()]=0);for(;0!==h.length;){var l=t.bfs?h.shift():h.pop();if(t.dfs){if(g[l.id()])continue;g[l.id()]=!0,f.push(l)}var b,w=p[l.id()],_=d[l.id()],E=null==_?void 0:_.connectedNodes().not(l)[0];if((b=a?n.call(s,l,_,E,v++,w):n.call(l,v++,w,l,_,E))===!0){u=l;break}if(b===!1)break;for(var k=l.connectedEdges(i?function(){return this.data("source")===l.id()}:void 0).intersect(m),x=0;x<k.length;x++){var N=k[x],L=N.connectedNodes(function(){return this.id()!==l.id()}).intersect(y);0===L.length||g[L.id()]||(L=L[0],h.push(L),t.bfs&&(g[L.id()]=!0,f.push(L)),d[L.id()]=N,p[L.id()]=p[l.id()]+1)}}for(var S=[],x=0;x<f.length;x++){var T=f[x],A=d[T.id()];A&&S.push(A),S.push(T)}return{path:c.collection(S,{unique:!0}),found:c.collection(u)}}},o={breadthFirstSearch:i({bfs:!0}),depthFirstSearch:i({dfs:!0})};o.bfs=o.breadthFirstSearch,o.dfs=o.depthFirstSearch,e.exports=o},{"../../is":125}],49:[function(t,e,n){"use strict";var r=t("../../is"),i={closenessCentralityNormalized:function(t){t=t||{};var e=this.cy(),n=t.harmonic;void 0===n&&(n=!0);for(var i={},o=0,a=this.nodes(),s=this.floydWarshall({weight:t.weight,directed:t.directed}),u=0;u<a.length;u++){for(var c=0,l=0;l<a.length;l++)if(u!=l){var h=s.distance(a[u],a[l]);c+=n?1/h:h}n||(c=1/c),o<c&&(o=c),i[a[u].id()]=c}return{closeness:function(t){if(0==o)return 0;if(r.string(t))var t=e.filter(t)[0].id();else var t=t.id();return i[t]/o}}},closenessCentrality:function(t){if(t=t||{},null!=t.root){if(r.string(t.root))var e=this.filter(t.root)[0];else var e=t.root[0];if(null!=t.weight&&r.fn(t.weight))var n=t.weight;else var n=function(){return 1};if(null!=t.directed&&r.bool(t.directed))var i=t.directed;else var i=!1;var o=t.harmonic;void 0===o&&(o=!0);for(var a=this.dijkstra({root:e,weight:n,directed:i}),s=0,u=this.nodes(),c=0;c<u.length;c++)if(u[c].id()!=e.id()){var l=a.distanceTo(u[c]);s+=o?1/l:l}return o?s:1/s}}};i.cc=i.closenessCentrality,i.ccn=i.closenessCentralityNormalised=i.closenessCentralityNormalized,e.exports=i},{"../../is":125}],50:[function(t,e,n){"use strict";var r=t("../../is"),i=t("../../util"),o={degreeCentralityNormalized:function(t){t=t||{};var e=this.cy();if(null!=t.directed)var n=t.directed;else var n=!1;var o=this.nodes(),a=o.length;if(n){for(var s={},u={},c=0,l=0,h=0;h<a;h++){var f=o[h],d=this.degreeCentrality(i.extend({},t,{root:f}));c<d.indegree&&(c=d.indegree),l<d.outdegree&&(l=d.outdegree),s[f.id()]=d.indegree,u[f.id()]=d.outdegree}return{indegree:function(t){if(0==c)return 0;if(r.string(t))var t=e.filter(t)[0].id();else var t=t.id();return s[t]/c},outdegree:function(t){if(0==l)return 0;if(r.string(t))var t=e.filter(t)[0].id();else var t=t.id();return u[t]/l}}}for(var p={},g=0,h=0;h<a;h++){var f=o[h],d=this.degreeCentrality(i.extend({},t,{root:f}));g<d.degree&&(g=d.degree),p[f.id()]=d.degree}return{degree:function(t){if(0==g)return 0;if(r.string(t))var t=e.filter(t)[0].id();else var t=t.id();return p[t]/g}}},degreeCentrality:function(t){t=t||{};var e=this;if(null!=t&&null!=t.root){var n=r.string(t.root)?this.filter(t.root)[0]:t.root[0];if(null!=t.weight&&r.fn(t.weight))var i=t.weight;else var i=function(t){return 1};if(null!=t.directed)var o=t.directed;else var o=!1;if(null!=t.alpha&&r.number(t.alpha))var a=t.alpha;else a=0;if(o){for(var s=n.connectedEdges('edge[target = "'+n.id()+'"]').intersection(e),u=n.connectedEdges('edge[source = "'+n.id()+'"]').intersection(e),c=s.length,l=u.length,h=0,f=0,d=0;d<s.length;d++){var p=s[d];h+=i.apply(p,[p])}for(var d=0;d<u.length;d++){var p=u[d];f+=i.apply(p,[p])}return{indegree:Math.pow(c,1-a)*Math.pow(h,a),outdegree:Math.pow(l,1-a)*Math.pow(f,a)}}for(var g=n.connectedEdges().intersection(e),v=g.length,y=0,d=0;d<g.length;d++){var p=g[d];y+=i.apply(p,[p])}return{degree:Math.pow(v,1-a)*Math.pow(y,a)}}}};o.dc=o.degreeCentrality,o.dcn=o.degreeCentralityNormalised=o.degreeCentralityNormalized,e.exports=o},{"../../is":125,"../../util":142}],51:[function(t,e,n){"use strict";var r=t("../../is"),i=t("../../heap"),o={dijkstra:function(t,e,n){var o;r.plainObject(t)&&!r.elementOrCollection(t)&&(o=t,t=o.root,e=o.weight,n=o.directed);var a=this._private.cy;e=r.fn(e)?e:function(){return 1};for(var s=r.string(t)?this.filter(t)[0]:t[0],u={},c={},l={},h=this.edges().filter(function(){return!this.isLoop()}),f=this.nodes(),d=function(t){return u[t.id()]},p=new i(function(t,e){return d(t)-d(e)}),g=0;g<f.length;g++){var v=f[g];u[v.id()]=v.same(s)?0:1/0,p.push(v)}for(;p.size()>0;){var y=p.pop(),m=d(y);if(l[y.id()]=m,m===Math.Infinite)break;for(var x=y.neighborhood().intersect(f),g=0;g<x.length;g++){var b=x[g],w=b.id(),_=function(t,r){for(var i,o=(n?t.edgesTo(r):t.edgesWith(r)).intersect(h),a=1/0,s=0;s<o.length;s++){var u=o[s],c=e.apply(u,[u]);(c<a||!i)&&(a=c,i=u)}return{edge:i,dist:a}}(y,b),E=m+_.dist;E<d(b)&&(!function(t,e){u[t.id()]=e,p.updateItem(t)}(b,E),c[w]={node:y,edge:_.edge})}}return{distanceTo:function(t){return l[(r.string(t)?f.filter(t)[0]:t[0]).id()]},pathTo:function(t){var e=r.string(t)?f.filter(t)[0]:t[0],n=[],i=e;if(e.length>0)for(n.unshift(e);c[i.id()];){var o=c[i.id()];n.unshift(o.edge),n.unshift(o.node),i=o.node}return a.collection(n)}}}};e.exports=o},{"../../heap":123,"../../is":125}],52:[function(t,e,n){"use strict";var r=t("../../is"),i={floydWarshall:function(t){t=t||{};var e=this.cy();if(null!=t.weight&&r.fn(t.weight))var n=t.weight;else var n=function(t){return 1};if(null!=t.directed)var i=t.directed;else var i=!1;for(var o=this.edges().stdFilter(function(t){return!t.isLoop()}),a=this.nodes(),s=a.length,u={},c=0;c<s;c++)u[a[c].id()]=c;for(var l=[],c=0;c<s;c++){for(var h=new Array(s),f=0;f<s;f++)h[f]=c==f?0:1/0;l.push(h)}var d=[],p=[],g=function(t){for(var e=0;e<s;e++){for(var n=new Array(s),r=0;r<s;r++)n[r]=void 0;t.push(n)}};g(d),g(p);for(var c=0;c<o.length;c++){var v=u[o[c].source().id()],y=u[o[c].target().id()],m=n.apply(o[c],[o[c]]);l[v][y]>m&&(l[v][y]=m,d[v][y]=y,p[v][y]=o[c])}if(!i)for(var c=0;c<o.length;c++){var v=u[o[c].target().id()],y=u[o[c].source().id()],m=n.apply(o[c],[o[c]]);l[v][y]>m&&(l[v][y]=m,d[v][y]=y,p[v][y]=o[c])}for(var x=0;x<s;x++)for(var c=0;c<s;c++)for(var f=0;f<s;f++)l[c][x]+l[x][f]<l[c][f]&&(l[c][f]=l[c][x]+l[x][f],d[c][f]=d[c][x]);for(var b=[],c=0;c<s;c++)b.push(a[c].id());return{distance:function(t,n){if(r.string(t))var i=e.filter(t)[0].id();else var i=t.id();if(r.string(n))var o=e.filter(n)[0].id();else var o=n.id();return l[u[i]][u[o]]},path:function(t,n){if(r.string(t))var i=e.filter(t)[0].id();else var i=t.id();if(r.string(n))var o=e.filter(n)[0].id();else var o=n.id();var a=function(t,n,r,i,o){if(t===n)return e.getElementById(i[t]);if(void 0!==r[t][n]){for(var a=[e.getElementById(i[t])],s=t;t!==n;){s=t,t=r[t][n];var u=o[s][t];a.push(u),a.push(e.getElementById(i[t]))}return a}}(u[i],u[o],d,b,p);return e.collection(a)}}}};e.exports=i},{"../../is":125}],53:[function(t,e,n){"use strict";var r=t("../../util"),i={};[t("./bfs-dfs"),t("./dijkstra"),t("./kruskal"),t("./a-star"),t("./floyd-warshall"),t("./bellman-ford"),t("./kerger-stein"),t("./page-rank"),t("./degree-centrality"),t("./closeness-centrality"),t("./betweenness-centrality")].forEach(function(t){r.extend(i,t)}),e.exports=i},{"../../util":142,"./a-star":45,"./bellman-ford":46,"./betweenness-centrality":47,"./bfs-dfs":48,"./closeness-centrality":49,"./degree-centrality":50,"./dijkstra":51,"./floyd-warshall":52,"./kerger-stein":54,"./kruskal":55,"./page-rank":56}],54:[function(t,e,n){"use strict";var r=t("../../util"),i={kargerStein:function(t){var e=this;t=t||{};var n=function(t,e,n){for(var r=n[t],i=r[1],o=r[2],a=e[i],s=e[o],u=n.filter(function(t){return(e[t[1]]!==a||e[t[2]]!==s)&&(e[t[1]]!==s||e[t[2]]!==a)}),c=0;c<u.length;c++){var l=u[c];l[1]===s?(u[c]=l.slice(0),u[c][1]=a):l[2]===s&&(u[c]=l.slice(0),u[c][2]=a)}for(var c=0;c<e.length;c++)e[c]===s&&(e[c]=a);return u},i=function(t,e,r,o){return r<=o?e:i(t,n(Math.floor(Math.random()*e.length),t,e),r-1,o)},o=this._private.cy,a=this.edges().stdFilter(function(t){return!t.isLoop()}),s=this.nodes(),u=s.length,c=a.length,l=Math.ceil(Math.pow(Math.log(u)/Math.LN2,2)),h=Math.floor(u/Math.sqrt(2));if(u<2)return void r.error("At least 2 nodes are required for Karger-Stein algorithm");for(var f={},d=0;d<u;d++)f[s[d].id()]=d;for(var p=[],d=0;d<c;d++){var g=a[d];p.push([d,f[g.source().id()],f[g.target().id()]])}for(var v,y=1/0,m=[],d=0;d<u;d++)m.push(d);for(var x=0;x<=l;x++){var b=m.slice(0),w=i(b,p,u,h),_=b.slice(0),E=i(b,w,h,2),k=i(_,w,h,2);E.length<=k.length&&E.length<y?(y=E.length,v=[E,b]):k.length<=E.length&&k.length<y&&(y=k.length,v=[k,_])}for(var N=v[0].map(function(t){return a[t[0]]}),L=[],S=[],T=v[1][0],d=0;d<v[1].length;d++){v[1][d]===T?L.push(s[d]):S.push(s[d])}return{cut:e.spawn(o,N),partition1:e.spawn(L),partition2:e.spawn(S)}}};e.exports=i},{"../../util":142}],55:[function(t,e,n){"use strict";var r=t("../../is"),i={kruskal:function(t){function e(t){for(var e=0;e<o.length;e++){var n=o[e];if(n.anySame(t))return{eles:n,index:e}}}var n=this.cy();t=r.fn(t)?t:function(){return 1};for(var i=n.collection(n,[]),o=[],a=this.nodes(),s=0;s<a.length;s++)o.push(a[s].collection());for(var u=this.edges(),c=u.toArray().sort(function(e,n){return t.call(e,e)-t.call(n,n)}),s=0;s<c.length;s++){var l=c[s],h=l.source()[0],f=l.target()[0],d=e(h),p=e(f);d.index!==p.index&&(i=i.add(l),o[d.index]=d.eles.add(p.eles),o.splice(p.index,1))}return a.add(i)}};e.exports=i},{"../../is":125}],56:[function(t,e,n){"use strict";var r=t("../../is"),i={pageRank:function(t){t=t||{};if(null!=t&&null!=t.dampingFactor)var e=t.dampingFactor;else var e=.8;if(null!=t&&null!=t.precision)var n=t.precision;else var n=1e-6;if(null!=t&&null!=t.iterations)var i=t.iterations;else var i=200;if(null!=t&&null!=t.weight&&r.fn(t.weight))var o=t.weight;else var o=function(t){return 1};for(var a=this._private.cy,s=this.edges().stdFilter(function(t){return!t.isLoop()}),u=this.nodes(),c=u.length,l=s.length,h={},f=0;f<c;f++)h[u[f].id()]=f;for(var d=[],p=[],g=(1-e)/c,f=0;f<c;f++){for(var v=[],y=0;y<c;y++)v.push(0);d.push(v),p.push(0)}for(var f=0;f<l;f++){var m=s[f],x=h[m.source().id()],b=h[m.target().id()],w=o.apply(m,[m]);d[b][x]+=w,p[x]+=w}for(var _=1/c+g,y=0;y<c;y++)if(0===p[y])for(var f=0;f<c;f++)d[f][y]=_;else for(var f=0;f<c;f++)d[f][y]=d[f][y]/p[y]+g;for(var E,k=[],N=[],f=0;f<c;f++)k.push(1),N.push(0);for(var L=0;L<i;L++){for(var S=N.slice(0),f=0;f<c;f++)for(var y=0;y<c;y++)S[f]+=d[f][y]*k[y];!function(t){for(var e=t.length,n=0,r=0;r<e;r++)n+=t[r];for(var r=0;r<e;r++)t[r]=t[r]/n}(S),E=k,k=S;for(var T=0,f=0;f<c;f++)T+=Math.pow(E[f]-k[f],2);if(T<n)break}return{rank:function(t){if(r.string(t))var e=a.filter(t)[0].id();else var e=t.id();return k[h[e]]}}}};e.exports=i},{"../../is":125}],57:[function(t,e,n){"use strict";var r=t("../define"),i={animate:r.animate(),animation:r.animation(),animated:r.animated(),clearQueue:r.clearQueue(),delay:r.delay(),delayAnimation:r.delayAnimation(),stop:r.stop()};e.exports=i},{"../define":86}],58:[function(t,e,n){"use strict";var r=t("../util"),i={classes:function(t){t=(t||"").match(/\S+/g)||[];for(var e=this,n=[],i={},o=0;o<t.length;o++){var a=t[o];i[a]=!0}for(var s=0;s<e.length;s++){for(var u=e[s],c=u._private,l=c.classes,h=!1,o=0;o<t.length;o++){var a=t[o],f=l[a];if(!f){h=!0;break}}if(!h)for(var t=Object.keys(l),o=0;o<t.length;o++){var d=t[o],f=l[d],p=i[d];if(f&&!p){h=!0;break}}h&&(c.classes=r.copy(i),n.push(u))}return n.length>0&&this.spawn(n).updateStyle().trigger("class"),e},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var e=this[0];return!(null==e||!e._private.classes[t])},toggleClass:function(t,e){for(var n=t.match(/\S+/g)||[],r=this,i=[],o=0,a=r.length;o<a;o++)for(var s=r[o],u=!1,c=0;c<n.length;c++){var l=n[c],h=s._private.classes,f=h[l],d=e||void 0===e&&!f;d?(h[l]=!0,f||u||(i.push(s),u=!0)):(h[l]=!1,f&&!u&&(i.push(s),u=!0))}return i.length>0&&this.spawn(i).updateStyle().trigger("class"),r},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,e){var n=this;if(null==e)e=250;else if(0===e)return n;return n.addClass(t),setTimeout(function(){n.removeClass(t)},e),n}};e.exports=i},{"../util":142}],59:[function(t,e,n){"use strict";var r={allAre:function(t){return this.filter(t).length===this.length},is:function(t){return this.filter(t).length>0},some:function(t,e){for(var n=0;n<this.length;n++){if(e?t.apply(e,[this[n],n,this]):t(this[n],n,this))return!0}return!1},every:function(t,e){for(var n=0;n<this.length;n++){if(!(e?t.apply(e,[this[n],n,this]):t(this[n],n,this)))return!1}return!0},same:function(t){return t=this.cy().collection(t),this.length===t.length&&this.intersect(t).length===this.length},anySame:function(t){return t=this.cy().collection(t),this.intersect(t).length>0},allAreNeighbors:function(t){return t=this.cy().collection(t),this.neighborhood().intersect(t).length===t.length}};r.allAreNeighbours=r.allAreNeighbors,e.exports=r},{}],60:[function(t,e,n){"use strict";var r={parent:function(t){for(var e=[],n=this._private.cy,r=0;r<this.length;r++){var i=this[r],o=n.getElementById(i._private.data.parent);o.size()>0&&e.push(o)}return this.spawn(e,{unique:!0}).filter(t)},parents:function(t){for(var e=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++){var i=n[r];e.push(i)}n=n.parent()}return this.spawn(e,{unique:!0}).filter(t)},commonAncestors:function(t){for(var e,n=0;n<this.length;n++){var r=this[n],i=r.parents();e=e||i,e=e.intersect(i)}return e.filter(t)},orphans:function(t){return this.stdFilter(function(t){return t.isNode()&&t.parent().empty()}).filter(t)},nonorphans:function(t){return this.stdFilter(function(t){return t.isNode()&&t.parent().nonempty()}).filter(t)},children:function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];e=e.concat(r._private.children)}return this.spawn(e,{unique:!0}).filter(t)},siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return 0!==t._private.children.length},isChild:function(){var t=this[0];if(t)return void 0!==t._private.data.parent&&0!==t.parent().length},descendants:function(t){function e(t){for(var r=0;r<t.length;r++){var i=t[r];n.push(i),i.children().nonempty()&&e(i.children())}}var n=[];return e(this.children()),this.spawn(n,{unique:!0}).filter(t)}};r.ancestors=r.parents,e.exports=r},{}],61:[function(t,e,n){"use strict";var r,i,o=t("../define");r=i={data:o.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:o.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:o.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:o.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:o.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:o.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}},r.attr=r.data,r.removeAttr=r.removeData,e.exports=i},{"../define":86}],62:[function(t,e,n){"use strict";function r(t){return function(e){var n=this;if(void 0===e&&(e=!0),0!==n.length&&n.isNode()&&!n.removed()){for(var r=0,i=n[0],o=i._private.edges,a=0;a<o.length;a++){var s=o[a];!e&&s.isLoop()||(r+=t(i,s))}return r}}}function i(t,e){return function(n){for(var r,i=this.nodes(),o=0;o<i.length;o++){var a=i[o],s=a[t](n);void 0===s||void 0!==r&&!e(s,r)||(r=s)}return r}}var o=t("../util"),a={};o.extend(a,{degree:r(function(t,e){return e.source().same(e.target())?2:1}),indegree:r(function(t,e){return e.target().same(t)?1:0}),outdegree:r(function(t,e){return e.source().same(t)?1:0})}),o.extend(a,{minDegree:i("degree",function(t,e){return t<e}),maxDegree:i("degree",function(t,e){return t>e}),minIndegree:i("indegree",function(t,e){return t<e}),maxIndegree:i("indegree",function(t,e){return t>e}),minOutdegree:i("outdegree",function(t,e){return t<e}),maxOutdegree:i("outdegree",function(t,e){return t>e})}),o.extend(a,{totalDegree:function(t){for(var e=0,n=this.nodes(),r=0;r<n.length;r++)e+=n[r].degree(t);return e}}),e.exports=a},{"../util":142}],63:[function(t,e,n){"use strict";function r(t){return{includeNodes:u.default(t.includeNodes,b.includeNodes),includeEdges:u.default(t.includeEdges,b.includeEdges),includeLabels:u.default(t.includeLabels,b.includeLabels),includeShadows:u.default(t.includeShadows,b.includeShadows),includeOverlays:u.default(t.includeOverlays,b.includeOverlays),useCache:u.default(t.useCache,b.useCache)}}var i,o,a=t("../define"),s=t("../is"),u=t("../util"),c=t("../math");i=o={position:a.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"],onSet:function(t){t.updateCompoundBounds().rtrigger("position")},canSet:function(t){return!t.locked()&&!t.isParent()}}),silentPosition:a.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!0,validKeys:["x","y"],onSet:function(t){t.updateCompoundBounds()},canSet:function(t){return!t.locked()&&!t.isParent()}}),positions:function(t,e){if(s.plainObject(t))this.position(t);else if(s.fn(t)){for(var n=t,r=0;r<this.length;r++){var i=this[r],t=n.apply(i,[r,i]);if(t&&!i.locked()&&!i.isParent()){var o=i._private.position;o.x=t.x,o.y=t.y}}var a=this.updateCompoundBounds(),u=a.length>0?this.add(a):this;e?u.trigger("position"):u.rtrigger("position")}return this},silentPositions:function(t){return this.positions(t,!0)},renderedPosition:function(t,e){var n=this[0],r=this.cy(),i=r.zoom(),o=r.pan(),a=s.plainObject(t)?t:void 0,u=void 0!==a||void 0!==e&&s.string(t);if(n&&n.isNode()){if(!u){var c=n._private.position;return a={x:c.x*i+o.x,y:c.y*i+o.y},void 0===t?a:a[t]}for(var l=0;l<this.length;l++){var n=this[l];void 0!==e?n._private.position[t]=(e-o[t])/i:void 0!==a&&(n._private.position={x:(a.x-o.x)/i,y:(a.y-o.y)/i})}this.rtrigger("position")}else if(!u)return;return this},relativePosition:function(t,e){var n=this[0],r=this.cy(),i=s.plainObject(t)?t:void 0,o=void 0!==i||void 0!==e&&s.string(t),a=r.hasCompoundNodes();if(n&&n.isNode()){if(!o){var u=n._private.position,c=a?n.parent():null,l=c&&c.length>0,h=l;l&&(c=c[0]);var f=h?c._private.position:{x:0,y:0};return i={x:u.x-f.x,y:u.y-f.y},void 0===t?i:i[t]}for(var d=0;d<this.length;d++){var n=this[d],c=a?n.parent():null,l=c&&c.length>0,h=l;l&&(c=c[0]);var f=h?c._private.position:{x:0,y:0};void 0!==e?n._private.position[t]=e+f[t]:void 0!==i&&(n._private.position={x:i.x+f.x,y:i.y+f.y})}this.rtrigger("position")}else if(!o)return;return this},renderedBoundingBox:function(t){var e=this.boundingBox(t),n=this.cy(),r=n.zoom(),i=n.pan(),o=e.x1*r+i.x,a=e.x2*r+i.x,s=e.y1*r+i.y,u=e.y2*r+i.y;return{x1:o,x2:a,y1:s,y2:u,w:a-o,h:u-s}},updateCompoundBounds:function(){var t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return t.collection();for(var e=[],n=this;n.nonempty();){for(var r=0;r<n.length;r++){var i=n[r];!function(t){if(t.isParent()){var n=t._private,r=t.children(),i="include"===t.pstyle("compound-sizing-wrt-labels").value,o=r.boundingBox({includeLabels:i,includeShadows:!1,includeOverlays:!1,useCache:!1}),a=n.position;n.autoWidth=o.w,a.x=(o.x1+o.x2)/2,n.autoHeight=o.h,a.y=(o.y1+o.y2)/2,e.push(t)}}(i)}n=n.parent()}return this.spawn(e)}};var l=function(t){return t===1/0||t===-(1/0)?0:t},h=function(t,e,n,r,i){r-e!=0&&i-n!=0&&(t.x1=e<t.x1?e:t.x1,t.x2=r>t.x2?r:t.x2,t.y1=n<t.y1?n:t.y1,t.y2=i>t.y2?i:t.y2)},f=function(t,e){return h(t,e.x1,e.y1,e.x2,e.y2)},d=function(t,e,n){return u.getPrefixedProperty(t,e,n)},p=function(t,e,n,r){var i,o,a=e._private,s=a.rstyle,u=s.arrowWidth/2,c=e.pstyle(n+"-arrow-shape").value;"none"!==c&&("source"===n?(i=s.srcX,o=s.srcY):"target"===n?(i=s.tgtX,o=s.tgtY):(i=s.midX,o=s.midY),h(t,i-u,o-u,i+u,o+u))},g=function(t,e,n,r){var i;i=n?n+"-":"";var o=e._private,a=o.rstyle;if(e.pstyle(i+"label").strValue){var s,u,c,l,f=e.pstyle("text-halign"),p=e.pstyle("text-valign"),g=d(a,"labelWidth",n),v=d(a,"labelHeight",n),y=d(a,"labelX",n),m=d(a,"labelY",n),x=e.pstyle(i+"text-margin-x").pfValue,b=e.pstyle(i+"text-margin-y").pfValue,w=e.isEdge(),_=e.pstyle(i+"text-rotation"),E=e.pstyle("text-shadow-blur").pfValue/2,k=e.pstyle("text-shadow-offset-x").pfValue,N=e.pstyle("text-shadow-offset-y").pfValue,L=e.pstyle("text-shadow-opacity").value,S=e.pstyle("text-outline-width").pfValue,T=e.pstyle("text-border-width").pfValue,A=T/2,D=v,M=g,P=M/2,I=D/2;if(w)s=y-P,u=y+P,c=m-I,l=m+I;else{switch(f.value){case"left":s=y-M,u=y;break;case"center":s=y-P,u=y+P;break;case"right":s=y,u=y+M}switch(p.value){case"top":c=m-D,l=m;break;case"center":c=m-I,l=m+I;break;case"bottom":c=m,l=m+D}}var C=w&&"autorotate"===_.strValue,O=null!=_.pfValue&&0!==_.pfValue;if(C||O){var R=C?d(o.rstyle,"labelAngle",n):_.pfValue,B=Math.cos(R),F=Math.sin(R),z=function(t,e){return t-=y,e-=m,{x:t*B-e*F+y,y:t*F+e*B+m}},j=z(s,c),V=z(s,l),G=z(u,c),q=z(u,l);s=Math.min(j.x,V.x,G.x,q.x),u=Math.max(j.x,V.x,G.x,q.x),c=Math.min(j.y,V.y,G.y,q.y),l=Math.max(j.y,V.y,G.y,q.y)}s+=x-Math.max(S,A),u+=x+Math.max(S,A),c+=b-Math.max(S,A),l+=b+Math.max(S,A),h(t,s,c,u,l),r.includeShadows&&L>0&&(s+=-E+k,u+=+E+k,c+=-E+N,l+=+E+N,h(t,s,c,u,l))}return t},v=function(t,e){var n,r,i,o,a,s,u=t._private.cy,f=u._private,d=f.styleEnabled,v={x1:1/0,y1:1/0,x2:-(1/0),y2:-(1/0)},y=t._private,m=d?t.pstyle("display").value:"element",x=t.isNode(),b=t.isEdge(),w="none"!==m;if(w){var _=0;d&&e.includeOverlays&&0!==t.pstyle("overlay-opacity").value&&(_=t.pstyle("overlay-padding").value);var E=0,k=0;if(d&&(E=t.pstyle("width").pfValue,k=E/2),x&&e.includeNodes){var N=y.position;a=N.x,s=N.y;var E=t.outerWidth(),L=E/2,S=t.outerHeight(),T=S/2;n=a-L-_,r=a+L+_,i=s-T-_,o=s+T+_,h(v,n,i,r,o)}else if(b&&e.includeEdges){var A=y.rstyle||{};if(d&&(n=Math.min(A.srcX,A.midX,A.tgtX),r=Math.max(A.srcX,A.midX,A.tgtX),i=Math.min(A.srcY,A.midY,A.tgtY),o=Math.max(A.srcY,A.midY,A.tgtY),n-=k,r+=k,i-=k,o+=k,h(v,n,i,r,o)),d&&"haystack"===t.pstyle("curve-style").strValue){var D=A.haystackPts;if(n=D[0].x,i=D[0].y,r=D[1].x,o=D[1].y,n>r){var M=n;n=r,r=M}if(i>o){var M=i;i=o,o=M}h(v,n-k,i-k,r+k,o+k)}else{for(var P=A.bezierPts||A.linePts||[],I=0;I<P.length;I++){var C=P[I];n=C.x-k,r=C.x+k,i=C.y-k,o=C.y+k,h(v,n,i,r,o)}if(0===P.length){var O=y.source,R=O._private,B=R.position,F=y.target,z=F._private,j=z.position;if(n=B.x,r=j.x,i=B.y,o=j.y,n>r){var M=n;n=r,r=M}if(i>o){var M=i;i=o,o=M}n-=k,r+=k,i-=k,o+=k,h(v,n,i,r,o)}}}if(d){if(n=v.x1,r=v.x2,i=v.y1,o=v.y2,e.includeShadows&&t.pstyle("shadow-opacity").value>0){var V=t.pstyle("shadow-blur").pfValue/2,G=t.pstyle("shadow-offset-x").pfValue,q=t.pstyle("shadow-offset-y").pfValue;h(v,n-V+G,i-V+q,r+V+G,o+V+q)}h(v,n-_,i-_,r+_,o+_)}d&&e.includeEdges&&b&&(p(v,t,"mid-source",e),p(v,t,"mid-target",e),p(v,t,"source",e),p(v,t,"target",e)),d&&e.includeLabels&&(g(v,t,null,e),b&&(g(v,t,"source",e),g(v,t,"target",e)))}return v.x1=l(v.x1),v.y1=l(v.y1),v.x2=l(v.x2),v.y2=l(v.y2),v.w=l(v.x2-v.x1),v.h=l(v.y2-v.y1),v.w>0&&v.h>0&&w&&c.expandBoundingBox(v,1),v},y=function(t){return t?"t":"f"},m=function(t){var e="";return e+=y(t.incudeNodes),e+=y(t.includeEdges),e+=y(t.includeLabels),e+=y(t.includeShadows),e+=y(t.includeOverlays)},x=function(t,e){var n,r=t._private,i=t.cy().headless(),o=e===b?w:m(e);return e.useCache&&!i&&r.bbCache&&r.bbCache[o]?n=r.bbCache[o]:(n=v(t,e),i||(r.bbCache=r.bbCache||{},r.bbCache[o]=n)),n},b={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeShadows:!0,includeOverlays:!0,useCache:!0},w=m(b);o.recalculateRenderedStyle=function(t){var e=this.cy(),n=e.renderer(),r=e.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,t),this},o.boundingBox=function(t){if(1===this.length&&this[0]._private.bbCache&&(void 0===t||void 0===t.useCache||t.useCache===!0))return t=void 0===t?b:r(t),x(this[0],t);var e={x1:1/0,y1:1/0,x2:-(1/0),y2:-(1/0)};t=t||u.staticEmptyObject();var n=r(t),i=this,o=i.cy(),a=o.styleEnabled();a&&this.recalculateRenderedStyle(n.useCache);for(var s=0;s<i.length;s++){var c=i[s];a&&c.isEdge()&&"bezier"===c.pstyle("curve-style").strValue&&c.parallelEdges().recalculateRenderedStyle(n.useCache),f(e,x(c,n))}return e.x1=l(e.x1),e.y1=l(e.y1),e.x2=l(e.x2),e.y2=l(e.y2),e.w=l(e.x2-e.x1),e.h=l(e.y2-e.y1),e};var _=function(t){t.uppercaseName=u.capitalize(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=u.capitalize(t.outerName),i[t.name]=function(){var e=this[0],n=e._private,r=n.cy,i=r._private.styleEnabled;if(e){if(!i)return 1;if(e.isParent())return n[t.autoName]||0;var o=e.pstyle(t.name);switch(o.strValue){case"label":return n.rstyle[t.labelName]||0;default:return o.pfValue}}},i["outer"+t.uppercaseName]=function(){var e=this[0],n=e._private,r=n.cy,i=r._private.styleEnabled;if(e){if(i){return e[t.name]()+e.pstyle("border-width").pfValue+2*e.pstyle("padding").pfValue}return 1}},i["rendered"+t.uppercaseName]=function(){var e=this[0];if(e){return e[t.name]()*this.cy().zoom()}},i["rendered"+t.uppercaseOuterName]=function(){var e=this[0];if(e){return e[t.outerName]()*this.cy().zoom()}}};_({name:"width"}),_({name:"height"}),i.modelPosition=i.point=i.position,i.modelPositions=i.points=i.positions,i.renderedPoint=i.renderedPosition,i.relativePoint=i.relativePosition,i.boundingbox=i.boundingBox,i.renderedBoundingbox=i.renderedBoundingBox,e.exports=o},{"../define":86,"../is":125,"../math":127,"../util":142}],64:[function(t,e,n){"use strict";var r=t("../util"),i=t("../is"),o=function(t,e,n){var o=this;if(n=!(void 0!==n&&!n),void 0===t||void 0===e||!i.core(t))return void r.error("An element must have a core reference and parameters set");var a=e.group;if(null==a&&(a=e.data&&null!=e.data.source&&null!=e.data.target?"edges":"nodes"),"nodes"!==a&&"edges"!==a)return void r.error("An element must be of type `nodes` or `edges`; you specified `"+a+"`");if(this.length=1,this[0]=this,this._private={cy:t,single:!0,data:e.data||{},position:e.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],removed:!0,selected:!!e.selected,selectable:void 0===e.selectable||!!e.selectable,locked:!!e.locked,grabbed:!1,grabbable:void 0===e.grabbable||!!e.grabbable,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:e.scratch||{},edges:[],children:[],traversalCache:{}},e.renderedPosition){var s=e.renderedPosition,u=t.pan(),c=t.zoom();this._private.position={x:(s.x-u.x)/c,y:(s.y-u.y)/c}}if(i.string(e.classes))for(var l=e.classes.split(/\s+/),h=0,f=l.length;h<f;h++){var d=l[h];d&&""!==d&&(o._private.classes[d]=!0)}(e.style||e.css)&&t.style().applyBypass(this,e.style||e.css),(void 0===n||n)&&this.restore()};e.exports=o},{"../is":125,"../util":142}],65:[function(t,e,n){"use strict";var r=t("../define"),i={on:r.on(),one:r.on({unbindSelfOnTrigger:!0}),once:r.on({unbindAllBindersOnTrigger:!0}),off:r.off(),trigger:r.trigger(),rtrigger:function(t,e){if(0!==this.length)return this.cy().notify({type:t,eles:this}),this.trigger(t,e),this}};r.eventAliasesOn(i),e.exports=i},{"../define":86}],66:[function(t,e,n){"use strict";var r=t("../is"),i=t("../selector"),o={nodes:function(t){return this.filter(function(t,e){return e.isNode()}).filter(t)},edges:function(t){return this.filter(function(t,e){return e.isEdge()}).filter(t)},filter:function(t){if(void 0===t)return this;if(r.string(t)||r.elementOrCollection(t))return i(t).filter(this);if(r.fn(t)){for(var e=[],n=0;n<this.length;n++){var o=this[n];t.apply(o,[n,o])&&e.push(o)}return this.spawn(e)}return this.spawn()},not:function(t){if(t){r.string(t)&&(t=this.filter(t));for(var e=[],n=0;n<this.length;n++){var i=this[n];t._private.ids[i.id()]||e.push(i)}return this.spawn(e)}return this},absoluteComplement:function(){return this._private.cy.mutableElements().not(this)},intersect:function(t){if(r.string(t)){var e=t;return this.filter(e)}for(var n=[],i=this,o=t,a=this.length<t.length,s=a?o._private.ids:i._private.ids,u=a?i:o,c=0;c<u.length;c++){var l=u[c]._private.data.id,h=s[l];h&&n.push(h)}return this.spawn(n)},xor:function(t){var e=this._private.cy;r.string(t)&&(t=e.$(t));var n=[],i=this,o=t,a=function(t,e){for(var r=0;r<t.length;r++){var i=t[r],o=i._private.data.id;e._private.ids[o]||n.push(i)}};return a(i,o),a(o,i),this.spawn(n)},diff:function(t){var e=this._private.cy;r.string(t)&&(t=e.$(t));var n=[],i=[],o=[],a=this,s=t,u=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r],a=i._private.data.id;e._private.ids[a]?o.push(i):n.push(i)}};return u(a,s,n),u(s,a,i),{left:this.spawn(n,{unique:!0}),right:this.spawn(i,{unique:!0}),both:this.spawn(o,{unique:!0})}},add:function(t){var e=this._private.cy;if(!t)return this;if(r.string(t)){var n=t;t=e.mutableElements().filter(n)}for(var i=[],o=0;o<this.length;o++)i.push(this[o]);for(var o=0;o<t.length;o++){!this._private.ids[t[o].id()]&&i.push(t[o])}return this.spawn(i)},merge:function(t){var e=this._private,n=e.cy;if(!t)return this;if(t&&r.string(t)){var i=t;t=n.mutableElements().filter(i)}for(var o=0;o<t.length;o++){var a=t[o],s=a._private.data.id;if(!e.ids[s]){var u=this.length++;this[u]=a,e.ids[s]=a,e.indexes[s]=u}else{var u=e.indexes[s];this[u]=a,e.ids[s]=a}}return this},unmergeOne:function(t){t=t[0];var e=this._private,n=t._private.data.id,r=e.indexes[n];if(null==r)return this;this[r]=void 0,e.ids[n]=void 0,e.indexes[n]=void 0;var i=r===this.length-1;if(this.length>1&&!i){var o=this.length-1,a=this[o],s=a._private.data.id;this[o]=void 0,this[r]=a,e.indexes[s]=r}return this.length--,this},unmerge:function(t){var e=this._private.cy;if(!t)return this;if(t&&r.string(t)){var n=t;t=e.mutableElements().filter(n)}for(var i=0;i<t.length;i++)this.unmergeOne(t[i]);return this},map:function(t,e){for(var n=[],r=this,i=0;i<r.length;i++){var o=r[i],a=e?t.apply(e,[o,i,r]):t(o,i,r);n.push(a)}return n},stdFilter:function(t,e){for(var n=[],r=this,i=0;i<r.length;i++){var o=r[i];(e?t.apply(e,[o,i,r]):t(o,i,r))&&n.push(o)}return this.spawn(n)},max:function(t,e){for(var n,r=-(1/0),i=this,o=0;o<i.length;o++){var a=i[o],s=e?t.apply(e,[a,o,i]):t(a,o,i);s>r&&(r=s,n=a)}return{value:r,ele:n}},min:function(t,e){for(var n,r=1/0,i=this,o=0;o<i.length;o++){var a=i[o],s=e?t.apply(e,[a,o,i]):t(a,o,i);s<r&&(r=s,n=a)}return{value:r,ele:n}}},a=o;a.u=a["|"]=a["+"]=a.union=a.or=a.add,a["\\"]=a["!"]=a["-"]=a.difference=a.relativeComplement=a.subtract=a.not,a.n=a["&"]=a["."]=a.and=a.intersection=a.intersect,a["^"]=a["(+)"]=a["(-)"]=a.symmetricDifference=a.symdiff=a.xor,a.fnFilter=a.filterFn=a.stdFilter,a.complement=a.abscomp=a.absoluteComplement,e.exports=o},{"../is":125,"../selector":129}],
67:[function(t,e,n){"use strict";var r={isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},isSimple:function(){return this.isEdge()&&this.source().id()!==this.target().id()},group:function(){var t=this[0];if(t)return t._private.group}};e.exports=r},{}],68:[function(t,e,n){"use strict";var r=t("../util"),i=t("../is"),o=t("./element"),a={generate:function(t,e,n){for(var i=null!=n?n:r.uuid();t.hasElementWithId(i);)i=r.uuid();return i}},s=function(t,e,n){if(void 0===t||!i.core(t))return void r.error("A collection must have a reference to the core");var s={},u={},c=!1;if(e){if(e.length>0&&i.plainObject(e[0])&&!i.element(e[0])){c=!0;for(var l=[],h={},f=0,d=e.length;f<d;f++){var p=e[f];null==p.data&&(p.data={});var g=p.data;if(null==g.id)g.id=a.generate(t,p);else if(t.hasElementWithId(g.id)||h[g.id])continue;var v=new o(t,p,!1);l.push(v),h[g.id]=!0}e=l}}else e=[];this.length=0;for(var f=0,d=e.length;f<d;f++){var y=e[f];if(y){var m=y._private.data.id;(!n||n.unique&&!s[m])&&(s[m]=y,u[m]=this.length,this[this.length]=y,this.length++)}}this._private={cy:t,ids:s,indexes:u},c&&this.restore()},u=o.prototype=s.prototype;u.instanceString=function(){return"collection"},u.spawn=function(t,e,n){return i.core(t)||(n=e,e=t,t=this.cy()),new s(t,e,n)},u.spawnSelf=function(){return this.spawn(this)},u.cy=function(){return this._private.cy},u.element=function(){return this[0]},u.collection=function(){return i.collection(this)?this:new s(this._private.cy,[this])},u.unique=function(){return new s(this._private.cy,this,{unique:!0})},u.hasElementWithId=function(t){return!!this._private.ids[t]},u.getElementById=function(t){var e=this._private.cy,n=this._private.ids[t];return n?n:new s(e)},u.poolIndex=function(){var t=this._private.cy,e=t._private.elements,n=this._private.data.id;return e._private.indexes[n]},u.json=function(t){var e=this.element(),n=this.cy();if(null==e&&t)return this;if(null!=e){var o=e._private;if(i.plainObject(t)){n.startBatch(),t.data&&e.data(t.data),t.position&&e.position(t.position);var a=function(n,r,i){var a=t[n];null!=a&&a!==o[n]&&(a?e[r]():e[i]())};return a("removed","remove","restore"),a("selected","select","unselect"),a("selectable","selectify","unselectify"),a("locked","lock","unlock"),a("grabbable","grabify","ungrabify"),null!=t.classes&&e.classes(t.classes),n.endBatch(),this}if(void 0===t){var s={data:r.copy(o.data),position:r.copy(o.position),group:o.group,removed:o.removed,selected:o.selected,selectable:o.selectable,locked:o.locked,grabbable:o.grabbable,classes:null};return s.classes=Object.keys(o.classes).filter(function(t){return o.classes[t]}).join(" "),s}}},u.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e],r=n.json();t.push(r)}return t},u.clone=function(){for(var t=this.cy(),e=[],n=0;n<this.length;n++){var r=this[n],i=r.json(),a=new o(t,i,!1);e.push(a)}return new s(t,e)},u.copy=u.clone,u.restore=function(t){var e=this,n=e.cy(),o=n._private;void 0===t&&(t=!0);for(var u,c=[],l=[],h=0,f=e.length;h<f;h++){var d=e[h];d.removed()&&(d.isNode()?c.push(d):l.push(d))}u=c.concat(l);var h,p=function(){u.splice(h,1),h--};for(h=0;h<u.length;h++){var d=u[h],g=d._private,v=g.data;if(g.traversalCache=null,void 0===v.id)v.id=a.generate(n,d);else if(i.number(v.id))v.id=""+v.id;else{if(i.emptyString(v.id)||!i.string(v.id)){r.error("Can not create element with invalid string ID `"+v.id+"`"),p();continue}if(n.hasElementWithId(v.id)){r.error("Can not create second element with ID `"+v.id+"`"),p();continue}}var y=v.id;if(d.isNode()){var m=d,x=g.position;null==x.x&&(x.x=0),null==x.y&&(x.y=0)}if(d.isEdge()){for(var b=d,w=["source","target"],_=w.length,E=!1,k=0;k<_;k++){var N=w[k],L=v[N];i.number(L)&&(L=v[N]=""+v[N]),null==L||""===L?(r.error("Can not create edge `"+y+"` with unspecified "+N),E=!0):n.hasElementWithId(L)||(r.error("Can not create edge `"+y+"` with nonexistant "+N+" `"+L+"`"),E=!0)}if(E){p();continue}var S=n.getElementById(v.source),T=n.getElementById(v.target);S._private.edges.push(b),T._private.edges.push(b),b._private.source=S,b._private.target=T}g.ids={},g.ids[y]=d,g.indexes={},g.indexes[y]=d,g.removed=!1,n.addToPool(d)}for(var h=0;h<c.length;h++){var m=c[h],v=m._private.data;i.number(v.parent)&&(v.parent=""+v.parent);var A=v.parent;if(null!=A){var D=n.getElementById(A);if(D.empty())v.parent=void 0;else{for(var M=!1,P=D;!P.empty();){if(m.same(P)){M=!0,v.parent=void 0;break}P=P.parent()}M||(D[0]._private.children.push(m),m._private.parent=D[0],o.hasCompoundNodes=!0)}}}if(u.length>0){for(var I=new s(n,u),h=0;h<I.length;h++){var d=I[h];if(!d.isNode()){for(var C=d.parallelEdges(),k=0;k<C.length;k++)C[k]._private.traversalCache=null;d.source()[0]._private.traversalCache=null,d.target()[0]._private.traversalCache=null}}var O;O=o.hasCompoundNodes?I.add(I.connectedNodes()).add(I.parent()):I,O.updateStyle(t),t?I.rtrigger("add"):I.trigger("add")}return e},u.removed=function(){var t=this[0];return t&&t._private.removed},u.inside=function(){var t=this[0];return t&&!t._private.removed},u.remove=function(t){function e(t){for(var e=t._private.edges,n=0;n<e.length;n++)i(e[n])}function n(t){for(var e=t._private.children,n=0;n<e.length;n++)i(e[n])}function i(t){l[t.id()]||(l[t.id()]=!0,t.isNode()?(c.push(t),e(t),n(t)):c.unshift(t))}function o(t,e){var n=t._private.edges;r.removeFromArray(n,e),t._private.traversalCache=null}var a=this,u=[],c=[],l={},h=a._private.cy;void 0===t&&(t=!0);for(var f=0,d=a.length;f<d;f++){var p=a[f];i(p)}var g=[];g.ids={},h.removeFromPool(c);for(var f=0;f<c.length;f++){var p=c[f];if(p._private.removed=!0,u.push(p),p.isEdge()){var v=p.source()[0],y=p.target()[0];o(v,p),o(y,p),function(t){for(var e=t.parallelEdges(),n=0;n<e.length;n++)e[n]._private.traversalCache=null}(p)}else{var m=p.parent();0!==m.length&&function(t,e){e=e[0],t=t[0];var n=t._private.children,i=t.id();r.removeFromArray(n,e),g.ids[i]||(g.ids[i]=!0,g.push(t))}(m,p)}}var x=h._private.elements;h._private.hasCompoundNodes=!1;for(var f=0;f<x.length;f++){var p=x[f];if(p.isParent()){h._private.hasCompoundNodes=!0;break}}var b=new s(this.cy(),u);b.size()>0&&(t&&this.cy().notify({type:"remove",eles:b}),b.trigger("remove"));for(var f=0;f<g.length;f++){var p=g[f];p.removed()||p.updateStyle()}return new s(h,u)},u.move=function(t){var e=this._private.cy;if(void 0!==t.source||void 0!==t.target){var n=t.source,r=t.target,i=e.hasElementWithId(n),o=e.hasElementWithId(r);if(i||o){var a=this.jsons();this.remove();for(var s=0;s<a.length;s++){var u=a[s],c=this[s];"edges"===u.group&&(i&&(u.data.source=n),o&&(u.data.target=r),u.scratch=c._private.scratch)}return e.add(a)}}else if(void 0!==t.parent){var l=t.parent,h=null===l||e.hasElementWithId(l);if(h){var a=this.jsons(),f=this.descendants(),d=f.union(f.union(this).connectedEdges()).jsons();this.remove();for(var s=0;s<a.length;s++){var u=a[s],c=this[s];"nodes"===u.group&&(u.data.parent=null===l?void 0:l,u.scratch=c._private.scratch)}return e.add(a.concat(d))}}return this},[t("./algorithms"),t("./animation"),t("./class"),t("./comparators"),t("./compounds"),t("./data"),t("./degree"),t("./dimensions"),t("./events"),t("./filter"),t("./group"),t("./index"),t("./iteration"),t("./layout"),t("./style"),t("./switch-functions"),t("./traversing")].forEach(function(t){r.extend(u,t)}),e.exports=s},{"../is":125,"../util":142,"./algorithms":53,"./animation":57,"./class":58,"./comparators":59,"./compounds":60,"./data":61,"./degree":62,"./dimensions":63,"./element":64,"./events":65,"./filter":66,"./group":67,"./index":68,"./iteration":69,"./layout":70,"./style":71,"./switch-functions":72,"./traversing":73}],69:[function(t,e,n){"use strict";var r=t("../is"),i=t("./zsort"),o={each:function(t){if(r.fn(t))for(var e=0;e<this.length;e++){var n=this[e],i=t.apply(n,[e,n]);if(i===!1)break}return this},forEach:function(t,e){if(r.fn(t))for(var n=0;n<this.length;n++){var i=this[n],o=e?t.apply(e,[i,n,this]):t(i,n,this);if(o===!1)break}return this},toArray:function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return t},slice:function(t,e){var n=[],r=this.length;null==e&&(e=r),null==t&&(t=0),t<0&&(t=r+t),e<0&&(e=r+e);for(var i=t;i>=0&&i<e&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!r.fn(t))return this;var e=this.toArray().sort(t);return this.spawn(e)},sortByZIndex:function(){return this.sort(i)},zDepth:function(){var t=this[0];if(t){var e=t._private;if("nodes"===e.group){var n=e.data.parent?t.parents().size():0;return t.isParent()?n:Number.MAX_VALUE}var r=e.source,i=e.target,o=r.zDepth(),a=i.zDepth();return Math.max(o,a,0)}}};e.exports=o},{"../is":125,"./zsort":74}],70:[function(t,e,n){"use strict";var r=t("../is"),i=t("../util"),o=t("../promise"),a={layoutPositions:function(t,e,n){var i=this.nodes(),a=this.cy();if(t.trigger({type:"layoutstart",layout:t}),t.animations=[],e.animate){for(var s=0;s<i.length;s++){var u=i[s],c=n.call(u,s,u),l=u.position();r.number(l.x)&&r.number(l.y)||u.silentPosition({x:0,y:0});var h=u.animation({position:c,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(h),h.play()}var f;a.on("step.*",f=function(){e.fit&&a.fit(e.eles,e.padding)}),t.one("layoutstop",function(){a.off("step.*",f)}),t.one("layoutready",e.ready),t.trigger({type:"layoutready",layout:t}),o.all(t.animations.map(function(t){return t.promise()})).then(function(){a.off("step.*",f),null!=e.zoom&&a.zoom(e.zoom),e.pan&&a.pan(e.pan),e.fit&&a.fit(e.eles,e.padding),t.one("layoutstop",e.stop),t.trigger({type:"layoutstop",layout:t})})}else i.positions(n),e.fit&&a.fit(e.eles,e.padding),null!=e.zoom&&a.zoom(e.zoom),e.pan&&a.pan(e.pan),t.one("layoutready",e.ready),t.trigger({type:"layoutready",layout:t}),t.one("layoutstop",e.stop),t.trigger({type:"layoutstop",layout:t});return this},layout:function(t){return this.cy().layout(i.extend({},t,{eles:this})),this},makeLayout:function(t){return this.cy().makeLayout(i.extend({},t,{eles:this}))}};a.createLayout=a.makeLayout,e.exports=a},{"../is":125,"../promise":128,"../util":142}],71:[function(t,e,n){"use strict";var r=t("../is"),i={updateStyle:function(t){var e=this._private.cy;if(!e.styleEnabled())return this;if(e._private.batchingStyle){return e._private.batchStyleEles.merge(this),this}var n=e.hasCompoundNodes(),r=e.style(),i=this;if(t=!(!t&&void 0!==t),n&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents())),r.apply(i),n){i.updateCompoundBounds()}return t?i.rtrigger("style"):i.trigger("style"),this},updateMappers:function(t){var e=this._private.cy,n=e.style();if(t=!(!t&&void 0!==t),!e.styleEnabled())return this;n.updateMappers(this);var r=this.updateCompoundBounds(),i=r.length>0?this.add(r):this;return t?i.rtrigger("style"):i.trigger("style"),this},parsedStyle:function(t){var e=this[0];if(e.cy().styleEnabled())return e?e._private.style[t]||e.cy().style().getDefaultProperty(t):void 0},renderedStyle:function(t){if(!this.cy().styleEnabled())return this;var e=this[0];if(e){var n=e.cy().style().getRenderedStyle(e);return void 0===t?n:n[t]}},style:function(t,e){var n=this.cy();if(!n.styleEnabled())return this;var i=n.style();if(r.plainObject(t)){var o=t;i.applyBypass(this,o,!1);var a=this.updateCompoundBounds(),s=a.length>0?this.add(a):this;s.rtrigger("style")}else if(r.string(t)){if(void 0===e){var u=this[0];return u?i.getStylePropertyValue(u,t):void 0}i.applyBypass(this,t,e,!1);var a=this.updateCompoundBounds(),s=a.length>0?this.add(a):this;s.rtrigger("style")}else if(void 0===t){var u=this[0];return u?i.getRawStyle(u):void 0}return this},removeStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=e.style(),r=this;if(void 0===t)for(var i=0;i<r.length;i++){var o=r[i];n.removeAllBypasses(o,!1)}else{t=t.split(/\s+/);for(var i=0;i<r.length;i++){var o=r[i];n.removeBypasses(o,t,!1)}}var a=this.updateCompoundBounds();return(a.length>0?this.add(a):this).rtrigger("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},visible:function(){var t=this.cy();if(!t.styleEnabled())return!0;var e=this[0],n=t.hasCompoundNodes();if(e){if("visible"!==e.pstyle("visibility").value||"element"!==e.pstyle("display").value||0===e.pstyle("width").pfValue)return!1;if("nodes"===e._private.group){if(0===e.pstyle("height").pfValue)return!1;if(!n)return!0;var r=e._private.data.parent?e.parents():null;if(r)for(var i=0;i<r.length;i++){var o=r[i],a=o.pstyle("visibility").value,s=o.pstyle("display").value;if("visible"!==a||"element"!==s)return!1}return!0}var u=e._private.source,c=e._private.target;return u.visible()&&c.visible()}},hidden:function(){var t=this[0];if(t)return!t.visible()},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var e=t.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!e)return i;var o=r.data.parent?n.parents():null;if(o)for(var a=0;a<o.length;a++){var s=o[a],u=s.pstyle("opacity").value;i*=u}return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var t=this[0],e=t.cy().hasCompoundNodes();return t?e?0===t.effectiveOpacity():0===t.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};i.bypass=i.css=i.style,i.renderedCss=i.renderedStyle,i.removeBypass=i.removeCss=i.removeStyle,i.pstyle=i.parsedStyle,e.exports=i},{"../is":125}],72:[function(t,e,n){"use strict";function r(t){return function(){var e=arguments,n=[];if(2===e.length){var r=e[0],i=e[1];this.on(t.event,r,i)}else if(1===e.length){var i=e[0];this.on(t.event,i)}else if(0===e.length){for(var o=0;o<this.length;o++){var a=this[o],s=!t.ableField||a._private[t.ableField],u=a._private[t.field]!=t.value;if(t.overrideAble){var c=t.overrideAble(a);if(void 0!==c&&(s=c,!c))return this}s&&(a._private[t.field]=t.value,u&&n.push(a))}var l=this.spawn(n);l.updateStyle(),l.trigger(t.event)}return this}}function i(t){o[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var n=t.overrideField(e);if(void 0!==n)return n}return e._private[t.field]}},o[t.on]=r({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),o[t.off]=r({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}var o={};i({field:"locked",overrideField:function(t){return!!t.cy().autolock()||void 0},on:"lock",off:"unlock"}),i({field:"grabbable",overrideField:function(t){return!t.cy().autoungrabify()&&void 0},on:"grabify",off:"ungrabify"}),i({field:"selected",ableField:"selectable",overrideAble:function(t){return!t.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),i({field:"selectable",overrideField:function(t){return!t.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),o.deselect=o.unselect,o.grabbed=function(){var t=this[0];if(t)return t._private.grabbed},i({field:"active",on:"activate",off:"unactivate"}),o.inactive=function(){var t=this[0];if(t)return!t._private.active},e.exports=o},{}],73:[function(t,e,n){"use strict";function r(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r],o=i._private[t.attr];o&&n.push(o)}return this.spawn(n,{unique:!0}).filter(e)}}function i(t){return function(e){var n=[],r=this._private.cy,i=t||{};s.string(e)&&(e=r.$(e));for(var o=this._private.ids,a=e._private.ids,u=0;u<e.length;u++)for(var c=e[u]._private.edges,l=0;l<c.length;l++){var h=c[l],f=h._private.data,d=o[f.source]&&a[f.target],p=a[f.source]&&o[f.target],g=d||p;if(g){if(i.thisIsSrc||i.thisIsTgt){if(i.thisIsSrc&&!d)continue;if(i.thisIsTgt&&!p)continue}n.push(h)}}return this.spawn(n,{unique:!0})}}function o(t){var e={codirected:!1};return t=a.extend({},e,t),function(e){for(var n=[],r=this.edges(),i=t,o=0;o<r.length;o++)for(var a=r[o],s=a._private,u=s.source,c=u._private.data.id,l=s.data.target,h=u._private.edges,f=0;f<h.length;f++){var d=h[f],p=d._private.data,g=p.target,v=p.source,y=g===l&&v===c,m=c===g&&l===v;(i.codirected&&y||!i.codirected&&(y||m))&&n.push(d)}return this.spawn(n,{unique:!0}).filter(e)}}var a=t("../util"),s=t("../is"),u={},c=function(t,e){return function(n,r,i,o){var a,u=n,c=this;if(null==u?a="null":s.elementOrCollection(u)&&1===u.length&&(a="#"+u.id()),1===c.length&&a){var l=c[0]._private,h=l.traversalCache=l.traversalCache||{},f=h[e]=h[e]||{},d=f[a];return d?d:f[a]=t.call(c,n,r,i,o)}return t.call(c,n,r,i,o)}},l=function(t){return function(e){for(var n=this,r=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode()){for(var a=!1,s=o.connectedEdges(),u=0;u<s.length;u++){var c=s[u],l=c.source(),h=c.target();if(t.noIncomingEdges&&h===o&&l!==o||t.noOutgoingEdges&&l===o&&h!==o){a=!0;break}}a||r.push(o)}}return this.spawn(r,{unique:!0}).filter(e)}},h=function(t){return function(e){for(var n=this,r=[],i=0;i<n.length;i++){var o=n[i];if(o.isNode())for(var a=o.connectedEdges(),s=0;s<a.length;s++){var u=a[s],c=u.source(),l=u.target();t.outgoing&&c===o?(r.push(u),r.push(l)):t.incoming&&l===o&&(r.push(u),r.push(c))}}return this.spawn(r,{unique:!0}).filter(e)}},f=function(t){return function(e){for(var n=this,r=[],i={};;){var o=t.outgoing?n.outgoers():n.incomers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var u=o[s],c=u.id();i[c]||(i[c]=!0,r.push(u),a=!0)}if(!a)break;n=o}return this.spawn(r,{unique:!0}).filter(e)}};a.extend(u,{roots:l({noIncomingEdges:!0}),leaves:l({noOutgoingEdges:!0}),outgoers:c(h({outgoing:!0}),"outgoers"),successors:f({outgoing:!0}),incomers:c(h({incoming:!0}),"incomers"),predecessors:f({incoming:!0})}),a.extend(u,{neighborhood:c(function(t){for(var e=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],u=s.source(),c=s.target(),l=i===u?c:u;l.length>0&&e.push(l[0]),e.push(s[0])}return this.spawn(e,{unique:!0}).filter(t)},"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),u.neighbourhood=u.neighborhood,u.closedNeighbourhood=u.closedNeighborhood,u.openNeighbourhood=u.openNeighborhood,a.extend(u,{source:c(function(t){var e,n=this[0];return n&&(e=n._private.source||n.cy().collection()),e&&t?e.filter(t):e},"source"),target:c(function(t){var e,n=this[0];return n&&(e=n._private.target||n.cy().collection()),e&&t?e.filter(t):e},"target"),sources:r({attr:"source"}),targets:r({attr:"target"})}),a.extend(u,{edgesWith:c(i(),"edgesWith"),edgesTo:c(i({thisIsSrc:!0}),"edgesTo")}),a.extend(u,{connectedEdges:c(function(t){for(var e=[],n=this,r=0;r<n.length;r++){var i=n[r];if(i.isNode())for(var o=i._private.edges,a=0;a<o.length;a++){var s=o[a];e.push(s)}}return this.spawn(e,{unique:!0}).filter(t)},"connectedEdges"),connectedNodes:c(function(t){for(var e=[],n=this,r=0;r<n.length;r++){var i=n[r];i.isEdge()&&(e.push(i.source()[0]),e.push(i.target()[0]))}return this.spawn(e,{unique:!0}).filter(t)},"connectedNodes"),parallelEdges:c(o(),"parallelEdges"),codirectedEdges:c(o({codirected:!0}),"codirectedEdges")}),a.extend(u,{components:function(){var t=this,e=t.cy(),n=t.spawn(),r=t.nodes().spawnSelf(),i=[],o=function(t,e){n.merge(t),r.unmerge(t),e.merge(t)};if(r.empty())return t.spawn();do{var a=e.collection();i.push(a);var s=r[0];o(s,a),t.bfs({directed:!1,roots:s,visit:function(t,e,n,r,i){o(n,a)}})}while(r.length>0);return i.map(function(t){var e=t.connectedEdges().stdFilter(function(e){return t.anySame(e.source())&&t.anySame(e.target())});return t.union(e)})}}),e.exports=u},{"../is":125,"../util":142}],74:[function(t,e,n){"use strict";var r=function(t,e){var n=t.cy(),r=t.pstyle("z-index").value-e.pstyle("z-index").value,i=0,o=0,a=n.hasCompoundNodes(),s=t.isNode(),u=!s,c=e.isNode(),l=!c;a&&(i=t.zDepth(),o=e.zDepth());var h=i-o;return 0===h?s&&l?1:u&&c?-1:0===r?t.poolIndex()-e.poolIndex():r:h};e.exports=r},{}],75:[function(t,e,n){"use strict";var r=t("../is"),i=t("../util"),o=t("../collection"),a=t("../collection/element"),s={add:function(t){var e,n=this;if(r.elementOrCollection(t)){var s=t;if(s._private.cy===n)e=s.restore();else{for(var u=[],c=0;c<s.length;c++){var l=s[c];u.push(l.json())}e=new o(n,u)}}else if(r.array(t)){var u=t;e=new o(n,u)}else if(r.plainObject(t)&&(r.array(t.nodes)||r.array(t.edges))){for(var h=t,u=[],f=["nodes","edges"],c=0,d=f.length;c<d;c++){var p=f[c],g=h[p];if(r.array(g))for(var v=0,y=g.length;v<y;v++){var m=i.extend({group:p},g[v]);u.push(m)}}e=new o(n,u)}else{var m=t;e=new a(n,m).collection()}return e},remove:function(t){if(r.elementOrCollection(t));else if(r.string(t)){var e=t;t=this.$(e)}return t.remove()},load:function(t,e,n){var o=this;o.notifications(!1);var a=o.mutableElements();a.length>0&&a.remove(),null!=t&&(r.plainObject(t)||r.array(t))&&o.add(t),o.one("layoutready",function(t){o.notifications(!0),o.trigger(t),o.notify({type:"load",eles:o.mutableElements()}),o.one("load",e),o.trigger("load")}).one("layoutstop",function(){o.one("done",n),o.trigger("done")});var s=i.extend({},o._private.options.layout);return s.eles=o.elements(),o.layout(s),this}};e.exports=s},{"../collection":68,"../collection/element":64,"../is":125,"../util":142}],76:[function(t,e,n){"use strict";var r=t("../define"),i=t("../util"),o=t("../is"),a={animate:r.animate(),animation:r.animation(),animated:r.animated(),clearQueue:r.clearQueue(),delay:r.delay(),delayAnimation:r.delayAnimation(),stop:r.stop(),addToAnimationPool:function(t){var e=this;e.styleEnabled()&&e._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){function t(){l._private.animationsRunning&&i.requestAnimationFrame(function(n){e(n),t()})}function e(t){function e(e,i){var s=e._private,u=s.animation.current,c=s.animation.queue,l=!1;if(0===u.length){var h=c.shift();h&&u.push(h)}for(var f=function(t){for(var e=t.length-1;e>=0;e--){(0,t[e])()}t.splice(0,t.length)},d=u.length-1;d>=0;d--){var p=u[d],g=p._private;g.stopped?(u.splice(d,1),g.hooked=!1,g.playing=!1,g.started=!1,f(g.frames)):(g.playing||g.applying)&&(g.playing&&g.applying&&(g.applying=!1),g.started||n(e,p,t),r(e,p,t,i),o.fn(g.step)&&g.step.call(e,t),g.applying&&(g.applying=!1),f(g.frames),p.completed()&&(u.splice(d,1),g.hooked=!1,g.playing=!1,g.started=!1,f(g.completes)),l=!0)}return i||0!==u.length||0!==c.length||a.push(e),l}for(var i=l._private.aniEles,a=[],s=!1,u=0;u<i.length;u++){var c=i[u],h=e(c);s=s||h}var f=e(l,!0);if(s||f)if(i.length>0){var d=i.updateCompoundBounds().spawnSelf().merge(i);l.notify({type:"draw",eles:d})}else l.notify({type:"draw"});i.unmerge(a),l.trigger("step")}function n(t,e,n){var r=o.core(t),i=!r,a=t,s=l._private.style,u=e._private;if(i){var c=a._private.position;u.startPosition=u.startPosition||{x:c.x,y:c.y},u.startStyle=u.startStyle||s.getAnimationStartStyle(a,u.style)}if(r){var h=l._private.pan;u.startPan=u.startPan||{x:h.x,y:h.y},u.startZoom=null!=u.startZoom?u.startZoom:l._private.zoom}u.started=!0,u.startTime=n-u.progress*u.duration}function r(t,e,n,r){var i=l._private.style,s=!r,u=t._private,h=e._private,f=h.easing,p=h.startTime;if(!h.easingImpl)if(null==f)h.easingImpl=d.linear;else{var g;if(o.string(f)){var v=i.parse("transition-timing-function",f);g=v.value}else g=f;var y,m;o.string(g)?(y=g,m=[]):(y=g[1],m=g.slice(2).map(function(t){return+t})),m.length>0?("spring"===y&&m.push(h.duration),h.easingImpl=d[y].apply(null,m)):h.easingImpl=d[y]}var x,b=h.easingImpl;if(x=0===h.duration?1:(n-p)/h.duration,h.applying&&(x=h.progress),x<0?x=0:x>1&&(x=1),null==h.delay){var w=h.startPosition,_=h.position,E=u.position;_&&s&&(a(w.x,_.x)&&(E.x=c(w.x,_.x,x,b)),a(w.y,_.y)&&(E.y=c(w.y,_.y,x,b)),t.trigger("position"));var k=h.startPan,N=h.pan,L=u.pan,S=null!=N&&r;S&&(a(k.x,N.x)&&(L.x=c(k.x,N.x,x,b)),a(k.y,N.y)&&(L.y=c(k.y,N.y,x,b)),t.trigger("pan"));var T=h.startZoom,A=h.zoom,D=null!=A&&r;D&&(a(T,A)&&(u.zoom=c(T,A,x,b)),t.trigger("zoom")),(S||D)&&t.trigger("viewport");var M=h.style;if(M&&M.length>0&&s){for(var P=0;P<M.length;P++){var I=M[P],y=I.name,C=I,O=h.startStyle[y],R=c(O,C,x,b);i.overrideBypass(t,y,R)}t.trigger("style")}}return h.progress=x,x}function a(t,e){return null!=t&&null!=e&&(!(!o.number(t)||!o.number(e))||!(!t||!e))}function s(t,e,n){var r=1-n,i=n*n;return 3*r*r*n*t+3*r*i*e+i*n}function u(t,e){return function(n,r,i){return n+(r-n)*s(t,e,i)}}function c(t,e,n,r){n<0?n=0:n>1&&(n=1);var i,a;if(i=null!=t.pfValue||null!=t.value?null!=t.pfValue?t.pfValue:t.value:t,a=null!=e.pfValue||null!=e.value?null!=e.pfValue?e.pfValue:e.value:e,o.number(i)&&o.number(a))return r(i,a,n);if(o.array(i)&&o.array(a)){for(var s=[],u=0;u<a.length;u++){var c=i[u],l=a[u];if(null!=c&&null!=l){var h=r(c,l,n);t.roundValue&&(h=Math.round(h)),s.push(h)}else s.push(l)}return s}}var l=this;if(l._private.animationsRunning=!0,l.styleEnabled()){var h=l.renderer();h&&h.beforeRender?h.beforeRender(function(t,n){e(n)},h.beforeRenderPriorities.animations):t();var f=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,n,r){var i={x:e.x+r.dx*n,v:e.v+r.dv*n,tension:e.tension,friction:e.friction};return{dx:i.v,dv:t(i)}}function n(n,r){var i={dx:n.v,dv:t(n)},o=e(n,.5*r,i),a=e(n,.5*r,o),s=e(n,r,a),u=1/6*(i.dx+2*(o.dx+a.dx)+s.dx),c=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+u*r,n.v=n.v+c*r,n}return function t(e,r,i){var o,a,s,u={x:-1,v:0,tension:null,friction:null},c=[0],l=0;for(e=parseFloat(e)||500,r=parseFloat(r)||20,i=i||null,u.tension=e,u.friction=r,o=null!==i,o?(l=t(e,r),a=l/i*.016):a=.016;;)if(s=n(s||u,a),c.push(1+s.x),l+=16,!(Math.abs(s.x)>1e-4&&Math.abs(s.v)>1e-4))break;return o?function(t){return c[t*(c.length-1)|0]}:l}}(),d={linear:function(t,e,n){return t+(e-t)*n},ease:u(.25,.1),"ease-in":u(.42,0),"ease-out":u(0,0),"ease-in-out":u(.42,0),"ease-in-sine":u(.47,0),"ease-out-sine":u(.39,.575),"ease-in-out-sine":u(.445,.05),"ease-in-quad":u(.55,.085),"ease-out-quad":u(.25,.46),"ease-in-out-quad":u(.455,.03),"ease-in-cubic":u(.55,.055),"ease-out-cubic":u(.215,.61),"ease-in-out-cubic":u(.645,.045),"ease-in-quart":u(.895,.03),"ease-out-quart":u(.165,.84),"ease-in-out-quart":u(.77,0),"ease-in-quint":u(.755,.05),"ease-out-quint":u(.23,1),"ease-in-out-quint":u(.86,0),"ease-in-expo":u(.95,.05),"ease-out-expo":u(.19,1),"ease-in-out-expo":u(1,0),"ease-in-circ":u(.6,.04),"ease-out-circ":u(.075,.82),"ease-in-out-circ":u(.785,.135),spring:function(t,e,n){if(0===n)return d.linear;var r=f(t,e,n);return function(t,e,n){return t+(e-t)*r(n)}},"cubic-bezier":function(t,e,n,r){return u(t,e)}}}}};e.exports=a},{"../define":86,"../is":125,"../util":142}],77:[function(t,e,n){"use strict";var r=t("../define"),i={on:r.on(),one:r.on({unbindSelfOnTrigger:!0}),once:r.on({unbindAllBindersOnTrigger:!0}),off:r.off(),trigger:r.trigger()};r.eventAliasesOn(i),e.exports=i},{"../define":86}],78:[function(t,e,n){"use strict";var r={png:function(t){var e=this._private.renderer;return t=t||{},e.png(t)},jpg:function(t){var e=this._private.renderer;return t=t||{},t.bg=t.bg||"#fff",e.jpg(t)}};r.jpeg=r.jpg,e.exports=r},{}],79:[function(t,e,n){"use strict";var r=t("../window"),i=t("../util"),o=t("../collection"),a=t("../is"),s=t("../promise"),u=t("../define"),c=function(t){var e=this;t=i.extend({},t);var n=t.container;n&&!a.htmlElement(n)&&a.htmlElement(n[0])&&(n=n[0]);var u=n?n._cyreg:null;(u=u||{})&&u.cy&&(u.cy.destroy(),u={});var c=u.readies=u.readies||[];n&&(n._cyreg=u),u.cy=e;var l=void 0!==r&&void 0!==n&&!t.headless,h=t;h.layout=i.extend({name:l?"grid":"null"},h.layout),h.renderer=i.extend({name:l?"canvas":"null"},h.renderer);var f=function(t,e,n){return void 0!==e?e:void 0!==n?n:t},d=this._private={container:n,ready:!1,initrender:!1,options:h,elements:new o(this),listeners:[],aniEles:new o(this),scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:f(!0,h.zoomingEnabled),userZoomingEnabled:f(!0,h.userZoomingEnabled),panningEnabled:f(!0,h.panningEnabled),userPanningEnabled:f(!0,h.userPanningEnabled),boxSelectionEnabled:f(!0,h.boxSelectionEnabled),autolock:f(!1,h.autolock,h.autolockNodes),autoungrabify:f(!1,h.autoungrabify,h.autoungrabifyNodes),autounselectify:f(!1,h.autounselectify),styleEnabled:void 0===h.styleEnabled?l:h.styleEnabled,zoom:a.number(h.zoom)?h.zoom:1,pan:{x:a.plainObject(h.pan)&&a.number(h.pan.x)?h.pan.x:0,y:a.plainObject(h.pan)&&a.number(h.pan.y)?h.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1},p=h.selectionType;d.selectionType=void 0===p||"additive"!==p&&"single"!==p?"single":p,a.number(h.minZoom)&&a.number(h.maxZoom)&&h.minZoom<h.maxZoom?(d.minZoom=h.minZoom,d.maxZoom=h.maxZoom):a.number(h.minZoom)&&void 0===h.maxZoom?d.minZoom=h.minZoom:a.number(h.maxZoom)&&void 0===h.minZoom&&(d.maxZoom=h.maxZoom);e.initRenderer(i.extend({hideEdgesOnViewport:h.hideEdgesOnViewport,textureOnViewport:h.textureOnViewport,wheelSensitivity:a.number(h.wheelSensitivity)&&h.wheelSensitivity>0?h.wheelSensitivity:1,motionBlur:void 0!==h.motionBlur&&h.motionBlur,motionBlurOpacity:void 0===h.motionBlurOpacity?.05:h.motionBlurOpacity,pixelRatio:a.number(h.pixelRatio)&&h.pixelRatio>0?h.pixelRatio:void 0,desktopTapThreshold:void 0===h.desktopTapThreshold?4:h.desktopTapThreshold,touchTapThreshold:void 0===h.touchTapThreshold?8:h.touchTapThreshold},h.renderer)),function(t,e){if(t.some(a.promise))return s.all(t).then(e);e(t)}([h.style,h.elements],function(t){var n=t[0],r=t[1];d.styleEnabled&&e.setStyle(n),h.initrender&&(e.on("initrender",h.initrender),e.on("initrender",function(){d.initrender=!0})),e.load(r,function(){e.startAnimationLoop(),d.ready=!0,a.fn(h.ready)&&e.on("ready",h.ready);for(var t=0;t<c.length;t++){var n=c[t];e.on("ready",n)}u&&(u.readies=[]),e.trigger("ready")},h.done)})},l=c.prototype;i.extend(l,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},ready:function(t){return this.isReady()?this.trigger("ready",[],t):this.on("ready",t),this},initrender:function(){return this._private.initrender},destroy:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return"null"===this._private.options.renderer.name},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container},options:function(){return i.copy(this._private.options)},json:function(t){var e=this,n=e._private,r=e.mutableElements();if(a.plainObject(t)){if(e.startBatch(),t.elements){var o={},s=function(t,n){for(var r=0;r<t.length;r++){var a=t[r],s=a.data.id,u=e.getElementById(s);o[s]=!0,0!==u.length?u.json(a):n?e.add(i.extend({group:n},a)):e.add(a)}};if(a.array(t.elements))s(t.elements);else for(var u=["nodes","edges"],c=0;c<u.length;c++){var l=u[c],h=t.elements[l];a.array(h)&&s(h,l)}r.stdFilter(function(t){return!o[t.id()]}).remove()}t.style&&e.style(t.style),null!=t.zoom&&t.zoom!==n.zoom&&e.zoom(t.zoom),t.pan&&(t.pan.x===n.pan.x&&t.pan.y===n.pan.y||e.pan(t.pan));for(var f=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],c=0;c<f.length;c++){var d=f[c];null!=t[d]&&e[d](t[d])}return e.endBatch(),this}if(void 0===t){var p={};return p.elements={},r.forEach(function(t){var e=t.group();p.elements[e]||(p.elements[e]=[]),p.elements[e].push(t.json())}),this._private.styleEnabled&&(p.style=e.style().json()),p.zoomingEnabled=e._private.zoomingEnabled,p.userZoomingEnabled=e._private.userZoomingEnabled,
p.zoom=e._private.zoom,p.minZoom=e._private.minZoom,p.maxZoom=e._private.maxZoom,p.panningEnabled=e._private.panningEnabled,p.userPanningEnabled=e._private.userPanningEnabled,p.pan=i.copy(e._private.pan),p.boxSelectionEnabled=e._private.boxSelectionEnabled,p.renderer=i.copy(e._private.options.renderer),p.hideEdgesOnViewport=e._private.options.hideEdgesOnViewport,p.textureOnViewport=e._private.options.textureOnViewport,p.wheelSensitivity=e._private.options.wheelSensitivity,p.motionBlur=e._private.options.motionBlur,p}},scratch:u.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:u.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})}),[t("./add-remove"),t("./animation"),t("./events"),t("./export"),t("./layout"),t("./notification"),t("./renderer"),t("./search"),t("./style"),t("./viewport")].forEach(function(t){i.extend(l,t)}),e.exports=c},{"../collection":68,"../define":86,"../is":125,"../promise":128,"../util":142,"../window":149,"./add-remove":75,"./animation":76,"./events":77,"./export":78,"./layout":80,"./notification":81,"./renderer":82,"./search":83,"./style":84,"./viewport":85}],80:[function(t,e,n){"use strict";var r=t("../util"),i=t("../is"),o={layout:function(t){return(this._private.prevLayout=null==t?this._private.prevLayout:this.makeLayout(t)).run(),this},makeLayout:function(t){var e=this;if(null==t)return void r.error("Layout options must be specified to make a layout");if(null==t.name)return void r.error("A `name` must be specified to make a layout");var n=t.name,o=e.extension("layout",n);if(null==o)return void r.error("Can not apply layout: No such layout `"+n+"` found; did you include its JS file?");var a;return a=i.string(t.eles)?e.$(t.eles):null!=t.eles?t.eles:e.$(),new o(r.extend({},t,{cy:e,eles:a}))}};o.createLayout=o.makeLayout,e.exports=o},{"../is":125,"../util":142}],81:[function(t,e,n){"use strict";var r={notify:function(t){var e=this._private;if(e.batchingNotify){var n=e.batchNotifyEles,r=e.batchNotifyTypes;return t.eles&&n.merge(t.eles),void(r.ids[t.type]||(r.push(t.type),r.ids[t.type]=!0))}if(e.notificationsEnabled){var i=this.renderer();i&&i.notify(t)}},notifications:function(t){var e=this._private;if(void 0===t)return e.notificationsEnabled;e.notificationsEnabled=!!t},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},startBatch:function(){var t=this._private;return null==t.batchCount&&(t.batchCount=0),0===t.batchCount&&(t.batchingStyle=t.batchingNotify=!0,t.batchStyleEles=this.collection(),t.batchNotifyEles=this.collection(),t.batchNotifyTypes=[],t.batchNotifyTypes.ids={}),t.batchCount++,this},endBatch:function(){var t=this._private;return t.batchCount--,0===t.batchCount&&(t.batchingStyle=!1,t.batchStyleEles.updateStyle(),t.batchingNotify=!1,this.notify({type:t.batchNotifyTypes,eles:t.batchNotifyEles})),this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var e=this;return this.batch(function(){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],o=t[i];e.getElementById(i).data(o)}})}};e.exports=r},{}],82:[function(t,e,n){"use strict";var r=t("../util"),i={renderTo:function(t,e,n,r){return this._private.renderer.renderTo(t,e,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},resize:function(){return this.invalidateSize(),this.notify({type:"resize"}),this.trigger("resize"),this},initRenderer:function(t){var e=this,n=e.extension("renderer",t.name);if(null==n)return void r.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",t.name);var i=r.extend({},t,{cy:e});e._private.renderer=new n(i)},destroyRenderer:function(){var t=this;t.notify({type:"destroy"});var e=t.container();if(e)for(e._cyreg=null;e.childNodes.length>0;)e.removeChild(e.childNodes[0]);t._private.renderer=null},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};i.invalidateDimensions=i.resize,e.exports=i},{"../util":142}],83:[function(t,e,n){"use strict";var r=t("../is"),i=t("../collection"),o={collection:function(t,e){return r.string(t)?this.$(t):r.elementOrCollection(t)?t.collection():r.array(t)?new i(this,t,e):new i(this)},nodes:function(t){var e=this.$(function(){return this.isNode()});return t?e.filter(t):e},edges:function(t){var e=this.$(function(){return this.isEdge()});return t?e.filter(t):e},$:function(t){var e=this._private.elements;return t?e.filter(t):e.spawnSelf()},mutableElements:function(){return this._private.elements}};o.elements=o.filter=o.$,e.exports=o},{"../collection":68,"../is":125}],84:[function(t,e,n){"use strict";var r=t("../is"),i=t("../style"),o={style:function(t){if(t){this.setStyle(t).update()}return this._private.style},setStyle:function(t){var e=this._private;return r.stylesheet(t)?e.style=t.generateStyle(this):r.array(t)?e.style=i.fromJson(this,t):r.string(t)?e.style=i.fromString(this,t):e.style=i(this),e.style}};e.exports=o},{"../is":125,"../style":134}],85:[function(t,e,n){"use strict";var r=t("../is"),i=t("../window"),o={autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=!!t,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=!!t,this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)},pan:function(){var t,e,n,i,o,a=arguments,s=this._private.pan;switch(a.length){case 0:return s;case 1:if(r.string(a[0]))return t=a[0],s[t];if(r.plainObject(a[0])){if(!this._private.panningEnabled)return this;n=a[0],i=n.x,o=n.y,r.number(i)&&(s.x=i),r.number(o)&&(s.y=o),this.trigger("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=a[0],e=a[1],"x"!==t&&"y"!==t||!r.number(e)||(s[t]=e),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},panBy:function(t){var e,n,i,o,a,s=arguments,u=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:r.plainObject(s[0])&&(i=s[0],o=i.x,a=i.y,r.number(o)&&(u.x+=o),r.number(a)&&(u.y+=a),this.trigger("pan viewport"));break;case 2:e=s[0],n=s[1],"x"!==e&&"y"!==e||!r.number(n)||(u[e]+=n),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},fit:function(t,e){var n=this.getFitViewport(t,e);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.trigger("pan zoom viewport"),this.notify({type:"viewport"})}return this},getFitViewport:function(t,e){if(r.number(t)&&void 0===e&&(e=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var n;if(r.string(t)){var i=t;t=this.$(i)}else if(r.boundingBox(t)){var o=t;n={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else r.elementOrCollection(t)||(t=this.mutableElements());n=n||t.boundingBox();var a,s=this.width(),u=this.height();if(e=r.number(e)?e:0,!isNaN(s)&&!isNaN(u)&&s>0&&u>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){a=Math.min((s-2*e)/n.w,(u-2*e)/n.h),a=a>this._private.maxZoom?this._private.maxZoom:a,a=a<this._private.minZoom?this._private.minZoom:a;return{zoom:a,pan:{x:(s-a*(n.x1+n.x2))/2,y:(u-a*(n.y1+n.y2))/2}}}}},minZoom:function(t){return void 0===t?this._private.minZoom:(r.number(t)&&(this._private.minZoom=t),this)},maxZoom:function(t){return void 0===t?this._private.maxZoom:(r.number(t)&&(this._private.maxZoom=t),this)},zoom:function(t){var e,n;if(void 0===t)return this._private.zoom;if(r.number(t))n=t;else if(r.plainObject(t)){if(n=t.level,t.position){var i=t.position,o=this._private.pan,a=this._private.zoom;e={x:i.x*a+o.x,y:i.y*a+o.y}}else t.renderedPosition&&(e=t.renderedPosition);if(e&&!this._private.panningEnabled)return this}if(!this._private.zoomingEnabled)return this;if(!r.number(n)||e&&(!r.number(e.x)||!r.number(e.y)))return this;if(n=n>this._private.maxZoom?this._private.maxZoom:n,n=n<this._private.minZoom?this._private.minZoom:n,e){var s=this._private.pan,u=this._private.zoom,c=n,l={x:-c/u*(e.x-s.x)+e.x,y:-c/u*(e.y-s.y)+e.y};this._private.zoom=n,this._private.pan=l;var h=s.x!==l.x||s.y!==l.y;this.trigger(" zoom "+(h?" pan ":"")+" viewport ")}else this._private.zoom=n,this.trigger("zoom viewport");return this.notify({type:"viewport"}),this},viewport:function(t){var e=this._private,n=!0,i=!0,o=[],a=!1,s=!1;if(!t)return this;if(r.number(t.zoom)||(n=!1),r.plainObject(t.pan)||(i=!1),!n&&!i)return this;if(n){var u=t.zoom;u<e.minZoom||u>e.maxZoom||!e.zoomingEnabled?a=!0:(e.zoom=u,o.push("zoom"))}if(i&&(!a||!t.cancelOnFailedZoom)&&e.panningEnabled){var c=t.pan;r.number(c.x)&&(e.pan.x=c.x,s=!1),r.number(c.y)&&(e.pan.y=c.y,s=!1),s||o.push("pan")}return o.length>0&&(o.push("viewport"),this.trigger(o.join(" ")),this.notify({type:"viewport"})),this},center:function(t){var e=this.getCenterPan(t);return e&&(this._private.pan=e,this.trigger("pan viewport"),this.notify({type:"viewport"})),this},getCenterPan:function(t,e){if(this._private.panningEnabled){if(r.string(t)){var n=t;t=this.mutableElements().filter(n)}else r.elementOrCollection(t)||(t=this.mutableElements());var i=t.boundingBox(),o=this.width(),a=this.height();e=void 0===e?this._private.zoom:e;return{x:(o-e*(i.x1+i.x2))/2,y:(a-e*(i.y1+i.y2))/2}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var t=this._private,e=t.container;return t.sizeCache=t.sizeCache||(e?function(){var t=e.getBoundingClientRect(),n=i.getComputedStyle(e),r=function(t){return parseFloat(n.getPropertyValue(t))};return{width:t.width-r("padding-left")-r("padding-right")-r("border-left-width")-r("border-right-width"),height:t.height-r("padding-top")-r("padding-bottom")-r("border-top-width")-r("border-bottom-width")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,e=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-t.x)/e,x2:(n.x2-t.x)/e,y1:(n.y1-t.y)/e,y2:(n.y2-t.y)/e};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var t=this.width(),e=this.height();return{x1:0,y1:0,x2:t,y2:e,w:t,h:e}}};o.centre=o.center,o.autolockNodes=o.autolock,o.autoungrabifyNodes=o.autoungrabify,e.exports=o},{"../is":125,"../window":149}],86:[function(t,e,n){"use strict";var r=t("./util"),i=t("./is"),o=t("./selector"),a=t("./promise"),s=t("./event"),u=t("./animation"),c={data:function(t){var e={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,onSet:function(t){},canSet:function(t){return!0}};return t=r.extend({},e,t),function(e,n){var r=t,o=this,a=void 0!==o.length,s=a?o:[o],u=a?o[0]:o;if(i.string(e)){if(r.allowGetting&&void 0===n){var c;return u&&(c=u._private[r.field][e]),c}if(r.allowSetting&&void 0!==n){var l=!r.immutableKeys[e];if(l){for(var h=0,f=s.length;h<f;h++)r.canSet(s[h])&&(s[h]._private[r.field][e]=n);r.updateStyle&&o.updateStyle(),r.onSet(o),r.settingTriggersEvent&&o[r.triggerFnName](r.settingEvent)}}}else if(r.allowSetting&&i.plainObject(e)){for(var d,p,g=e,v=Object.keys(g),h=0;h<v.length;h++){d=v[h],p=g[d];var l=!r.immutableKeys[d];if(l)for(var y=0;y<s.length;y++){var m=s[y];r.canSet(m)&&(m._private[r.field][d]=p)}}r.updateStyle&&o.updateStyle(),r.onSet(o),r.settingTriggersEvent&&o[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&i.fn(e)){var x=e;o.on(r.bindingEvent,x)}else if(r.allowGetting&&void 0===e){var c;return u&&(c=u._private[r.field]),c}return o}},removeData:function(t){var e={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return t=r.extend({},e,t),function(e){var n=t,r=this,o=void 0!==r.length,a=o?r:[r];if(i.string(e)){for(var s=e.split(/\s+/),u=s.length,c=0;c<u;c++){var l=s[c];if(!i.emptyString(l)){if(!n.immutableKeys[l])for(var h=0,f=a.length;h<f;h++)a[h]._private[n.field][l]=void 0}}n.triggerEvent&&r[n.triggerFnName](n.event)}else if(void 0===e){for(var h=0,f=a.length;h<f;h++)for(var d=a[h]._private[n.field],s=Object.keys(d),c=0;c<s.length;c++){var l=s[c],p=!n.immutableKeys[l];p&&(d[l]=void 0)}n.triggerEvent&&r[n.triggerFnName](n.event)}return r}},event:{regex:/(\w+)(\.(?:\w+|\*))?/,universalNamespace:".*",optionalTypeRegex:/(\w+)?(\.(?:\w+|\*))?/,falseCallback:function(){return!1}},on:function(t){var e={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};return t=r.extend({},e,t),function(e,n,r,a){var s=this,u=void 0!==s.length,l=u?s:[s],h=i.string(e),f=t;if(i.plainObject(n)?(a=r,r=n,n=void 0):(i.fn(n)||n===!1)&&(a=n,r=void 0,n=void 0),(i.fn(r)||r===!1)&&(a=r,r=void 0),!i.fn(a)&&a!==!1&&h)return s;if(h){var d={};d[e]=a,e=d}for(var p=Object.keys(e),g=0;g<p.length;g++){var v=p[g];if(a=e[v],a===!1&&(a=c.event.falseCallback),i.fn(a)){v=v.split(/\s+/);for(var y=0;y<v.length;y++){var m=v[y];if(!i.emptyString(m)){var x=m.match(c.event.regex);if(x)for(var b=x[1],w=x[2]?x[2]:void 0,_={callback:a,data:r,delegated:!!n,selector:n,selObj:new o(n),type:b,namespace:w,unbindSelfOnTrigger:f.unbindSelfOnTrigger,unbindAllBindersOnTrigger:f.unbindAllBindersOnTrigger,binders:l},E=0;E<l.length;E++){var k=l[E]._private=l[E]._private||{};k.listeners=k.listeners||[],k.listeners.push(_)}}}}}return s}},eventAliasesOn:function(t){var e=t;e.addListener=e.listen=e.bind=e.on,e.removeListener=e.unlisten=e.unbind=e.off,e.emit=e.trigger,e.pon=e.promiseOn=function(t,e){var n=this,r=Array.prototype.slice.call(arguments,0);return new a(function(t,e){var i=function(e){n.off.apply(n,a),t(e)},o=r.concat([i]),a=o.concat([]);n.on.apply(n,o)})}},off:function(t){var e={};return t=r.extend({},e,t),function(t,e,n){var r=this,o=void 0!==r.length,a=o?r:[r],s=i.string(t);if(0===arguments.length){for(var u=0;u<a.length;u++)a[u]._private=a[u]._private||{},x.listeners=[];return r}if((i.fn(e)||e===!1)&&(n=e,e=void 0),s){var l={};l[t]=n,t=l}for(var h=Object.keys(t),f=0;f<h.length;f++){var d=h[f];n=t[d],n===!1&&(n=c.event.falseCallback),d=d.split(/\s+/);for(var p=0;p<d.length;p++){var g=d[p];if(!i.emptyString(g)){var v=g.match(c.event.optionalTypeRegex);if(v)for(var y=v[1]?v[1]:void 0,m=v[2]?v[2]:void 0,u=0;u<a.length;u++)for(var x=a[u]._private=a[u]._private||{},b=x.listeners=x.listeners||[],w=0;w<b.length;w++){var _=b[w],E=!m||m===_.namespace,k=!y||_.type===y,N=!n||n===_.callback,L=E&&k&&N;L&&(b.splice(w,1),w--)}}}}return r}},trigger:function(t){var e={};return t=r.extend({},e,t),function(e,n,r){var o=this,a=void 0!==o.length,u=a?o:[o],l=i.string(e),h=i.plainObject(e),f=i.event(e),d=this._private=this._private||{},p=d.cy||(i.core(this)?this:null),g=!!p&&p.hasCompoundNodes();if(l){var v=e.split(/\s+/);e=[];for(var y=0;y<v.length;y++){var m=v[y];if(!i.emptyString(m)){var x=m.match(c.event.regex),b=x[1],w=x[2]?x[2]:void 0;e.push({type:b,namespace:w})}}}else if(h){var _=e;e=[_]}n?i.array(n)||(n=[n]):n=[];for(var y=0;y<e.length;y++)for(var E=e[y],k=0;k<u.length;k++){var m,N=u[k],d=N._private=N._private||{},L=d.listeners=d.listeners||[],S=i.element(N),T=S||t.layout;if(f?(m=E,m.cyTarget=m.cyTarget||N,m.cy=m.cy||p):m=new s(E,{cyTarget:N,cy:p,namespace:E.namespace}),E.layout&&(m.layout=E.layout),t.layout&&(m.layout=N),m.cyPosition){var A=m.cyPosition,D=p.zoom(),M=p.pan();m.cyRenderedPosition={x:A.x*D+M.x,y:A.y*D+M.y}}r&&(L=[{namespace:m.namespace,type:m.type,callback:r}]);for(var P=0;P<L.length;P++){var I=L[P],C=!I.namespace||I.namespace===m.namespace||I.namespace===c.event.universalNamespace,O=I.type===m.type,R=!I.delegated||N!==m.cyTarget&&i.element(m.cyTarget)&&I.selObj.matches(m.cyTarget),B=C&&O&&R;if(B){var F=[m];if(F=F.concat(n),I.data?m.data=I.data:m.data=void 0,(I.unbindSelfOnTrigger||I.unbindAllBindersOnTrigger)&&(L.splice(P,1),P--),I.unbindAllBindersOnTrigger)for(var z=I.binders,j=0;j<z.length;j++){var V=z[j];if(V&&V!==N)for(var G=V._private.listeners,q=0;q<G.length;q++){var Y=G[q];Y===I&&(G.splice(q,1),q--)}}var X=I.delegated?m.cyTarget:N,U=I.callback.apply(X,F);(U===!1||m.isPropagationStopped())&&(T=!1,U===!1&&(m.stopPropagation(),m.preventDefault()))}}if(T){var H=g?N._private.parent:null,W=null!=H&&0!==H.length;W?(H=H[0],H.trigger(m)):p.trigger(m)}}return o}},animated:function(t){var e={};return t=r.extend({},e,t),function(){var t=this,e=void 0!==t.length,n=e?t:[t];if(!(this._private.cy||this).styleEnabled())return!1;var r=n[0];return r?r._private.animation.current.length>0:void 0}},clearQueue:function(t){var e={};return t=r.extend({},e,t),function(){var t=this,e=void 0!==t.length,n=e?t:[t];if(!(this._private.cy||this).styleEnabled())return this;for(var r=0;r<n.length;r++){n[r]._private.animation.queue=[]}return this}},delay:function(t){var e={};return t=r.extend({},e,t),function(t,e){return(this._private.cy||this).styleEnabled()?this.animate({delay:t,duration:t,complete:e}):this}},delayAnimation:function(t){var e={};return t=r.extend({},e,t),function(t,e){return(this._private.cy||this).styleEnabled()?this.animation({delay:t,duration:t,complete:e}):this}},animation:function(t){var e={};return t=r.extend({},e,t),function(t,e){var n=this,i=void 0!==n.length,o=i?n:[n],a=this._private.cy||this,s=!i,c=!s;if(!a.styleEnabled())return this;var l=a.style();switch(t=r.extend({},t,e),void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(0===Object.keys(t).length)return new u(o[0],t);if(c&&(t.style=l.getPropsList(t.style||t.css),t.css=void 0),t.renderedPosition&&c){var h=t.renderedPosition,f=a.pan(),d=a.zoom();t.position={x:(h.x-f.x)/d,y:(h.y-f.y)/d}}if(t.panBy&&s){var p=t.panBy,g=a.pan();t.pan={x:g.x+p.x,y:g.y+p.y}}var v=t.center||t.centre;if(v&&s){var y=a.getCenterPan(v.eles,t.zoom);y&&(t.pan=y)}if(t.fit&&s){var m=t.fit,x=a.getFitViewport(m.eles||m.boundingBox,m.padding);x&&(t.pan=x.pan,t.zoom=x.zoom)}return new u(o[0],t)}},animate:function(t){var e={};return t=r.extend({},e,t),function(t,e){var n=this,i=void 0!==n.length,o=i?n:[n];if(!(this._private.cy||this).styleEnabled())return this;e&&(t=r.extend({},t,e));for(var a=0;a<o.length;a++){var s=o[a],u=s.animated()&&(void 0===t.queue||t.queue);s.animation(t,u?{queue:!0}:void 0).play()}return this}},stop:function(t){var e={};return t=r.extend({},e,t),function(t,e){var n=this,r=void 0!==n.length,i=r?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var a=0;a<i.length;a++){for(var s=i[a],u=s._private,c=u.animation.current,l=0;l<c.length;l++){var h=c[l],f=h._private;e&&(f.duration=0)}t&&(u.animation.queue=[]),e||(u.animation.current=[])}return o.notify({eles:this,type:"draw"}),this}}};e.exports=c},{"./animation":44,"./event":87,"./is":125,"./promise":128,"./selector":129,"./util":142}],87:[function(t,e,n){"use strict";function r(){return!1}function i(){return!0}var o=function(t,e){if(!(this instanceof o))return new o(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?i:r):this.type=t,e&&(this.type=void 0!==e.type?e.type:this.type,this.cy=e.cy,this.cyTarget=e.cyTarget,this.cyPosition=e.cyPosition,this.cyRenderedPosition=e.cyRenderedPosition,this.namespace=e.namespace,this.layout=e.layout,this.data=e.data,this.message=e.message),this.timeStamp=t&&t.timeStamp||Date.now()};o.prototype={instanceString:function(){return"event"},preventDefault:function(){this.isDefaultPrevented=i;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=i;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()},isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r},e.exports=o},{}],88:[function(t,e,n){"use strict";function r(t,e,n){var r=n,o=function(n){s.error("Can not register `"+e+"` for `"+t+"` since `"+n+"` already exists in the prototype and can not be overridden")};if("core"===t){if(l.prototype[e])return o(e);l.prototype[e]=n}else if("collection"===t){if(c.prototype[e])return o(e);c.prototype[e]=n}else if("layout"===t){for(var a=function(t){this.options=t,n.call(this,t),f.plainObject(this._private)||(this._private={}),this._private.cy=t.cy,this._private.listeners=[]},h=a.prototype=Object.create(n.prototype),p=[],g=0;g<p.length;g++){var v=p[g];h[v]=h[v]||function(){return this}}h.start&&!h.run?h.run=function(){return this.start(),this}:!h.start&&h.run&&(h.start=function(){return this.run(),this});var y=n.prototype.stop;h.stop=function(){var t=this.options;if(t&&t.animate){var e=this.animations;if(e)for(var n=0;n<e.length;n++)e[n].stop()}return y?y.call(this):this.trigger("layoutstop"),this},h.destroy||(h.destroy=function(){return this}),h.on=u.on({layout:!0}),h.one=u.on({layout:!0,unbindSelfOnTrigger:!0}),h.once=u.on({layout:!0,unbindAllBindersOnTrigger:!0}),h.off=u.off({layout:!0}),h.trigger=u.trigger({layout:!0}),u.eventAliasesOn(h),r=a}else if("renderer"===t&&"null"!==e&&"base"!==e){var m=i("renderer","base"),x=m.prototype,b=n,w=n.prototype,_=function(){m.apply(this,arguments),b.apply(this,arguments)},E=_.prototype;for(var k in x){var N=x[k],L=null!=w[k];if(L)return o(k);E[k]=N}for(var k in w)E[k]=w[k];x.clientFunctions.forEach(function(t){E[t]=E[t]||function(){s.error("Renderer does not implement `renderer."+t+"()` on its prototype")}}),r=_}return s.setMap({map:d,keys:[t,e],value:r})}function i(t,e){return s.getMap({map:d,keys:[t,e]})}function o(t,e,n,r,i){return s.setMap({map:p,keys:[t,e,n,r],value:i})}function a(t,e,n,r){return s.getMap({map:p,keys:[t,e,n,r]})}var s=t("./util"),u=t("./define"),c=t("./collection"),l=t("./core"),h=t("./extensions"),f=t("./is"),d={},p={},g=function(){return 2===arguments.length?i.apply(null,arguments):3===arguments.length?r.apply(null,arguments):4===arguments.length?a.apply(null,arguments):5===arguments.length?o.apply(null,arguments):void s.error("Invalid extension access syntax")};l.prototype.extension=g,h.forEach(function(t){t.extensions.forEach(function(e){r(t.type,e.name,e.impl)})}),e.exports=g},{"./collection":68,"./core":79,"./define":86,"./extensions":89,"./is":125,"./util":142}],89:[function(t,e,n){"use strict";e.exports=[{type:"layout",extensions:t("./layout")},{type:"renderer",extensions:t("./renderer")}]},{"./layout":95,"./renderer":120}],90:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},s,t)}var i=t("../../util"),o=t("../../math"),a=t("../../is"),s={fit:!0,directed:!1,padding:30,circle:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,roots:void 0,maximalAdjustments:0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var t,e=this.options,n=e,r=e.cy,i=n.eles,s=i.nodes().not(":parent"),u=i,c=o.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(a.elementOrCollection(n.roots))t=n.roots;else if(a.array(n.roots)){for(var l=[],h=0;h<n.roots.length;h++){var f=n.roots[h],d=r.getElementById(f);l.push(d)}t=r.collection(l)}else if(a.string(n.roots))t=r.$(n.roots);else if(n.directed)t=s.roots();else{for(var p=[],g=s;g.length>0;){var v=r.collection();i.bfs({roots:g[0],visit:function(t,e,n,r,i){v=v.add(n)},directed:!1}),g=g.not(v),p.push(v)}t=r.collection();for(var h=0;h<p.length;h++){var y=p[h],m=y.maxDegree(!1),x=y.filter(function(){return this.degree(!1)===m});t=t.add(x)}}var b=[],w={},_={},E={},k={},N={};u.bfs({roots:t,directed:n.directed,visit:function(t,e,n,r,i){var o=this[0],a=o.id();if(b[e]||(b[e]=[]),b[e].push(o),w[a]=!0,_[a]=e,E[a]=i,k[a]=r,i){var s=i.id();(N[s]=N[s]||[]).push(n)}}});for(var L=[],h=0;h<s.length;h++){var d=s[h];w[d.id()]||L.push(d)}for(var S=3*L.length,T=0;0!==L.length&&T<S;){for(var A=L.shift(),D=A.neighborhood().nodes(),M=!1,h=0;h<D.length;h++){var P=_[D[h].id()];if(void 0!==P){b[P].push(A),M=!0;break}}M||L.push(A),T++}for(;0!==L.length;){var A=L.shift(),M=!1;M||(0===b.length&&b.push([]),b[0].push(A))}var I=function(){for(var t=0;t<b.length;t++)for(var e=b[t],n=0;n<e.length;n++){var r=e[n];r._private.scratch.breadthfirst={depth:t,index:n}}};I();for(var C=0;C<n.maximalAdjustments;C++){for(var O=b.length,R=[],h=0;h<O;h++)for(var P=b[h],B=P.length,F=0;F<B;F++){var d=P[F],z=d._private.scratch.breadthfirst,j=function(t){for(var e,n=t.connectedEdges(function(){return this.data("target")===t.id()}),r=t._private.scratch.breadthfirst,i=0,o=0;o<n.length;o++){var a=n[o],s=a.source()[0],u=s._private.scratch.breadthfirst;r.depth<=u.depth&&i<u.depth&&(i=u.depth,e=s)}return e}(d);j&&(z.intEle=j,R.push(d))}for(var h=0;h<R.length;h++){var d=R[h],z=d._private.scratch.breadthfirst,j=z.intEle,V=j._private.scratch.breadthfirst;b[z.depth].splice(z.index,1);for(var G=V.depth+1;G>b.length-1;)b.push([]);b[G].push(d),z.depth=G,z.index=b[G].length-1}I()}var q=0;if(n.avoidOverlap){for(var h=0;h<s.length;h++){var Y=s[h],X=Y.boundingBox(),U=X.w,H=X.h;q=Math.max(q,U,H)}q*=n.spacingFactor}for(var W={},$=function(t){if(W[t.id()])return W[t.id()];for(var e=t._private.scratch.breadthfirst.depth,n=t.neighborhood().nodes().not(":parent").intersection(s),r=0,i=0,o=0;o<n.length;o++){var a=n[o],u=a._private.scratch.breadthfirst,c=u.index,l=u.depth,h=b[l].length;(e>l||0===e)&&(r+=c/h,i++)}return i=Math.max(1,i),r/=i,0===i&&(r=void 0),W[t.id()]=r,r},Z=function(t,e){return $(t)-$(e)},Q=0;Q<3;Q++){for(var h=0;h<b.length;h++)b[h]=b[h].sort(Z);I()}for(var K=0,h=0;h<b.length;h++)K=Math.max(b[h].length,K);for(var J={x:c.x1+c.w/2,y:c.x1+c.h/2},tt={},h=b.length-1;h>=0;h--)for(var P=b[h],F=0;F<P.length;F++){var A=P[F];tt[A.id()]=function(t,e){var r=t._private.scratch.breadthfirst,i=r.depth,o=r.index,a=b[i].length,s=Math.max(c.w/(a+1),q),u=Math.max(c.h/(b.length+1),q),l=Math.min(c.w/2/b.length,c.h/2/b.length);if(l=Math.max(l,q),n.circle){if(n.circle){var h=l*i+l-(b.length>0&&b[0].length<=3?l/2:0),f=2*Math.PI/b[i].length*o;return 0===i&&1===b[0].length&&(h=1),{x:J.x+h*Math.cos(f),y:J.y+h*Math.sin(f)}}return{x:J.x+(o+1-(a+1)/2)*s,y:(i+1)*u}}var d={x:J.x+(o+1-(a+1)/2)*s,y:(i+1)*u};return d}(A,h===b.length-1)}return s.layoutPositions(this,n,function(){return tt[this.id()]}),this},e.exports=r},{"../../is":125,"../../math":127,"../../util":142}],91:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},s,t)}var i=t("../../util"),o=t("../../math"),a=t("../../is"),s={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,s=r.nodes().not(":parent");e.sort&&(s=s.sort(e.sort));for(var u,c=o.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),l={x:c.x1+c.w/2,y:c.y1+c.h/2},h=void 0===e.sweep?2*Math.PI-2*Math.PI/s.length:e.sweep,f=h/Math.max(1,s.length-1),d=0,p=0;p<s.length;p++){var g=s[p],v=g.boundingBox(),y=v.w,m=v.h;d=Math.max(d,y,m)}if(u=a.number(e.radius)?e.radius:s.length<=1?0:Math.min(c.h,c.w)/2-d,s.length>1&&e.avoidOverlap){d*=1.75;var x=Math.cos(f)-Math.cos(0),b=Math.sin(f)-Math.sin(0),w=Math.sqrt(d*d/(x*x+b*b));u=Math.max(w,u)}var _=function(t,n){var r=e.startAngle+t*f*(i?1:-1),o=u*Math.cos(r),a=u*Math.sin(r);return{x:l.x+o,y:l.y+a}};return s.layoutPositions(this,e,_),this},e.exports=r},{"../../is":125,"../../math":127,"../../util":142}],92:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},a,t)}var i=t("../../util"),o=t("../../math"),a={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,height:void 0,width:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){for(var t=this.options,e=t,n=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,r=t.cy,i=e.eles,a=i.nodes().not(":parent"),s=o.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),u={x:s.x1+s.w/2,y:s.y1+s.h/2},c=[],l=e.startAngle,h=0,f=0;f<a.length;f++){var d,p=a[f];d=e.concentric.apply(p,[p]),c.push({value:d,node:p}),p._private.scratch.concentric=d}a.updateStyle();for(var f=0;f<a.length;f++){var p=a[f],g=p.boundingBox();h=Math.max(h,g.w,g.h)}c.sort(function(t,e){return e.value-t.value});for(var v=e.levelWidth(a),y=[[]],m=y[0],f=0;f<c.length;f++){var x=c[f];if(m.length>0){Math.abs(m[0].value-x.value)>=v&&(m=[],y.push(m))}m.push(x)}var b=h+e.minNodeSpacing;if(!e.avoidOverlap){var w=y.length>0&&y[0].length>1,_=Math.min(s.w,s.h)/2-b,E=_/(y.length+w?1:0);b=Math.min(b,E)}for(var k=0,f=0;f<y.length;f++){var N=y[f],L=void 0===e.sweep?2*Math.PI-2*Math.PI/N.length:e.sweep,S=N.dTheta=L/Math.max(1,N.length-1);if(N.length>1&&e.avoidOverlap){var T=Math.cos(S)-Math.cos(0),A=Math.sin(S)-Math.sin(0),D=Math.sqrt(b*b/(T*T+A*A));k=Math.max(D,k)}N.r=k,k+=b}if(e.equidistant){for(var M=0,k=0,f=0;f<y.length;f++){var N=y[f],P=N.r-k;M=Math.max(M,P)}k=0;for(var f=0;f<y.length;f++){var N=y[f];0===f&&(k=N.r),N.r=k,k+=M}}for(var I={},f=0;f<y.length;f++)for(var N=y[f],S=N.dTheta,k=N.r,C=0;C<N.length;C++){var x=N[C],l=e.startAngle+(n?1:-1)*S*C,O={x:u.x+k*Math.cos(l),y:u.y+k*Math.sin(l)};I[x.node.id()]=O}return a.layoutPositions(this,e,function(){return I[this.id()]}),this},e.exports=r},{"../../math":127,"../../util":142}],93:[function(t,e,n){"use strict";function r(t){this.options=o.extend({},c,t),this.options.layout=this}var i,o=t("../../util"),a=t("../../math"),s=t("../../thread"),u=t("../../is"),c={ready:function(){},stop:function(){},animate:!0,animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,randomize:!1,componentSpacing:100,nodeRepulsion:function(t){return 4e5},nodeOverlap:10,idealEdgeLength:function(t){return 10},edgeElasticity:function(t){return 100},nestingFactor:5,gravity:80,numIter:1e3,initialTemp:200,coolingFactor:.95,minTemp:1,useMultitasking:!0};r.prototype.run=function(){var t=this.options,e=t.cy,n=this,r=this.thread;r&&!r.stopped()||(r=this.thread=s({disabled:!t.useMultitasking})),n.stopped=!1,n.trigger({type:"layoutstart",layout:n}),i=!0===t.debug;var a=l(e,n,t);i&&d(a),t.randomize&&p(a,e);var u=Date.now(),c=!1,h=function(n){n=n||{},c&&!n.next||!n.force&&Date.now()-u<t.animationThreshold||(c=!0,o.requestAnimationFrame(function(){g(a,e,t),!0===t.fit&&e.fit(t.padding),c=!1,n.next&&n.next()}))};r.on("message",function(t){var e=t.message;a.layoutNodes=e,h()}),r.pass({layoutInfo:a,options:{animate:t.animate,refresh:t.refresh,componentSpacing:t.componentSpacing,nodeOverlap:t.nodeOverlap,nestingFactor:t.nestingFactor,gravity:t.gravity,numIter:t.numIter,initialTemp:t.initialTemp,coolingFactor:t.coolingFactor,minTemp:t.minTemp}}).run(function(t){var e,n=t.layoutInfo,r=t.options,i=function(t,e,n){o(t,e),c(t,e),l(t,e),h(t,e),f(t,e)},o=function(t,e){for(var n=0;n<t.graphSet.length;n++)for(var r=t.graphSet[n],i=r.length,o=0;o<i;o++)for(var s=t.layoutNodes[t.idToIndex[r[o]]],u=o+1;u<i;u++){var c=t.layoutNodes[t.idToIndex[r[u]]];a(s,c,t,e)}},a=function(t,e,n,r){if(t.cmptId===e.cmptId||n.isCompound){var i=e.positionX-t.positionX,o=e.positionY-t.positionY;if(0!==i||0!==o){var a=s(t,e,i,o)
;if(a>0)var c=r.nodeOverlap*a,l=Math.sqrt(i*i+o*o),h=c*i/l,f=c*o/l;else var d=u(t,i,o),p=u(e,-1*i,-1*o),g=p.x-d.x,v=p.y-d.y,y=g*g+v*v,l=Math.sqrt(y),c=(t.nodeRepulsion+e.nodeRepulsion)/y,h=c*g/l,f=c*v/l;t.isLocked||(t.offsetX-=h,t.offsetY-=f),e.isLocked||(e.offsetX+=h,e.offsetY+=f)}}},s=function(t,e,n,r){if(n>0)var i=t.maxX-e.minX;else var i=e.maxX-t.minX;if(r>0)var o=t.maxY-e.minY;else var o=e.maxY-t.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},u=function(t,e,n){var r=t.positionX,i=t.positionY,o=t.height||1,a=t.width||1,s=n/e,u=o/a,c={};do{if(0===e&&0<n){c.x=r,c.y=i+o/2;break}if(0===e&&0>n){c.x=r,c.y=i+o/2;break}if(0<e&&-1*u<=s&&s<=u){c.x=r+a/2,c.y=i+a*n/2/e;break}if(0>e&&-1*u<=s&&s<=u){c.x=r-a/2,c.y=i-a*n/2/e;break}if(0<n&&(s<=-1*u||s>=u)){c.x=r+o*e/2/n,c.y=i+o/2;break}if(0>n&&(s<=-1*u||s>=u)){c.x=r-o*e/2/n,c.y=i-o/2;break}}while(!1);return c},c=function(t,e){for(var n=0;n<t.edgeSize;n++){var r=t.layoutEdges[n],i=t.idToIndex[r.sourceId],o=t.layoutNodes[i],a=t.idToIndex[r.targetId],s=t.layoutNodes[a],c=s.positionX-o.positionX,l=s.positionY-o.positionY;if(0===c&&0===l)return;var h=u(o,c,l),f=u(s,-1*c,-1*l),d=f.x-h.x,p=f.y-h.y,g=Math.sqrt(d*d+p*p),v=Math.pow(r.idealLength-g,2)/r.elasticity;if(0!==g)var y=v*d/g,m=v*p/g;else var y=0,m=0;o.isLocked||(o.offsetX+=y,o.offsetY+=m),s.isLocked||(s.offsetX-=y,s.offsetY-=m)}},l=function(t,e){for(var n=0;n<t.graphSet.length;n++){var r=t.graphSet[n],i=r.length;if(0===n)var o=t.clientHeight/2,a=t.clientWidth/2;else var s=t.layoutNodes[t.idToIndex[r[0]]],u=t.layoutNodes[t.idToIndex[s.parentId]],o=u.positionX,a=u.positionY;for(var c=0;c<i;c++){var l=t.layoutNodes[t.idToIndex[r[c]]];if(!l.isLocked){var h=o-l.positionX,f=a-l.positionY,d=Math.sqrt(h*h+f*f);if(d>1){var p=e.gravity*h/d,g=e.gravity*f/d;l.offsetX+=p,l.offsetY+=g}}}}},h=function(t,e){var n=[],r=0,i=-1;for(n.push.apply(n,t.graphSet[0]),i+=t.graphSet[0].length;r<=i;){var o=n[r++],a=t.idToIndex[o],s=t.layoutNodes[a],u=s.children;if(0<u.length&&!s.isLocked){for(var c=s.offsetX,l=s.offsetY,h=0;h<u.length;h++){var f=t.layoutNodes[t.idToIndex[u[h]]];f.offsetX+=c,f.offsetY+=l,n[++i]=u[h]}s.offsetX=0,s.offsetY=0}}},f=function(t,e){for(var n=0;n<t.nodeSize;n++){var r=t.layoutNodes[n];0<r.children.length&&(r.maxX=void 0,r.minX=void 0,r.maxY=void 0,r.minY=void 0)}for(var n=0;n<t.nodeSize;n++){var r=t.layoutNodes[n];if(!(0<r.children.length||r.isLocked)){var i=d(r.offsetX,r.offsetY,t.temperature);r.positionX+=i.x,r.positionY+=i.y,r.offsetX=0,r.offsetY=0,r.minX=r.positionX-r.width,r.maxX=r.positionX+r.width,r.minY=r.positionY-r.height,r.maxY=r.positionY+r.height,p(r,t)}}for(var n=0;n<t.nodeSize;n++){var r=t.layoutNodes[n];0<r.children.length&&!r.isLocked&&(r.positionX=(r.maxX+r.minX)/2,r.positionY=(r.maxY+r.minY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY)}},d=function(t,e,n){var r=Math.sqrt(t*t+e*e);if(r>n)var i={x:n*t/r,y:n*e/r};else var i={x:t,y:e};return i},p=function(t,e){var n=t.parentId;if(null!=n){var r=e.layoutNodes[e.idToIndex[n]],i=!1;return(null==r.maxX||t.maxX+r.padRight>r.maxX)&&(r.maxX=t.maxX+r.padRight,i=!0),(null==r.minX||t.minX-r.padLeft<r.minX)&&(r.minX=t.minX-r.padLeft,i=!0),(null==r.maxY||t.maxY+r.padBottom>r.maxY)&&(r.maxY=t.maxY+r.padBottom,i=!0),(null==r.minY||t.minY-r.padTop<r.minY)&&(r.minY=t.minY-r.padTop,i=!0),i?p(r,e):void 0}},g=0;do{for(var v=0;v<r.refresh&&g<r.numIter;){var e=function(t){return i(n,r,t),n.temperature=n.temperature*r.coolingFactor,!(n.temperature<r.minTemp)}(g);if(!e)break;v++,g++}r.animate&&broadcast(n.layoutNodes)}while(e&&g+1<r.numIter);return function(t,e){for(var r=n.layoutNodes,i=[],o=0;o<r.length;o++){var a=r[o],s=a.cmptId;(i[s]=i[s]||[]).push(a)}for(var u=0,o=0;o<i.length;o++){var c=i[o];if(c){c.x1=1/0,c.x2=-(1/0),c.y1=1/0,c.y2=-(1/0);for(var l=0;l<c.length;l++){var h=c[l];c.x1=Math.min(c.x1,h.positionX-h.width/2),c.x2=Math.max(c.x2,h.positionX+h.width/2),c.y1=Math.min(c.y1,h.positionY-h.height/2),c.y2=Math.max(c.y2,h.positionY+h.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,u+=c.w*c.h}}i.sort(function(t,e){return e.w*e.h-t.w*t.h});for(var f=0,d=0,p=0,g=0,v=Math.sqrt(u)*n.clientWidth/n.clientHeight,o=0;o<i.length;o++){var c=i[o];if(c){for(var l=0;l<c.length;l++){var h=c[l];h.isLocked||(h.positionX+=f,h.positionY+=d)}f+=c.w+e.componentSpacing,p+=c.w+e.componentSpacing,g=Math.max(g,c.h),p>v&&(d+=g+e.componentSpacing,f=0,p=0,g=0)}}}(n,r),n}).then(function(t){a.layoutNodes=t.layoutNodes,r.stop(),f()});var f=function(){h({force:!0,next:function(){n.one("layoutstop",t.stop),n.trigger({type:"layoutstop",layout:n})}})};return this},r.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.trigger("layoutstop"),this},r.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var l=function(t,e,n){for(var r=n.eles.edges(),i=n.eles.nodes(),o={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:t.width(),clientHeight:t.width(),boundingBox:a.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()})},s=n.eles.components(),c={},l=0;l<s.length;l++)for(var f=s[l],d=0;d<f.length;d++){var p=f[d];c[p.id()]=l}for(var l=0;l<o.nodeSize;l++){var g=i[l],v=g.boundingBox(),y={};y.isLocked=g.locked(),y.id=g.data("id"),y.parentId=g.data("parent"),y.cmptId=c[g.id()],y.children=[],y.positionX=g.position("x"),y.positionY=g.position("y"),y.offsetX=0,y.offsetY=0,y.height=v.w,y.width=v.h,y.maxX=y.positionX+y.width/2,y.minX=y.positionX-y.width/2,y.maxY=y.positionY+y.height/2,y.minY=y.positionY-y.height/2,y.padLeft=parseFloat(g.style("padding")),y.padRight=parseFloat(g.style("padding")),y.padTop=parseFloat(g.style("padding")),y.padBottom=parseFloat(g.style("padding")),y.nodeRepulsion=u.fn(n.nodeRepulsion)?n.nodeRepulsion.call(g,g):n.nodeRepulsion,o.layoutNodes.push(y),o.idToIndex[y.id]=l}for(var m=[],x=0,b=-1,w=[],l=0;l<o.nodeSize;l++){var g=o.layoutNodes[l],_=g.parentId;null!=_?o.layoutNodes[o.idToIndex[_]].children.push(g.id):(m[++b]=g.id,w.push(g.id))}for(o.graphSet.push(w);x<=b;){var E=m[x++],k=o.idToIndex[E],p=o.layoutNodes[k],N=p.children;if(N.length>0){o.graphSet.push(N);for(var l=0;l<N.length;l++)m[++b]=N[l]}}for(var l=0;l<o.graphSet.length;l++)for(var L=o.graphSet[l],d=0;d<L.length;d++){var S=o.idToIndex[L[d]];o.indexToGraph[S]=l}for(var l=0;l<o.edgeSize;l++){var T=r[l],A={};A.id=T.data("id"),A.sourceId=T.data("source"),A.targetId=T.data("target");var D=u.fn(n.idealEdgeLength)?n.idealEdgeLength.call(T,T):n.idealEdgeLength,M=u.fn(n.edgeElasticity)?n.edgeElasticity.call(T,T):n.edgeElasticity,P=o.idToIndex[A.sourceId],I=o.idToIndex[A.targetId];if(o.indexToGraph[P]!=o.indexToGraph[I]){for(var C=h(A.sourceId,A.targetId,o),O=o.graphSet[C],R=0,y=o.layoutNodes[P];-1===O.indexOf(y.id);)y=o.layoutNodes[o.idToIndex[y.parentId]],R++;for(y=o.layoutNodes[I];-1===O.indexOf(y.id);)y=o.layoutNodes[o.idToIndex[y.parentId]],R++;D*=R*n.nestingFactor}A.idealLength=D,A.elasticity=M,o.layoutEdges.push(A)}return o},h=function(t,e,n){var r=f(t,e,0,n);return 2>r.count?0:r.graph},f=function(t,e,n,r){var i=r.graphSet[n];if(-1<i.indexOf(t)&&-1<i.indexOf(e))return{count:2,graph:n};for(var o=0,a=0;a<i.length;a++){var s=i[a],u=r.idToIndex[s],c=r.layoutNodes[u].children;if(0!==c.length){var l=r.indexToGraph[r.idToIndex[c[0]]],h=f(t,e,l,r);if(0!==h.count){if(1!==h.count)return h;if(2===++o)break}}}return{count:o,graph:n}},d=function(t){if(i){console.debug("layoutNodes:");for(var e=0;e<t.nodeSize;e++){var n=t.layoutNodes[e],r="\nindex: "+e+"\nId: "+n.id+"\nChildren: "+n.children.toString()+"\nparentId: "+n.parentId+"\npositionX: "+n.positionX+"\npositionY: "+n.positionY+"\nOffsetX: "+n.offsetX+"\nOffsetY: "+n.offsetY+"\npadLeft: "+n.padLeft+"\npadRight: "+n.padRight+"\npadTop: "+n.padTop+"\npadBottom: "+n.padBottom;console.debug(r)}console.debug("idToIndex");for(var e in t.idToIndex)console.debug("Id: "+e+"\nIndex: "+t.idToIndex[e]);console.debug("Graph Set");for(var o=t.graphSet,e=0;e<o.length;e++)console.debug("Set : "+e+": "+o[e].toString());for(var r="IndexToGraph",e=0;e<t.indexToGraph.length;e++)r+="\nIndex : "+e+" Graph: "+t.indexToGraph[e];console.debug(r),r="Layout Edges";for(var e=0;e<t.layoutEdges.length;e++){var a=t.layoutEdges[e];r+="\nEdge Index: "+e+" ID: "+a.id+" SouceID: "+a.sourceId+" TargetId: "+a.targetId+" Ideal Length: "+a.idealLength}console.debug(r),r="nodeSize: "+t.nodeSize,r+="\nedgeSize: "+t.edgeSize,r+="\ntemperature: "+t.temperature,console.debug(r)}},p=function(t,e){for(var n=t.clientWidth,r=t.clientHeight,i=0;i<t.nodeSize;i++){var o=t.layoutNodes[i];0!==o.children.length||o.isLocked||(o.positionX=Math.random()*n,o.positionY=Math.random()*r)}},g=function(t,e,n){var r=n.layout,i=n.eles.nodes(),o=t.boundingBox,a={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)};n.boundingBox&&(i.forEach(function(e){var n=t.layoutNodes[t.idToIndex[e.data("id")]];a.x1=Math.min(a.x1,n.positionX),a.x2=Math.max(a.x2,n.positionX),a.y1=Math.min(a.y1,n.positionY),a.y2=Math.max(a.y2,n.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),i.positions(function(e,r){var i=t.layoutNodes[t.idToIndex[r.data("id")]];if(n.boundingBox){var s=(i.positionX-a.x1)/a.w,u=(i.positionY-a.y1)/a.h;return{x:o.x1+s*o.w,y:o.y1+u*o.h}}return{x:i.positionX,y:i.positionY}}),!0!==t.ready&&(t.ready=!0,r.one("layoutready",n.ready),r.trigger({type:"layoutready",layout:this}))};e.exports=r},{"../../is":125,"../../math":127,"../../thread":140,"../../util":142}],94:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},a,t)}var i=t("../../util"),o=t("../../math"),a={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=r.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var a=o.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===a.h||0===a.w)i.layoutPositions(this,e,function(){return{x:a.x1,y:a.y1}});else{var s=i.size(),u=Math.sqrt(s*a.h/a.w),c=Math.round(u),l=Math.round(a.w/a.h*u),h=function(t){if(null==t)return Math.min(c,l);Math.min(c,l)==c?c=t:l=t},f=function(t){if(null==t)return Math.max(c,l);Math.max(c,l)==c?c=t:l=t},d=e.rows,p=null!=e.cols?e.cols:e.columns;if(null!=d&&null!=p)c=d,l=p;else if(null!=d&&null==p)c=d,l=Math.ceil(s/c);else if(null==d&&null!=p)l=p,c=Math.ceil(s/l);else if(l*c>s){var g=h(),v=f();(g-1)*v>=s?h(g-1):(v-1)*g>=s&&f(v-1)}else for(;l*c<s;){var g=h(),v=f();(v+1)*g>=s?f(v+1):h(g+1)}var y=a.w/l,m=a.h/c;if(e.condense&&(y=0,m=0),e.avoidOverlap)for(var x=0;x<i.length;x++){var b=i[x],w=b._private.position;null!=w.x&&null!=w.y||(w.x=0,w.y=0);var _=b.boundingBox(),E=e.avoidOverlapPadding,k=_.w+E,N=_.h+E;y=Math.max(y,k),m=Math.max(m,N)}for(var L={},S=function(t,e){return!!L["c-"+t+"-"+e]},T=function(t,e){L["c-"+t+"-"+e]=!0},A=0,D=0,M=function(){++D>=l&&(D=0,A++)},P={},x=0;x<i.length;x++){var b=i[x],I=e.position(b);if(I&&(void 0!==I.row||void 0!==I.col)){var w={row:I.row,col:I.col};if(void 0===w.col)for(w.col=0;S(w.row,w.col);)w.col++;else if(void 0===w.row)for(w.row=0;S(w.row,w.col);)w.row++;P[b.id()]=w,T(w.row,w.col)}}var C=function(t,e){var n,r;if(e.locked()||e.isParent())return!1;var i=P[e.id()];if(i)n=i.col*y+y/2+a.x1,r=i.row*m+m/2+a.y1;else{for(;S(A,D);)M();n=D*y+y/2+a.x1,r=A*m+m/2+a.y1,T(A,D),M()}return{x:n,y:r}};i.layoutPositions(this,e,C)}return this},e.exports=r},{"../../math":127,"../../util":142}],95:[function(t,e,n){"use strict";e.exports=[{name:"breadthfirst",impl:t("./breadthfirst")},{name:"circle",impl:t("./circle")},{name:"concentric",impl:t("./concentric")},{name:"cose",impl:t("./cose")},{name:"grid",impl:t("./grid")},{name:"null",impl:t("./null")},{name:"preset",impl:t("./preset")},{name:"random",impl:t("./random")}]},{"./breadthfirst":90,"./circle":91,"./concentric":92,"./cose":93,"./grid":94,"./null":96,"./preset":97,"./random":98}],96:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},o,t)}var i=t("../../util"),o={ready:function(){},stop:function(){}};r.prototype.run=function(){var t=this.options,e=t.eles,n=this;t.cy;return n.trigger("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",t.ready),n.trigger("layoutready"),n.one("layoutstop",t.stop),n.trigger("layoutstop"),this},r.prototype.stop=function(){return this},e.exports=r},{"../../util":142}],97:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},a,t)}var i=t("../../util"),o=t("../../is"),a={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){function t(t){if(null==e.positions)return null;if(i)return e.positions.apply(t,[t]);var n=e.positions[t._private.data.id];return null==n?null:n}var e=this.options,n=e.eles,r=n.nodes(),i=o.fn(e.positions);return r.layoutPositions(this,e,function(e,n){var r=t(n);return!n.locked()&&null!=r&&r}),this},e.exports=r},{"../../is":125,"../../util":142}],98:[function(t,e,n){"use strict";function r(t){this.options=i.extend({},a,t)}var i=t("../../util"),o=t("../../math"),a={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles,r=n.nodes().not(":parent"),i=o.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(t,e){return{x:i.x1+Math.round(Math.random()*i.w),y:i.y1+Math.round(Math.random()*i.h)}};return r.layoutPositions(this,t,a),this},e.exports=r},{"../../math":127,"../../util":142}],99:[function(t,e,n){"use strict";var r=t("../../../math"),i=t("../../../is"),o=t("../../../util"),a={};a.arrowShapeWidth=.3,a.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,n=function(t,e,n,r,i,o){var a=i.x-n/2-o,s=i.x+n/2+o,u=i.y-n/2-o,c=i.y+n/2+o;return a<=t&&t<=s&&u<=e&&e<=c},a=function(t,e,n,r,i){var o=t*Math.cos(r)-e*Math.sin(r),a=t*Math.sin(r)+e*Math.cos(r),s=o*n,u=a*n;return{x:s+i.x,y:u+i.y}},s=function(t,e,n,r){for(var i=[],o=0;o<t.length;o+=2){var s=t[o],u=t[o+1];i.push(a(s,u,e,n,r))}return i},u=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r.x,r.y)}return e},c=function(a,c){i.string(c)&&(c=t[c]),t[a]=o.extend({name:a,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(t,e,n,i,o,a){var c=u(s(this.points,n+2*a,i,o));return r.pointInsidePolygonPoints(t,e,c)},roughCollide:n,draw:function(t,n,r,i){var o=s(this.points,n,r,i);e.arrowShapeImpl("polygon")(t,o)},spacing:function(t){return 0},gap:function(t){return 2*t.pstyle("width").pfValue}},c)};c("none",{collide:o.falsify,roughCollide:o.falsify,draw:o.noop,spacing:o.zeroify,gap:o.zeroify}),c("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),c("arrow","triangle"),c("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(t,n,r,i){var o=s(this.points,n,r,i),u=this.controlPoint,c=a(u[0],u[1],n,r,i);e.arrowShapeImpl(this.name)(t,o,c)},gap:function(t){return t.pstyle("width").pfValue}}),c("triangle-tee",{points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(t,e,n,i,o,a){var c=u(s(this.points,n+2*a,i,o)),l=u(s(this.pointsTee,n+2*a,i,o));return r.pointInsidePolygonPoints(t,e,c)||r.pointInsidePolygonPoints(t,e,l)},draw:function(t,n,r,i){var o=s(this.points,n,r,i),a=s(this.pointsTee,n,r,i);e.arrowShapeImpl(this.name)(t,o,a)}}),c("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(t){return t.pstyle("width").pfValue}}),c("circle",{radius:.15,collide:function(t,e,n,r,i,o){var a=i;return Math.pow(a.x-t,2)+Math.pow(a.y-e,2)<=Math.pow((n+2*o)*this.radius,2)},draw:function(t,n,r,i){e.arrowShapeImpl(this.name)(t,i.x,i.y,this.radius*n)},spacing:function(t){return e.getArrowWidth(t.pstyle("width").pfValue)*this.radius}}),c("inhibitor",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(t){return 1},gap:function(t){return 1}}),c("tee","inhibitor"),c("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),c("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(t){return t.pstyle("width").pfValue}})},e.exports=a},{"../../../is":125,"../../../math":127,"../../../util":142}],100:[function(t,e,n){"use strict";function r(t,e,n){for(var r=function(t,e,n,r){return i.qbezierAt(t,e,n,r)},o=e._private,a=o.rstyle.bezierPts,s=0;s<t.bezierProjPcts.length;s++){var u=t.bezierProjPcts[s];a.push({x:r(n[0],n[2],n[4],u),y:r(n[1],n[3],n[5],u)})}}var i=t("../../../math"),o=t("../../../is"),a=t("../../../util"),s=t("../../../collection/zsort"),u=t("../../../window"),c={};c.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),n=this,r=function(t,n){e.merge(t);for(var r=0;r<t.length;r++){var i=t[r],o=i._private,a=o.rstyle;a.clean=!1,o.bbCache=null;var s=a.dirtyEvents=a.dirtyEvents||{length:0};s[n.type]||(s[n.type]=!0,s.length++)}};n.binder(t).on("position.* style.* free.*","node",function(e){var n=e.cyTarget;if(r(n,e),r(n.connectedEdges(),e),t.hasCompoundNodes()){var i=n.parents();r(i,e),r(i.connectedEdges(),e)}}).on("add.* background.*","node",function(t){r(t.cyTarget,t)}).on("add.* style.*","edge",function(t){var e=t.cyTarget;r(e,t),r(e.parallelEdges(),t)}).on("remove.*","edge",function(t){for(var e=t.cyTarget,n=e.parallelEdges(),i=0;i<n.length;i++){var o=n[i];o.removed()||r(o,t)}});var i=function(r){if(r){var i=n.onUpdateEleCalcsFns;if(i)for(var o=0;o<i.length;o++){var a=i[o];a(r,e)}n.recalculateRenderedStyle(e,!1);for(var o=0;o<e.length;o++)e[o]._private.rstyle.dirtyEvents=null;e=t.collection()}};n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)},c.onUpdateEleCalcs=function(t){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(t)},c.recalculateRenderedStyle=function(t,e){var n=[],r=[];if(!this.destroyed){void 0===e&&(e=!0);for(var i=0;i<t.length;i++){var o=t[i],a=o._private,s=a.rstyle;e&&s.clean||o.removed()||("nodes"===a.group?r.push(o):n.push(o),s.clean=!0)}for(var i=0;i<r.length;i++){var o=r[i],a=o._private,s=a.rstyle,u=a.position;this.recalculateNodeLabelProjection(o),s.nodeX=u.x,s.nodeY=u.y,s.nodeW=o.pstyle("width").pfValue,s.nodeH=o.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var i=0;i<n.length;i++){var o=n[i],a=o._private,s=a.rstyle,c=a.rscratch;this.recalculateEdgeLabelProjections(o),s.srcX=c.arrowStartX,s.srcY=c.arrowStartY,s.tgtX=c.arrowEndX,s.tgtY=c.arrowEndY,s.midX=c.midX,s.midY=c.midY,s.labelAngle=c.labelAngle,s.sourceLabelAngle=c.sourceLabelAngle,s.targetLabelAngle=c.targetLabelAngle}}},c.projectIntoViewport=function(t,e){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],o=r[1],a=n.pan(),s=n.zoom();return[(t-i-a.x)/s,(e-o-a.y)/s]},c.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),n=u.getComputedStyle(t),r=function(t){return parseFloat(n.getPropertyValue(t))},i={left:r("padding-left")+r("border-left-width"),right:r("padding-right")+r("border-right-width"),top:r("padding-top")+r("border-top-width"),bottom:r("padding-bottom")+r("border-bottom-width")};return this.containerBB=[e.left+i.left,e.top+i.top,e.right-e.left-i.left-i.right,e.bottom-e.top-i.top-i.bottom]},c.invalidateContainerClientCoordsCache=function(){this.containerBB=null},c.findNearestElement=function(t,e,n,r){return this.findNearestElements(t,e,n,r)[0]},c.findNearestElements=function(t,e,n,r){function o(t,e){if(t.isNode()){if(h)return;h=t,g.push(t)}if(t.isEdge()&&(null==e||e<w))if(l){if(l.pstyle("z-index").value===t.pstyle("z-index").value)for(var n=0;n<g.length;n++)if(g[n].isEdge()){g[n]=t,l=t,w=null!=e?e:w;break}}else g.push(t),l=t,w=null!=e?e:w}function s(r){var i=r._private;if("no"!==r.pstyle("events").strValue){var a=r.outerWidth()+2*x,s=r.outerHeight()+2*x,u=a/2,c=s/2,l=i.position;if(l.x-u<=t&&t<=l.x+u&&l.y-c<=e&&e<=l.y+c){var h=!n||r.visible()&&!r.transparent();if(n&&!h)return;if(d.nodeShapes[f.getNodeShape(r)].checkPoint(t,e,0,a,s,l.x,l.y))return o(r,0),!0}}}function u(t,e,n){return a.getPrefixedProperty(t,e,n)}function c(n,r){var a,s=n._private,c=b;a=r?r+"-":"";var l=n.pstyle(a+"label").value;if("yes"===n.pstyle("text-events").strValue&&l){var h=s.rstyle,f=n.pstyle("text-border-width").pfValue,d=u(h,"labelWidth",r)+f/2+2*c,p=u(h,"labelHeight",r)+f/2+2*c,g=u(h,"labelX",r),v=u(h,"labelY",r),y=u(s.rscratch,"labelAngle",r),m=g-d/2,x=g+d/2,w=v-p/2,_=v+p/2;if(y){var E=Math.cos(y),k=Math.sin(y),N=function(t,e){return t-=g,e-=v,{x:t*E-e*k+g,y:t*k+e*E+v}},L=N(m,w),S=N(m,_),T=N(x,w),A=N(x,_),D=[L.x,L.y,T.x,T.y,A.x,A.y,S.x,S.y];if(i.pointInsidePolygonPoints(t,e,D))return o(n),!0}else{var M={w:d,h:p,x1:m,x2:x,y1:w,y2:_};if(i.inBoundingBox(M,t,e))return o(n),!0}}}for(var l,h,f=this,d=this,p=d.getCachedZSortedEles(),g=[],v=d.cy.zoom(),y=d.cy.hasCompoundNodes(),m=(r?24:8)/v,x=(r?8:2)/v,b=(r?8:2)/v,w=1/0,_=p.length-1;_>=0;_--){var E=p[_];E.isNode()?s(E)||c(E):function(r){var a=r._private;if("no"!==r.pstyle("events").strValue){var u,c,l=a.rscratch,h=r.pstyle("width").pfValue,p=h/2+m,v=p*p,x=2*p,b=a.source,w=a.target,_=function(){return void 0!==c?c:n?r.visible()&&!r.transparent()?(c=!0,!0):(c=!1,!1):(c=!0,!0)};if("segments"===l.edgeType||"straight"===l.edgeType||"haystack"===l.edgeType){for(var E=l.allpts,k=0;k+3<E.length;k+=2)if(i.inLineVicinity(t,e,E[k],E[k+1],E[k+2],E[k+3],x)&&_()&&v>(u=i.sqdistToFiniteLine(t,e,E[k],E[k+1],E[k+2],E[k+3])))return o(r,u),!0}else if("bezier"===l.edgeType||"multibezier"===l.edgeType||"self"===l.edgeType||"compound"===l.edgeType)for(var E=l.allpts,k=0;k+5<l.allpts.length;k+=4)if(i.inBezierVicinity(t,e,E[k],E[k+1],E[k+2],E[k+3],E[k+4],E[k+5],x)&&_()&&v>(u=i.sqdistToQuadraticBezier(t,e,E[k],E[k+1],E[k+2],E[k+3],E[k+4],E[k+5])))return o(r,u),!0;if(_())for(var b=b||a.source,w=w||a.target,N=f.getArrowWidth(h),L=[{name:"source",x:l.arrowStartX,y:l.arrowStartY,angle:l.srcArrowAngle},{name:"target",x:l.arrowEndX,y:l.arrowEndY,angle:l.tgtArrowAngle},{name:"mid-source",x:l.midX,y:l.midY,angle:l.midsrcArrowAngle},{name:"mid-target",x:l.midX,y:l.midY,angle:l.midtgtArrowAngle}],k=0;k<L.length;k++){var S=L[k],T=d.arrowShapes[r.pstyle(S.name+"-arrow-shape").value];if(T.roughCollide(t,e,N,S.angle,{x:S.x,y:S.y},m)&&T.collide(t,e,N,S.angle,{x:S.x,y:S.y},m))return o(r),!0}y&&g.length>0&&(s(b),s(w))}}(E)||c(E)||c(E,"source")||c(E,"target")}return g},c.getAllInBox=function(t,e,n,r){var o=this.getCachedZSortedEles(),a=o.nodes,s=o.edges,u=[],c=Math.min(t,n),l=Math.max(t,n),h=Math.min(e,r),f=Math.max(e,r);t=c,n=l,e=h,r=f;for(var d=i.makeBoundingBox({x1:t,y1:e,x2:n,y2:r}),p=0;p<a.length;p++){var g=a[p],v=g.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1,includeShadows:!1});i.boundingBoxesIntersect(d,v)&&u.push(a[p])}for(var y=0;y<s.length;y++){var m=s[y],x=m._private,b=x.rscratch;if((null==b.startX||null==b.startY||i.inBoundingBox(d,b.startX,b.startY))&&(null==b.endX||null==b.endY||i.inBoundingBox(d,b.endX,b.endY)))if("bezier"===b.edgeType||"multibezier"===b.edgeType||"self"===b.edgeType||"compound"===b.edgeType||"segments"===b.edgeType||"haystack"===b.edgeType){for(var w=x.rstyle.bezierPts||x.rstyle.linePts||x.rstyle.haystackPts,_=!0,p=0;p<w.length;p++)if(!i.pointInBoundingBox(d,w[p])){_=!1;break}_&&u.push(m)}else"haystack"!==b.edgeType&&"straight"!==b.edgeType||u.push(m)}return u},c.getNodeShape=function(t){var e=this,n=t.pstyle("shape").value;if(t.isParent())return"rectangle"===n||"roundrectangle"===n?n:"rectangle";if("polygon"===n){var r=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(r).name}return n},c.updateCachedZSortedEles=function(){this.getCachedZSortedEles(!0)},c.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;t.drag=[],t.nondrag=[];for(var e=[],n=0;n<t.length;n++){var r=t[n],i=r._private.rscratch;r.grabbed()&&!r.isParent()?e.push(r):i.inDragLayer?t.drag.push(r):t.nondrag.push(r)}for(var n=0;n<e.length;n++){var r=e[n];t.drag.push(r)}},c.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements(),n=[];n.nodes=[],n.edges=[];for(var r=0;r<e.length;r++){var i=e[r];(i.animated()||i.visible()&&!i.transparent())&&(n.push(i),i.isNode()?n.nodes.push(i):n.edges.push(i))}n.sort(s),this.cachedZSortedEles=n,this.updateCachedGrabbedEles()}else n=this.cachedZSortedEles;return n},c.projectLines=function(t){var e=t._private,n=e.rscratch,i=n.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,"multibezier"===i||"bezier"===i||"self"===i||"compound"===i)for(var o=(e.rstyle.bezierPts=[],0);o+5<n.allpts.length;o+=4)r(this,t,n.allpts.slice(o,o+6));else if("segments"===i)for(var a=e.rstyle.linePts=[],o=0;o+1<n.allpts.length;o+=2)a.push({x:n.allpts[o],y:n.allpts[o+1]});else if("haystack"===i){var s=n.haystackPts;e.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue)*this.arrowShapeWidth},c.projectBezier=c.projectLines,c.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!o.emptyString(e)){var n,r,i=t._private,a=t.width(),s=t.height(),u=t.pstyle("padding").pfValue,c=i.position,l=t.pstyle("text-halign").strValue,h=t.pstyle("text-valign").strValue,f=i.rscratch,d=i.rstyle;switch(l){case"left":n=c.x-a/2-u;break;case"right":n=c.x+a/2+u;break;default:n=c.x}switch(h){case"top":r=c.y-s/2-u;break;case"bottom":r=c.y+s/2+u;break;default:r=c.y}f.labelX=n,f.labelY=r,d.labelX=n,d.labelY=r,this.applyLabelDimensions(t)}},c.recalculateEdgeLabelProjections=function(t){var e,n=t._private,r=n.rscratch,o=this,s={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(s.mid||s.source||s.target){e={x:r.midX,y:r.midY};var u=function(t,e,r){a.setPrefixedProperty(n.rscratch,t,e,r),a.setPrefixedProperty(n.rstyle,t,e,r)};u("labelX",null,e.x),u("labelY",null,e.y);var c=function(){function t(t,e,n,r,o){var a=i.dist(e,n),s=t.segments[t.segments.length-1],u={p0:e,p1:n,t0:r,t1:o,startDist:s?s.startDist+s.length:0,length:a};t.segments.push(u),t.length+=a}if(c.cache)return c.cache;for(var e=[],a=0;a+5<r.allpts.length;a+=4){var s={x:r.allpts[a],y:r.allpts[a+1]},u={x:r.allpts[a+2],y:r.allpts[a+3]},l={x:r.allpts[a+4],y:r.allpts[a+5]};e.push({p0:s,p1:u,p2:l,startDist:0,length:0,segments:[]})}for(var h=n.rstyle.bezierPts,f=o.bezierProjPcts.length,a=0;a<e.length;a++){var d=e[a],p=e[a-1];p&&(d.startDist=p.startDist+p.length),t(d,d.p0,h[a*f],0,o.bezierProjPcts[0]);for(var g=0;g<f-1;g++)t(d,h[a*f+g],h[a*f+g+1],o.bezierProjPcts[g],o.bezierProjPcts[g+1]);t(d,h[a*f+f-1],d.p2,o.bezierProjPcts[f-1],1)}return c.cache=e},l=function(n){var o,a="source"===n;if(s[n]){var l=t.pstyle(n+"-text-offset").pfValue,h=function(t,e){var n=e.x-t.x,r=e.y-t.y;return Math.atan(r/n)};switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var f,d=c(),p=0,g=0,v=0;v<d.length;v++){for(var y=d[a?v:d.length-1-v],m=0;m<y.segments.length;m++){var x=y.segments[a?m:y.segments.length-1-m],b=v===d.length-1&&m===y.segments.length-1;if(p=g,(g+=x.length)>=l||b){f={cp:y,segment:x};break}}if(f)break}var y=f.cp,x=f.segment,w=(l-p)/x.length,_=x.t1-x.t0,E=a?x.t0+_*w:x.t1-_*w;E=i.bound(0,E,1),e=i.qbezierPtAt(y.p0,y.p1,y.p2,E),o=function(t,e,n,r){var o=i.bound(0,r-.001,1),a=i.bound(0,r+.001,1);return h(i.qbezierPtAt(t,e,n,o),i.qbezierPtAt(t,e,n,a))}(y.p0,y.p1,y.p2,E);break;case"straight":case"segments":case"haystack":for(var k,N,L,S,T=0,A=r.allpts.length,v=0;v+3<A&&(a?(L={x:r.allpts[v],y:r.allpts[v+1]},S={x:r.allpts[v+2],y:r.allpts[v+3]}):(L={x:r.allpts[A-2-v],y:r.allpts[A-1-v]},S={x:r.allpts[A-4-v],y:r.allpts[A-3-v]}),k=i.dist(L,S),N=T,!((T+=k)>=l));v+=2);var D=l-N,E=D/k;E=i.bound(0,E,1),e=i.lineAt(L,S,E),o=h(L,S)}u("labelX",n,e.x),u("labelY",n,e.y),u("labelAutoAngle",n,o)}};l("source"),l("target"),this.applyLabelDimensions(t)}},c.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))},c.applyPrefixedLabelDimensions=function(t,e){var n=t._private,r=this.getLabelText(t,e),i=this.calculateLabelDimensions(t,r);a.setPrefixedProperty(n.rstyle,"labelWidth",e,i.width),a.setPrefixedProperty(n.rscratch,"labelWidth",e,i.width),a.setPrefixedProperty(n.rstyle,"labelHeight",e,i.height),a.setPrefixedProperty(n.rscratch,"labelHeight",e,i.height)},c.getLabelText=function(t,e){var n=t._private,r=e?e+"-":"",i=t.pstyle(r+"label").strValue,o=t.pstyle("text-transform").value,s=function(t,r){return r?(a.setPrefixedProperty(n.rscratch,t,e,r),r):a.getPrefixedProperty(n.rscratch,t,e)};if("none"==o||("uppercase"==o?i=i.toUpperCase():"lowercase"==o&&(i=i.toLowerCase())),"wrap"===t.pstyle("text-wrap").value){var u=s("labelKey");if(u&&s("labelWrapKey")===u)return s("labelWrapCachedText");for(var c=i.split("\n"),l=t.pstyle("text-max-width").pfValue,h=[],f=0;f<c.length;f++){var d=c[f];if(this.calculateLabelDimensions(t,d,"line="+d).width>l){for(var p=d.split(/\s+/),g="",v=0;v<p.length;v++){var y=p[v],m=0===g.length?y:g+" "+y;this.calculateLabelDimensions(t,m,"testLine="+m).width<=l?g+=y+" ":(h.push(g),g=y+" ")}g.match(/^\s+$/)||h.push(g)}else h.push(d)}s("labelWrapCachedLines",h),i=s("labelWrapCachedText",h.join("\n")),s("labelWrapKey",u)}return i},c.calculateLabelDimensions=function(t,e,n){var r=this,i=t._private.labelStyleKey+"$@$"+e;n&&(i+="$@$"+n);var o=r.labelDimCache||(r.labelDimCache={});if(o[i])return o[i];var a=t.pstyle("font-style").strValue,s=1*t.pstyle("font-size").pfValue+"px",u=t.pstyle("font-family").strValue,c=t.pstyle("font-weight").strValue,l=this.labelCalcDiv;l||(l=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(l));var h=l.style;return h.fontFamily=u,h.fontStyle=a,h.fontSize=s,h.fontWeight=c,h.position="absolute",h.left="-9999px",h.top="-9999px",h.zIndex="-1",h.visibility="hidden",h.pointerEvents="none",h.padding="0",h.lineHeight="1","wrap"===t.pstyle("text-wrap").value?h.whiteSpace="pre":h.whiteSpace="normal",l.textContent=e,o[i]={width:Math.ceil(l.clientWidth/1),height:Math.ceil(l.clientHeight/1)},o[i]},c.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)},c.findEdgeControlPoints=function(t){if(t&&0!==t.length){for(var e,n=this,r=n.cy,a=r.hasCompoundNodes(),s={},u=[],c=[],l=0;l<t.length;l++){var h=t[l],f=h._private,d=f.data,p=h.pstyle("curve-style").value,g="unbundled-bezier"===p||"segments"===p;if("none"!==h.pstyle("display").value)if("haystack"!==p){var v=d.source,y=d.target;e=v>y?y+"$-$"+v:v+"$-$"+y,g&&(e="unbundled$-$"+d.id),null==s[e]&&(s[e]=[],u.push(e)),s[e].push(h),g&&(s[e].hasUnbundled=!0)}else c.push(h)}for(var m,x,b,w,_,E,k,N,L,S,T,A,D,M,P=0;P<u.length;P++){e=u[P];var I=s[e];if(I.sort(function(t,e){return t.poolIndex()-e.poolIndex()}),m=I[0]._private.source,x=I[0]._private.target,!I.hasUnbundled&&m.id()>x.id()){var C=m;m=x,x=C}if(b=m._private,w=x._private,_=b.position,E=w.position,k=m.outerWidth(),N=m.outerHeight(),L=x.outerWidth(),S=x.outerHeight(),T=n.nodeShapes[this.getNodeShape(m)],A=n.nodeShapes[this.getNodeShape(x)],M=!1,I.length>1&&m!==x||I.hasUnbundled){var O=T.intersectLine(_.x,_.y,k,N,E.x,E.y,0),R=A.intersectLine(E.x,E.y,L,S,_.x,_.y,0),B={x1:O[0],x2:R[0],y1:O[1],y2:R[1]},F={x1:_.x,x2:E.x,y1:_.y,y2:E.y},z=R[1]-O[1],j=R[0]-O[0],V=Math.sqrt(j*j+z*z),G={x:j,y:z},q={x:G.x/V,y:G.y/V};D={x:-q.y,y:q.x},A.checkPoint(O[0],O[1],0,L,S,E.x,E.y)&&T.checkPoint(R[0],R[1],0,k,N,_.x,_.y)&&(D={},M=!0)}for(var h,Y,X,l=0;l<I.length;l++){h=I[l],Y=h._private,X=Y.rscratch
;var U=X.lastEdgeIndex,H=l,W=X.lastNumEdges,$=I.length,p=h.pstyle("curve-style").value,Z=h.pstyle("control-point-distances"),Q=h.pstyle("control-point-weights"),K=Z&&Q?Math.min(Z.value.length,Q.value.length):1,J=h.pstyle("control-point-step-size").pfValue,tt=Z?Z.pfValue[0]:void 0,et=Q.value[0],g="unbundled-bezier"===p||"segments"===p,nt=X.lastSrcCtlPtX,rt=_.x,it=X.lastSrcCtlPtY,ot=_.y,at=X.lastSrcCtlPtW,st=m.outerWidth(),ut=X.lastSrcCtlPtH,ct=m.outerHeight(),lt=X.lastTgtCtlPtX,ht=E.x,ft=X.lastTgtCtlPtY,dt=E.y,pt=X.lastTgtCtlPtW,gt=x.outerWidth(),vt=X.lastTgtCtlPtH,yt=x.outerHeight(),mt=X.lastW,xt=h.pstyle("control-point-step-size").pfValue,bt=h.pstyle("edge-distances").value;if(X.badBezier=!!M,nt!==rt||it!==ot||at!==st||ut!==ct||lt!==ht||ft!==dt||pt!==gt||vt!==yt||mt!==xt||!(U===H&&W===$||g)){if(X.lastSrcCtlPtX=rt,X.lastSrcCtlPtY=ot,X.lastSrcCtlPtW=st,X.lastSrcCtlPtH=ct,X.lastTgtCtlPtX=ht,X.lastTgtCtlPtY=dt,X.lastTgtCtlPtW=gt,X.lastTgtCtlPtH=yt,X.lastEdgeIndex=H,X.lastNumEdges=$,X.lastWidth=xt,m===x){X.edgeType="self";var wt=l,_t=J;g&&(wt=0,_t=tt),X.ctrlpts=[_.x,_.y-(1+Math.pow(N,1.12)/100)*_t*(wt/3+1),_.x-(1+Math.pow(k,1.12)/100)*_t*(wt/3+1),_.y]}else if(a&&(m.isParent()||m.isChild()||x.isParent()||x.isChild())&&(m.parents().anySame(x)||x.parents().anySame(m))){X.edgeType="compound",X.badBezier=!1;var wt=l,_t=J;g&&(wt=0,_t=tt);var Et={x:_.x-k/2,y:_.y-N/2},kt={x:E.x-L/2,y:E.y-S/2},Nt={x:Math.min(Et.x,kt.x),y:Math.min(Et.y,kt.y)},Lt=Math.max(.5,Math.log(.01*k)),St=Math.max(.5,Math.log(.01*L));X.ctrlpts=[Nt.x,Nt.y-(1+Math.pow(50,1.12)/100)*_t*(wt/3+1)*Lt,Nt.x-(1+Math.pow(50,1.12)/100)*_t*(wt/3+1)*St,Nt.y]}else if("segments"===p){X.edgeType="segments",X.segpts=[];for(var Tt=h.pstyle("segment-weights").pfValue,At=h.pstyle("segment-distances").pfValue,Dt=Math.min(Tt.length,At.length),Mt=0;Mt<Dt;Mt++){var Pt=Tt[Mt],It=At[Mt],Ct=1-Pt,Ot=Pt,Rt="node-position"===bt?F:B,Bt={x:Rt.x1*Ct+Rt.x2*Ot,y:Rt.y1*Ct+Rt.y2*Ot};X.segpts.push(Bt.x+D.x*It,Bt.y+D.y*It)}}else if(I.length%2!=1||l!==Math.floor(I.length/2)||g){var Ft=g;X.edgeType=Ft?"multibezier":"bezier",X.ctrlpts=[];for(var zt=0;zt<K;zt++){var jt,Vt=(.5-I.length/2+l)*J,Gt=i.signum(Vt);Ft&&(tt=Z?Z.pfValue[zt]:J,et=Q.value[zt]),jt=g?tt:void 0!==tt?Gt*tt:void 0;var qt=void 0!==jt?jt:Vt,Ct=1-et,Ot=et,Rt="node-position"===bt?F:B,Bt={x:Rt.x1*Ct+Rt.x2*Ot,y:Rt.y1*Ct+Rt.y2*Ot};X.ctrlpts.push(Bt.x+D.x*qt,Bt.y+D.y*qt)}}else X.edgeType="straight";this.findEndpoints(h);var Yt=!o.number(X.startX)||!o.number(X.startY),Xt=!o.number(X.arrowStartX)||!o.number(X.arrowStartY),Ut=!o.number(X.endX)||!o.number(X.endY),Ht=!o.number(X.arrowEndX)||!o.number(X.arrowEndY),Wt=this.getArrowWidth(h.pstyle("width").pfValue)*this.arrowShapeWidth,$t=3*Wt;if("bezier"===X.edgeType){var Zt=i.dist({x:X.ctrlpts[0],y:X.ctrlpts[1]},{x:X.startX,y:X.startY}),Qt=Zt<$t,Kt=i.dist({x:X.ctrlpts[0],y:X.ctrlpts[1]},{x:X.endX,y:X.endY}),Jt=Kt<$t,te=!1;if(Yt||Xt||Qt){te=!0;var ee={x:X.ctrlpts[0]-_.x,y:X.ctrlpts[1]-_.y},ne=Math.sqrt(ee.x*ee.x+ee.y*ee.y),re={x:ee.x/ne,y:ee.y/ne},ie=Math.max(k,N),oe={x:X.ctrlpts[0]+2*re.x*ie,y:X.ctrlpts[1]+2*re.y*ie},ae=T.intersectLine(_.x,_.y,k,N,oe.x,oe.y,0);Qt?(X.ctrlpts[0]=X.ctrlpts[0]+re.x*($t-Zt),X.ctrlpts[1]=X.ctrlpts[1]+re.y*($t-Zt)):(X.ctrlpts[0]=ae[0]+re.x*$t,X.ctrlpts[1]=ae[1]+re.y*$t)}if(Ut||Ht||Jt){te=!0;var ee={x:X.ctrlpts[0]-E.x,y:X.ctrlpts[1]-E.y},ne=Math.sqrt(ee.x*ee.x+ee.y*ee.y),re={x:ee.x/ne,y:ee.y/ne},ie=Math.max(k,N),oe={x:X.ctrlpts[0]+2*re.x*ie,y:X.ctrlpts[1]+2*re.y*ie},se=A.intersectLine(E.x,E.y,L,S,oe.x,oe.y,0);Jt?(X.ctrlpts[0]=X.ctrlpts[0]+re.x*($t-Kt),X.ctrlpts[1]=X.ctrlpts[1]+re.y*($t-Kt)):(X.ctrlpts[0]=se[0]+re.x*$t,X.ctrlpts[1]=se[1]+re.y*$t)}te&&this.findEndpoints(h)}if("multibezier"===X.edgeType||"bezier"===X.edgeType||"self"===X.edgeType||"compound"===X.edgeType){X.allpts=[],X.allpts.push(X.startX,X.startY);for(var zt=0;zt+1<X.ctrlpts.length;zt+=2)X.allpts.push(X.ctrlpts[zt],X.ctrlpts[zt+1]),zt+3<X.ctrlpts.length&&X.allpts.push((X.ctrlpts[zt]+X.ctrlpts[zt+2])/2,(X.ctrlpts[zt+1]+X.ctrlpts[zt+3])/2);X.allpts.push(X.endX,X.endY);var ue,ce;X.ctrlpts.length/2%2==0?(ue=X.allpts.length/2-1,X.midX=X.allpts[ue],X.midY=X.allpts[ue+1]):(ue=X.allpts.length/2-3,ce=.5,X.midX=i.qbezierAt(X.allpts[ue],X.allpts[ue+2],X.allpts[ue+4],ce),X.midY=i.qbezierAt(X.allpts[ue+1],X.allpts[ue+3],X.allpts[ue+5],ce))}else if("straight"===X.edgeType)X.allpts=[X.startX,X.startY,X.endX,X.endY],X.midX=(X.startX+X.endX+X.arrowStartX+X.arrowEndX)/4,X.midY=(X.startY+X.endY+X.arrowStartY+X.arrowEndY)/4;else if("segments"===X.edgeType)if(X.allpts=[],X.allpts.push(X.startX,X.startY),X.allpts.push.apply(X.allpts,X.segpts),X.allpts.push(X.endX,X.endY),X.segpts.length%4==0){var le=X.segpts.length/2,he=le-2;X.midX=(X.segpts[he]+X.segpts[le])/2,X.midY=(X.segpts[he+1]+X.segpts[le+1])/2}else{var he=X.segpts.length/2-1;X.midX=X.segpts[he],X.midY=X.segpts[he+1]}this.projectLines(h),this.calculateArrowAngles(h),this.recalculateEdgeLabelProjections(h),this.calculateLabelAngles(h)}}}for(var l=0;l<c.length;l++){var h=c[l],f=h._private,fe=f.rscratch,X=fe;if(!fe.haystack){var de=2*Math.random()*Math.PI;fe.source={x:Math.cos(de),y:Math.sin(de)};var de=2*Math.random()*Math.PI;fe.target={x:Math.cos(de),y:Math.sin(de)}}var m=f.source,x=f.target,_=m._private.position,E=x._private.position,k=m.width(),L=x.width(),N=m.height(),S=x.height(),ie=h.pstyle("haystack-radius").value,pe=ie/2;X.haystackPts=X.allpts=[X.source.x*k*pe+_.x,X.source.y*N*pe+_.y,X.target.x*L*pe+E.x,X.target.y*S*pe+E.y],X.midX=(X.allpts[0]+X.allpts[2])/2,X.midY=(X.allpts[1]+X.allpts[3])/2,fe.edgeType="haystack",fe.haystack=!0,this.projectLines(h),this.calculateArrowAngles(h),this.recalculateEdgeLabelProjections(h),this.calculateLabelAngles(h)}return s}};var l=function(t,e){return Math.atan2(e,t)-Math.PI/2};c.calculateArrowAngles=function(t){var e,n,r,o,a,s,u=t._private.rscratch,c="haystack"===u.edgeType,h="multibezier"===u.edgeType,f="segments"===u.edgeType,d="compound"===u.edgeType,p="self"===u.edgeType,g=t._private.source._private.position,v=t._private.target._private.position;c?(r=u.haystackPts[0],o=u.haystackPts[1],a=u.haystackPts[2],s=u.haystackPts[3]):(r=u.arrowStartX,o=u.arrowStartY,a=u.arrowEndX,s=u.arrowEndY),e=g.x-r,n=g.y-o,u.srcArrowAngle=l(e,n);u.midX,u.midY;if(c&&((r+a)/2,(o+s)/2),e=a-r,n=s-o,p)e=-1,n=1;else if(f){var y=u.allpts;if(y.length/2%2==0){var m=y.length/2,x=m-2;e=y[m]-y[x],n=y[m+1]-y[x+1]}else{var m=y.length/2-1,x=m-2,b=m+2;e=y[m]-y[x],n=y[m+1]-y[x+1]}}else if(h||d){var w,_,E,k,y=u.allpts,N=u.ctrlpts;if(N.length/2%2==0){var L=y.length/2-1,S=L+2,T=S+2;w=i.qbezierAt(y[L],y[S],y[T],0),_=i.qbezierAt(y[L+1],y[S+1],y[T+1],0),E=i.qbezierAt(y[L],y[S],y[T],1e-4),k=i.qbezierAt(y[L+1],y[S+1],y[T+1],1e-4)}else{var S=y.length/2-1,L=S-2,T=S+2;w=i.qbezierAt(y[L],y[S],y[T],.4999),_=i.qbezierAt(y[L+1],y[S+1],y[T+1],.4999),E=i.qbezierAt(y[L],y[S],y[T],.5),k=i.qbezierAt(y[L+1],y[S+1],y[T+1],.5)}e=E-w,n=k-_}if(u.midtgtArrowAngle=l(e,n),u.midDispX=e,u.midDispY=n,e*=-1,n*=-1,f){var y=u.allpts;if(y.length/2%2==0);else{var m=y.length/2-1,b=m+2;e=-(y[b]-y[m]),n=-(y[b+1]-y[m+1])}}u.midsrcArrowAngle=l(e,n),e=v.x-a,n=v.y-s,u.tgtArrowAngle=l(e,n)},c.calculateLabelAngles=function(t){var e=t._private,n=e.rscratch,r=t.isEdge(),i=t.pstyle("text-rotation"),o=i.strValue;"none"===o?n.labelAngle=n.sourceLabelAngle=n.targetLabelAngle=0:r&&"autorotate"===o?(n.labelAngle=Math.atan(n.midDispY/n.midDispX),n.sourceLabelAngle=n.sourceLabelAutoAngle,n.targetLabelAngle=n.targetLabelAutoAngle):n.labelAngle=n.sourceLabelAngle=n.targetLabelAngle="autorotate"===o?0:i.pfValue},c.findEndpoints=function(t){var e,n,r,a=this,s=t.source()[0],u=t.target()[0],c=s._private,l=u._private,h=c.position,f=l.position,d=t.pstyle("target-arrow-shape").value,p=t.pstyle("source-arrow-shape").value,g=t._private.rscratch,v=g.edgeType,y="bezier"===v||"multibezier"===v||"self"===v||"compound"===v,m="bezier"!==v,x="straight"===v||"segments"===v,b="segments"===v,w=y||m||x;if(y){var _=[g.ctrlpts[0],g.ctrlpts[1]];n=m?[g.ctrlpts[g.ctrlpts.length-2],g.ctrlpts[g.ctrlpts.length-1]]:_,r=_}else if(x){var E=b?g.segpts.slice(0,2):[f.x,f.y],k=b?g.segpts.slice(g.segpts.length-2):[h.x,h.y];n=k,r=E}e=a.nodeShapes[this.getNodeShape(u)].intersectLine(f.x,f.y,u.outerWidth(),u.outerHeight(),n[0],n[1],0);var N=i.shortenIntersection(e,n,a.arrowShapes[d].spacing(t)),L=i.shortenIntersection(e,n,a.arrowShapes[d].gap(t));g.endX=L[0],g.endY=L[1],g.arrowEndX=N[0],g.arrowEndY=N[1],e=a.nodeShapes[this.getNodeShape(s)].intersectLine(h.x,h.y,s.outerWidth(),s.outerHeight(),r[0],r[1],0);var S=i.shortenIntersection(e,r,a.arrowShapes[p].spacing(t)),T=i.shortenIntersection(e,r,a.arrowShapes[p].gap(t));g.startX=T[0],g.startY=T[1],g.arrowStartX=S[0],g.arrowStartY=S[1],w&&(o.number(g.startX)&&o.number(g.startY)&&o.number(g.endX)&&o.number(g.endY)?g.badLine=!1:g.badLine=!0)},c.getArrowWidth=c.getArrowHeight=function(t){var e=this.arrowWidthCache=this.arrowWidthCache||{},n=e[t];return n?n:(n=Math.max(Math.pow(13.37*t,.9),29),e[t]=n,n)},e.exports=c},{"../../../collection/zsort":74,"../../../is":125,"../../../math":127,"../../../util":142,"../../../window":149}],101:[function(t,e,n){"use strict";var r={};r.getCachedImage=function(t,e,n){var r=this,i=r.imageCache=r.imageCache||{},o=i[t];if(o)return o.image.complete||o.image.addEventListener("load",n),o.image;o=i[t]=i[t]||{};var a=o.image=new Image;a.addEventListener("load",n);return"data:"===t.substring(0,"data:".length).toLowerCase()||(a.crossOrigin=e),a.src=t,a},e.exports=r},{}],102:[function(t,e,n){"use strict";var r=t("../../../is"),i=t("../../../util"),o=function(t){this.init(t)},a=o,s=a.prototype;s.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],s.init=function(t){var e=this;e.options=t,e.cy=t.cy,e.container=t.cy.container(),e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.hideLabelsOnViewport=t.hideLabelsOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=t.pixelRatio,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners(),e.load()},s.notify=function(t){var e,n=this;if(!this.destroyed){e=r.array(t.type)?t.type:[t.type];for(var i={},o=0;o<e.length;o++){i[e[o]]=!0}if(i.destroy)return void n.destroy();(i.add||i.remove||i.load||i.style)&&n.updateCachedZSortedEles(),i.viewport&&n.redrawHint("select",!0),(i.load||i.resize)&&(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},s.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var n=t.bindings[e],r=n,i=r.target;(i.off||i.removeEventListener).apply(i,r.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch(t){}},[t("./arrow-shapes"),t("./coord-ele-math"),t("./images"),t("./load-listeners"),t("./node-shapes"),t("./redraw")].forEach(function(t){i.extend(s,t)}),e.exports=a},{"../../../is":125,"../../../util":142,"./arrow-shapes":99,"./coord-ele-math":100,"./images":101,"./load-listeners":103,"./node-shapes":104,"./redraw":105}],103:[function(t,e,n){"use strict";var r=t("../../../is"),i=t("../../../util"),o=t("../../../math"),a=t("../../../event"),s={};s.registerBinding=function(t,e,n,r){var i=Array.prototype.slice.apply(arguments,[1]),o=this.binder(t);return o.on.apply(o,i)},s.binder=function(t){var e=this,n=t===window||t===document||t===document.body||r.domElement(t);if(null==e.supportsPassiveEvents){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,o)}catch(t){}e.supportsPassiveEvents=i}var a=function(r,i,o){var a=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(a[2]={capture:null!=o&&o,passive:!1,once:!1}),e.bindings.push({target:t,args:a}),(t.addEventListener||t.on).apply(t,a),this};return{on:a,addEventListener:a,addListener:a,bind:a}},s.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()},s.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&0!==t.pstyle("opacity").value&&"visible"===t.pstyle("visibility").value&&"element"===t.pstyle("display").value},s.load=function(){var t=this,e=function(e,n,r,o){null==e&&(e=t.cy);for(var s=0;s<n.length;s++){var u=n[s],c=new a(r,i.extend({type:u},o));e.trigger(c)}},n=function(t){return t.shiftKey||t.metaKey||t.ctrlKey},s=function(e,n){var r=!0;if(t.cy.hasCompoundNodes()&&e&&e.isEdge())for(var i=0;n&&i<n.length;i++){var e=n[i];if(e.isNode()&&e.isParent()){r=!1;break}}else r=!0;return r},u=function(e){var n;if(e.addToList&&t.cy.hasCompoundNodes()){if(!e.addToList.hasId){e.addToList.hasId={};for(var r=0;r<e.addToList.length;r++){var i=e.addToList[r];e.addToList.hasId[i.id()]=!0}}n=e.addToList.hasId}return n||{}},c=function(t){t[0]._private.grabbed=!0},l=function(t){t[0]._private.grabbed=!1},h=function(t){t[0]._private.rscratch.inDragLayer=!0},f=function(t){t[0]._private.rscratch.inDragLayer=!1},d=function(t){t[0]._private.rscratch.isGrabTarget=!0},p=function(t){t[0]._private.rscratch.isGrabTarget=!1},g=function(t,e){var n=u(e);n[t.id()]||(e.addToList.push(t),n[t.id()]=!0,c(t))},v=function(t,e){if(t.cy().hasCompoundNodes()&&(null!=e.inDragLayer||null!=e.addToList)){var n=t.descendants();e.inDragLayer&&(n.forEach(h),n.connectedEdges().forEach(h)),e.addToList&&n.forEach(function(t){g(t,e)})}},y=function(e,n){n=n||{};var r=e.cy().hasCompoundNodes();n.inDragLayer&&(e.forEach(h),e.neighborhood().stdFilter(function(t){return!r||t.isEdge()}).forEach(h)),n.addToList&&e.forEach(function(t){g(t,n)}),v(e,n),b(e,{inDragLayer:n.inDragLayer}),t.updateCachedGrabbedEles()},m=y,x=function(e){e&&(e.hasId={},t.getCachedZSortedEles().forEach(function(t){l(t),f(t),p(t)}),t.updateCachedGrabbedEles())},b=function(t,e){if((null!=e.inDragLayer||null!=e.addToList)&&t.cy().hasCompoundNodes()){var n=t.ancestors().orphans();if(!n.same(t)){var r=n.descendants().spawnSelf().merge(n).unmerge(t).unmerge(t.descendants()),i=r.connectedEdges();e.inDragLayer&&(i.forEach(h),r.forEach(h)),e.addToList&&r.forEach(function(t){g(t,e)})}}},w="undefined"!=typeof MutationObserver;w?(t.removeObserver=new MutationObserver(function(e){for(var n=0;n<e.length;n++){var r=e[n],i=r.removedNodes;if(i)for(var o=0;o<i.length;o++){var a=i[o];if(a===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(e){t.destroy()});var _=i.debounce(function(){t.cy.invalidateSize(),t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container),t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);w&&(t.styleObserver=new MutationObserver(_),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(window,"resize",_);for(var E=t.cy.container();function(e){t.registerBinding(e,"scroll",function(e){t.invalidateContainerClientCoordsCache()})}(E),E.parentNode;)E=E.parentNode;t.registerBinding(t.container,"contextmenu",function(t){t.preventDefault()});var k=function(){return 0!==t.selection[4]},N=function(e){for(var n=t.findContainerClientCoords(),r=n[0],i=n[1],o=n[2],a=n[3],s=e.touches?e.touches:[e],u=!1,c=0;c<s.length;c++){var l=s[c];if(r<=l.clientX&&l.clientX<=r+o&&i<=l.clientY&&l.clientY<=i+a){u=!0;break}}if(!u)return!1;for(var h=t.container,f=e.target,d=f.parentNode,p=!1;d;){if(d===h){p=!0;break}d=d.parentNode}return!!p};t.registerBinding(t.container,"mousedown",function(n){if(N(n)){n.preventDefault(),t.hoverData.capture=!0,t.hoverData.which=n.which;var r=t.cy,i=[n.clientX,n.clientY],o=t.projectIntoViewport(i[0],i[1]),s=t.selection,u=t.findNearestElements(o[0],o[1],!0,!1),c=u[0],l=t.dragData.possibleDragElements;t.hoverData.mdownPos=o,t.hoverData.mdownGPos=i;if(3==n.which){t.hoverData.cxtStarted=!0;var h=new a(n,{type:"cxttapstart",cyPosition:{x:o[0],y:o[1]}});c?(c.activate(),c.trigger(h),t.hoverData.down=c):r.trigger(h),t.hoverData.downTime=(new Date).getTime(),t.hoverData.cxtDragged=!1}else if(1==n.which){if(c&&c.activate(),null!=c&&t.nodeIsGrabbable(c)){var f=new a(n,{type:"grab",cyPosition:{x:o[0],y:o[1]}});if(d(c),c.selected()){if(c.selected()){l=t.dragData.possibleDragElements=[];var p=r.$(function(){return this.isNode()&&this.selected()&&t.nodeIsGrabbable(this)});y(p,{addToList:l}),c.trigger(f)}}else l=t.dragData.possibleDragElements=[],m(c,{addToList:l}),c.trigger(f);t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=c,t.hoverData.downs=u,t.hoverData.downTime=(new Date).getTime(),e(c,["mousedown","tapstart","vmousedown"],n,{cyPosition:{x:o[0],y:o[1]}}),null==c?(s[4]=1,t.data.bgActivePosistion={x:o[0],y:o[1]},t.redrawHint("select",!0),t.redraw()):c.isEdge()&&(s[4]=1),function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var e=t.hoverData.down;e?e.trigger(new a(n,{type:"taphold",cyPosition:{x:o[0],y:o[1]}})):r.trigger(new a(n,{type:"taphold",cyPosition:{x:o[0],y:o[1]}}))}},t.tapholdDuration)}()}s[0]=s[2]=o[0],s[1]=s[3]=o[1]}},!1),t.registerBinding(window,"mousemove",function(i){if(t.hoverData.capture||N(i)){var u=!1,c=t.cy,l=c.zoom(),h=[i.clientX,i.clientY],f=t.projectIntoViewport(h[0],h[1]),d=t.hoverData.mdownPos,p=t.hoverData.mdownGPos,g=t.selection,v=null;t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.selecting||(v=t.findNearestElement(f[0],f[1],!0,!1));var m,x=t.hoverData.last,b=t.hoverData.down,w=[f[0]-g[2],f[1]-g[3]],_=t.dragData.possibleDragElements;if(p){var E=h[0]-p[0],k=E*E,L=h[1]-p[1];m=k+L*L>=t.desktopTapThreshold2}var S=n(i);if(m&&(t.hoverData.tapholdCancelled=!0),u=!0,e(v,["mousemove","vmousemove","tapdrag"],i,{cyPosition:{x:f[0],y:f[1]}}),3===t.hoverData.which){if(m){var T=new a(i,{type:"cxtdrag",cyPosition:{x:f[0],y:f[1]}});b?b.trigger(T):c.trigger(T),t.hoverData.cxtDragged=!0,t.hoverData.cxtOver&&v===t.hoverData.cxtOver||(t.hoverData.cxtOver&&t.hoverData.cxtOver.trigger(new a(i,{type:"cxtdragout",cyPosition:{x:f[0],y:f[1]}})),t.hoverData.cxtOver=v,v&&v.trigger(new a(i,{type:"cxtdragover",cyPosition:{x:f[0],y:f[1]}})))}}else if(t.hoverData.dragging){if(u=!0,c.panningEnabled()&&c.userPanningEnabled()){var A;if(t.hoverData.justStartedPan){var D=t.hoverData.mdownPos;A={x:(f[0]-D[0])*l,y:(f[1]-D[1])*l},t.hoverData.justStartedPan=!1}else A={x:w[0]*l,y:w[1]*l};c.panBy(A),t.hoverData.dragged=!0}f=t.projectIntoViewport(i.clientX,i.clientY)}else if(1!=g[4]||null!=b&&!b.isEdge()){if(b&&b.isEdge()&&b.active()&&b.unactivate(),b&&b.grabbed()||v==x||(x&&e(x,["mouseout","tapdragout"],i,{cyPosition:{x:f[0],y:f[1]}}),v&&e(v,["mouseover","tapdragover"],i,{cyPosition:{x:f[0],y:f[1]}}),t.hoverData.last=v),b&&t.nodeIsDraggable(b))if(m){var M=!t.dragData.didDrag;M&&t.redrawHint("eles",!0),t.dragData.didDrag=!0;var P=[];t.hoverData.draggingEles||y(c.collection(_),{inDragLayer:!0});for(var I=0;I<_.length;I++){var C=_[I];if(t.nodeIsDraggable(C)&&C.grabbed()){var O=C._private.position;if(P.push(C),r.number(w[0])&&r.number(w[1])){var R=!C.isParent();if(R&&(O.x+=w[0],O.y+=w[1]),M){var B=t.hoverData.dragDelta;R&&B&&r.number(B[0])&&r.number(B[1])&&(O.x+=B[0],O.y+=B[1])}}}}t.hoverData.draggingEles=!0;var F=c.collection(P);F.updateCompoundBounds(),F.trigger("position drag"),t.redrawHint("drag",!0),t.redraw()}else!function(){var e=t.hoverData.dragDelta=t.hoverData.dragDelta||[];0===e.length?(e.push(w[0]),e.push(w[1])):(e[0]+=w[0],e[1]+=w[1])}();u=!0}else if(m){if(t.hoverData.dragging||!c.boxSelectionEnabled()||!S&&c.panningEnabled()&&c.userPanningEnabled()){if(!t.hoverData.selecting&&c.panningEnabled()&&c.userPanningEnabled()){var z=s(b,t.hoverData.downs);z&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,g[4]=0,t.data.bgActivePosistion=o.array2point(d),t.redrawHint("select",!0),t.redraw())}}else t.data.bgActivePosistion=void 0,t.hoverData.selecting||c.trigger("boxstart"),t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw();b&&b.isEdge()&&b.active()&&b.unactivate()}return g[2]=f[0],g[3]=f[1],u?(i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault(),!1):void 0}},!1),t.registerBinding(window,"mouseup",function(r){if(t.hoverData.capture){t.hoverData.capture=!1;var i=t.cy,o=t.projectIntoViewport(r.clientX,r.clientY),s=t.selection,u=t.findNearestElement(o[0],o[1],!0,!1),c=t.dragData.possibleDragElements,l=t.hoverData.down,h=n(r);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,l&&l.unactivate(),3===t.hoverData.which){var f=new a(r,{type:"cxttapend",cyPosition:{x:o[0],y:o[1]}});if(l?l.trigger(f):i.trigger(f),!t.hoverData.cxtDragged){var d=new a(r,{type:"cxttap",cyPosition:{x:o[0],y:o[1]}});l?l.trigger(d):i.trigger(d)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(1===t.hoverData.which){if(null!=l||t.dragData.didDrag||t.hoverData.selecting||t.hoverData.dragged||n(r)||(i.$(function(){return this.selected()}).unselect(),c.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=c=[]),e(u,["mouseup","tapend","vmouseup"],r,{cyPosition:{x:o[0],y:o[1]}}),t.dragData.didDrag||t.hoverData.dragged||t.hoverData.selecting||e(l,["click","tap","vclick"],r,{cyPosition:{x:o[0],y:o[1]}}),u!=l||t.dragData.didDrag||t.hoverData.selecting||null!=u&&u._private.selectable&&(t.hoverData.dragging||("additive"===i.selectionType()||h?u.selected()?u.unselect():u.select():h||(i.$(":selected").unmerge(u).unselect(),u.select())),t.redrawHint("eles",!0)),t.hoverData.selecting){var p=i.collection(t.getAllInBox(s[0],s[1],s[2],s[3]));t.redrawHint("select",!0),p.length>0&&t.redrawHint("eles",!0),i.trigger("boxend");var g=function(t){return t.selectable()&&!t.selected()};"additive"===i.selectionType()?p.trigger("box").stdFilter(g).select().trigger("boxselect"):(h||i.$(":selected").unmerge(p).unselect(),p.trigger("box").stdFilter(g).select().trigger("boxselect")),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!s[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var v=l&&l.grabbed();x(c),v&&l.trigger("free")}}s[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}},!1);var L=function(e){if(!t.scrollingPage){var n=t.cy,r=t.projectIntoViewport(e.clientX,e.clientY),i=[r[0]*n.zoom()+n.pan().x,r[1]*n.zoom()+n.pan().y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||k())return void e.preventDefault();if(n.panningEnabled()&&n.userPanningEnabled()&&n.zoomingEnabled()&&n.userZoomingEnabled()){e.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var o;o=null!=e.deltaY?e.deltaY/-250:null!=e.wheelDeltaY?e.wheelDeltaY/1e3:e.wheelDelta/1e3,o*=t.wheelSensitivity;1===e.deltaMode&&(o*=33),n.zoom({level:n.zoom()*Math.pow(10,o),renderedPosition:{x:i[0],y:i[1]}})}}};t.registerBinding(t.container,"wheel",L,!0),t.registerBinding(window,"scroll",function(e){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"mouseout",function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.trigger(new a(e,{type:"mouseout",cyPosition:{x:n[0],y:n[1]}}))},!1),t.registerBinding(t.container,"mouseover",function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.trigger(new a(e,{type:"mouseover",cyPosition:{x:n[0],y:n[1]}}))},!1);var S,T,A,D,M,P,I,C,O,R,B,F,z,j,V=function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))},G=function(t,e,n,r){return(n-t)*(n-t)+(r-e)*(r-e)};t.registerBinding(t.container,"touchstart",j=function(n){if(N(n)){t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var r=t.cy,i=t.touchData.now,o=t.touchData.earlier;if(n.touches[0]){var s=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);i[0]=s[0],i[1]=s[1]}if(n.touches[1]){var s=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);i[2]=s[0],i[3]=s[1]}if(n.touches[2]){var s=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);i[4]=s[0],i[5]=s[1]}if(n.touches[1]){x(t.dragData.touchDragEles);var u=t.findContainerClientCoords();O=u[0],R=u[1],B=u[2],F=u[3],S=n.touches[0].clientX-O,T=n.touches[0].clientY-R,A=n.touches[1].clientX-O,D=n.touches[1].clientY-R,z=0<=S&&S<=B&&0<=A&&A<=B&&0<=T&&T<=F&&0<=D&&D<=F;var c=r.pan(),l=r.zoom();M=V(S,T,A,D),P=G(S,T,A,D),I=[(S+A)/2,(T+D)/2],C=[(I[0]-c.x)/l,(I[1]-c.y)/l];if(P<4e4&&!n.touches[2]){var h=t.findNearestElement(i[0],i[1],!0,!0),f=t.findNearestElement(i[2],i[3],!0,!0);return h&&h.isNode()?(h.activate().trigger(new a(n,{type:"cxttapstart",cyPosition:{x:i[0],y:i[1]}})),t.touchData.start=h):f&&f.isNode()?(f.activate().trigger(new a(n,{type:"cxttapstart",cyPosition:{x:i[0],y:i[1]}})),t.touchData.start=f):r.trigger(new a(n,{type:"cxttapstart",cyPosition:{x:i[0],y:i[1]}})),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,void t.redraw()}}if(n.touches[2]);else if(n.touches[1]);else if(n.touches[0]){var p=t.findNearestElements(i[0],i[1],!0,!0),g=p[0];if(null!=g&&(g.activate(),t.touchData.start=g,t.touchData.starts=p,t.nodeIsGrabbable(g))){var v=t.dragData.touchDragEles=[];if(t.redrawHint("eles",!0),t.redrawHint("drag",!0),g.selected()){var b=r.$(function(){return this.selected()&&t.nodeIsGrabbable(this)});y(b,{addToList:v})}else m(g,{addToList:v});d(g),g.trigger(new a(n,{type:"grab",cyPosition:{x:i[0],y:i[1]}}))}e(g,["touchstart","tapstart","vmousedown"],n,{cyPosition:{x:i[0],y:i[1]}}),null==g&&(t.data.bgActivePosistion={x:s[0],y:s[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved!==!1||t.pinching||t.touchData.selecting||(e(t.touchData.start,["taphold"],n,{cyPosition:{x:i[0],y:i[1]}}),t.touchData.start||r.$(":selected").unselect())},t.tapholdDuration)}if(n.touches.length>=1){for(var w=t.touchData.startPosition=[],_=0;_<i.length;_++)w[_]=o[_]=i[_];var E=n.touches[0];t.touchData.startGPosition=[E.clientX,E.clientY]}}},!1);var q;t.registerBinding(window,"touchmove",q=function(n){var i=t.touchData.capture;if(i||N(n)){var u=t.selection,c=t.cy,l=t.touchData.now,h=t.touchData.earlier,f=c.zoom();if(n.touches[0]){var d=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);l[0]=d[0],l[1]=d[1]}if(n.touches[1]){var d=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);l[2]=d[0],l[3]=d[1]}if(n.touches[2]){var d=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);l[4]=d[0],l[5]=d[1]}var p,g=t.touchData.startGPosition;if(i&&n.touches[0]&&g){for(var v=[],m=0;m<l.length;m++)v[m]=l[m]-h[m];var b=n.touches[0].clientX-g[0],w=b*b,_=n.touches[0].clientY-g[1];p=w+_*_>=t.touchTapThreshold2}if(i&&t.touchData.cxt){n.preventDefault();var E=n.touches[0].clientX-O,k=n.touches[0].clientY-R,L=n.touches[1].clientX-O,I=n.touches[1].clientY-R,B=G(E,k,L,I),F=B/P;if(F>=2.25||B>=22500){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var j=new a(n,{type:"cxttapend",cyPosition:{x:l[0],y:l[1]}});t.touchData.start?(t.touchData.start.unactivate().trigger(j),t.touchData.start=null):c.trigger(j)}}if(i&&t.touchData.cxt){var j=new a(n,{type:"cxtdrag",cyPosition:{x:l[0],y:l[1]}});t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.trigger(j):c.trigger(j),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var q=t.findNearestElement(l[0],l[1],!0,!0);t.touchData.cxtOver&&q===t.touchData.cxtOver||(t.touchData.cxtOver&&t.touchData.cxtOver.trigger(new a(n,{type:"cxtdragout",cyPosition:{x:l[0],y:l[1]}})),t.touchData.cxtOver=q,q&&q.trigger(new a(n,{type:"cxtdragover",cyPosition:{x:l[0],y:l[1]}})))}else if(i&&n.touches[2]&&c.boxSelectionEnabled())n.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||c.trigger("boxstart"),t.touchData.selecting=!0,t.redrawHint("select",!0),u&&0!==u.length&&void 0!==u[0]?(u[2]=(l[0]+l[2]+l[4])/3,u[3]=(l[1]+l[3]+l[5])/3):(u[0]=(l[0]+l[2]+l[4])/3,u[1]=(l[1]+l[3]+l[5])/3,u[2]=(l[0]+l[2]+l[4])/3+1,u[3]=(l[1]+l[3]+l[5])/3+1),u[4]=1,t.touchData.selecting=!0,t.redraw();else if(i&&n.touches[1]&&c.zoomingEnabled()&&c.panningEnabled()&&c.userZoomingEnabled()&&c.userPanningEnabled()){n.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Y=t.dragData.touchDragEles;if(Y){t.redrawHint("drag",!0);for(var X=0;X<Y.length;X++){var U=Y[X]._private;U.grabbed=!1,U.rscratch.inDragLayer=!1}}var E=n.touches[0].clientX-O,k=n.touches[0].clientY-R,L=n.touches[1].clientX-O,I=n.touches[1].clientY-R,H=V(E,k,L,I),W=H/M;if(z){var $=E-S,Z=k-T,Q=L-A,K=I-D,J=($+Q)/2,tt=(Z+K)/2,et=c.zoom(),nt=et*W,rt=c.pan(),it=C[0]*et+rt.x,ot=C[1]*et+rt.y,at={x:-nt/et*(it-rt.x-J)+it,y:-nt/et*(ot-rt.y-tt)+ot};if(t.touchData.start&&t.touchData.start.active()){var Y=t.dragData.touchDragEles;x(Y),t.redrawHint("drag",!0),t.redrawHint("eles",!0),t.touchData.start.unactivate().trigger("free")}c.viewport({zoom:nt,pan:at,cancelOnFailedZoom:!0}),M=H,S=E,T=k,A=L,D=I,t.pinching=!0}if(n.touches[0]){var d=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);l[0]=d[0],l[1]=d[1]}if(n.touches[1]){var d=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);l[2]=d[0],l[3]=d[1]}if(n.touches[2]){var d=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);l[4]=d[0],l[5]=d[1]}}else if(n.touches[0]){var q,st=t.touchData.start,ut=t.touchData.last;if(t.hoverData.draggingEles||t.swipePanning||(q=t.findNearestElement(l[0],l[1],!0,!0)),i&&null!=st&&n.preventDefault(),i&&null!=st&&t.nodeIsDraggable(st))if(p){var Y=t.dragData.touchDragEles,ct=!t.dragData.didDrag;ct&&y(c.collection(Y),{inDragLayer:!0});for(var lt=0;lt<Y.length;lt++){var ht=Y[lt];if(t.nodeIsDraggable(ht)&&ht.grabbed()){t.dragData.didDrag=!0;var ft=ht._private.position,dt=!ht.isParent();if(dt&&r.number(v[0])&&r.number(v[1])&&(ft.x+=v[0],ft.y+=v[1]),ct){t.redrawHint("eles",!0);var pt=t.touchData.dragDelta;dt&&pt&&r.number(pt[0])&&r.number(pt[1])&&(ft.x+=pt[0],ft.y+=pt[1])}}}var gt=c.collection(Y);gt.updateCompoundBounds(),gt.trigger("position drag"),t.hoverData.draggingEles=!0,t.redrawHint("drag",!0),t.touchData.startPosition[0]==h[0]&&t.touchData.startPosition[1]==h[1]&&t.redrawHint("eles",!0),t.redraw()}else{
var pt=t.touchData.dragDelta=t.touchData.dragDelta||[];0===pt.length?(pt.push(v[0]),pt.push(v[1])):(pt[0]+=v[0],pt[1]+=v[1])}if(e(st||q,["touchmove","tapdrag","vmousemove"],n,{cyPosition:{x:l[0],y:l[1]}}),st&&st.grabbed()||q==ut||(ut&&ut.trigger(new a(n,{type:"tapdragout",cyPosition:{x:l[0],y:l[1]}})),q&&q.trigger(new a(n,{type:"tapdragover",cyPosition:{x:l[0],y:l[1]}}))),t.touchData.last=q,i)for(var X=0;X<l.length;X++)l[X]&&t.touchData.startPosition[X]&&p&&(t.touchData.singleTouchMoved=!0);if(i&&(null==st||st.isEdge())&&c.panningEnabled()&&c.userPanningEnabled()){var vt=s(st,t.touchData.starts);vt&&(n.preventDefault(),t.swipePanning?c.panBy({x:v[0]*f,y:v[1]*f}):p&&(t.swipePanning=!0,c.panBy({x:b*f,y:_*f}),st&&(st.unactivate(),t.data.bgActivePosistion||(t.data.bgActivePosistion=o.array2point(t.touchData.startPosition)),t.redrawHint("select",!0),t.touchData.start=null)));var d=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);l[0]=d[0],l[1]=d[1]}}for(var m=0;m<l.length;m++)h[m]=l[m]}},!1);var Y;t.registerBinding(window,"touchcancel",Y=function(e){var n=t.touchData.start;t.touchData.capture=!1,n&&n.unactivate()});var X;if(t.registerBinding(window,"touchend",X=function(n){var r=t.touchData.start;if(t.touchData.capture){t.touchData.capture=!1,n.preventDefault();var i=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var o=t.cy,s=o.zoom(),u=t.touchData.now,c=t.touchData.earlier;if(n.touches[0]){var l=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);u[0]=l[0],u[1]=l[1]}if(n.touches[1]){var l=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);u[2]=l[0],u[3]=l[1]}if(n.touches[2]){var l=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);u[4]=l[0],u[5]=l[1]}r&&r.unactivate();var h;if(t.touchData.cxt){if(h=new a(n,{type:"cxttapend",cyPosition:{x:u[0],y:u[1]}}),r?r.trigger(h):o.trigger(h),!t.touchData.cxtDragged){var f=new a(n,{type:"cxttap",cyPosition:{x:u[0],y:u[1]}});r?r.trigger(f):o.trigger(f)}return t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,void t.redraw()}if(!n.touches[2]&&o.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var d=o.collection(t.getAllInBox(i[0],i[1],i[2],i[3]));i[0]=void 0,i[1]=void 0,i[2]=void 0,i[3]=void 0,i[4]=0,t.redrawHint("select",!0),o.trigger("boxend");var p=function(t){return t.selectable()&&!t.selected()};d.trigger("box").stdFilter(p).select().trigger("boxselect"),d.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(null!=r&&r.unactivate(),n.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(n.touches[1]);else if(n.touches[0]);else if(!n.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var g=t.dragData.touchDragEles;if(null!=r){var v=r._private.grabbed;x(g),t.redrawHint("drag",!0),t.redrawHint("eles",!0),v&&r.trigger("free"),e(r,["touchend","tapend","vmouseup","tapdragout"],n,{cyPosition:{x:u[0],y:u[1]}}),r.unactivate(),t.touchData.start=null}else{var y=t.findNearestElement(u[0],u[1],!0,!0);e(y,["touchend","tapend","vmouseup","tapdragout"],n,{cyPosition:{x:u[0],y:u[1]}})}var m=t.touchData.startPosition[0]-u[0],b=m*m,w=t.touchData.startPosition[1]-u[1],_=w*w,E=b+_,k=E*s*s;null!=r&&!t.dragData.didDrag&&r._private.selectable&&k<t.touchTapThreshold2&&!t.pinching&&("single"===o.selectionType()?(o.$(":selected").unmerge(r).unselect(),r.select()):r.selected()?r.unselect():r.select(),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved||e(r,["tap","vclick"],n,{cyPosition:{x:u[0],y:u[1]}}),t.touchData.singleTouchMoved=!0}for(var N=0;N<u.length;N++)c[N]=u[N];t.dragData.didDrag=!1,0===n.touches.length&&(t.touchData.dragDelta=[],t.touchData.startPosition=null,t.touchData.startGPosition=null),n.touches.length<2&&(t.pinching=!1,t.redrawHint("eles",!0),t.redraw())}},!1),"undefined"==typeof TouchEvent){var U=[],H=function(t){return{clientX:t.clientX,clientY:t.clientY,force:1,identifier:t.pointerId,pageX:t.pageX,pageY:t.pageY,radiusX:t.width/2,radiusY:t.height/2,screenX:t.screenX,screenY:t.screenY,target:t.target}},W=function(t){return{event:t,touch:H(t)}},$=function(t){U.push(W(t))},Z=function(t){for(var e=0;e<U.length;e++){if(U[e].event.pointerId===t.pointerId)return void U.splice(e,1)}},Q=function(t){var e=U.filter(function(e){return e.event.pointerId===t.pointerId})[0];e.event=t,e.touch=H(t)},K=function(t){t.touches=U.map(function(t){return t.touch})};t.registerBinding(t.container,"pointerdown",function(t){"mouse"!==t.pointerType&&(t.preventDefault(),$(t),K(t),j(t))}),t.registerBinding(t.container,"pointerup",function(t){"mouse"!==t.pointerType&&(Z(t),K(t),X(t))}),t.registerBinding(t.container,"pointercancel",function(t){"mouse"!==t.pointerType&&(Z(t),K(t),Y(t))}),t.registerBinding(t.container,"pointermove",function(t){"mouse"!==t.pointerType&&(t.preventDefault(),Q(t),K(t),q(t))})}},e.exports=s},{"../../../event":87,"../../../is":125,"../../../math":127,"../../../util":142}],104:[function(t,e,n){"use strict";var r=t("../../../math"),i={};i.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl("polygon",t,e,n,r,i,this.points)},intersectLine:function(t,e,n,i,o,a,s){return r.polygonIntersectLine(o,a,this.points,t,e,n/2,i/2,s)},checkPoint:function(t,e,n,i,o,a,s){return r.pointInsidePolygon(t,e,this.points,a,s,i,o,[0,-1],n)}}},i.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,i,o,a,s){return r.intersectLineEllipse(o,a,t,e,n/2+s,i/2+s)},checkPoint:function(t,e,n,r,i,o,a){return t-=o,e-=a,t/=r/2+n,e/=i/2+n,t*t+e*e<=1}}},i.generateRoundRectangle=function(){return this.nodeShapes.roundrectangle={renderer:this,name:"roundrectangle",points:r.generateUnitNgonPointsFitToSquare(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,i,o,a,s){return r.roundRectangleIntersectLine(o,a,t,e,n,i,s)},checkPoint:function(t,e,n,i,o,a,s){var u=r.getRoundRectangleRadius(i,o);if(r.pointInsidePolygon(t,e,this.points,a,s,i,o-2*u,[0,-1],n))return!0;if(r.pointInsidePolygon(t,e,this.points,a,s,i-2*u,o,[0,-1],n))return!0;var c=function(t,e,n,r,i,o,a){return t-=n,e-=r,t/=i/2+a,e/=o/2+a,t*t+e*e<=1};return!!c(t,e,a-i/2+u,s-o/2+u,2*u,2*u,n)||(!!c(t,e,a+i/2-u,s-o/2+u,2*u,2*u,n)||(!!c(t,e,a+i/2-u,s+o/2-u,2*u,2*u,n)||!!c(t,e,a-i/2+u,s+o/2-u,2*u,2*u,n)))}}},i.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",r.generateUnitNgonPointsFitToSquare(3,0)),this.generatePolygon("rectangle",r.generateUnitNgonPointsFitToSquare(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generatePolygon("diamond",[0,1,1,0,0,-1,-1,0]),this.generatePolygon("pentagon",r.generateUnitNgonPointsFitToSquare(5,0)),this.generatePolygon("hexagon",r.generateUnitNgonPointsFitToSquare(6,0)),this.generatePolygon("heptagon",r.generateUnitNgonPointsFitToSquare(7,0)),this.generatePolygon("octagon",r.generateUnitNgonPointsFitToSquare(8,0));var n=new Array(20),i=r.generateUnitNgonPoints(5,0),o=r.generateUnitNgonPoints(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var s=0;s<o.length/2;s++)o[2*s]*=a,o[2*s+1]*=a;for(var s=0;s<5;s++)n[4*s]=i[2*s],n[4*s+1]=i[2*s+1],n[4*s+2]=o[2*s],n[4*s+3]=o[2*s+1];n=r.fitPolygonToSquare(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),t.makePolygon=function(t){var n,r=t.join("$"),i="polygon-"+r;return(n=this[i])?n:e.generatePolygon(i,t)}},e.exports=i},{"../../../math":127}],105:[function(t,e,n){"use strict";var r=t("../../../util"),i={};i.timeToRender=function(){return this.redrawTotalTime/this.redrawCount},i.redraw=function(t){t=t||r.staticEmptyObject();var e=this;void 0===e.averageRedrawTime&&(e.averageRedrawTime=0),void 0===e.lastRedrawTime&&(e.lastRedrawTime=0),void 0===e.lastDrawTime&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t},i.beforeRender=function(t,e){if(!this.destroyed){e=e||0;var n=this.beforeRenderCallbacks;n.push({fn:t,priority:e}),n.sort(function(t,e){return e.priority-t.priority})}};var o=function(t,e,n){for(var r=t.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(e,n)};i.startRenderLoop=function(){var t=this;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var e=function(n){if(!t.destroyed){if(t.requestedFrame&&!t.skipFrame){o(t,!0,n);var i=r.performanceNow();t.render(t.renderOptions);var a=t.lastDrawTime=r.performanceNow();void 0===t.averageRedrawTime&&(t.averageRedrawTime=a-i),void 0===t.redrawCount&&(t.redrawCount=0),t.redrawCount++,void 0===t.redrawTotalTime&&(t.redrawTotalTime=0);var s=a-i;t.redrawTotalTime+=s,t.lastRedrawTime=s,t.averageRedrawTime=t.averageRedrawTime/2+s/2,t.requestedFrame=!1}else o(t,!1,n);t.skipFrame=!1,r.requestAnimationFrame(e)}};r.requestAnimationFrame(e)}},e.exports=i},{"../../../util":142}],106:[function(t,e,n){"use strict";var r,i={};i.arrowShapeImpl=function(t){return(r||(r={polygon:function(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.lineTo(r.x,r.y)}},"triangle-backcurve":function(t,e,n){for(var r,i=0;i<e.length;i++){var o=e[i];0===i&&(r=o),t.lineTo(o.x,o.y)}t.quadraticCurveTo(n.x,n.y,r.x,r.y)},"triangle-tee":function(t,e,n){t.beginPath&&t.beginPath();for(var r=e,i=0;i<r.length;i++){var o=r[i];t.lineTo(o.x,o.y)}t.closePath&&t.closePath(),t.beginPath&&t.beginPath();var a=n,s=n[0];t.moveTo(s.x,s.y);for(var i=0;i<a.length;i++){var o=a[i];t.lineTo(o.x,o.y)}t.closePath&&t.closePath()},circle:function(t,e,n,r){t.arc(e,n,r,0,2*Math.PI,!1)}}))[t]},e.exports=i},{}],107:[function(t,e,n){"use strict";var r={};r.drawEdge=function(t,e,n,r,i){var o=e._private.rscratch,a=this.usePaths();if(!o.badLine&&!isNaN(o.allpts[0])&&e.visible()){var s;n&&(s=n,t.translate(-s.x1,-s.y1));var u=e.pstyle("overlay-padding").pfValue,c=e.pstyle("overlay-opacity").value,l=e.pstyle("overlay-color").value;if(i){if(0===c)return;this.strokeStyle(t,l[0],l[1],l[2],c),t.lineCap="round","self"!=o.edgeType||a||(t.lineCap="butt")}else{var h=e.pstyle("line-color").value;this.strokeStyle(t,h[0],h[1],h[2],e.pstyle("opacity").value),t.lineCap="butt"}t.lineJoin="round";var f=e.pstyle("width").pfValue+(i?2*u:0),d=i?"solid":e.pstyle("line-style").value;t.lineWidth=f;var p=e.pstyle("shadow-blur").pfValue,g=e.pstyle("shadow-opacity").value,v=e.pstyle("shadow-color").value,y=e.pstyle("shadow-offset-x").pfValue,m=e.pstyle("shadow-offset-y").pfValue;this.shadowStyle(t,v,i?0:g,p,y,m),this.drawEdgePath(e,t,o.allpts,d,f),this.drawArrowheads(t,e,i),this.shadowStyle(t,"transparent",0),i||this.drawEdge(t,e,!1,r,!0),this.drawElementText(t,e,r),n&&t.translate(s.x1,s.y1)}},r.drawEdgePath=function(t,e,n,r,i){var o,a=t._private.rscratch,s=e,u=!1,c=this.usePaths();if(c){var l=n.join("$");a.pathCacheKey&&a.pathCacheKey===l?(o=e=a.pathCache,u=!0):(o=e=new Path2D,a.pathCacheKey=l,a.pathCache=o)}if(s.setLineDash)switch(r){case"dotted":s.setLineDash([1,1]);break;case"dashed":s.setLineDash([6,3]);break;case"solid":s.setLineDash([])}if(!u&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(n[0],n[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var h=2;h+3<n.length;h+=4)e.quadraticCurveTo(n[h],n[h+1],n[h+2],n[h+3]);break;case"straight":case"segments":case"haystack":for(var h=2;h+1<n.length;h+=2)e.lineTo(n[h],n[h+1])}e=s,c?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])},r.drawArrowheads=function(t,e,n){if(!n){var r=e._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(t,e,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle),this.drawArrowhead(t,e,"mid-target",r.midX,r.midY,r.midtgtArrowAngle),this.drawArrowhead(t,e,"mid-source",r.midX,r.midY,r.midsrcArrowAngle),i||this.drawArrowhead(t,e,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle)}},r.drawArrowhead=function(t,e,n,r,i,o){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(o)||null==o)){var a=this,s=e.pstyle(n+"-arrow-shape").value;if("none"!==s){var u=t.globalCompositeOperation,c="hollow"===e.pstyle(n+"-arrow-fill").value?"both":"filled",l=e.pstyle(n+"-arrow-fill").value,h=e.pstyle("opacity").value;"half-triangle-overshot"===s&&(l="hollow",c="hollow"),1===h&&"hollow"!==l||(t.globalCompositeOperation="destination-out",a.fillStyle(t,255,255,255,1),a.strokeStyle(t,255,255,255,1),a.drawArrowShape(e,n,t,c,e.pstyle("width").pfValue,e.pstyle(n+"-arrow-shape").value,r,i,o),t.globalCompositeOperation=u);var f=e.pstyle(n+"-arrow-color").value;a.fillStyle(t,f[0],f[1],f[2],h),a.strokeStyle(t,f[0],f[1],f[2],h),a.drawArrowShape(e,n,t,l,e.pstyle("width").pfValue,e.pstyle(n+"-arrow-shape").value,r,i,o)}}},r.drawArrowShape=function(t,e,n,r,i,o,a,s,u){var c,l=this,h=this.usePaths(),f=t._private.rscratch,d=!1,p=n,g={x:a,y:s},v=this.getArrowWidth(i),y=l.arrowShapes[o];if(h){var m=v+"$"+o+"$"+u+"$"+a+"$"+s;f.arrowPathCacheKey=f.arrowPathCacheKey||{},f.arrowPathCache=f.arrowPathCache||{};f.arrowPathCacheKey[e]===m?(c=n=f.arrowPathCache[e],d=!0):(c=n=new Path2D,f.arrowPathCacheKey[e]=m,f.arrowPathCache[e]=c)}n.beginPath&&n.beginPath(),d||y.draw(n,v,u,g),!y.leavePathOpen&&n.closePath&&n.closePath(),n=p,"filled"!==r&&"both"!==r||(h?n.fill(c):n.fill()),"hollow"!==r&&"both"!==r||(n.lineWidth=y.matchEdgeWidth?i:1,n.lineJoin="miter",h?n.stroke(c):n.stroke())},e.exports=r},{}],108:[function(t,e,n){"use strict";var r=t("../../../math"),i={};i.drawElement=function(t,e,n,r){var i=this;e.isNode()?i.drawNode(t,e,n,r):i.drawEdge(t,e,n,r)},i.drawCachedElement=function(t,e,n,i){var o=this,a=e.boundingBox();if(0!==a.w&&0!==a.h&&(!i||r.boundingBoxesIntersect(a,i))){var s=o.data.eleTxrCache.getElement(e,a,n);s?t.drawImage(s.texture.canvas,s.x,0,s.width,s.height,a.x1,a.y1,a.w,a.h):o.drawElement(t,e)}},i.drawElements=function(t,e){for(var n=this,r=0;r<e.length;r++){var i=e[r];n.drawElement(t,i)}},i.drawCachedElements=function(t,e,n,r){for(var i=this,o=0;o<e.length;o++){var a=e[o];i.drawCachedElement(t,a,n,r)}},i.drawCachedNodes=function(t,e,n,r){for(var i=this,o=0;o<e.length;o++){var a=e[o];a.isNode()&&i.drawCachedElement(t,a,n,r)}},i.drawLayeredElements=function(t,e,n,r){var i=this,o=i.data.lyrTxrCache.getLayers(e,n);if(o)for(var a=0;a<o.length;a++){var s=o[a],u=s.bb;0!==u.w&&0!==u.h&&t.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else i.drawCachedElements(t,e,n,r)},e.exports=i},{"../../../math":127}],109:[function(t,e,n){"use strict";var r={};r.safeDrawImage=function(t,e,n,r,i,o,a,s,u,c){var l=this;try{t.drawImage(e,n,r,i,o,a,s,u,c)}catch(t){l.redrawHint("eles",!0),l.redrawHint("drag",!0),l.drawingImage=!0,l.redraw()}},r.drawInscribedImage=function(t,e,n){var r=this,i=n._private.position.x,o=n._private.position.y,a=n.pstyle("background-fit").value,s=n.pstyle("background-position-x"),u=n.pstyle("background-position-y"),c=n.pstyle("background-repeat").value,l=n.width(),h=n.height(),f=n._private.rscratch,d=n.pstyle("background-clip").value,p="node"===d,g=n.pstyle("background-image-opacity").value,v=e.width||e.cachedW,y=e.height||e.cachedH;null!=v&&null!=y||(document.body.appendChild(e),v=e.cachedW=e.width||e.offsetWidth,y=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var m=v,x=y,b=n.pstyle("background-width");"auto"!==b.value&&(m="%"===b.units?b.value/100*l:b.pfValue);var w=n.pstyle("background-height");if("auto"!==w.value&&(x="%"===w.units?w.value/100*h:w.pfValue),0!==m&&0!==x){if("contain"===a){var _=Math.min(l/m,h/x);m*=_,x*=_}else if("cover"===a){var _=Math.max(l/m,h/x);m*=_,x*=_}var E=i-l/2;E+="%"===s.units?(l-m)*s.value/100:s.pfValue;var k=o-h/2;k+="%"===u.units?(h-x)*u.value/100:u.pfValue,f.pathCache&&(E-=i,k-=o,i=0,o=0);var N=t.globalAlpha;if(t.globalAlpha=g,"no-repeat"===c)p&&(t.save(),f.pathCache?t.clip(f.pathCache):(r.nodeShapes[r.getNodeShape(n)].draw(t,i,o,l,h),t.clip())),r.safeDrawImage(t,e,0,0,v,y,E,k,m,x),p&&t.restore();else{var L=t.createPattern(e,c);t.fillStyle=L,r.nodeShapes[r.getNodeShape(n)].draw(t,i,o,l,h),t.translate(E,k),t.fill(),t.translate(-E,-k)}t.globalAlpha=N}},e.exports=r},{}],110:[function(t,e,n){"use strict";function r(t,e,n,r,i,o){var o=o||5;t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+r-o,n),t.quadraticCurveTo(e+r,n,e+r,n+o),t.lineTo(e+r,n+i-o),t.quadraticCurveTo(e+r,n+i,e+r-o,n+i),t.lineTo(e+o,n+i),t.quadraticCurveTo(e,n+i,e,n+i-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath(),t.fill()}var i=t("../../../util"),o=t("../../../math"),a={};a.eleTextBiggerThanMin=function(t,e){if(!e){var n=t.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil(o.log2(n*r));e=Math.pow(2,i)}return!(t.pstyle("font-size").pfValue*e<t.pstyle("min-zoomed-font-size").pfValue)},a.drawElementText=function(t,e,n){var r=this;if(void 0===n){if(!r.eleTextBiggerThanMin(e))return}else if(!n)return;if(e.isNode()){var i=e.pstyle("label");if(!i||!i.value)return;var o=e.pstyle("text-halign").strValue;e.pstyle("text-valign").strValue;switch(o){case"left":t.textAlign="right";break;case"right":t.textAlign="left";break;default:t.textAlign="center"}t.textBaseline="bottom"}else{var i=e.pstyle("label"),a=e.pstyle("source-label"),s=e.pstyle("target-label");if(!(i&&i.value||a&&a.value||s&&s.value))return;t.textAlign="center",t.textBaseline="bottom"}r.drawText(t,e),e.isEdge()&&(r.drawText(t,e,"source"),r.drawText(t,e,"target"))},a.drawNodeText=a.drawEdgeText=a.drawElementText,a.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if(e=this.fontCaches[n],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e},a.setupTextStyle=function(t,e){var n=e.effectiveOpacity(),r=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",o=e.pstyle("font-family").strValue,a=e.pstyle("font-weight").strValue,s=e.pstyle("text-opacity").value*e.pstyle("opacity").value*n,u=e.pstyle("text-outline-opacity").value*s,c=e.pstyle("color").value,l=e.pstyle("text-outline-color").value,h=e.pstyle("text-shadow-blur").pfValue,f=e.pstyle("text-shadow-opacity").value,d=e.pstyle("text-shadow-color").value,p=e.pstyle("text-shadow-offset-x").pfValue,g=e.pstyle("text-shadow-offset-y").pfValue,v=e._private.fontKey,y=this.getFontCache(t);y.key!==v&&(t.font=r+" "+a+" "+i+" "+o,y.key=v),t.lineJoin="round",this.fillStyle(t,c[0],c[1],c[2],s),this.strokeStyle(t,l[0],l[1],l[2],u),this.shadowStyle(t,d,f,h,p,g)},a.drawText=function(t,e,n){var o=e._private,a=o.rscratch,s=e.effectiveOpacity();if(0!==s&&0!==e.pstyle("text-opacity").value){var u=i.getPrefixedProperty(a,"labelX",n),c=i.getPrefixedProperty(a,"labelY",n),l=this.getLabelText(e,n);if(null!=l&&""!==l&&!isNaN(u)&&!isNaN(c)){this.setupTextStyle(t,e);var h=n?n+"-":"",f=i.getPrefixedProperty(a,"labelWidth",n),d=i.getPrefixedProperty(a,"labelHeight",n),p=i.getPrefixedProperty(a,"labelAngle",n),g=e.pstyle(h+"text-margin-x").pfValue,v=e.pstyle(h+"text-margin-y").pfValue,y=e.isEdge(),m=(e.isNode(),e.pstyle("text-halign").value),x=e.pstyle("text-valign").value;y&&(m="center",x="center"),u+=g,c+=v;var b,w=e.pstyle("text-rotation");if(0!==(b="autorotate"===w.strValue?y?p:0:"none"===w.strValue?0:w.pfValue)){var _=u,E=c;t.translate(_,E),t.rotate(b),u=0,c=0}switch(x){case"top":break;case"center":c+=d/2;break;case"bottom":c+=d}var k=e.pstyle("text-background-opacity").value,N=e.pstyle("text-border-opacity").value,L=e.pstyle("text-border-width").pfValue;if(k>0||L>0&&N>0){var S=u;switch(m){case"left":S-=f;break;case"center":S-=f/2;break;case"right":}var T=c-d;if(k>0){var A=t.fillStyle,D=e.pstyle("text-background-color").value;t.fillStyle="rgba("+D[0]+","+D[1]+","+D[2]+","+k*s+")";"roundrectangle"==e.pstyle("text-background-shape").strValue?r(t,S,T,f,d,2):t.fillRect(S,T,f,d),t.fillStyle=A}if(L>0&&N>0){var M=t.strokeStyle,P=t.lineWidth,I=e.pstyle("text-border-color").value,C=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+I[0]+","+I[1]+","+I[2]+","+N*s+")",t.lineWidth=L,t.setLineDash)switch(C){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=L/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(t.strokeRect(S,T,f,d),"double"===C){var O=L/2;t.strokeRect(S+O,T+O,f-2*O,d-2*O)}t.setLineDash&&t.setLineDash([]),t.lineWidth=P,t.strokeStyle=M}}var R=2*e.pstyle("text-outline-width").pfValue;if(R>0&&(t.lineWidth=R),"wrap"===e.pstyle("text-wrap").value){var B=i.getPrefixedProperty(a,"labelWrapCachedLines",n),F=d/B.length;switch(x){case"top":c-=(B.length-1)*F;break;case"center":case"bottom":c-=(B.length-1)*F}for(var z=0;z<B.length;z++)R>0&&t.strokeText(B[z],u,c),t.fillText(B[z],u,c),c+=F}else R>0&&t.strokeText(l,u,c),t.fillText(l,u,c);0!==b&&(t.rotate(-b),t.translate(-_,-E)),this.shadowStyle(t,"transparent",0)}}},e.exports=a},{"../../../math":127,"../../../util":142}],111:[function(t,e,n){"use strict";var r=t("../../../is"),i={};i.drawNode=function(t,e,n,i){var o,a,s=this,u=e._private.rscratch,c=e._private,l=l||c.position;if(r.number(l.x)&&r.number(l.y)&&e.visible()){var h,f=e.effectiveOpacity(),d=this.usePaths(),p=!1,g=e.pstyle("padding").pfValue;o=e.width()+2*g,a=e.height()+2*g,t.lineWidth=e.pstyle("border-width").pfValue;var v;n&&(v=n,t.translate(-v.x1,-v.y1));var y,m=e.pstyle("background-image"),x=m.value[2]||m.value[1];if(void 0!==x){var b=e.pstyle("background-image-crossorigin");y=this.getCachedImage(x,b,function(){e.trigger("background"),s.redrawHint("eles",!0),s.redrawHint("drag",!0),s.drawingImage=!0,s.redraw()});var w=c.backgrounding;c.backgrounding=!y.complete,w!==c.backgrounding&&e.updateStyle(!1)}var _=e.pstyle("background-color").value,E=e.pstyle("border-color").value,k=e.pstyle("border-style").value;this.fillStyle(t,_[0],_[1],_[2],e.pstyle("background-opacity").value*f),this.strokeStyle(t,E[0],E[1],E[2],e.pstyle("border-opacity").value*f);var N=e.pstyle("shadow-blur").pfValue,L=e.pstyle("shadow-opacity").value,S=e.pstyle("shadow-color").value,T=e.pstyle("shadow-offset-x").pfValue,A=e.pstyle("shadow-offset-y").pfValue;if(this.shadowStyle(t,S,L,N,T,A),t.lineJoin="miter",t.setLineDash)switch(k){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}var D=e.pstyle("shape").strValue,M=e.pstyle("shape-polygon-points").pfValue;if(d){var P=D+"$"+o+"$"+a+("polygon"===D?"$"+M.join("$"):"");t.translate(l.x,l.y),u.pathCacheKey===P?(h=u.pathCache,p=!0):(h=new Path2D,u.pathCacheKey=P,u.pathCache=h)}if(!p){var I=l;d&&(I={x:0,y:0}),s.nodeShapes[this.getNodeShape(e)].draw(h||t,I.x,I.y,o,a)}d?t.fill(h):t.fill(),this.shadowStyle(t,"transparent",0),void 0!==x&&y.complete&&this.drawInscribedImage(t,y,e);var C=e.pstyle("background-blacken").value,O=e.pstyle("border-width").pfValue;if(this.hasPie(e)&&(this.drawPie(t,e,f),0===C&&0===O||d||s.nodeShapes[this.getNodeShape(e)].draw(t,l.x,l.y,o,a)),C>0?(this.fillStyle(t,0,0,0,C),d?t.fill(h):t.fill()):C<0&&(this.fillStyle(t,255,255,255,-C),d?t.fill(h):t.fill()),O>0&&(d?t.stroke(h):t.stroke(),"double"===k)){t.lineWidth=e.pstyle("border-width").pfValue/3;var R=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",d?t.stroke(h):t.stroke(),t.globalCompositeOperation=R}d&&t.translate(-l.x,-l.y),t.setLineDash&&t.setLineDash([]),s.drawElementText(t,e,i);var B=e.pstyle("overlay-padding").pfValue,F=e.pstyle("overlay-opacity").value,z=e.pstyle("overlay-color").value;F>0&&(this.fillStyle(t,z[0],z[1],z[2],F),s.nodeShapes.roundrectangle.draw(t,e._private.position.x,e._private.position.y,o+2*B,a+2*B),t.fill()),n&&t.translate(v.x1,v.y1)}},i.hasPie=function(t){return t=t[0],t._private.hasPie},i.drawPie=function(t,e,n,r){e=e[0];var i=e._private,o=e.cy().style(),a=e.pstyle("pie-size"),s=e.width(),u=e.height(),r=r||i.position,c=r.x,l=r.y,h=Math.min(s,u)/2,f=0;this.usePaths()&&(c=0,l=0),"%"===a.units?h=h*a.value/100:void 0!==a.pfValue&&(h=a.pfValue/2);for(var d=1;d<=o.pieBackgroundN;d++){var p=e.pstyle("pie-"+d+"-background-size").value,g=e.pstyle("pie-"+d+"-background-color").value,v=e.pstyle("pie-"+d+"-background-opacity").value*n,y=p/100;y+f>1&&(y=1-f);var m=1.5*Math.PI+2*Math.PI*f,x=2*Math.PI*y,b=m+x;0===p||f>=1||f+y>1||(t.beginPath(),t.moveTo(c,l),t.arc(c,l,h,m,b),t.closePath(),this.fillStyle(t,g[0],g[1],g[2],v),t.fill(),f+=y)}},e.exports=i},{"../../../is":125}],112:[function(t,e,n){"use strict";var r={},i=t("../../../util");r.getPixelRatio=function(){var t=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},r.paintCache=function(t){for(var e,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if(e=n[i],e.context===t){r=!1;break}return r&&(e={context:t},n.push(e)),e},r.fillStyle=function(t,e,n,r,i){t.fillStyle="rgba("+e+","+n+","+r+","+i+")"},r.strokeStyle=function(t,e,n,r,i){t.strokeStyle="rgba("+e+","+n+","+r+","+i+")"},r.shadowStyle=function(t,e,n,r,i,o){var a=this.cy.zoom();n>0?(t.shadowBlur=r*a,t.shadowColor="rgba("+e[0]+","+e[1]+","+e[2]+","+n+")",t.shadowOffsetX=i*a,t.shadowOffsetY=o*a):(t.shadowBlur=0,t.shadowColor="transparent",t.shadowOffsetX=0,t.shadowOffsetY=0)},r.matchCanvasSize=function(t){var e=this,n=e.data,r=e.findContainerClientCoords(),i=r[2],o=r[3],a=e.getPixelRatio(),s=e.motionBlurPxRatio;t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]&&t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG]||(a=s);var u,c=i*a,l=o*a;if(c!==e.canvasWidth||l!==e.canvasHeight){e.fontCaches=null;var h=n.canvasContainer;h.style.width=i+"px",h.style.height=o+"px";for(var f=0;f<e.CANVAS_LAYERS;f++)u=n.canvases[f],u.width===c&&u.height===l||(u.width=c,u.height=l,u.style.width=i+"px",u.style.height=o+"px");for(var f=0;f<e.BUFFER_COUNT;f++)u=n.bufferCanvases[f],u.width===c&&u.height===l||(u.width=c,u.height=l,u.style.width=i+"px",u.style.height=o+"px");e.textureMult=1,a<=1&&(u=n.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,u.width=c*e.textureMult,u.height=l*e.textureMult),e.canvasWidth=c,e.canvasHeight=l}},r.renderTo=function(t,e,n,r){this.render({forcedContext:t,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},r.render=function(t){function e(t,e,n,r,i){var o=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",c.fillStyle(t,255,255,255,c.motionBlurTransparency),t.fillRect(e,n,r,i),t.globalCompositeOperation=o}function n(t,n){var i,a,l,h;c.clearingMotionBlur||t!==f.bufferContexts[c.MOTIONBLUR_BUFFER_NODE]&&t!==f.bufferContexts[c.MOTIONBLUR_BUFFER_DRAG]?(i=N,a=E,l=c.canvasWidth,h=c.canvasHeight):(i={x:k.x*v,y:k.y*v},a=_*v,l=c.canvasWidth*v,h=c.canvasHeight*v),t.setTransform(1,0,0,1,0,0),"motionBlur"===n?e(t,0,0,l,h):r||void 0!==n&&!n||t.clearRect(0,0,l,h),o||(t.translate(i.x,i.y),t.scale(a,a)),u&&t.translate(u.x,u.y),s&&t.scale(s,s)}t=t||i.staticEmptyObject();var r=t.forcedContext,o=t.drawAllLayers,a=t.drawOnlyNodeLayer,s=t.forcedZoom,u=t.forcedPan,c=this,l=void 0===t.forcedPxRatio?this.getPixelRatio():t.forcedPxRatio,h=c.cy,f=c.data,d=f.canvasNeedsRedraw,p=c.textureOnViewport&&!r&&(c.pinching||c.hoverData.dragging||c.swipePanning||c.data.wheelZooming),g=void 0!==t.motionBlur?t.motionBlur:c.motionBlur,v=c.motionBlurPxRatio,y=h.hasCompoundNodes(),m=c.hoverData.draggingEles,x=!(!c.hoverData.selecting&&!c.touchData.selecting);g=g&&!r&&c.motionBlurEnabled&&!x;var b=g;r||(c.prevPxRatio!==l&&(c.invalidateContainerClientCoordsCache(),c.matchCanvasSize(c.container),c.redrawHint("eles",!0),c.redrawHint("drag",!0)),c.prevPxRatio=l),!r&&c.motionBlurTimeout&&clearTimeout(c.motionBlurTimeout),g&&(null==c.mbFrames&&(c.mbFrames=0),c.drawingImage||c.mbFrames++,c.mbFrames<3&&(b=!1),c.mbFrames>c.minMbLowQualFrames&&(c.motionBlurPxRatio=c.mbPxRBlurry)),c.clearingMotionBlur&&(c.motionBlurPxRatio=1),c.textureDrawLastFrame&&!p&&(d[c.NODE]=!0,d[c.SELECT_BOX]=!0);var w=h.style()._private.coreStyle,_=h.zoom(),E=void 0!==s?s:_,k=h.pan(),N={x:k.x,y:k.y},L={zoom:_,pan:{x:k.x,y:k.y}},S=c.prevViewport;void 0===S||L.zoom!==S.zoom||L.pan.x!==S.pan.x||L.pan.y!==S.pan.y||m&&!y||(c.motionBlurPxRatio=1),u&&(N=u),E*=l,N.x*=l,N.y*=l;var T=c.getCachedZSortedEles();if(p||(c.textureDrawLastFrame=!1),p){c.textureDrawLastFrame=!0;if(!c.textureCache){c.textureCache={},c.textureCache.bb=h.mutableElements().boundingBox(),c.textureCache.texture=c.data.bufferCanvases[c.TEXTURE_BUFFER];var A=c.data.bufferContexts[c.TEXTURE_BUFFER];A.setTransform(1,0,0,1,0,0),A.clearRect(0,0,c.canvasWidth*c.textureMult,c.canvasHeight*c.textureMult),c.render({forcedContext:A,drawOnlyNodeLayer:!0,forcedPxRatio:l*c.textureMult});var L=c.textureCache.viewport={zoom:h.zoom(),pan:h.pan(),width:c.canvasWidth,height:c.canvasHeight};L.mpan={x:(0-L.pan.x)/L.zoom,y:(0-L.pan.y)/L.zoom}}d[c.DRAG]=!1,d[c.NODE]=!1;var D=f.contexts[c.NODE],M=c.textureCache.texture,L=c.textureCache.viewport;c.textureCache.bb,D.setTransform(1,0,0,1,0,0),g?e(D,0,0,L.width,L.height):D.clearRect(0,0,L.width,L.height);var P=w["outside-texture-bg-color"].value,I=w["outside-texture-bg-opacity"].value;c.fillStyle(D,P[0],P[1],P[2],I),D.fillRect(0,0,L.width,L.height);var _=h.zoom();n(D,!1),D.clearRect(L.mpan.x,L.mpan.y,L.width/L.zoom/l,L.height/L.zoom/l),D.drawImage(M,L.mpan.x,L.mpan.y,L.width/L.zoom/l,L.height/L.zoom/l)}else c.textureOnViewport&&!r&&(c.textureCache=null);var C=h.extent(),O=c.pinching||c.hoverData.dragging||c.swipePanning||c.data.wheelZooming||c.hoverData.draggingEles,R=c.hideEdgesOnViewport&&O,B=[];if(B[c.NODE]=!d[c.NODE]&&g&&!c.clearedForMotionBlur[c.NODE]||c.clearingMotionBlur,B[c.NODE]&&(c.clearedForMotionBlur[c.NODE]=!0),B[c.DRAG]=!d[c.DRAG]&&g&&!c.clearedForMotionBlur[c.DRAG]||c.clearingMotionBlur,B[c.DRAG]&&(c.clearedForMotionBlur[c.DRAG]=!0),d[c.NODE]||o||a||B[c.NODE]){var F=g&&!B[c.NODE]&&1!==v,D=r||(F?c.data.bufferContexts[c.MOTIONBLUR_BUFFER_NODE]:f.contexts[c.NODE]);n(D,g&&!F?"motionBlur":void 0),R?c.drawCachedNodes(D,T.nondrag,l,C):c.drawLayeredElements(D,T.nondrag,l,C),o||g||(d[c.NODE]=!1)}if(!a&&(d[c.DRAG]||o||B[c.DRAG])){var F=g&&!B[c.DRAG]&&1!==v,D=r||(F?c.data.bufferContexts[c.MOTIONBLUR_BUFFER_DRAG]:f.contexts[c.DRAG]);n(D,g&&!F?"motionBlur":void 0),R?c.drawCachedNodes(D,T.drag,l,C):c.drawCachedElements(D,T.drag,l,C),o||g||(d[c.DRAG]=!1)}if(c.showFps||!a&&d[c.SELECT_BOX]&&!o){var D=r||f.contexts[c.SELECT_BOX];if(n(D),1==c.selection[4]&&(c.hoverData.selecting||c.touchData.selecting)){var _=c.cy.zoom(),z=w["selection-box-border-width"].value/_;D.lineWidth=z,D.fillStyle="rgba("+w["selection-box-color"].value[0]+","+w["selection-box-color"].value[1]+","+w["selection-box-color"].value[2]+","+w["selection-box-opacity"].value+")",D.fillRect(c.selection[0],c.selection[1],c.selection[2]-c.selection[0],c.selection[3]-c.selection[1]),z>0&&(D.strokeStyle="rgba("+w["selection-box-border-color"].value[0]+","+w["selection-box-border-color"].value[1]+","+w["selection-box-border-color"].value[2]+","+w["selection-box-opacity"].value+")",D.strokeRect(c.selection[0],c.selection[1],c.selection[2]-c.selection[0],c.selection[3]-c.selection[1]))}if(f.bgActivePosistion&&!c.hoverData.selecting){var _=c.cy.zoom(),j=f.bgActivePosistion;D.fillStyle="rgba("+w["active-bg-color"].value[0]+","+w["active-bg-color"].value[1]+","+w["active-bg-color"].value[2]+","+w["active-bg-opacity"].value+")",D.beginPath(),D.arc(j.x,j.y,w["active-bg-size"].pfValue/_,0,2*Math.PI),D.fill()}var V=c.lastRedrawTime;if(c.showFps&&V){V=Math.round(V);var G=Math.round(1e3/V);D.setTransform(1,0,0,1,0,0),D.fillStyle="rgba(255, 0, 0, 0.75)",D.strokeStyle="rgba(255, 0, 0, 0.75)",D.lineWidth=1,D.fillText("1 frame = "+V+" ms = "+G+" fps",0,20);D.strokeRect(0,30,250,20),D.fillRect(0,30,250*Math.min(G/60,1),20)}o||(d[c.SELECT_BOX]=!1)}if(g&&1!==v){var q=f.contexts[c.NODE],Y=c.data.bufferCanvases[c.MOTIONBLUR_BUFFER_NODE],X=f.contexts[c.DRAG],U=c.data.bufferCanvases[c.MOTIONBLUR_BUFFER_DRAG],H=function(t,n,r){t.setTransform(1,0,0,1,0,0),r||!b?t.clearRect(0,0,c.canvasWidth,c.canvasHeight):e(t,0,0,c.canvasWidth,c.canvasHeight);var i=v
;t.drawImage(n,0,0,c.canvasWidth*i,c.canvasHeight*i,0,0,c.canvasWidth,c.canvasHeight)};(d[c.NODE]||B[c.NODE])&&(H(q,Y,B[c.NODE]),d[c.NODE]=!1),(d[c.DRAG]||B[c.DRAG])&&(H(X,U,B[c.DRAG]),d[c.DRAG]=!1)}c.prevViewport=L,c.clearingMotionBlur&&(c.clearingMotionBlur=!1,c.motionBlurCleared=!0,c.motionBlur=!0),g&&(c.motionBlurTimeout=setTimeout(function(){c.motionBlurTimeout=null,c.clearedForMotionBlur[c.NODE]=!1,c.clearedForMotionBlur[c.DRAG]=!1,c.motionBlur=!1,c.clearingMotionBlur=!p,c.mbFrames=0,d[c.NODE]=!0,d[c.DRAG]=!0,c.redraw()},100)),c.drawingImage=!1,r||c.initrender||(c.initrender=!0,h.trigger("initrender")),r||h.trigger("render")},e.exports=r},{"../../../util":142}],113:[function(t,e,n){"use strict";var r=t("../../../math"),i={};i.drawPolygonPath=function(t,e,n,r,i,o){var a=r/2,s=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+a*o[0],n+s*o[1]);for(var u=1;u<o.length/2;u++)t.lineTo(e+a*o[2*u],n+s*o[2*u+1]);t.closePath()},i.drawRoundRectanglePath=function(t,e,n,i,o){var a=i/2,s=o/2,u=r.getRoundRectangleRadius(i,o);t.beginPath&&t.beginPath(),t.moveTo(e,n-s),t.arcTo(e+a,n-s,e+a,n,u),t.arcTo(e+a,n+s,e,n+s,u),t.arcTo(e-a,n+s,e-a,n,u),t.arcTo(e-a,n-s,e,n-s,u),t.lineTo(e,n-s),t.closePath()};for(var o=Math.sin(0),a=Math.cos(0),s={},u={},c=Math.PI/40,l=0*Math.PI;l<2*Math.PI;l+=c)s[l]=Math.sin(l),u[l]=Math.cos(l);i.drawEllipsePath=function(t,e,n,r,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,n,r/2,i/2,0,0,2*Math.PI);else for(var l,h,f=r/2,d=i/2,p=0*Math.PI;p<2*Math.PI;p+=c)l=e-f*s[p]*o+f*u[p]*a,h=n+d*u[p]*o+d*s[p]*a,0===p?t.moveTo(l,h):t.lineTo(l,h);t.closePath()},e.exports=i},{"../../../math":127}],114:[function(t,e,n){"use strict";var r=t("../../../math"),i=t("../../../util"),o=t("../../../heap"),a=t("./texture-cache-defs"),s={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},u=function(t){var e=this;e.renderer=t,e.onDequeues=[],e.setupDequeueing()},c=u.prototype;c.reasons=s,c.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]},c.getRetiredTextureQueue=function(t){var e=this,n=e.eleImgCaches.retired=e.eleImgCaches.retired||{};return n[t]=n[t]||[]},c.getElementQueue=function(){var t=this;return t.eleCacheQueue=t.eleCacheQueue||new o(function(t,e){return e.reqs-t.reqs})},c.getElementIdToQueue=function(){var t=this;return t.eleIdToCacheQueue=t.eleIdToCacheQueue||{}},c.getElement=function(t,e,n,i,o){var a=this,u=this.renderer,c=t._private.rscratch,l=u.cy.zoom();if(0===e.w||0===e.h)return null;if(null==i&&(i=Math.ceil(r.log2(l*n))),i<-4)i=-4;else if(l>=3.99||i>2)return null;var h=Math.pow(2,i),f=e.h*h,d=e.w*h,p=c.imgCaches=c.imgCaches||{},g=p[i];if(g)return g;var v;if(v=f<=25?25:f<=50?50:50*Math.ceil(f/50),f>1024||d>1024||t.isEdge()||t.isParent())return null;var y=a.getTextureQueue(v),m=y[y.length-2],x=function(){return a.recycleTexture(v,d)||a.addTexture(v,d)};m||(m=y[y.length-1]),m||(m=x()),m.width-m.usedWidth<d&&(m=x());for(var b,w=u.eleTextBiggerThanMin(t,h),_=function(t){return t&&t.scaledLabelShown===w},E=o&&o===s.dequeue,k=o&&o===s.highQuality,N=o&&o===s.downscale,L=i+1;L<=2;L++){var S=p[L];if(S){b=S;break}}var T=b&&b.level===i+1?b:null,A=function(){m.context.drawImage(T.texture.canvas,T.x,0,T.width,T.height,m.usedWidth,0,d,f)};if(_(T))A();else if(_(b)){if(!k)return a.queueElement(t,e,b.level-1),b;for(var L=b.level;L>i;L--)T=a.getElement(t,e,n,L,s.downscale);A()}else{var D;if(!E&&!k&&!N)for(var L=i-1;L>=-4;L--){var S=p[L];if(S){D=S;break}}if(_(D))return a.queueElement(t,e,i),D;m.context.translate(m.usedWidth,0),m.context.scale(h,h),u.drawElement(m.context,t,e,w),m.context.scale(1/h,1/h),m.context.translate(-m.usedWidth,0)}return g=p[i]={ele:t,x:m.usedWidth,texture:m,level:i,scale:h,width:d,height:f,scaledLabelShown:w},m.usedWidth+=Math.ceil(d+8),m.eleCaches.push(g),a.checkTextureFullness(m),g},c.invalidateElement=function(t){var e=this,n=t._private.rscratch.imgCaches;if(n)for(var r=-4;r<=2;r++){var o=n[r];if(o){var a=o.texture;a.invalidatedWidth+=o.width,n[r]=null,i.removeFromArray(a.eleCaches,o),e.checkTextureUtility(a)}}},c.checkTextureUtility=function(t){t.invalidatedWidth>=.5*t.width&&this.retireTexture(t)},c.checkTextureFullness=function(t){var e=this,n=e.getTextureQueue(t.height);t.usedWidth/t.width>.8&&t.fullnessChecks>=10?i.removeFromArray(n,t):t.fullnessChecks++},c.retireTexture=function(t){var e=this,n=t.height,r=e.getTextureQueue(n);i.removeFromArray(r,t),t.retired=!0;for(var o=t.eleCaches,a=0;a<o.length;a++){var s=o[a],u=s.ele,c=s.level,l=u._private.rscratch.imgCaches;l&&(l[c]=null)}i.clearArray(o),e.getRetiredTextureQueue(n).push(t)},c.addTexture=function(t,e){var n=this,r=n.getTextureQueue(t),i={};return r.push(i),i.eleCaches=[],i.height=t,i.width=Math.max(1024,e),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=document.createElement("canvas"),i.canvas.width=i.width,i.canvas.height=i.height,i.context=i.canvas.getContext("2d"),i},c.recycleTexture=function(t,e){for(var n=this,r=n.getTextureQueue(t),o=n.getRetiredTextureQueue(t),a=0;a<o.length;a++){var s=o[a];if(s.width>=e)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,i.clearArray(s.eleCaches),s.context.clearRect(0,0,s.width,s.height),i.removeFromArray(o,s),r.push(s),s}},c.queueElement=function(t,e,n){var i=this,o=i.getElementQueue(),a=i.getElementIdToQueue(),s=t.id(),u=a[s];if(u)u.level=Math.max(u.level,n),u.reqs++,o.updateItem(u);else{var c={ele:t,bb:e,position:r.copyPosition(t.position()),level:n,reqs:1};t.isEdge()&&(c.positions={source:r.copyPosition(t.source().position()),target:r.copyPosition(t.target().position())}),o.push(c),a[s]=c}},c.dequeue=function(t,e){for(var n=this,i=n.getElementQueue(),o=n.getElementIdToQueue(),a=[],u=0;u<1&&i.size()>0;u++){var c=i.pop();o[c.ele.id()]=null,a.push(c);var l,h=c.ele;l=(!h.isEdge()||r.arePositionsSame(h.source().position(),c.positions.source)&&r.arePositionsSame(h.target().position(),c.positions.target))&&r.arePositionsSame(h.position(),c.position)?c.bb:h.boundingBox(),n.getElement(c.ele,l,t,c.level,s.dequeue)}return a},c.onDequeue=function(t){this.onDequeues.push(t)},c.offDequeue=function(t){i.removeFromArray(this.onDequeues,t)},c.setupDequeueing=a.setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e,n){return t.dequeue(e,n)},onDeqd:function(t,e){for(var n=0;n<t.onDequeues.length;n++){(0,t.onDequeues[n])(e)}},shouldRedraw:function(t,e,n,i){for(var o=0;o<e.length;o++){var a=e[o].bb;if(r.boundingBoxesIntersect(a,i))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}}),e.exports=u},{"../../../heap":123,"../../../math":127,"../../../util":142,"./texture-cache-defs":119}],115:[function(t,e,n){"use strict";var r=t("../../../is"),i={};i.createBuffer=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,[n,n.getContext("2d")]},i.bufferCanvasImage=function(t){var e=this.cy,n=e.mutableElements(),i=n.boundingBox(),o=this.findContainerClientCoords(),a=t.full?Math.ceil(i.w):o[2],s=t.full?Math.ceil(i.h):o[3],u=r.number(t.maxWidth)||r.number(t.maxHeight),c=this.getPixelRatio(),l=1;if(void 0!==t.scale)a*=t.scale,s*=t.scale,l=t.scale;else if(u){var h=1/0,f=1/0;r.number(t.maxWidth)&&(h=l*t.maxWidth/a),r.number(t.maxHeight)&&(f=l*t.maxHeight/s),l=Math.min(h,f),a*=l,s*=l}u||(a*=c,s*=c,l*=c);var d=document.createElement("canvas");d.width=a,d.height=s,d.style.width=a+"px",d.style.height=s+"px";var p=d.getContext("2d");if(a>0&&s>0){p.clearRect(0,0,a,s),t.bg&&(p.fillStyle=t.bg,p.rect(0,0,a,s),p.fill()),p.globalCompositeOperation="source-over";var g=this.getCachedZSortedEles();if(t.full)p.translate(-i.x1*l,-i.y1*l),p.scale(l,l),this.drawElements(p,g);else{var v=e.pan(),y={x:v.x*l,y:v.y*l};l*=e.zoom(),p.translate(y.x,y.y),p.scale(l,l),this.drawElements(p,g)}}return d},i.png=function(t){return this.bufferCanvasImage(t).toDataURL("image/png")},i.jpg=function(t){return this.bufferCanvasImage(t).toDataURL("image/jpeg")},e.exports=i},{"../../../is":125}],116:[function(t,e,n){"use strict";function r(t){var e=this;e.data={canvases:new Array(c.CANVAS_LAYERS),contexts:new Array(c.CANVAS_LAYERS),canvasNeedsRedraw:new Array(c.CANVAS_LAYERS),bufferCanvases:new Array(c.BUFFER_COUNT),bufferContexts:new Array(c.CANVAS_LAYERS)},e.data.canvasContainer=document.createElement("div");var n=e.data.canvasContainer.style;e.data.canvasContainer.setAttribute("style","-webkit-tap-highlight-color: rgba(0,0,0,0);"),n.position="relative",n.zIndex="0",n.overflow="hidden";var r=t.cy.container();r.appendChild(e.data.canvasContainer),r.setAttribute("style",(r.getAttribute("style")||"")+"-webkit-tap-highlight-color: rgba(0,0,0,0);");for(var i=0;i<c.CANVAS_LAYERS;i++){var u=e.data.canvases[i]=document.createElement("canvas");e.data.contexts[i]=u.getContext("2d"),u.setAttribute("style","-webkit-user-select: none; -moz-user-select: -moz-none; user-select: none; -webkit-tap-highlight-color: rgba(0,0,0,0); outline-style: none;"+(o.ms()?" -ms-touch-action: none; touch-action: none; ":"")),u.style.position="absolute",u.setAttribute("data-id","layer"+i),u.style.zIndex=String(c.CANVAS_LAYERS-i),e.data.canvasContainer.appendChild(u),e.data.canvasNeedsRedraw[i]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[c.NODE].setAttribute("data-id","layer"+c.NODE+"-node"),e.data.canvases[c.SELECT_BOX].setAttribute("data-id","layer"+c.SELECT_BOX+"-selectbox"),e.data.canvases[c.DRAG].setAttribute("data-id","layer"+c.DRAG+"-drag");for(var i=0;i<c.BUFFER_COUNT;i++)e.data.bufferCanvases[i]=document.createElement("canvas"),e.data.bufferContexts[i]=e.data.bufferCanvases[i].getContext("2d"),e.data.bufferCanvases[i].style.position="absolute",e.data.bufferCanvases[i].setAttribute("data-id","buffer"+i),e.data.bufferCanvases[i].style.zIndex=String(-i-1),e.data.bufferCanvases[i].style.visibility="hidden";e.pathsEnabled=!0,e.data.eleTxrCache=new a(e),e.data.lyrTxrCache=new s(e,e.data.eleTxrCache),e.onUpdateEleCalcs(function(t,n){for(var r=0;r<n.length;r++){var i=n[r],o=i._private.rstyle,a=o.dirtyEvents;i.isNode()&&a&&1===a.length&&a.position||e.data.eleTxrCache.invalidateElement(i)}n.length>0&&e.data.lyrTxrCache.invalidateElements(n)})}var i=t("../../../util"),o=t("../../../is"),a=t("./ele-texture-cache"),s=t("./layered-texture-cache"),u=r,c=r.prototype;c.CANVAS_LAYERS=3,c.SELECT_BOX=0,c.DRAG=1,c.NODE=2,c.BUFFER_COUNT=3,c.TEXTURE_BUFFER=0,c.MOTIONBLUR_BUFFER_NODE=1,c.MOTIONBLUR_BUFFER_DRAG=2,c.redrawHint=function(t,e){var n=this;switch(t){case"eles":n.data.canvasNeedsRedraw[c.NODE]=e;break;case"drag":n.data.canvasNeedsRedraw[c.DRAG]=e;break;case"select":n.data.canvasNeedsRedraw[c.SELECT_BOX]=e}};var l="undefined"!=typeof Path2D;c.path2dEnabled=function(t){if(void 0===t)return this.pathsEnabled;this.pathsEnabled=!!t},c.usePaths=function(){return l&&this.pathsEnabled},[t("./arrow-shapes"),t("./drawing-elements"),t("./drawing-edges"),t("./drawing-images"),t("./drawing-label-text"),t("./drawing-nodes"),t("./drawing-redraw"),t("./drawing-shapes"),t("./export-image"),t("./node-shapes")].forEach(function(t){i.extend(c,t)}),e.exports=u},{"../../../is":125,"../../../util":142,"./arrow-shapes":106,"./drawing-edges":107,"./drawing-elements":108,"./drawing-images":109,"./drawing-label-text":110,"./drawing-nodes":111,"./drawing-redraw":112,"./drawing-shapes":113,"./ele-texture-cache":114,"./export-image":115,"./layered-texture-cache":117,"./node-shapes":118}],117:[function(t,e,n){"use strict";function r(t,e){null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)}var i=t("../../../util"),o=t("../../../math"),a=t("../../../heap"),s=t("../../../is"),u=t("./texture-cache-defs"),c=function(t,e){var n=this,r=n.renderer=t;n.layersByLevel={},n.firstGet=!0,n.lastInvalidationTime=i.performanceNow()-500,n.skipping=!1,r.beforeRender(function(t,e){e-n.lastInvalidationTime<=250?n.skipping=!0:n.skipping=!1});var o=function(t,e){return e.reqs-t.reqs};n.layersQueue=new a(o),n.eleTxrCache=e,n.setupEleCacheInvalidation(),n.setupDequeueing()},l=c.prototype,h=0,f=Math.pow(2,53)-1;l.makeLayer=function(t,e){var n=Math.pow(2,e),r=Math.ceil(t.w*n),i=Math.ceil(t.h*n),o=document.createElement("canvas");o.width=r,o.height=i;var a={id:h=++h%f,bb:t,level:e,width:r,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,u=-a.bb.x1,c=-a.bb.y1;return s.scale(n,n),s.translate(u,c),a},l.getLayers=function(t,e,n){var r=this,a=r.renderer,s=a.cy,u=s.zoom(),c=r.firstGet;if(r.firstGet=!1,null==n)if((n=Math.ceil(o.log2(u*e)))<-4)n=-4;else if(u>=3.99||n>2)return null;r.validateLayersElesOrdering(n,t);var l,h,f=r.layersByLevel,d=Math.pow(2,n),p=f[n]=f[n]||[],g=r.levelIsComplete(n,t);if(g)return p;!function(){var e=function(e){if(r.validateLayersElesOrdering(e,t),r.levelIsComplete(e,t))return h=f[e],!0},o=function(t){if(!h)for(var r=n+t;-4<=r&&r<=2&&!e(r);r+=t);};o(1),o(-1);for(var a=p.length-1;a>=0;a--){var s=p[a];s.invalid&&i.removeFromArray(p,s)}}();var v=function(){if(!l){l=o.makeBoundingBox();for(var e=0;e<t.length;e++)o.updateBoundingBox(l,t[e].boundingBox())}return l};if(r.skipping&&!c)return null;for(var y=null,m=t.length/1,x=!c,b=0;b<t.length;b++){var w=t[b],_=w._private.rscratch,E=_.imgLayerCaches=_.imgLayerCaches||{},k=E[n];if(k)y=k;else{if((!y||y.eles.length>=m||!o.boundingBoxInBoundingBox(y.bb,w.boundingBox()))&&!(y=function(t){t=t||{};var e=t.after;if(v(),l.w*d*(l.h*d)>16e6)return null;var i=r.makeLayer(l,n);if(null!=e){var o=p.indexOf(e)+1;p.splice(o,0,i)}else(void 0===t.insert||t.insert)&&p.unshift(i);return i}({insert:!0,after:y})))return null;h||x?r.queueLayer(y,w):r.drawEleInLayer(y,w,n,e),y.eles.push(w),E[n]=y}}return h?h:x?null:p},l.getEleLevelForLayerLevel=function(t,e){return t},l.drawEleInLayer=function(t,e,n,i){var o=this,a=this.renderer,s=t.context,u=e.boundingBox();if(0!==u.w&&0!==u.h){var c=o.eleTxrCache,l=c.reasons.highQuality;n=o.getEleLevelForLayerLevel(n,i);var h=c.getElement(e,u,null,n,l);h?(r(s,!1),s.drawImage(h.texture.canvas,h.x,0,h.width,h.height,u.x1,u.y1,u.w,u.h),r(s,!0)):a.drawElement(s,e)}},l.levelIsComplete=function(t,e){var n=this,r=n.layersByLevel[t];if(!r||0===r.length)return!1;for(var i=0,o=0;o<r.length;o++){var a=r[o];if(a.reqs>0)return!1;if(a.invalid)return!1;i+=a.eles.length}return i===e.length},l.validateLayersElesOrdering=function(t,e){var n=this.layersByLevel[t];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],o=-1,a=0;a<e.length;a++)if(i.eles[0]===e[a]){o=a;break}if(o<0)this.invalidateLayer(i);else for(var s=o,a=0;a<i.eles.length;a++)if(i.eles[a]!==e[s+a]){this.invalidateLayer(i);break}}},l.updateElementsInLayers=function(t,e){for(var n=this,r=s.element(t[0]),i=0;i<t.length;i++)for(var o=r?null:t[i],a=r?t[i]:t[i].ele,u=a._private.rscratch,c=u.imgLayerCaches=u.imgLayerCaches||{},l=-4;l<=2;l++){var h=c[l];h&&(o&&n.getEleLevelForLayerLevel(h.level)!==o.level||e(h,a,o))}},l.haveLayers=function(){for(var t=this,e=!1,n=-4;n<=2;n++){var r=t.layersByLevel[n];if(r&&r.length>0){e=!0;break}}return e},l.invalidateElements=function(t){var e=this;e.lastInvalidationTime=i.performanceNow(),0!==t.length&&e.haveLayers()&&e.updateElementsInLayers(t,function(t,n,r){e.invalidateLayer(t)})},l.invalidateLayer=function(t){if(this.lastInvalidationTime=i.performanceNow(),!t.invalid){var e=t.level,n=t.eles,r=this.layersByLevel[e];i.removeFromArray(r,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var o=0;o<n.length;o++){var a=n[o]._private.rscratch.imgLayerCaches;a&&(a[e]=null)}}},l.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(t,n,r){var i=t.replacement;if(i||(i=t.replacement=e.makeLayer(t.bb,t.level),i.replaces=t,i.eles=t.eles),!i.reqs)for(var o=0;o<i.eles.length;o++)e.queueLayer(i,i.eles[o])})},l.setupEleCacheInvalidation=function(){var t=this,e=[],n=i.debounce(function(){t.refineElementTextures(e),e=[]},50);t.eleTxrCache.onDequeue(function(t){for(var r=0;r<t.length;r++)e.push(t[r]);n()})},l.queueLayer=function(t,e){var n=this,r=n.layersQueue,i=t.elesQueue,o=i.hasId=i.hasId||{};if(!t.replacement){if(e){if(o[e.id()])return;i.push(e),o[e.id()]=!0}t.reqs?(t.reqs++,r.updateItem(t)):(t.reqs=1,r.push(t))}},l.dequeue=function(t){for(var e=this,n=e.layersQueue,r=[],i=0;i<1&&0!==n.size();){var o=n.peek();if(o.replacement)n.pop();else if(o.replaces&&o!==o.replaces.replacement)n.pop();else if(o.invalid)n.pop();else{var a=o.elesQueue.shift();a&&(e.drawEleInLayer(o,a,o.level,t),i++),0===r.length&&r.push(!0),0===o.elesQueue.length&&(n.pop(),o.reqs=0,o.replaces&&e.applyLayerReplacement(o),e.requestRedraw())}}return r},l.applyLayerReplacement=function(t){var e=this,n=e.layersByLevel[t.level],r=t.replaces,i=n.indexOf(r);if(!(i<0||r.invalid)){n[i]=t;for(var o=0;o<t.eles.length;o++){var a=t.eles[o]._private,s=a.imgLayerCaches=a.imgLayerCaches||{};s&&(s[t.level]=t)}e.requestRedraw()}},l.requestRedraw=i.debounce(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100),l.setupDequeueing=u.setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e){return t.dequeue(e)},onDeqd:i.noop,shouldRedraw:i.trueify,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}}),e.exports=c},{"../../../heap":123,"../../../is":125,"../../../math":127,"../../../util":142,"./texture-cache-defs":119}],118:[function(t,e,n){"use strict";var r={};r.nodeShapeImpl=function(t,e,n,r,i,o,a){switch(t){case"ellipse":return this.drawEllipsePath(e,n,r,i,o);case"polygon":return this.drawPolygonPath(e,n,r,i,o,a);case"roundrectangle":return this.drawRoundRectanglePath(e,n,r,i,o)}},e.exports=r},{}],119:[function(t,e,n){"use strict";var r=t("../../../util");e.exports={setupDequeueing:function(t){return function(){var e=this,n=this.renderer;if(!e.dequeueingSetup){e.dequeueingSetup=!0;var i=r.debounce(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},t.deqRedrawThreshold),o=function(o,a){for(var s=r.performanceNow(),u=n.averageRedrawTime,c=n.lastRedrawTime,l=[],h=n.cy.extent(),f=n.getPixelRatio();;){var d=r.performanceNow(),p=d-s,g=d-a;if(c<1e3/60){var v=1e3/60-(o?u:0);if(g>=t.deqFastCost*v)break}else if(o){if(p>=t.deqCost*c||p>=t.deqAvgCost*u)break}else if(g>=t.deqNoDrawCost*(1e3/60))break;var y=t.deq(e,f,h);if(!(y.length>0))break;for(var m=0;m<y.length;m++)l.push(y[m])}l.length>0&&(t.onDeqd(e,l),!o&&t.shouldRedraw(e,l,f,h)&&i())},a=t.priority||r.noop;n.beforeRender(o,a(e))}}}}},{"../../../util":142}],120:[function(t,e,n){"use strict";e.exports=[{name:"null",impl:t("./null")},{name:"base",impl:t("./base")},{name:"canvas",impl:t("./canvas")}]},{"./base":102,"./canvas":116,"./null":121}],121:[function(t,e,n){"use strict";function r(t){this.options=t,this.notifications=0}var i=function(){};r.prototype={recalculateRenderedStyle:i,notify:function(){this.notifications++},init:i},e.exports=r},{}],122:[function(t,e,n){"use strict";var r=t("./is"),i=t("./util"),o=t("./thread"),a=t("./promise"),s=t("./define"),u=function(e){if(!(this instanceof u))return new u(e);this._private={pass:[]};if(r.number(e),"undefined"!=typeof navigator&&null!=navigator.hardwareConcurrency)e=navigator.hardwareConcurrency;else try{e=t("os").cpus().length}catch(t){e=4}for(var n=0;n<e;n++)this[n]=new o;this.length=e},c=u.prototype;i.extend(c,{instanceString:function(){return"fabric"},require:function(t,e){for(var n=0;n<this.length;n++){this[n].require(t,e)}return this},random:function(){return this[Math.round((this.length-1)*Math.random())]},run:function(t){var e=this._private.pass.shift();return this.random().pass(e).run(t)},message:function(t){return this.random().message(t)},broadcast:function(t){for(var e=0;e<this.length;e++){this[e].message(t)}return this},stop:function(){for(var t=0;t<this.length;t++){this[t].stop()}return this},pass:function(t){var e=this._private.pass;if(!r.array(t))throw"Only arrays may be used with fabric.pass()";return e.push(t),this},spreadSize:function(){var t=Math.ceil(this._private.pass[0].length/this.length);return t=Math.max(1,t)},spread:function(t){for(var e=this,n=e._private,r=e.spreadSize(),i=n.pass.shift().concat([]),o=[],s=0;s<this.length;s++){var u=this[s],c=i.splice(0,r),l=u.pass(c).run(t);o.push(l);if(0===i.length)break}return a.all(o).then(function(t){for(var e=[],n=0,r=0;r<t.length;r++)for(var i=t[r],o=0;o<i.length;o++){var a=i[o];e[n++]=a}return e})},map:function(t){var e=this;return e.require(t,"_$_$_fabmap"),e.spread(function(t){var e=[],n=resolve;resolve=function(t){e.push(t)};for(var r=0;r<t.length;r++){var i=e.length,o=_$_$_fabmap(t[r]);i===e.length&&e.push(o)}return resolve=n,e})},filter:function(t){var e=this._private,n=e.pass[0];return this.map(t).then(function(t){for(var e=[],r=0;r<n.length;r++){var i=n[r];t[r]&&e.push(i)}return e})},sort:function(t){var e=this,n=this._private.pass[0].length,r=this.spreadSize();return t=t||function(t,e){return t<e?-1:t>e?1:0},e.require(t,"_$_$_cmp"),e.spread(function(t){var e=t.sort(_$_$_cmp);resolve(e)}).then(function(e){for(var i=r;i<n;i*=2)for(var o=0;o<n;o+=2*i)!function(r,i,o){i=Math.min(i,n),o=Math.min(o,n);for(var a=r,s=i,u=[],c=a;c<o;c++){var l=e[r],h=e[i];r<s&&(i>=o||t(l,h)<=0)?(u.push(l),r++):(u.push(h),i++)}for(var c=0;c<u.length;c++){e[a+c]=u[c]}}(o,o+i,o+2*i);return e})}});var l=function(t){return t=t||{},function(e,n){var r=this._private.pass.shift();return this.random().pass(r)[t.threadFn](e,n)}};i.extend(c,{randomMap:l({threadFn:"map"}),reduce:l({threadFn:"reduce"}),reduceRight:l({threadFn:"reduceRight"})});var h=c;h.promise=h.run,h.terminate=h.halt=h.stop,h.include=h.require,i.extend(c,{on:s.on(),one:s.on({unbindSelfOnTrigger:!0}),off:s.off(),trigger:s.trigger()}),s.eventAliasesOn(c),e.exports=u},{"./define":86,"./is":125,"./promise":128,"./thread":140,"./util":142,os:201}],123:[function(t,e,n){"use strict";var r,i,o,a,s,u,c,l,h,f,d,p,g,v,y;o=Math.floor,f=Math.min,i=function(t,e){return t<e?-1:t>e?1:0},h=function(t,e,n,r,a){var s;if(null==n&&(n=0),null==a&&(a=i),n<0)throw new Error("lo must be non-negative");for(null==r&&(r=t.length);n<r;)s=o((n+r)/2),a(e,t[s])<0?r=s:n=s+1;return[].splice.apply(t,[n,n-n].concat(e)),e},u=function(t,e,n){return null==n&&(n=i),t.push(e),v(t,0,t.length-1,n)},s=function(t,e){var n,r;return null==e&&(e=i),n=t.pop(),t.length?(r=t[0],t[0]=n,y(t,0,e)):r=n,r},l=function(t,e,n){var r;return null==n&&(n=i),r=t[0],t[0]=e,y(t,0,n),r},c=function(t,e,n){var r;return null==n&&(n=i),t.length&&n(t[0],e)<0&&(r=[t[0],e],e=r[0],t[0]=r[1],y(t,0,n)),e},a=function(t,e){var n,r,a,s,u,c;for(null==e&&(e=i),s=function(){c=[];for(var e=0,n=o(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)c.push(e);return c}.apply(this).reverse(),u=[],r=0,a=s.length;r<a;r++)n=s[r],u.push(y(t,n,e));return u},g=function(t,e,n){var r;if(null==n&&(n=i),(r=t.indexOf(e))!==-1)return v(t,0,r,n),y(t,r,n)},d=function(t,e,n){var r,o,s,u,l;if(null==n&&(n=i),o=t.slice(0,e),!o.length)return o;for(a(o,n),l=t.slice(e),s=0,u=l.length;s<u;s++)r=l[s],c(o,r,n);return o.sort(n).reverse()},p=function(t,e,n){var r,o,u,c,l,d,p,g,v;if(null==n&&(n=i),10*e<=t.length){if(u=t.slice(0,e).sort(n),!u.length)return u;for(o=u[u.length-1],p=t.slice(e),c=0,d=p.length;c<d;c++)r=p[c],n(r,o)<0&&(h(u,r,0,null,n),u.pop(),o=u[u.length-1]);return u}for(a(t,n),v=[],l=0,g=f(e,t.length);0<=g?l<g:l>g;0<=g?++l:--l)v.push(s(t,n));return v},v=function(t,e,n,r){var o,a,s;for(null==r&&(r=i),o=t[n];n>e&&(s=n-1>>1,a=t[s],r(o,a)<0);)t[n]=a,n=s;return t[n]=o},y=function(t,e,n){var r,o,a,s,u;for(null==n&&(n=i),o=t.length,u=e,a=t[e],r=2*e+1;r<o;)s=r+1,s<o&&!(n(t[r],t[s])<0)&&(r=s),t[e]=t[r],e=r,r=2*e+1;return t[e]=a,v(t,u,e,n)},r=function(){function t(t){this.cmp=null!=t?t:i,this.nodes=[]}return t.push=u,t.pop=s,t.replace=l,t.pushpop=c,t.heapify=a,t.updateItem=g,t.nlargest=d,t.nsmallest=p,t.prototype.push=function(t){return u(this.nodes,t,this.cmp)},t.prototype.pop=function(){return s(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return this.nodes.indexOf(t)!==-1},t.prototype.replace=function(t){return l(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return c(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return a(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return g(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return e=new t,e.nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),e.exports=r},{}],124:[function(t,e,n){"use strict";t("./-preamble");var r=t("./window"),i=t("./is"),o=t("./core"),a=t("./extension"),s=t("./jquery-plugin"),u=t("./stylesheet"),c=t("./thread"),l=t("./fabric"),h=function(t){return void 0===t&&(t={}),i.plainObject(t)?new o(t):i.string(t)?a.apply(a,arguments):void 0};h.version=t("./version"),r&&r.jQuery&&s(r.jQuery,h),h.registerJquery=function(t){s(t,h)},h.stylesheet=h.Stylesheet=u,h.thread=h.Thread=c,h.fabric=h.Fabric=l,e.exports=h},{"./-preamble":43,"./core":79,"./extension":88,"./fabric":122,"./is":125,"./jquery-plugin":126,"./stylesheet":139,"./thread":140,"./version":148,"./window":149}],125:[function(t,e,n){"use strict";var r=t("./window"),i=r?r.navigator:null,o=r?r.document:null,a=typeof{},s=typeof HTMLElement,u=function(t){return t&&t.instanceString&&c.fn(t.instanceString)?t.instanceString():null},c={defined:function(t){return null!=t},string:function(t){return null!=t&&"string"==typeof t},fn:function(t){return null!=t&&"function"==typeof t},array:function(t){return Array.isArray?Array.isArray(t):null!=t&&t instanceof Array},plainObject:function(t){return null!=t&&typeof t===a&&!c.array(t)&&t.constructor===Object},object:function(t){return null!=t&&typeof t===a},number:function(t){return null!=t&&"number"==typeof t&&!isNaN(t)},integer:function(t){return c.number(t)&&Math.floor(t)===t},bool:function(t){return null!=t&&typeof t==typeof!0},htmlElement:function(t){return"undefined"===s?void 0:null!=t&&t instanceof HTMLElement},elementOrCollection:function(t){return c.element(t)||c.collection(t)},element:function(t){return"collection"===u(t)&&t._private.single},collection:function(t){return"collection"===u(t)&&!t._private.single},core:function(t){return"core"===u(t)},style:function(t){return"style"===u(t)},stylesheet:function(t){return"stylesheet"===u(t)},event:function(t){return"event"===u(t)},thread:function(t){return"thread"===u(t)},fabric:function(t){return"fabric"===u(t)},emptyString:function(t){return void 0===t||null===t||!(""!==t&&!t.match(/^\s+$/))},nonemptyString:function(t){return!(!t||!c.string(t)||""===t||t.match(/^\s+$/))},domElement:function(t){return"undefined"!=typeof HTMLElement&&t instanceof HTMLElement},boundingBox:function(t){return c.plainObject(t)&&c.number(t.x1)&&c.number(t.x2)&&c.number(t.y1)&&c.number(t.y2)},promise:function(t){return c.object(t)&&c.fn(t.then)},touch:function(){return r&&("ontouchstart"in r||r.DocumentTouch&&o instanceof DocumentTouch)},gecko:function(){return r&&("undefined"!=typeof InstallTrigger||"MozAppearance"in o.documentElement.style)},webkit:function(){return r&&("undefined"!=typeof webkitURL||"WebkitAppearance"in o.documentElement.style)},chromium:function(){return r&&"undefined"!=typeof chrome},khtml:function(){return i&&i.vendor.match(/kde/i)},khtmlEtc:function(){return c.khtml()||c.webkit()||c.chromium()},ms:function(){return i&&i.userAgent.match(/msie|trident|edge/i)},windows:function(){return i&&i.appVersion.match(/Win/i)},mac:function(){return i&&i.appVersion.match(/Mac/i)},linux:function(){return i&&i.appVersion.match(/Linux/i)},unix:function(){return i&&i.appVersion.match(/X11/i)}};e.exports=c},{"./window":149}],126:[function(t,e,n){"use strict";var r=t("./is"),i=function(t){return t[0]._cyreg=t[0]._cyreg||{}},o=function(t,e){t&&(t.fn.cytoscape||(t.fn.cytoscape=function(n){var o=t(this);if("get"===n)return i(o).cy;if(r.fn(n)){var a=n,s=i(o).cy;if(s&&s.isReady())s.trigger("ready",[],a);else{var u=i(o);(u.readies=u.readies||[]).push(a)}}else if(r.plainObject(n))return o.each(function(){e(t.extend({},n,{container:t(this)[0]}))})},t.cytoscape=e,null==t.fn.cy&&null==t.cy&&(t.fn.cy=t.fn.cytoscape,t.cy=t.cytoscape)))};e.exports=o},{"./is":125}],127:[function(t,e,n){"use strict";var r={};r.arePositionsSame=function(t,e){return t.x===e.x&&t.y===e.y},r.copyPosition=function(t){return{x:t.x,y:t.y}},r.array2point=function(t){return{x:t[0],y:t[1]}},r.deg2rad=function(t){return Math.PI*t/180},r.log2=Math.log2||function(t){return Math.log(t)/Math.log(2)},r.signum=function(t){return t>0?1:t<0?-1:0},r.dist=function(t,e){return Math.sqrt(r.sqdist(t,e))},r.sqdist=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},r.qbezierAt=function(t,e,n,r){return(1-r)*(1-r)*t+2*(1-r)*r*e+r*r*n},r.qbezierPtAt=function(t,e,n,i){return{x:r.qbezierAt(t.x,e.x,n.x,i),y:r.qbezierAt(t.y,e.y,n.y,i)}},r.lineAt=function(t,e,n,i){var o={x:e.x-t.x,y:e.y-t.y},a=r.dist(t,e),s={x:o.x/a,y:o.y/a};n=null==n?0:n;var i=null!=i?i:n*a;return{x:t.x+s.x*i,y:t.y+s.y*i}},r.lineAtDist=function(t,e,n){return r.lineAt(t,e,void 0,n)},r.triangleAngle=function(t,e,n){var i=r.dist(e,n),o=r.dist(t,n),a=r.dist(t,e);return Math.acos((i*i+o*o-a*a)/(2*i*o))},r.bound=function(t,e,n){return Math.max(t,Math.min(n,e))},r.makeBoundingBox=function(t){if(null==t)return{x1:1/0,y1:1/0,x2:-(1/0),y2:-(1/0),w:0,h:0};if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},r.updateBoundingBox=function(t,e){t.x1=Math.min(t.x1,e.x1),t.x2=Math.max(t.x2,e.x2),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,e.y1),t.y2=Math.max(t.y2,e.y2),t.h=t.y2-t.y1},r.expandBoundingBox=function(t,e){return t.x1-=e,t.x2+=e,t.y1-=e,t.y2+=e,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},r.boundingBoxesIntersect=function(t,e){return!(t.x1>e.x2)&&(!(e.x1>t.x2)&&(!(t.x2<e.x1)&&(!(e.x2<t.x1)&&(!(t.y2<e.y1)&&(!(e.y2<t.y1)&&(!(t.y1>e.y2)&&!(e.y1>t.y2)))))))},r.inBoundingBox=function(t,e,n){return t.x1<=e&&e<=t.x2&&t.y1<=n&&n<=t.y2},r.pointInBoundingBox=function(t,e){return this.inBoundingBox(t,e.x,e.y)},r.boundingBoxInBoundingBox=function(t,e){return r.inBoundingBox(t,e.x1,e.y1)&&r.inBoundingBox(t,e.x2,e.y2)},r.roundRectangleIntersectLine=function(t,e,n,r,i,o,a){var s,u=this.getRoundRectangleRadius(i,o),c=i/2,l=o/2,h=n-c+u-a,f=r-l-a,d=n+c-u+a,p=f;if(s=this.finiteLinesIntersect(t,e,n,r,h,f,d,p,!1),s.length>0)return s;var g=n+c+a,v=r-l+u-a,y=g,m=r+l-u+a;if(s=this.finiteLinesIntersect(t,e,n,r,g,v,y,m,!1),s.length>0)return s;var x=n-c+u-a,b=r+l+a,w=n+c-u+a,_=b;if(s=this.finiteLinesIntersect(t,e,n,r,x,b,w,_,!1),s.length>0)return s;var E=n-c-a,k=r-l+u-a,N=E,L=r+l-u+a;if(s=this.finiteLinesIntersect(t,e,n,r,E,k,N,L,!1),s.length>0)return s;var S,T=n-c+u,A=r-l+u;if(S=this.intersectLineCircle(t,e,n,r,T,A,u+a),S.length>0&&S[0]<=T&&S[1]<=A)return[S[0],S[1]];var D=n+c-u,M=r-l+u;if(S=this.intersectLineCircle(t,e,n,r,D,M,u+a),S.length>0&&S[0]>=D&&S[1]<=M)return[S[0],S[1]];var P=n+c-u,I=r+l-u;if(S=this.intersectLineCircle(t,e,n,r,P,I,u+a),S.length>0&&S[0]>=P&&S[1]>=I)return[S[0],S[1]];var C=n-c+u,O=r+l-u;return S=this.intersectLineCircle(t,e,n,r,C,O,u+a),S.length>0&&S[0]<=C&&S[1]>=O?[S[0],S[1]]:[]},r.inLineVicinity=function(t,e,n,r,i,o,a){var s=a,u=Math.min(n,i),c=Math.max(n,i),l=Math.min(r,o),h=Math.max(r,o);return u-s<=t&&t<=c+s&&l-s<=e&&e<=h+s},r.inBezierVicinity=function(t,e,n,r,i,o,a,s,u){var c={x1:Math.min(n,a,i)-u,x2:Math.max(n,a,i)+u,y1:Math.min(r,s,o)-u,y2:Math.max(r,s,o)+u};return!(t<c.x1||t>c.x2||e<c.y1||e>c.y2)},r.solveCubic=function(t,e,n,r,i){e/=t,n/=t,r/=t;var o,a,s,u,c,l,h,f
;return a=(3*n-e*e)/9,s=e*(9*n-e*e*2)-27*r,s/=54,o=a*a*a+s*s,i[1]=0,h=e/3,o>0?(c=s+Math.sqrt(o),c=c<0?-Math.pow(-c,1/3):Math.pow(c,1/3),l=s-Math.sqrt(o),l=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),i[0]=-h+c+l,h+=(c+l)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-l+c)/2,i[3]=h,void(i[5]=-h)):(i[5]=i[3]=0,0===o?(f=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=2*f-h,void(i[4]=i[2]=-(f+h))):(a=-a,u=a*a*a,u=Math.acos(s/Math.sqrt(u)),f=2*Math.sqrt(a),i[0]=-h+f*Math.cos(u/3),i[2]=-h+f*Math.cos((u+2*Math.PI)/3),void(i[4]=-h+f*Math.cos((u+4*Math.PI)/3))))},r.sqdistToQuadraticBezier=function(t,e,n,r,i,o,a,s){var u=1*n*n-4*n*i+2*n*a+4*i*i-4*i*a+a*a+r*r-4*r*o+2*r*s+4*o*o-4*o*s+s*s,c=9*n*i-3*n*n-3*n*a-6*i*i+3*i*a+9*r*o-3*r*r-3*r*s-6*o*o+3*o*s,l=3*n*n-6*n*i+n*a-n*t+2*i*i+2*i*t-a*t+3*r*r-6*r*o+r*s-r*e+2*o*o+2*o*e-s*e,h=1*n*i-n*n+n*t-i*t+r*o-r*r+r*e-o*e,f=[];this.solveCubic(u,c,l,h,f);for(var d=[],p=0;p<6;p+=2)Math.abs(f[p+1])<1e-7&&f[p]>=0&&f[p]<=1&&d.push(f[p]);d.push(1),d.push(0);for(var g,v,y,m=-1,x=0;x<d.length;x++)g=Math.pow(1-d[x],2)*n+2*(1-d[x])*d[x]*i+d[x]*d[x]*a,v=Math.pow(1-d[x],2)*r+2*(1-d[x])*d[x]*o+d[x]*d[x]*s,y=Math.pow(g-t,2)+Math.pow(v-e,2),m>=0?y<m&&(m=y,d[x]):(m=y,d[x]);return m},r.sqdistToFiniteLine=function(t,e,n,r,i,o){var a=[t-n,e-r],s=[i-n,o-r],u=s[0]*s[0]+s[1]*s[1],c=a[0]*a[0]+a[1]*a[1],l=a[0]*s[0]+a[1]*s[1],h=l*l/u;return l<0?c:h>u?(t-i)*(t-i)+(e-o)*(e-o):c-h},r.pointInsidePolygonPoints=function(t,e,n){for(var r,i,o,a,s,u=0,c=0,l=0;l<n.length/2;l++)if(r=n[2*l],i=n[2*l+1],l+1<n.length/2?(o=n[2*(l+1)],a=n[2*(l+1)+1]):(o=n[2*(l+1-n.length/2)],a=n[2*(l+1-n.length/2)+1]),r==t&&o==t);else{if(!(r>=t&&t>=o||r<=t&&t<=o))continue;s=(t-r)/(o-r)*(a-i)+i,s>e&&u++,s<e&&c++}return u%2!=0},r.pointInsidePolygon=function(t,e,n,i,o,a,s,u,c){var l,h=new Array(n.length);null!=u[0]?(l=Math.atan(u[1]/u[0]),u[0]<0?l+=Math.PI/2:l=-l-Math.PI/2):l=u;for(var f=Math.cos(-l),d=Math.sin(-l),p=0;p<h.length/2;p++)h[2*p]=a/2*(n[2*p]*f-n[2*p+1]*d),h[2*p+1]=s/2*(n[2*p+1]*f+n[2*p]*d),h[2*p]+=i,h[2*p+1]+=o;var g;if(c>0){var v=this.expandPolygon(h,-c);g=this.joinLines(v)}else g=h;return r.pointInsidePolygonPoints(t,e,g)},r.joinLines=function(t){for(var e,n,r,i,o,a,s,u,c=new Array(t.length/2),l=0;l<t.length/4;l++){e=t[4*l],n=t[4*l+1],r=t[4*l+2],i=t[4*l+3],l<t.length/4-1?(o=t[4*(l+1)],a=t[4*(l+1)+1],s=t[4*(l+1)+2],u=t[4*(l+1)+3]):(o=t[0],a=t[1],s=t[2],u=t[3]);var h=this.finiteLinesIntersect(e,n,r,i,o,a,s,u,!0);c[2*l]=h[0],c[2*l+1]=h[1]}return c},r.expandPolygon=function(t,e){for(var n,r,i,o,a=new Array(2*t.length),s=0;s<t.length/2;s++){n=t[2*s],r=t[2*s+1],s<t.length/2-1?(i=t[2*(s+1)],o=t[2*(s+1)+1]):(i=t[0],o=t[1]);var u=o-r,c=-(i-n),l=Math.sqrt(u*u+c*c),h=u/l,f=c/l;a[4*s]=n+h*e,a[4*s+1]=r+f*e,a[4*s+2]=i+h*e,a[4*s+3]=o+f*e}return a},r.intersectLineEllipse=function(t,e,n,r,i,o){var a=n-t,s=r-e;a/=i,s/=o;var u=Math.sqrt(a*a+s*s),c=u-1;if(c<0)return[];var l=c/u;return[(n-t)*l+t,(r-e)*l+e]},r.intersectLineCircle=function(t,e,n,r,i,o,a){var s=[n-t,r-e],u=[i,o],c=[t-i,e-o],l=s[0]*s[0]+s[1]*s[1],h=2*(c[0]*s[0]+c[1]*s[1]),u=c[0]*c[0]+c[1]*c[1]-a*a,f=h*h-4*l*u;if(f<0)return[];var d=(-h+Math.sqrt(f))/(2*l),p=(-h-Math.sqrt(f))/(2*l),g=Math.min(d,p),v=Math.max(d,p),y=[];if(g>=0&&g<=1&&y.push(g),v>=0&&v<=1&&y.push(v),0===y.length)return[];var m=y[0]*s[0]+t,x=y[0]*s[1]+e;if(y.length>1){if(y[0]==y[1])return[m,x];return[m,x,y[1]*s[0]+t,y[1]*s[1]+e]}return[m,x]},r.findCircleNearPoint=function(t,e,n,r,i){var o=r-t,a=i-e,s=Math.sqrt(o*o+a*a);return[t+o/s*n,e+a/s*n]},r.findMaxSqDistanceToOrigin=function(t){for(var e,n=1e-6,r=0;r<t.length/2;r++)(e=t[2*r]*t[2*r]+t[2*r+1]*t[2*r+1])>n&&(n=e);return n},r.midOfThree=function(t,e,n){return e<=t&&t<=n||n<=t&&t<=e?t:t<=e&&e<=n||n<=e&&e<=t?e:n},r.finiteLinesIntersect=function(t,e,n,r,i,o,a,s,u){var c=t-i,l=n-t,h=a-i,f=e-o,d=r-e,p=s-o,g=h*f-p*c,v=l*f-d*c,y=p*l-h*d;if(0!==y){var m=g/y,x=v/y;return-.001<=m&&m<=1.001&&-.001<=x&&x<=1.001?[t+m*l,e+m*d]:u?[t+m*l,e+m*d]:[]}return 0===g||0===v?this.midOfThree(t,n,a)===a?[a,s]:this.midOfThree(t,n,i)===i?[i,o]:this.midOfThree(i,a,n)===n?[n,r]:[]:[]},r.polygonIntersectLine=function(t,e,n,i,o,a,s,u){for(var c,l=[],h=new Array(n.length),f=0;f<h.length/2;f++)h[2*f]=n[2*f]*a+i,h[2*f+1]=n[2*f+1]*s+o;var d;if(u>0){var p=r.expandPolygon(h,-u);d=r.joinLines(p)}else d=h;for(var g,v,y,m,f=0;f<d.length/2;f++)g=d[2*f],v=d[2*f+1],f<d.length/2-1?(y=d[2*(f+1)],m=d[2*(f+1)+1]):(y=d[0],m=d[1]),c=this.finiteLinesIntersect(t,e,i,o,g,v,y,m),0!==c.length&&l.push(c[0],c[1]);return l},r.shortenIntersection=function(t,e,n){var r=[t[0]-e[0],t[1]-e[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=(i-n)/i;return o<0&&(o=1e-5),[e[0]+o*r[0],e[1]+o*r[1]]},r.generateUnitNgonPointsFitToSquare=function(t,e){var n=r.generateUnitNgonPoints(t,e);return n=r.fitPolygonToSquare(n)},r.fitPolygonToSquare=function(t){for(var e,n,r=t.length/2,i=1/0,o=1/0,a=-(1/0),s=-(1/0),u=0;u<r;u++)e=t[2*u],n=t[2*u+1],i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);for(var c=2/(a-i),l=2/(s-o),u=0;u<r;u++)e=t[2*u]=t[2*u]*c,n=t[2*u+1]=t[2*u+1]*l,i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);if(o<-1)for(var u=0;u<r;u++)n=t[2*u+1]=t[2*u+1]+(-1-o);return t},r.generateUnitNgonPoints=function(t,e){var n=1/t*2*Math.PI,r=t%2==0?Math.PI/2+n/2:Math.PI/2;r+=e;for(var i,o=new Array(2*t),a=0;a<t;a++)i=a*n+r,o[2*a]=Math.cos(i),o[2*a+1]=Math.sin(-i);return o},r.getRoundRectangleRadius=function(t,e){return Math.min(t/4,e/4,8)},e.exports=r},{}],128:[function(t,e,n){"use strict";var r=function(t){if(!(this instanceof r))return new r(t);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))};r.prototype={fulfill:function(t){return i(this,1,"fulfillValue",t)},reject:function(t){return i(this,2,"rejectReason",t)},then:function(t,e){var n=this,i=new r;return n.onFulfilled.push(s(t,i,"fulfill")),n.onRejected.push(s(e,i,"reject")),o(n),i.proxy}};var i=function(t,e,n,r){return 0===t.state&&(t.state=e,t[n]=r,o(t)),t},o=function(t){1===t.state?a(t,"onFulfilled",t.fulfillValue):2===t.state&&a(t,"onRejected",t.rejectReason)},a=function(t,e,n){if(0!==t[e].length){var r=t[e];t[e]=[];var i=function(){for(var t=0;t<r.length;t++)r[t](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},s=function(t,e,n){return function(r){if("function"!=typeof t)e[n].call(e,r);else{var i;try{i=t(r)}catch(t){return void e.reject(t)}u(e,i)}}},u=function(t,e){if(t===e||t.proxy===e)return void t.reject(new TypeError("cannot resolve promise with itself"));var n;if("object"==typeof e&&null!==e||"function"==typeof e)try{n=e.then}catch(e){return void t.reject(e)}if("function"!=typeof n)t.fulfill(e);else{var r=!1;try{n.call(e,function(n){r||(r=!0,n===e?t.reject(new TypeError("circular thenable chain")):u(t,n))},function(e){r||(r=!0,t.reject(e))})}catch(e){r||t.reject(e)}}};r.all=function(t){return new r(function(e,n){for(var r=new Array(t.length),i=0,o=function(n,o){r[n]=o,++i===t.length&&e(r)},a=0;a<t.length;a++)!function(e){var r=t[e];null!=r&&null!=r.then?r.then(function(t){o(e,t)},function(t){n(t)}):o(e,r)}(a)})},r.resolve=function(t){return new r(function(e,n){e(t)})},r.reject=function(t){return new r(function(e,n){n(t)})},e.exports="undefined"!=typeof Promise?Promise:r},{}],129:[function(t,e,n){"use strict";var r=t("./is"),i=t("./util"),o=function(t){if(!(this instanceof o))return new o(t);var e=this;e._private={selectorText:null,invalid:!0};var n=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}};if(!t||r.string(t)&&t.match(/^\s*$/))e.length=0;else if("*"===t||"edge"===t||"node"===t)e[0]=n(),e[0].group="*"===t?t:t+"s",e[0].groupOnly=!0,e._private.invalid=!1,e._private.selectorText=t,e.length=1;else if(r.elementOrCollection(t)){var a=t.collection();e[0]=n(),e[0].collection=a,e.length=1}else if(r.fn(t))e[0]=n(),e[0].filter=t,e.length=1;else{if(!r.string(t))return void i.error("A selector must be created from a string; found "+t);var s=null,u={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])+"|'+"'(?:\\\\'|[^'])+'",number:i.regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$"};u.variable="(?:[\\w-]|(?:\\\\"+u.metaChar+"))+",u.value=u.string+"|"+u.number,u.className=u.variable,u.id=u.variable;for(var c=function(t){return t.replace(new RegExp("\\\\("+u.metaChar+")","g"),function(t,e,n,r){return e})},l=u.comparatorOp.split("|"),h=0;h<l.length;h++){var f=l[h];u.comparatorOp+="|@"+f}for(var l=u.comparatorOp.split("|"),h=0;h<l.length;h++){var f=l[h];f.indexOf("!")>=0||"="!==f&&(u.comparatorOp+="|\\!"+f)}var d=[{name:"group",query:!0,regex:"(node|edge|\\*)",populate:function(t){this.group="*"===t?t:t+"s"}},{name:"state",query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:transparent|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:orphan|:nonorphan|:parent|:child|:loop|:simple|:active|:inactive|:touch|:backgrounding|:nonbackgrounding)",populate:function(t){this.colonSelectors.push(t)}},{name:"id",query:!0,regex:"\\#("+u.id+")",populate:function(t){this.ids.push(c(t))}},{name:"className",query:!0,regex:"\\.("+u.className+")",populate:function(t){this.classes.push(c(t))}},{name:"dataExists",query:!0,regex:"\\[\\s*("+u.variable+")\\s*\\]",populate:function(t){this.data.push({field:c(t)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+u.variable+")\\s*("+u.comparatorOp+")\\s*("+u.value+")\\s*\\]",populate:function(t,e,n){n=null!=new RegExp("^"+u.string+"$").exec(n)?n.substring(1,n.length-1):parseFloat(n),this.data.push({field:c(t),operator:e,value:n})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+u.boolOp+")\\s*("+u.variable+")\\s*\\]",populate:function(t,e){this.data.push({field:c(e),operator:t})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+u.meta+")\\s*("+u.comparatorOp+")\\s*("+u.number+")\\s*\\]\\]",populate:function(t,e,n){this.meta.push({field:c(t),operator:e,value:parseFloat(n)})}},{name:"nextQuery",separator:!0,regex:u.separator,populate:function(){e[++h]=n(),s=null}},{name:"child",separator:!0,regex:u.child,populate:function(){var t=n();t.parent=this,t.subject=s,e[h]=t}},{name:"descendant",separator:!0,regex:u.descendant,populate:function(){var t=n();t.ancestor=this,t.subject=s,e[h]=t}},{name:"subject",modifier:!0,regex:u.subject,populate:function(){if(null!=s&&this.subject!=this)return i.error("Redefinition of subject in selector `"+t+"`"),!1;s=this,this.subject=this}}];e._private.selectorText=t;var p=t,h=0;for(e[0]=n(),function(){var t=p.match(/^\s+/);if(t){var e=t[0];p=p.substring(e.length)}}();;){var g=function(t){for(var e,n,i,o=0;o<d.length;o++){var a=d[o],s=a.name;if(!r.fn(t)||t(s,a)){var u=p.match(new RegExp("^"+a.regex));if(null!=u){n=u,e=a,i=s;var c=u[0];p=p.substring(c.length);break}}}return{expr:e,match:n,name:i}}();if(null==g.expr)return void i.error("The selector `"+t+"`is invalid");for(var v=[],y=1;y<g.match.length;y++)v.push(g.match[y]);var m=g.expr.populate.apply(e[h],v);if(m===!1)return;if(p.match(/^\s*$/))break}e.length=h+1;for(var y=0;y<e.length;y++){var x=e[y];if(null!=x.subject){for(;x.subject!=x;)if(null!=x.parent){var b=x.parent,w=x;w.parent=null,b.child=w,x=b}else{if(null==x.ancestor){i.error("When adjusting references for the selector `"+x+"`, neither parent nor ancestor was found");break}var _=x.ancestor,E=x;E.ancestor=null,_.descendant=E,x=_}e[y]=x.subject}}}e._private.invalid=!1},a=o.prototype;a.size=function(){return this.length},a.eq=function(t){return this[t]};var s=function(t,e){var n=e._private;if(t.groupOnly)return"*"===t.group||t.group===n.group;if(null!=t.group&&"*"!=t.group&&t.group!=n.group)return!1;for(var i=e.cy(),o=!0,a=0;a<t.colonSelectors.length;a++){switch(t.colonSelectors[a]){case":selected":o=e.selected();break;case":unselected":o=!e.selected();break;case":selectable":o=e.selectable();break;case":unselectable":o=!e.selectable();break;case":locked":o=e.locked();break;case":unlocked":o=!e.locked();break;case":visible":o=e.visible();break;case":hidden":o=!e.visible();break;case":transparent":o=e.transparent();break;case":grabbed":o=e.grabbed();break;case":free":o=!e.grabbed();break;case":removed":o=e.removed();break;case":inside":o=!e.removed();break;case":grabbable":o=e.grabbable();break;case":ungrabbable":o=!e.grabbable();break;case":animated":o=e.animated();break;case":unanimated":o=!e.animated();break;case":parent":o=e.isNode()&&e.children().nonempty();break;case":child":case":nonorphan":o=e.isNode()&&e.parent().nonempty();break;case":orphan":o=e.isNode()&&e.parent().empty();break;case":loop":o=e.isEdge()&&e.data("source")===e.data("target");break;case":simple":o=e.isEdge()&&e.data("source")!==e.data("target");break;case":active":o=e.active();break;case":inactive":o=!e.active();break;case":touch":o=r.touch();break;case":backgrounding":o=e.backgrounding();break;case":nonbackgrounding":o=!e.backgrounding()}if(!o)break}if(!o)return!1;for(var u=!0,a=0;a<t.ids.length;a++){var c=t.ids[a],l=n.data.id;if(!(u=u&&c==l))break}if(!u)return!1;for(var h=!0,a=0;a<t.classes.length;a++){var f=t.classes[a];if(!(h=h&&e.hasClass(f)))break}if(!h)return!1;var d=function(e){for(var n=!0,i=0;i<t[e.name].length;i++){var o,a=t[e.name][i],s=a.operator,u=a.value,c=a.field;if(null!=s&&null!=u){var l=e.fieldValue(c),h=r.string(l)||r.number(l)?""+l:"",f=""+u,d=!1;s.indexOf("@")>=0&&(h=h.toLowerCase(),f=f.toLowerCase(),s=s.replace("@",""),d=!0);var p=!1;s.indexOf("!")>=0&&(s=s.replace("!",""),p=!0),d&&(u=f.toLowerCase(),l=h.toLowerCase());var g=!1;switch(s){case"*=":o=h.indexOf(f)>=0;break;case"$=":o=h.indexOf(f,h.length-f.length)>=0;break;case"^=":o=0===h.indexOf(f);break;case"=":o=l===u;break;case">":g=!0,o=l>u;break;case">=":g=!0,o=l>=u;break;case"<":g=!0,o=l<u;break;case"<=":g=!0,o=l<=u;break;default:o=!1}!p||null==l&&g||(o=!o)}else if(null!=s)switch(s){case"?":o=e.fieldTruthy(c);break;case"!":o=!e.fieldTruthy(c);break;case"^":o=e.fieldUndefined(c)}else o=!e.fieldUndefined(c);if(!o){n=!1;break}}return n};if(!d({name:"data",fieldValue:function(t){return n.data[t]},fieldUndefined:function(t){return void 0===n.data[t]},fieldTruthy:function(t){return!!n.data[t]}}))return!1;if(!d({name:"meta",fieldValue:function(t){return e[t]()},fieldUndefined:function(t){return null==e[t]()},fieldTruthy:function(t){return!!e[t]()}}))return!1;if(null!=t.collection){if(!t.collection.hasElementWithId(e.id()))return!1}if(null!=t.filter&&0===e.collection().filter(t.filter).size())return!1;var p=function(t,e){if(null!=t){var n=!1;if(!i.hasCompoundNodes())return!1;e=e();for(var r=0;r<e.length;r++)if(s(t,e[r])){n=!0;break}return n}return!0};return!!p(t.parent,function(){return e.parent()})&&(!!p(t.ancestor,function(){return e.parents()})&&(!!p(t.child,function(){return e.children()})&&!!p(t.descendant,function(){return e.descendants()})))};a.filter=function(t){var e=this,n=t.cy();if(e._private.invalid)return n.collection();var r=function(t,n){for(var r=0;r<e.length;r++){if(s(e[r],n))return!0}return!1};return null==e._private.selectorText&&(r=function(){return!0}),t.filter(r)},a.matches=function(t){var e=this;if(e._private.invalid)return!1;for(var n=0;n<e.length;n++){if(s(e[n],t))return!0}return!1},a.toString=a.selector=function(){for(var t="",e=function(t){return null==t?"":t},n=function(t){return r.string(t)?'"'+t+'"':e(t)},i=function(t){return" "+t+" "},o=function(t){var r="";t.subject===t&&(r+="$");var s=e(t.group);r+=s.substring(0,s.length-1);for(var u=0;u<t.data.length;u++){var c=t.data[u];r+=c.value?"["+c.field+i(e(c.operator))+n(c.value)+"]":"["+e(c.operator)+c.field+"]"}for(var u=0;u<t.meta.length;u++){var l=t.meta[u];r+="[["+l.field+i(e(l.operator))+n(l.value)+"]]"}for(var u=0;u<t.colonSelectors.length;u++){var h=t.colonSelectors[a];r+=h}for(var u=0;u<t.ids.length;u++){var h="#"+t.ids[a];r+=h}for(var u=0;u<t.classes.length;u++){var h="."+t.classes[u];r+=h}return null!=t.parent&&(r=o(t.parent)+" > "+r),null!=t.ancestor&&(r=o(t.ancestor)+" "+r),null!=t.child&&(r+=" > "+o(t.child)),null!=t.descendant&&(r+=" "+o(t.descendant)),r},a=0;a<this.length;a++){t+=o(this[a]),this.length>1&&a<this.length-1&&(t+=", ")}return t},e.exports=o},{"./is":125,"./util":142}],130:[function(t,e,n){"use strict";var r=t("../util"),i=t("../is"),o={};o.apply=function(t){var e=this,n=e._private;n.newStyle&&(n.contextStyles={},n.propDiffs={},e.cleanElements(t,!0));for(var r=0;r<t.length;r++){var i=t[r],o=e.getContextMeta(i),a=e.getContextStyle(o),s=e.applyContextStyle(o,a,i);e.updateTransitions(i,s.diffProps),e.updateStyleHints(i)}n.newStyle=!1},o.getPropertiesDiff=function(t,e){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},i=t+"-"+e,o=r[i];if(o)return o;for(var a=[],s={},u=0;u<n.length;u++){var c=n[u],l="t"===t[u],h="t"===e[u],f=l!==h,d=c.mappedProperties.length>0;if(f||d){var p;f&&d?p=c.properties:f?p=c.properties:d&&(p=c.mappedProperties);for(var g=0;g<p.length;g++){for(var v=p[g],y=v.name,m=!1,x=u+1;x<n.length;x++){var b=n[x];if("t"===e[x]&&(m=null!=b.properties[v.name]))break}s[y]||m||(s[y]=!0,a.push(y))}}}return r[i]=a,a},o.getContextMeta=function(t){var e,n=this,r="",i=t._private.styleCxtKey||"";n._private.newStyle&&(i="");for(var o=0;o<n.length;o++){var a=n[o];r+=a.selector&&a.selector.matches(t)?"t":"f"}return e=n.getPropertiesDiff(i,r),t._private.styleCxtKey=r,{key:r,diffPropNames:e}},o.getContextStyle=function(t){var e=t.key,n=this,r=this._private.contextStyles=this._private.contextStyles||{};if(r[e])return r[e];for(var i={_private:{key:e}},o=0;o<n.length;o++){var a=n[o];if("t"===e[o])for(var s=0;s<a.properties.length;s++){var u=a.properties[s],c=i[u.name]=u;c.context=a}}return r[e]=i,i},o.applyContextStyle=function(t,e,n){for(var r=this,i=t.diffPropNames,o={},a=0;a<i.length;a++){var s=i[a],u=e[s],c=n.pstyle(s);if(!u){if(!c)continue;u=c.bypass?{name:s,deleteBypassed:!0}:{name:s,delete:!0}}if(c!==u){var l=o[s]={prev:c};r.applyParsedProperty(n,u),l.next=n.pstyle(s),l.next&&l.next.bypass&&(l.next=l.next.bypassed)}}return{diffProps:o}},o.updateStyleHints=function(t){var e=t._private,n=this;if(!t.removed()){var r=!1;if("nodes"===e.group)for(var i=1;i<=n.pieBackgroundN;i++){var o=t.pstyle("pie-"+i+"-background-size").value;if(o>0){r=!0;break}}e.hasPie=r;var a=t.pstyle("text-transform").strValue,s=t.pstyle("label").strValue,u=t.pstyle("source-label").strValue,c=t.pstyle("target-label").strValue,l=t.pstyle("font-style").strValue,o=t.pstyle("font-size").pfValue+"px",h=t.pstyle("font-family").strValue,f=t.pstyle("font-weight").strValue,d=t.pstyle("text-valign").strValue,p=t.pstyle("text-valign").strValue,g=t.pstyle("text-outline-width").pfValue,v=t.pstyle("text-wrap").strValue,y=t.pstyle("text-max-width").pfValue,m=l+"$"+o+"$"+h+"$"+f+"$"+a+"$"+d+"$"+p+"$"+g+"$"+v+"$"+y;e.labelStyleKey=m,e.sourceLabelKey=m+"$"+u,e.targetLabelKey=m+"$"+c,e.labelKey=m+"$"+s,e.fontKey=l+"$"+f+"$"+o+"$"+h,e.styleKey=Date.now()}},o.applyParsedProperty=function(t,e){var n,o,a=this,s=e,u=t._private.style,c=a.types,l=a.properties[s.name].type,h=s.bypass,f=u[s.name],d=f&&f.bypass,p=t._private;if("curve-style"===e.name&&"haystack"===e.value&&t.isEdge()&&(t.isLoop()||t.source().isParent()||t.target().isParent())&&(s=e=this.parse(e.name,"bezier",h)),s.delete)return u[s.name]=void 0,!0;if(s.deleteBypassed)return!f||!!f.bypass&&(f.bypassed=void 0,!0);if(s.deleteBypass)return!f||!!f.bypass&&(u[s.name]=f.bypassed,!0);var g=function(){r.error("Do not assign mappings to elements without corresponding data (e.g. ele `"+t.id()+"` for property `"+s.name+"` with data field `"+s.field+"`); try a `["+s.field+"]` selector to limit scope to elements with `"+s.field+"` defined")};switch(s.mapped){case c.mapData:case c.mapLayoutData:case c.mapScratch:var n,v=s.mapped===c.mapLayoutData,y=s.mapped===c.mapScratch,m=s.field.split(".");n=y||v?p.scratch:p.data;for(var x=0;x<m.length&&n;x++){var b=m[x];n=n[b]}var w;if(w=i.number(n)?(n-s.fieldMin)/(s.fieldMax-s.fieldMin):0,w<0?w=0:w>1&&(w=1),l.color){var _=s.valueMin[0],E=s.valueMax[0],k=s.valueMin[1],N=s.valueMax[1],L=s.valueMin[2],S=s.valueMax[2],T=null==s.valueMin[3]?1:s.valueMin[3],A=null==s.valueMax[3]?1:s.valueMax[3],D=[Math.round(_+(E-_)*w),Math.round(k+(N-k)*w),Math.round(L+(S-L)*w),Math.round(T+(A-T)*w)];o={bypass:s.bypass,name:s.name,value:D,strValue:"rgb("+D[0]+", "+D[1]+", "+D[2]+")"}}else{if(!l.number)return!1;var M=s.valueMin+(s.valueMax-s.valueMin)*w;o=this.parse(s.name,M,s.bypass,!0)}o||(o=this.parse(s.name,f.strValue,s.bypass,!0)),o||g(),o.mapping=s,s=o;break;case c.data:case c.layoutData:case c.scratch:var n,v=s.mapped===c.layoutData,y=s.mapped===c.scratch,m=s.field.split(".");if(n=y||v?p.scratch:p.data)for(var x=0;x<m.length;x++){var b=m[x];n=n[b]}if(!(o=this.parse(s.name,n,s.bypass,!0))){var P=f?f.strValue:"";o=this.parse(s.name,P,s.bypass,!0)}o||g(),o.mapping=s,s=o;break;case c.fn:var I=s.value,C=I(t);o=this.parse(s.name,C,s.bypass,!0),o.mapping=s,s=o;break;case void 0:break;default:return!1}return h?(s.bypassed=d?f.bypassed:f,u[s.name]=s):d?f.bypassed=s:u[s.name]=s,!0},o.cleanElements=function(t,e){for(var n=this,r=n.properties,i=0;i<t.length;i++){var o=t[i];if(e)for(var a=o._private.style,s=0;s<r.length;s++){var u=r[s],c=a[u.name];c&&(c.bypass?c.bypassed=null:a[u.name]=null)}else o._private.style={}}},o.update=function(){this._private.cy.mutableElements().updateStyle()},o.updateMappers=function(t){for(var e=this,n=0;n<t.length;n++){for(var r=t[n],i=r._private.style,o=0;o<e.properties.length;o++){var a=e.properties[o],s=i[a.name];if(s&&s.mapping){var u=s.mapping;this.applyParsedProperty(r,u)}}this.updateStyleHints(r)}},o.updateTransitions=function(t,e,n){var r=this,o=t._private,a=t.pstyle("transition-property").value,s=t.pstyle("transition-duration").pfValue,u=t.pstyle("transition-delay").pfValue;if(a.length>0&&s>0){for(var c={},l=!1,h=0;h<a.length;h++){var f=a[h],d=t.pstyle(f),p=e[f];if(p){var g,v=p.prev,y=v,m=null!=p.next?p.next:d,x=!1;y&&(i.number(y.pfValue)&&i.number(m.pfValue)?(x=m.pfValue-y.pfValue,g=y.pfValue+1e-6*x):i.number(y.value)&&i.number(m.value)?(x=m.value-y.value,g=y.value+1e-6*x):i.array(y.value)&&i.array(m.value)&&(x=y.value[0]!==m.value[0]||y.value[1]!==m.value[1]||y.value[2]!==m.value[2],g=y.strValue),x&&(c[f]=m.strValue,this.applyBypass(t,f,g),l=!0))}}if(!l)return;o.transitioning=!0,t.stop(),u>0&&t.delay(u),t.animate({css:c},{duration:s,easing:t.pstyle("transition-timing-function").value,queue:!1,complete:function(){n||r.removeBypasses(t,a),o.transitioning=!1}})}else o.transitioning&&(t.stop(),this.removeBypasses(t,a),o.transitioning=!1)},e.exports=o},{"../is":125,"../util":142}],131:[function(t,e,n){"use strict";var r=t("../is"),i=t("../util"),o={};o.applyBypass=function(t,e,n,o){var a=this,s=[];if("*"===e||"**"===e){if(void 0!==n)for(var u=0;u<a.properties.length;u++){var c=a.properties[u],e=c.name,l=this.parse(e,n,!0);l&&s.push(l)}}else if(r.string(e)){var l=this.parse(e,n,!0);l&&s.push(l)}else{if(!r.plainObject(e))return!1;var h=e;o=n;for(var u=0;u<a.properties.length;u++){var c=a.properties[u],e=c.name,n=h[e];if(void 0===n&&(n=h[i.dash2camel(e)]),void 0!==n){var l=this.parse(e,n,!0);l&&s.push(l)}}}if(0===s.length)return!1;for(var f=!1,u=0;u<t.length;u++){for(var d,p=t[u],g={},v=0;v<s.length;v++){var c=s[v];if(o){var y=p.pstyle(c.name);d=g[c.name]={prev:y}}f=this.applyParsedProperty(p,c)||f,o&&(d.next=p.pstyle(c.name))}f&&this.updateStyleHints(p),o&&this.updateTransitions(p,g,!0)}return f},o.overrideBypass=function(t,e,n){e=i.camel2dash(e);for(var r=0;r<t.length;r++){var o=t[r],a=o._private.style[e],s=this.properties[e].type,u=s.color,c=s.mutiple;a&&a.bypass?(a.value=n,null!=a.pfValue&&(a.pfValue=n),a.strValue=u?"rgb("+n.join(",")+")":c?n.join(" "):""+n):this.applyBypass(o,e,n)}},o.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)},o.removeBypasses=function(t,e,n){for(var r=0;r<t.length;r++){for(var i=t[r],o={},a=0;a<e.length;a++){var s=e[a],u=this.properties[s],c=i.pstyle(u.name);if(c&&c.bypass){var l=this.parse(s,"",!0),h=o[u.name]={prev:c};this.applyParsedProperty(i,l),h.next=i.pstyle(u.name)}}this.updateStyleHints(i),n&&this.updateTransitions(i,o,!0)}},e.exports=o},{"../is":125,"../util":142}],132:[function(t,e,n){"use strict";var r=t("../window"),i={};i.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return null!=t?parseFloat(t):1},i.containerCss=function(t){var e=this._private.cy,n=e.container();if(r&&n&&r.getComputedStyle)return r.getComputedStyle(n).getPropertyValue(t)},e.exports=i},{"../window":149}],133:[function(t,e,n){"use strict";var r=t("../util"),i=t("../is"),o={};o.getRenderedStyle=function(t){return this.getRawStyle(t,!0)},o.getRawStyle=function(t,e){var n=this,t=t[0];if(t){for(var i={},o=0;o<n.properties.length;o++){var a=n.properties[o],s=n.getStylePropertyValue(t,a.name,e);s&&(i[a.name]=s,i[r.dash2camel(a.name)]=s)}return i}},o.getStylePropertyValue=function(t,e,n){var r=this,t=t[0];if(t){var i=r.properties[e];i.alias&&(i=i.pointsTo);var o=i.type,a=t.pstyle(i.name),s=t.cy().zoom();if(a){var u=a.units?o.implicitUnits||"px":null;return u?[].concat(a.pfValue).map(function(t){return t*(n?s:1)+u}).join(" "):a.strValue}}},o.getAnimationStartStyle=function(t,e){for(var n={},r=0;r<e.length;r++){var o=e[r],a=o.name,s=t.pstyle(a);void 0!==s&&(s=i.plainObject(s)?this.parse(a,s.strValue):this.parse(a,s)),s&&(n[a]=s)}return n},o.getPropsList=function(t){var e=this,n=[],i=t,o=e.properties;if(i)for(var a=Object.keys(i),s=0;s<a.length;s++){var u=a[s],c=i[u],l=o[u]||o[r.camel2dash(u)],h=this.parse(l.name,c);n.push(h)}return n},e.exports=o},{"../is":125,"../util":142}],134:[function(t,e,n){"use strict";var r=t("../is"),i=t("../util"),o=t("../selector"),a=function(t){return this instanceof a?r.core(t)?(this._private={cy:t,coreStyle:{}},this.length=0,void this.resetToDefault()):void i.error("A style must have a core reference"):new a(t)},s=a.prototype;s.instanceString=function(){return"style"},s.clear=function(){for(var t=0;t<this.length;t++)this[t]=void 0;return this.length=0,this._private.newStyle=!0,this},s.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},s.core=function(){return this._private.coreStyle},s.selector=function(t){var e="core"===t?null:new o(t),n=this.length++;return this[n]={selector:e,properties:[],mappedProperties:[],index:n},this},s.css=function(){var t=this,e=arguments;switch(e.length){case 1:for(var n=e[0],r=0;r<t.properties.length;r++){var o=t.properties[r],a=n[o.name];void 0===a&&(a=n[i.dash2camel(o.name)]),void 0!==a&&this.cssRule(o.name,a)}break;case 2:this.cssRule(e[0],e[1])}return this},s.style=s.css,s.cssRule=function(t,e){var n=this.parse(t,e);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n);!this[r].selector&&(this._private.coreStyle[n.name]=n)}return this},a.fromJson=function(t,e){var n=new a(t);return n.fromJson(e),n},a.fromString=function(t,e){return new a(t).fromString(e)},[t("./apply"),t("./bypass"),t("./container"),t("./get-for-ele"),t("./json"),t("./string-sheet"),t("./properties"),t("./parse")].forEach(function(t){i.extend(s,t)}),a.types=s.types,a.properties=s.properties,e.exports=a},{"../is":125,"../selector":129,"../util":142,"./apply":130,"./bypass":131,"./container":132,"./get-for-ele":133,"./json":135,"./parse":136,"./properties":137,"./string-sheet":138}],135:[function(t,e,n){"use strict";var r={};r.applyFromJson=function(t){for(var e=this,n=0;n<t.length;n++){var r=t[n],i=r.selector,o=r.style||r.css,a=Object.keys(o);e.selector(i);for(var s=0;s<a.length;s++){var u=a[s],c=o[u];e.css(u,c)}}return e},r.fromJson=function(t){var e=this;return e.resetToDefault(),e.applyFromJson(t),e},r.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],r=n.selector,i=n.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}t.push({selector:r?r.toString():"core",style:o})}return t},e.exports=r},{}],136:[function(t,e,n){"use strict";var r=t("../util"),i=t("../is"),o=t("../math"),a={};a.parse=function(t,e,n,o){var a=this;if(i.fn(e))return a.parseImpl(t,e,n,o);var s,u=[t,e,n,o].join("$"),c=a.propCache=a.propCache||{};return(s=c[u])||(s=c[u]=a.parseImpl(t,e,n,o)),s=r.copy(s),s&&(s.value=r.copy(s.value)),s};var s=function(t,e,n,a){var s=this;t=r.camel2dash(t);var u=s.properties[t],c=e,l=s.types;if(!u)return null;if(void 0===e||null===e)return null;u.alias&&(u=u.pointsTo,t=u.name);var h=i.string(e);h&&(e=e.trim());var f=u.type;if(!f)return null;if(n&&(""===e||null===e))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(i.fn(e))return{name:t,value:e,strValue:"fn",mapped:l.fn,bypass:n};var d,p,g,v,y,m;if(!h||a);else{if((d=new RegExp(l.data.regex).exec(e))||(g=new RegExp(l.layoutData.regex).exec(e))||(y=new RegExp(l.scratch.regex).exec(e))){if(n)return!1;var x;return x=d?l.data:g?l.layoutData:l.scratch,d=d||g||y,{name:t,value:d,strValue:""+e,mapped:x,field:d[1],bypass:n}}if((p=new RegExp(l.mapData.regex).exec(e))||(v=new RegExp(l.mapLayoutData.regex).exec(e))||(m=new RegExp(l.mapScratch.regex).exec(e))){if(n)return!1;if(f.multiple)return!1;var x;if(x=p?l.mapData:v?l.mapLayoutData:l.mapScratch,p=p||v||m,!f.color&&!f.number)return!1;var b=this.parse(t,p[4]);if(!b||b.mapped)return!1;var w=this.parse(t,p[5]);if(!w||w.mapped)return!1;if(b.value===w.value)return!1;if(f.color){var _=b.value,E=w.value;if(!(_[0]!==E[0]||_[1]!==E[1]||_[2]!==E[2]||_[3]!==E[3]&&(null!=_[3]&&1!==_[3]||null!=E[3]&&1!==E[3])))return!1}return{name:t,value:p,strValue:""+e,mapped:x,field:p[1],fieldMin:parseFloat(p[2]),fieldMax:parseFloat(p[3]),valueMin:b.value,valueMax:w.value,bypass:n}}}if(f.multiple&&"multiple"!==a){var k;if(k=h?e.split(/\s+/):i.array(e)?e:[e],f.evenMultiple&&k.length%2!=0)return null;var N=k.map(function(e){var r=s.parse(t,e,n,"multiple");return null!=r.pfValue?r.pfValue:r.value});return{name:t,value:N,pfValue:N,strValue:N.join(" "),bypass:n,units:f.number&&!f.unitless?f.implicitUnits||"px":void 0}}var L=function(){for(var r=0;r<f.enums.length;r++){if(f.enums[r]===e)return{name:t,value:e,strValue:""+e,bypass:n}}return null};if(f.number){var S,T="px";if(f.units&&(S=f.units),f.implicitUnits&&(T=f.implicitUnits),!f.unitless)if(h){var A="px|em"+(f.allowPercent?"|\\%":"");S&&(A=S);var D=e.match("^("+r.regex.number+")("+A+")?$");D&&(e=D[1],S=D[2]||T)}else S&&!f.implicitUnits||(S=T);if(e=parseFloat(e),isNaN(e)&&void 0===f.enums)return null;if(isNaN(e)&&void 0!==f.enums)return e=c,L();if(f.integer&&!i.integer(e))return null;if(void 0!==f.min&&e<f.min||void 0!==f.max&&e>f.max)return null;var M={name:t,value:e,strValue:""+e+(S?S:""),units:S,bypass:n};return f.unitless||"px"!==S&&"em"!==S?M.pfValue=e:M.pfValue="px"!==S&&S?this.getEmSizeInPixels()*e:e,"ms"!==S&&"s"!==S||(M.pfValue="ms"===S?e:1e3*e),"deg"!==S&&"rad"!==S||(M.pfValue="rad"===S?e:o.deg2rad(e)),M}if(f.propList){var P=[],I=""+e;if("none"===I);else{for(var C=I.split(","),O=0;O<C.length;O++){var R=C[O].trim();s.properties[R]&&P.push(R)}if(0===P.length)return null}return{name:t,value:P,strValue:0===P.length?"none":P.join(", "),bypass:n}}if(f.color){var B=r.color2tuple(e);return B?{name:t,value:B,strValue:""+e,bypass:n,roundValue:!0}:null}if(f.regex||f.regexes){if(f.enums){var F=L();if(F)return F}for(var z=f.regexes?f.regexes:[f.regex],O=0;O<z.length;O++){var j=new RegExp(z[O]),V=j.exec(e);if(V)return{name:t,value:V,strValue:""+e,bypass:n}}return null}return f.string?{name:t,value:""+e,strValue:""+e,bypass:n}:f.enums?L():null};a.parseImpl=s,e.exports=a},{"../is":125,"../math":127,"../util":142}],137:[function(t,e,n){"use strict";var r=t("../util"),i={};!function(){
var t=r.regex.number,e=r.regex.rgbaNoBackRefs,n=r.regex.hslaNoBackRefs,o=r.regex.hex3,a=r.regex.hex6,s=function(t){return"^"+t+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},u=function(r){var i=t+"|\\w+|"+e+"|"+n+"|"+o+"|"+a;return"^"+r+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+i+")\\s*\\,\\s*("+i+")\\)$"};i.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizes:{number:!0,multiple:!0},bgSize:{number:!0,min:0,allowPercent:!0},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"]},bgPos:{number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},bgFit:{enums:["none","contain","cover"]},bgCrossOrigin:{enums:["anonymous","use-credentials"]},bgClip:{enums:["none","node"]},color:{color:!0},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap"]},textBackgroundShape:{enums:["rectangle","roundrectangle"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon","star","diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-backcurve","half-triangle-overshot","vee","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:s("data")},layoutData:{mapping:!0,regex:s("layoutData")},scratch:{mapping:!0,regex:s("scratch")},mapData:{mapping:!0,regex:u("mapData")},mapLayoutData:{mapping:!0,regex:u("mapLayoutData")},mapScratch:{mapping:!0,regex:u("mapScratch")},fn:{mapping:!0,fn:!0},url:{regex:"url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)|none|(.+)$"},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]}};var c=i.types,l=i.properties=[{name:"label",type:c.text},{name:"text-rotation",type:c.textRotation},{name:"text-margin-x",type:c.bidirectionalSize},{name:"text-margin-y",type:c.bidirectionalSize},{name:"source-label",type:c.text},{name:"source-text-rotation",type:c.textRotation},{name:"source-text-margin-x",type:c.bidirectionalSize},{name:"source-text-margin-y",type:c.bidirectionalSize},{name:"source-text-offset",type:c.size},{name:"target-label",type:c.text},{name:"target-text-rotation",type:c.textRotation},{name:"target-text-margin-x",type:c.bidirectionalSize},{name:"target-text-margin-y",type:c.bidirectionalSize},{name:"target-text-offset",type:c.size},{name:"text-valign",type:c.valign},{name:"text-halign",type:c.halign},{name:"color",type:c.color},{name:"text-outline-color",type:c.color},{name:"text-outline-width",type:c.size},{name:"text-outline-opacity",type:c.zeroOneNumber},{name:"text-opacity",type:c.zeroOneNumber},{name:"text-background-color",type:c.color},{name:"text-background-margin",type:c.size},{name:"text-background-opacity",type:c.zeroOneNumber},{name:"text-border-opacity",type:c.zeroOneNumber},{name:"text-border-color",type:c.color},{name:"text-border-width",type:c.size},{name:"text-border-style",type:c.borderStyle},{name:"text-background-shape",type:c.textBackgroundShape},{name:"text-transform",type:c.textTransform},{name:"text-wrap",type:c.textWrap},{name:"text-max-width",type:c.size},{name:"text-events",type:c.bool},{name:"font-family",type:c.fontFamily},{name:"font-style",type:c.fontStyle},{name:"font-weight",type:c.fontWeight},{name:"font-size",type:c.size},{name:"min-zoomed-font-size",type:c.size},{name:"events",type:c.bool},{name:"display",type:c.display},{name:"visibility",type:c.visibility},{name:"opacity",type:c.zeroOneNumber},{name:"z-index",type:c.nonNegativeInt},{name:"overlay-padding",type:c.size},{name:"overlay-color",type:c.color},{name:"overlay-opacity",type:c.zeroOneNumber},{name:"shadow-blur",type:c.size},{name:"shadow-color",type:c.color},{name:"shadow-opacity",type:c.zeroOneNumber},{name:"shadow-offset-x",type:c.bidirectionalSize},{name:"shadow-offset-y",type:c.bidirectionalSize},{name:"text-shadow-blur",type:c.size},{name:"text-shadow-color",type:c.color},{name:"text-shadow-opacity",type:c.zeroOneNumber},{name:"text-shadow-offset-x",type:c.bidirectionalSize},{name:"text-shadow-offset-y",type:c.bidirectionalSize},{name:"transition-property",type:c.propList},{name:"transition-duration",type:c.time},{name:"transition-delay",type:c.time},{name:"transition-timing-function",type:c.easing},{name:"height",type:c.nodeSize},{name:"width",type:c.nodeSize},{name:"shape",type:c.nodeShape},{name:"shape-polygon-points",type:c.polygonPointList},{name:"background-color",type:c.color},{name:"background-opacity",type:c.zeroOneNumber},{name:"background-blacken",type:c.nOneOneNumber},{name:"padding",type:c.size},{name:"border-color",type:c.color},{name:"border-opacity",type:c.zeroOneNumber},{name:"border-width",type:c.size},{name:"border-style",type:c.borderStyle},{name:"background-image",type:c.url},{name:"background-image-crossorigin",type:c.bgCrossOrigin},{name:"background-image-opacity",type:c.zeroOneNumber},{name:"background-position-x",type:c.bgPos},{name:"background-position-y",type:c.bgPos},{name:"background-repeat",type:c.bgRepeat},{name:"background-fit",type:c.bgFit},{name:"background-clip",type:c.bgClip},{name:"background-width",type:c.bgWH},{name:"background-height",type:c.bgWH},{name:"position",type:c.position},{name:"compound-sizing-wrt-labels",type:c.compoundIncludeLabels},{name:"line-style",type:c.lineStyle},{name:"line-color",type:c.color},{name:"curve-style",type:c.curveStyle},{name:"haystack-radius",type:c.zeroOneNumber},{name:"control-point-step-size",type:c.size},{name:"control-point-distances",type:c.bidirectionalSizes},{name:"control-point-weights",type:c.numbers},{name:"segment-distances",type:c.bidirectionalSizes},{name:"segment-weights",type:c.numbers},{name:"edge-distances",type:c.edgeDistances},{name:"selection-box-color",type:c.color},{name:"selection-box-opacity",type:c.zeroOneNumber},{name:"selection-box-border-color",type:c.color},{name:"selection-box-border-width",type:c.size},{name:"active-bg-color",type:c.color},{name:"active-bg-opacity",type:c.zeroOneNumber},{name:"active-bg-size",type:c.size},{name:"outside-texture-bg-color",type:c.color},{name:"outside-texture-bg-opacity",type:c.zeroOneNumber}],h=i.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];i.pieBackgroundN=16,l.push({name:"pie-size",type:c.bgSize});for(var f=1;f<=i.pieBackgroundN;f++)l.push({name:"pie-"+f+"-background-color",type:c.color}),l.push({name:"pie-"+f+"-background-size",type:c.percent}),l.push({name:"pie-"+f+"-background-opacity",type:c.zeroOneNumber});var d=i.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:c.arrowShape},{name:"arrow-color",type:c.color},{name:"arrow-fill",type:c.arrowFill}].forEach(function(t){d.forEach(function(e){var n=e+"-"+t.name,r=t.type;l.push({name:n,type:r})})},{}),i.propertyNames=l.map(function(t){return t.name});for(var f=0;f<l.length;f++){var p=l[f];l[p.name]=p}for(var f=0;f<h.length;f++){var g=h[f],v=l[g.pointsTo],y={name:g.name,alias:!0,pointsTo:v};l.push(y),l[g.name]=y}}(),i.getDefaultProperty=function(t){return this.getDefaultProperties()[t]},i.getDefaultProperties=r.memoize(function(){for(var t=r.extend({events:"yes","text-events":"no","text-valign":"top","text-halign":"center",color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-margin":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","text-background-shape":"rectangle","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"shadow-opacity":0,"shadow-color":"#000","shadow-blur":10,"shadow-offset-x":0,"shadow-offset-y":0,"text-shadow-opacity":0,"text-shadow-color":"#000","text-shadow-blur":5,"text-shadow-offset-x":0,"text-shadow-offset-y":0,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1",padding:0,position:"origin","compound-sizing-wrt-labels":"include"},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(t,e){for(var n=1;n<=i.pieBackgroundN;n++){var r=e.name.replace("{{i}}",n),o=e.value;t[r]=o}return t},{}),{"line-style":"solid","line-color":"#999","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"edge-distances":"intersection","curve-style":"bezier","haystack-radius":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(t,e){return i.arrowPrefixes.forEach(function(n){var r=n+"-"+e.name,i=e.value;t[r]=i}),t},{})),e={},n=0;n<this.properties.length;n++){var o=this.properties[n];if(!o.pointsTo){var a=o.name,s=t[a],u=this.parse(a,s);e[a]=u}}return e}),i.addDefaultStylesheet=function(){this.selector("$node > node").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3,"curve-style":"haystack"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector("node:parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125}),this.defaultLength=this.length},e.exports=i},{"../util":142}],138:[function(t,e,n){"use strict";var r=t("../util"),i=t("../selector"),o={};o.applyFromString=function(t){function e(){l=l.length>o.length?l.substr(o.length):""}function n(){a=a.length>s.length?a.substr(s.length):""}var o,a,s,u=this,c=this,l=""+t;for(l=l.replace(/[\/][*](\s|.)+?[*][\/]/g,"");;){var h=l.match(/^\s*$/);if(h)break;var f=l.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!f){r.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+l);break}o=f[0];var d=f[1];if("core"!==d){if(new i(d)._private.invalid){r.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+d),e();continue}}var p=f[2],g=!1;a=p;for(var v=[];;){var h=a.match(/^\s*$/);if(h)break;var y=a.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!y){r.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+p),g=!0;break}s=y[0];var m=y[1],x=y[2],b=u.properties[m];if(b){c.parse(m,x)?(v.push({name:m,val:x}),n()):(r.error("Skipping property: Invalid property definition in: "+s),n())}else r.error("Skipping property: Invalid property name in: "+s),n()}if(g){e();break}c.selector(d);for(var w=0;w<v.length;w++){var b=v[w];c.css(b.name,b.val)}e()}return c},o.fromString=function(t){var e=this;return e.resetToDefault(),e.applyFromString(t),e},e.exports=o},{"../selector":129,"../util":142}],139:[function(t,e,n){"use strict";var r=t("./is"),i=t("./util"),o=t("./style"),a=function(){if(!(this instanceof a))return new a;this.length=0},s=a.prototype;s.instanceString=function(){return"stylesheet"},s.selector=function(t){return this[this.length++]={selector:t,properties:[]},this},s.css=function(t,e){var n=this.length-1;if(r.string(t))this[n].properties.push({name:t,value:e});else if(r.plainObject(t))for(var a=t,s=0;s<o.properties.length;s++){var u=o.properties[s],c=a[u.name];if(void 0===c&&(c=a[i.dash2camel(u.name)]),void 0!==c){var t=u.name,e=c;this[n].properties.push({name:t,value:e})}}return this},s.style=s.css,s.generateStyle=function(t){for(var e=new o(t),n=0;n<this.length;n++){var r=this[n],i=r.selector,a=r.properties;e.selector(i);for(var s=0;s<a.length;s++){var u=a[s];e.css(u.name,u.value)}}return e},e.exports=a},{"./is":125,"./style":134,"./util":142}],140:[function(require,module,exports){(function(__dirname){"use strict";var window=require("./window"),util=require("./util"),Promise=require("./promise"),Event=require("./event"),define=require("./define"),is=require("./is"),Thread=function(t){if(!(this instanceof Thread))return new Thread(t);var e=this._private={requires:[],files:[],queue:null,pass:[],disabled:!1};is.plainObject(t)&&null!=t.disabled&&(e.disabled=!!t.disabled)},thdfn=Thread.prototype,stringifyFieldVal=function(t){return is.fn(t)?t.toString():"JSON.parse('"+JSON.stringify(t)+"')"},fnAsRequire=function(t){var e,n;is.object(t)&&t.fn?(e=fnAs(t.fn,t.name),n=t.name,t=t.fn):is.fn(t)?(e=t.toString(),n=t.name):is.string(t)?e=t:is.object(t)&&(e=t.proto?"":t.name+" = {};",n=t.name,t=t.obj),e+="\n";var r=function(t,n){if(t.prototype){var r=!1;for(var i in t.prototype){r=!0;break}r&&(e+=fnAsRequire({name:n,obj:t,proto:!0}))}};if(t.prototype&&null!=n)for(var i in t.prototype){var o="",a=t.prototype[i],s=stringifyFieldVal(a),u=n+".prototype."+i;o+=u+" = "+s+";\n",o&&(e+=o),r(a,u)}if(!is.string(t))for(var i in t){var c="";if(t.hasOwnProperty(i)){var a=t[i],s=stringifyFieldVal(a),u=n+'["'+i+'"]';c+=u+" = "+s+";\n"}c&&(e+=c),r(a,u)}return e},isPathStr=function(t){return is.string(t)&&t.match(/\.js$/)};util.extend(thdfn,{instanceString:function(){return"thread"},require:function(t,e){var n=this._private.requires;if(isPathStr(t))return this._private.files.push(t),this;if(e)t=is.fn(t)?{name:e,fn:t}:{name:e,obj:t};else if(is.fn(t)){if(!t.name)throw'The function name could not be automatically determined.  Use thread.require( someFunction, "someFunction" )';t={name:t.name,fn:t}}return n.push(t),this},pass:function(t){return this._private.pass.push(t),this},run:function(fn,pass){var self=this,_p=this._private;if(pass=pass||_p.pass.shift(),_p.stopped)throw"Attempted to run a stopped thread!  Start a new thread or do not stop the existing thread and reuse it.";if(_p.running)return _p.queue=_p.queue.then(function(){return self.run(fn,pass)});var useWW=null!=window&&!_p.disabled,useNode=!window&&void 0!==module&&!_p.disabled;self.trigger("run");var runP=new Promise(function(resolve,reject){_p.running=!0;var threadTechAlreadyExists=_p.ran,fnImplStr=is.string(fn)?fn:fn.toString(),fnStr="\n"+_p.requires.map(function(t){return fnAsRequire(t)}).concat(_p.files.map(function(t){if(useWW){return'importScripts("'+function(t){return t.match(/^\.\//)||t.match(/^\.\./)?window.location.origin+window.location.pathname+t:t.match(/^\//)?window.location.origin+"/"+t:t}(t)+'");'}if(useNode)return'eval( require("fs").readFileSync("'+t+'", { encoding: "utf8" }) );';throw"External file `"+t+"` can not be required without any threading technology."})).concat(["( function(){","var ret = ("+fnImplStr+")("+JSON.stringify(pass)+");","if( ret !== undefined ){ resolve(ret); }","} )()\n"]).join("\n");if(_p.requires=[],_p.files=[],useWW){var fnBlob,fnUrl;if(!threadTechAlreadyExists){var fnPre=fnStr+"";fnStr=["function _ref_(o){ return eval(o); };","function broadcast(m){ return message(m); };","function message(m){ postMessage(m); };","function listen(fn){",'  self.addEventListener("message", function(m){ ','    if( typeof m === "object" && (m.data.$$eval || m.data === "$$start") ){',"    } else { ","      fn( m.data );","    }","  });","};",'self.addEventListener("message", function(m){  if( m.data.$$eval ){ eval( m.data.$$eval ); }  });',"function resolve(v){ postMessage({ $$resolve: v }); };","function reject(v){ postMessage({ $$reject: v }); };"].join("\n"),fnStr+=fnPre,fnBlob=new Blob([fnStr],{type:"application/javascript"}),fnUrl=window.URL.createObjectURL(fnBlob)}var ww=_p.webworker=_p.webworker||new Worker(fnUrl);threadTechAlreadyExists&&ww.postMessage({$$eval:fnStr});var cb;ww.addEventListener("message",cb=function(t){var e=is.object(t)&&is.object(t.data);e&&"$$resolve"in t.data?(ww.removeEventListener("message",cb),resolve(t.data.$$resolve)):e&&"$$reject"in t.data?(ww.removeEventListener("message",cb),reject(t.data.$$reject)):self.trigger(new Event(t,{type:"message",message:t.data}))},!1),threadTechAlreadyExists||ww.postMessage("$$start")}else if(useNode){_p.child||(_p.child=require("child_process").fork(require("path").join(__dirname,"thread-node-fork")));var child=_p.child,cb;child.on("message",cb=function(t){is.object(t)&&"$$resolve"in t?(child.removeListener("message",cb),resolve(t.$$resolve)):is.object(t)&&"$$reject"in t?(child.removeListener("message",cb),reject(t.$$reject)):self.trigger(new Event({},{type:"message",message:t}))}),child.send({$$eval:fnStr})}else{var promiseResolve=resolve,promiseReject=reject,timer=_p.timer=_p.timer||{listeners:[],exec:function(){fnStr=["function _ref_(o){ return eval(o); };","function broadcast(m){ return message(m); };",'function message(m){ self.trigger( new Event({}, { type: "message", message: m }) ); };',"function listen(fn){ timer.listeners.push( fn ); };","function resolve(v){ promiseResolve(v); };","function reject(v){ promiseReject(v); };"].join("\n")+fnStr,eval(fnStr)},message:function(t){for(var e=timer.listeners,n=0;n<e.length;n++){(0,e[n])(t)}}};timer.exec()}}).then(function(t){return _p.running=!1,_p.ran=!0,self.trigger("ran"),t});return null==_p.queue&&(_p.queue=runP),runP},message:function(t){var e=this._private;return e.webworker&&e.webworker.postMessage(t),e.child&&e.child.send(t),e.timer&&e.timer.message(t),this},stop:function(){var t=this._private;return t.webworker&&t.webworker.terminate(),t.child&&t.child.kill(),t.timer,t.stopped=!0,this.trigger("stop")},stopped:function(){return this._private.stopped}});var fnAs=function(t,e){var n=t.toString();return n=n.replace(/function\s*?\S*?\s*?\(/,"function "+e+"(")},defineFnal=function(t){return t=t||{},function(e,n){var r=fnAs(e,"_$_$_"+t.name);return this.require(r),this.run(["function( data ){","  var origResolve = resolve;","  var res = [];","  ","  resolve = function( val ){","    res.push( val );","  };","  ","  var ret = data."+t.name+"( _$_$_"+t.name+(arguments.length>1?", "+JSON.stringify(n):"")+" );","  ","  resolve = origResolve;","  resolve( res.length > 0 ? res : ret );","}"].join("\n"))}};util.extend(thdfn,{reduce:defineFnal({name:"reduce"}),reduceRight:defineFnal({name:"reduceRight"}),map:defineFnal({name:"map"})});var fn=thdfn;fn.promise=fn.run,fn.terminate=fn.halt=fn.stop,fn.include=fn.require,util.extend(thdfn,{on:define.on(),one:define.on({unbindSelfOnTrigger:!0}),off:define.off(),trigger:define.trigger()}),define.eventAliasesOn(thdfn),module.exports=Thread}).call(this,"/node_modules/cytoscape/src")},{"./define":86,"./event":87,"./is":125,"./promise":128,"./util":142,"./window":149,child_process:2,path:202}],141:[function(t,e,n){"use strict";var r=t("../is");e.exports={hex2tuple:function(t){if((4===t.length||7===t.length)&&"#"===t[0]){var e,n,r,i=4===t.length;return i?(e=parseInt(t[1]+t[1],16),n=parseInt(t[2]+t[2],16),r=parseInt(t[3]+t[3],16)):(e=parseInt(t[1]+t[2],16),n=parseInt(t[3]+t[4],16),r=parseInt(t[5]+t[6],16)),[e,n,r]}},hsl2tuple:function(t){function e(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var n,r,i,o,a,s,u,c,l=new RegExp("^"+this.regex.hsla+"$").exec(t);if(l){if(r=parseInt(l[1]),r<0?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,(i=parseFloat(l[2]))<0||i>100)return;if(i/=100,(o=parseFloat(l[3]))<0||o>100)return;if(o/=100,void 0!==(a=l[4])&&((a=parseFloat(a))<0||a>1))return;if(0===i)s=u=c=Math.round(255*o);else{var h=o<.5?o*(1+i):o+i-o*i,f=2*o-h;s=Math.round(255*e(f,h,r+1/3)),u=Math.round(255*e(f,h,r)),c=Math.round(255*e(f,h,r-1/3))}n=[s,u,c,a]}return n},rgb2tuple:function(t){var e,n=new RegExp("^"+this.regex.rgba+"$").exec(t);if(n){e=[];for(var r=[],i=1;i<=3;i++){var o=n[i];if("%"===o[o.length-1]&&(r[i]=!0),o=parseFloat(o),r[i]&&(o=o/100*255),o<0||o>255)return;e.push(Math.floor(o))}var a=r[1]||r[2]||r[3],s=r[1]&&r[2]&&r[3];if(a&&!s)return;var u=n[4];if(void 0!==u){if((u=parseFloat(u))<0||u>1)return;e.push(u)}}return e},colorname2tuple:function(t){return this.colors[t.toLowerCase()]},color2tuple:function(t){return(r.array(t)?t:null)||this.colorname2tuple(t)||this.hex2tuple(t)||this.rgb2tuple(t)||this.hsl2tuple(t)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}},{"../is":125}],142:[function(t,e,n){"use strict";var r=t("../is"),i=t("../math"),o={trueify:function(){return!0},falsify:function(){return!1},zeroify:function(){return 0},noop:function(){},error:function(t){console.error?(console.error.apply(console,arguments),console.trace&&console.trace()):(console.log.apply(console,arguments),console.trace&&console.trace())},clone:function(t){return this.extend({},t)},copy:function(t){return null==t?t:r.array(t)?t.slice():r.plainObject(t)?this.clone(t):t},uuid:function(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e}};o.makeBoundingBox=i.makeBoundingBox.bind(i),o._staticEmptyObject={},o.staticEmptyObject=function(){return o._staticEmptyObject},o.extend=null!=Object.assign?Object.assign:function(t){for(var e=arguments,n=1;n<e.length;n++){var r=e[n];if(r)for(var i=Object.keys(r),o=0;o<i.length;o++){var a=i[o];t[a]=r[a]}}return t},o.default=function(t,e){return void 0===t?e:t},o.removeFromArray=function(t,e,n){for(var r=t.length;r>=0&&(t[r]!==e||(t.splice(r,1),n));r--);},o.clearArray=function(t){t.splice(0,t.length)},o.getPrefixedProperty=function(t,e,n){return n&&(e=this.prependCamel(n,e)),t[e]},o.setPrefixedProperty=function(t,e,n,r){n&&(e=this.prependCamel(n,e)),t[e]=r},[t("./colors"),t("./maps"),{memoize:t("./memoize")},t("./regex"),t("./strings"),t("./timing")].forEach(function(t){o.extend(o,t)}),e.exports=o},{"../is":125,"../math":127,"./colors":141,"./maps":143,"./memoize":144,"./regex":145,"./strings":146,"./timing":147}],143:[function(t,e,n){"use strict";var r=t("../is");e.exports={mapEmpty:function(t){return null==t||0===Object.keys(t).length},pushMap:function(t){var e=this.getMap(t);null==e?this.setMap(this.extend({},t,{value:[t.value]})):e.push(t.value)},setMap:function(t){for(var e,n=t.map,i=t.keys,o=i.length,a=0;a<o;a++){var e=i[a];r.plainObject(e)&&this.error("Tried to set map with object key"),a<i.length-1?(null==n[e]&&(n[e]={}),n=n[e]):n[e]=t.value}},getMap:function(t){for(var e=t.map,n=t.keys,i=n.length,o=0;o<i;o++){var a=n[o];if(r.plainObject(a)&&this.error("Tried to get map with object key"),null==(e=e[a]))return e}return e},deleteMap:function(t){for(var e=t.map,n=t.keys,i=n.length,o=t.keepChildren,a=0;a<i;a++){var s=n[a];r.plainObject(s)&&this.error("Tried to delete map with object key");if(a===t.keys.length-1)if(o)for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];o[l]||(e[l]=void 0)}else e[s]=void 0;else e=e[s]}}}},{"../is":125}],144:[function(t,e,n){"use strict";e.exports=function(t,e){e||(e=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);return t.join("$")});var n=function(){var r,i=this,o=arguments,a=e.apply(i,o),s=n.cache;return(r=s[a])||(r=s[a]=t.apply(i,o)),r};return n.cache={},n}},{}],145:[function(t,e,n){"use strict";var r="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))";e.exports={regex:{number:r,rgba:"rgb[a]?\\(("+r+"[%]?)\\s*,\\s*("+r+"[%]?)\\s*,\\s*("+r+"[%]?)(?:\\s*,\\s*("+r+"))?\\)",rgbaNoBackRefs:"rgb[a]?\\((?:"+r+"[%]?)\\s*,\\s*(?:"+r+"[%]?)\\s*,\\s*(?:"+r+"[%]?)(?:\\s*,\\s*(?:"+r+"))?\\)",hsla:"hsl[a]?\\(("+r+")\\s*,\\s*("+r+"[%])\\s*,\\s*("+r+"[%])(?:\\s*,\\s*("+r+"))?\\)",hslaNoBackRefs:"hsl[a]?\\((?:"+r+")\\s*,\\s*(?:"+r+"[%])\\s*,\\s*(?:"+r+"[%])(?:\\s*,\\s*(?:"+r+"))?\\)",hex3:"\\#[0-9a-fA-F]{3}",hex6:"\\#[0-9a-fA-F]{6}"}}},{}],146:[function(t,e,n){"use strict";var r=t("./memoize"),i=t("../is");e.exports={camel2dash:r(function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}),dash2camel:r(function(t){return t.replace(/(-\w)/g,function(t){return t[1].toUpperCase()})}),prependCamel:r(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),capitalize:function(t){return i.emptyString(t)?t:t.charAt(0).toUpperCase()+t.substring(1)}}},{"../is":125,"./memoize":144}],147:[function(t,e,n){"use strict";var r=t("../window"),i=t("../is"),o=r?r.performance:null,a={},s=r?function(){return r.requestAnimationFrame?function(t){r.requestAnimationFrame(t)}:r.mozRequestAnimationFrame?function(t){r.mozRequestAnimationFrame(t)}:r.webkitRequestAnimationFrame?function(t){r.webkitRequestAnimationFrame(t)}:r.msRequestAnimationFrame?function(t){r.msRequestAnimationFrame(t)}:void 0}():function(t){t&&setTimeout(function(){t(u())},1e3/60)};a.requestAnimationFrame=function(t){s(t)};var u=o&&o.now?function(){return o.now()}:function(){return Date.now()};a.performanceNow=u,a.throttle=function(t,e,n){var r=!0,o=!0;return n===!1?r=!1:i.plainObject(n)&&(r="leading"in n?n.leading:r,o="trailing"in n?n.trailing:o),n=n||{},n.leading=r,n.maxWait=e,n.trailing=o,a.debounce(t,e,n)},a.now=function(){return Date.now()},a.debounce=function(t,e,n){var r,o,a,s,u,c,l,h=this,f=0,d=!1,p=!0;if(i.fn(t)){if(e=Math.max(0,e)||0,n===!0){var g=!0;p=!1
}else i.plainObject(n)&&(g=n.leading,d="maxWait"in n&&(Math.max(e,n.maxWait)||0),p="trailing"in n?n.trailing:p);var v=function(){var n=e-(h.now()-s);if(n<=0){o&&clearTimeout(o);var i=l;o=c=l=void 0,i&&(f=h.now(),a=t.apply(u,r),c||o||(r=u=null))}else c=setTimeout(v,n)},y=function(){c&&clearTimeout(c),o=c=l=void 0,(p||d!==e)&&(f=h.now(),a=t.apply(u,r),c||o||(r=u=null))};return function(){if(r=arguments,s=h.now(),u=this,l=p&&(c||!g),d===!1)var n=g&&!c;else{o||g||(f=s);var i=d-(s-f),m=i<=0;m?(o&&(o=clearTimeout(o)),f=s,a=t.apply(u,r)):o||(o=setTimeout(y,i))}return m&&c?c=clearTimeout(c):c||e===d||(c=setTimeout(v,e)),n&&(m=!0,a=t.apply(u,r)),!m||c||o||(r=u=null),a}}},e.exports=a},{"../is":125,"../window":149}],148:[function(t,e,n){e.exports="2.7.15"},{}],149:[function(t,e,n){e.exports="undefined"==typeof window?null:window},{}],150:[function(t,e,n){e.exports={graphlib:t("./lib/graphlib"),layout:t("./lib/layout"),debug:t("./lib/debug"),util:{time:t("./lib/util").time,notime:t("./lib/util").notime},version:t("./lib/version")}},{"./lib/debug":155,"./lib/graphlib":156,"./lib/layout":158,"./lib/util":178,"./lib/version":179}],151:[function(t,e,n){"use strict";function r(t){var e="greedy"===t.graph().acyclicer?s(t,function(t){return function(e){return t.edge(e).weight}}(t)):i(t);a.each(e,function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,a.uniqueId("rev"))})}function i(t){function e(o){a.has(i,o)||(i[o]=!0,r[o]=!0,a.each(t.outEdges(o),function(t){a.has(r,t.w)?n.push(t):e(t.w)}),delete r[o])}var n=[],r={},i={};return a.each(t.nodes(),e),n}function o(t){a.each(t.edges(),function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}var a=t("./lodash"),s=t("./greedy-fas");e.exports={run:r,undo:o}},{"./greedy-fas":157,"./lodash":159}],152:[function(t,e,n){function r(t){function e(n){var r=t.children(n),a=t.node(n);if(r.length&&o.each(r,e),o.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var s=a.minRank,u=a.maxRank+1;s<u;++s)i(t,"borderLeft","_bl",n,a,s),i(t,"borderRight","_br",n,a,s)}}o.each(t.children(),e)}function i(t,e,n,r,i,o){var s={width:0,height:0,rank:o,borderType:e},u=i[e][o-1],c=a.addDummyNode(t,"border",s,n);i[e][o]=c,t.setParent(c,r),u&&t.setEdge(u,c,{weight:1})}var o=t("./lodash"),a=t("./util");e.exports=r},{"./lodash":159,"./util":178}],153:[function(t,e,n){"use strict";function r(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||o(t)}function i(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||s(t),"lr"!==e&&"rl"!==e||(c(t),o(t))}function o(t){h.each(t.nodes(),function(e){a(t.node(e))}),h.each(t.edges(),function(e){a(t.edge(e))})}function a(t){var e=t.width;t.width=t.height,t.height=e}function s(t){h.each(t.nodes(),function(e){u(t.node(e))}),h.each(t.edges(),function(e){var n=t.edge(e);h.each(n.points,u),h.has(n,"y")&&u(n)})}function u(t){t.y=-t.y}function c(t){h.each(t.nodes(),function(e){l(t.node(e))}),h.each(t.edges(),function(e){var n=t.edge(e);h.each(n.points,l),h.has(n,"x")&&l(n)})}function l(t){var e=t.x;t.x=t.y,t.y=e}var h=t("./lodash");e.exports={adjust:r,undo:i}},{"./lodash":159}],154:[function(t,e,n){function r(){var t={};t._next=t._prev=t,this._sentinel=t}function i(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function o(t,e){if("_next"!==t&&"_prev"!==t)return e}e.exports=r,r.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return i(e),e},r.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&i(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},r.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,o)),n=n._prev;return"["+t.join(", ")+"]"}},{}],155:[function(t,e,n){function r(t){var e=o.buildLayerMatrix(t),n=new a({compound:!0,multigraph:!0}).setGraph({});return i.each(t.nodes(),function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),i.each(t.edges(),function(t){n.setEdge(t.v,t.w,{},t.name)}),i.each(e,function(t,e){var r="layer"+e;n.setNode(r,{rank:"same"}),i.reduce(t,function(t,e){return n.setEdge(t,e,{style:"invis"}),e})}),n}var i=t("./lodash"),o=t("./util"),a=t("./graphlib").Graph;e.exports={debugOrdering:r}},{"./graphlib":156,"./lodash":159,"./util":178}],156:[function(t,e,n){var r;if("function"==typeof t)try{r=t("graphlib")}catch(t){}r||(r=window.graphlib),e.exports=r},{graphlib:180}],157:[function(t,e,n){function r(t,e){if(t.nodeCount()<=1)return[];var n=a(t,e||h),r=i(n.graph,n.buckets,n.zeroIdx);return u.flatten(u.map(r,function(e){return t.outEdges(e.v,e.w)}),!0)}function i(t,e,n){for(var r,i=[],a=e[e.length-1],s=e[0];t.nodeCount();){for(;r=s.dequeue();)o(t,e,n,r);for(;r=a.dequeue();)o(t,e,n,r);if(t.nodeCount())for(var u=e.length-2;u>0;--u)if(r=e[u].dequeue()){i=i.concat(o(t,e,n,r,!0));break}}return i}function o(t,e,n,r,i){var o=i?[]:void 0;return u.each(t.inEdges(r.v),function(r){var a=t.edge(r),u=t.node(r.v);i&&o.push({v:r.v,w:r.w}),u.out-=a,s(e,n,u)}),u.each(t.outEdges(r.v),function(r){var i=t.edge(r),o=r.w,a=t.node(o);a.in-=i,s(e,n,a)}),t.removeNode(r.v),o}function a(t,e){var n=new c,r=0,i=0;u.each(t.nodes(),function(t){n.setNode(t,{v:t,in:0,out:0})}),u.each(t.edges(),function(t){var o=n.edge(t.v,t.w)||0,a=e(t),s=o+a;n.setEdge(t.v,t.w,s),i=Math.max(i,n.node(t.v).out+=a),r=Math.max(r,n.node(t.w).in+=a)});var o=u.range(i+r+3).map(function(){return new l}),a=r+1;return u.each(n.nodes(),function(t){s(o,a,n.node(t))}),{graph:n,buckets:o,zeroIdx:a}}function s(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}var u=t("./lodash"),c=t("./graphlib").Graph,l=t("./data/list");e.exports=r;var h=u.constant(1)},{"./data/list":154,"./graphlib":156,"./lodash":159}],158:[function(t,e,n){"use strict";function r(t,e){var n=e&&e.debugTiming?I.time:I.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return a(t)});n("  runLayout",function(){i(e,n)}),n("  updateInputGraph",function(){o(t,e)})})}function i(t,e){e("    makeSpaceForEdgeLabels",function(){s(t)}),e("    removeSelfEdges",function(){v(t)}),e("    acyclic",function(){_.run(t)}),e("    nestingGraph.run",function(){T.run(t)}),e("    rank",function(){k(I.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){u(t)}),e("    removeEmptyRanks",function(){S(t)}),e("    nestingGraph.cleanup",function(){T.cleanup(t)}),e("    normalizeRanks",function(){N(t)}),e("    assignRankMinMax",function(){c(t)}),e("    removeEdgeLabelProxies",function(){l(t)}),e("    normalize.run",function(){E.run(t)}),e("    parentDummyChains",function(){L(t)}),e("    addBorderSegments",function(){A(t)}),e("    order",function(){M(t)}),e("    insertSelfEdges",function(){y(t)}),e("    adjustCoordinateSystem",function(){D.adjust(t)}),e("    position",function(){P(t)}),e("    positionSelfEdges",function(){m(t)}),e("    removeBorderNodes",function(){g(t)}),e("    normalize.undo",function(){E.undo(t)}),e("    fixupEdgeLabelCoords",function(){d(t)}),e("    undoCoordinateSystem",function(){D.undo(t)}),e("    translateGraph",function(){h(t)}),e("    assignNodeIntersects",function(){f(t)}),e("    reversePoints",function(){p(t)}),e("    acyclic.undo",function(){_.undo(t)})}function o(t,e){w.each(t.nodes(),function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))}),w.each(t.edges(),function(n){var r=t.edge(n),i=e.edge(n);r.points=i.points,w.has(i,"x")&&(r.x=i.x,r.y=i.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}function a(t){var e=new C({multigraph:!0,compound:!0}),n=b(t.graph());return e.setGraph(w.merge({},R,x(n,O),w.pick(n,B))),w.each(t.nodes(),function(n){var r=b(t.node(n));e.setNode(n,w.defaults(x(r,F),z)),e.setParent(n,t.parent(n))}),w.each(t.edges(),function(n){var r=b(t.edge(n));e.setEdge(n,w.merge({},V,x(r,j),w.pick(r,G)))}),e}function s(t){var e=t.graph();e.ranksep/=2,w.each(t.edges(),function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function u(t){w.each(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i=t.node(e.w),o={rank:(i.rank-r.rank)/2+r.rank,e:e};I.addDummyNode(t,"edge-proxy",o,"_ep")}})}function c(t){var e=0;w.each(t.nodes(),function(n){var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=w.max(e,r.maxRank))}),t.graph().maxRank=e}function l(t){w.each(t.nodes(),function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}function h(t){function e(t){var e=t.x,a=t.y,s=t.width,u=t.height;n=Math.min(n,e-s/2),r=Math.max(r,e+s/2),i=Math.min(i,a-u/2),o=Math.max(o,a+u/2)}var n=Number.POSITIVE_INFINITY,r=0,i=Number.POSITIVE_INFINITY,o=0,a=t.graph(),s=a.marginx||0,u=a.marginy||0;w.each(t.nodes(),function(n){e(t.node(n))}),w.each(t.edges(),function(n){var r=t.edge(n);w.has(r,"x")&&e(r)}),n-=s,i-=u,w.each(t.nodes(),function(e){var r=t.node(e);r.x-=n,r.y-=i}),w.each(t.edges(),function(e){var r=t.edge(e);w.each(r.points,function(t){t.x-=n,t.y-=i}),w.has(r,"x")&&(r.x-=n),w.has(r,"y")&&(r.y-=i)}),a.width=r-n+s,a.height=o-i+u}function f(t){w.each(t.edges(),function(e){var n,r,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(I.intersectRect(o,n)),i.points.push(I.intersectRect(a,r))})}function d(t){w.each(t.edges(),function(e){var n=t.edge(e);if(w.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}function p(t){w.each(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}function g(t){w.each(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),o=t.node(w.last(n.borderLeft)),a=t.node(w.last(n.borderRight));n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),w.each(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}function v(t){w.each(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}function y(t){var e=I.buildLayerMatrix(t);w.each(e,function(e){var n=0;w.each(e,function(e,r){var i=t.node(e);i.order=r+n,w.each(i.selfEdges,function(e){I.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:r+ ++n,e:e.e,label:e.label},"_se")}),delete i.selfEdges})})}function m(t){w.each(t.nodes(),function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}function x(t,e){return w.mapValues(w.pick(t,e),Number)}function b(t){var e={};return w.each(t,function(t,n){e[n.toLowerCase()]=t}),e}var w=t("./lodash"),_=t("./acyclic"),E=t("./normalize"),k=t("./rank"),N=t("./util").normalizeRanks,L=t("./parent-dummy-chains"),S=t("./util").removeEmptyRanks,T=t("./nesting-graph"),A=t("./add-border-segments"),D=t("./coordinate-system"),M=t("./order"),P=t("./position"),I=t("./util"),C=t("./graphlib").Graph;e.exports=r;var O=["nodesep","edgesep","ranksep","marginx","marginy"],R={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},B=["acyclicer","ranker","rankdir","align"],F=["width","height"],z={width:0,height:0},j=["minlen","weight","width","height","labeloffset"],V={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},G=["labelpos"]},{"./acyclic":151,"./add-border-segments":152,"./coordinate-system":153,"./graphlib":156,"./lodash":159,"./nesting-graph":160,"./normalize":161,"./order":166,"./parent-dummy-chains":171,"./position":173,"./rank":175,"./util":178}],159:[function(t,e,n){var r;if("function"==typeof t)try{r=t("lodash")}catch(t){}r||(r=window._),e.exports=r},{lodash:200}],160:[function(t,e,n){function r(t){var e=c.addDummyNode(t,"root",{},"_root"),n=o(t),r=u.max(n)-1,s=2*r+1;t.graph().nestingRoot=e,u.each(t.edges(),function(e){t.edge(e).minlen*=s});var l=a(t)+1;u.each(t.children(),function(o){i(t,e,s,l,r,n,o)}),t.graph().nodeRankFactor=s}function i(t,e,n,r,o,a,s){var l=t.children(s);if(!l.length)return void(s!==e&&t.setEdge(e,s,{weight:0,minlen:n}));var h=c.addBorderNode(t,"_bt"),f=c.addBorderNode(t,"_bb"),d=t.node(s);t.setParent(h,s),d.borderTop=h,t.setParent(f,s),d.borderBottom=f,u.each(l,function(u){i(t,e,n,r,o,a,u);var c=t.node(u),l=c.borderTop?c.borderTop:u,d=c.borderBottom?c.borderBottom:u,p=c.borderTop?r:2*r,g=l!==d?1:o-a[s]+1;t.setEdge(h,l,{weight:p,minlen:g,nestingEdge:!0}),t.setEdge(d,f,{weight:p,minlen:g,nestingEdge:!0})}),t.parent(s)||t.setEdge(e,h,{weight:0,minlen:o+a[s]})}function o(t){function e(r,i){var o=t.children(r);o&&o.length&&u.each(o,function(t){e(t,i+1)}),n[r]=i}var n={};return u.each(t.children(),function(t){e(t,1)}),n}function a(t){return u.reduce(t.edges(),function(e,n){return e+t.edge(n).weight},0)}function s(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,u.each(t.edges(),function(e){t.edge(e).nestingEdge&&t.removeEdge(e)})}var u=t("./lodash"),c=t("./util");e.exports={run:r,cleanup:s}},{"./lodash":159,"./util":178}],161:[function(t,e,n){"use strict";function r(t){t.graph().dummyChains=[],a.each(t.edges(),function(e){i(t,e)})}function i(t,e){var n=e.v,r=t.node(n).rank,i=e.w,o=t.node(i).rank,a=e.name,u=t.edge(e),c=u.labelRank;if(o!==r+1){t.removeEdge(e);var l,h,f;for(f=0,++r;r<o;++f,++r)u.points=[],h={width:0,height:0,edgeLabel:u,edgeObj:e,rank:r},l=s.addDummyNode(t,"edge",h,"_d"),r===c&&(h.width=u.width,h.height=u.height,h.dummy="edge-label",h.labelpos=u.labelpos),t.setEdge(n,l,{weight:u.weight},a),0===f&&t.graph().dummyChains.push(l),n=l;t.setEdge(n,i,{weight:u.weight},a)}}function o(t){a.each(t.graph().dummyChains,function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)})}var a=t("./lodash"),s=t("./util");e.exports={run:r,undo:o}},{"./lodash":159,"./util":178}],162:[function(t,e,n){function r(t,e,n){var r,o={};i.each(n,function(n){for(var i,a,s=t.parent(n);s;){if(i=t.parent(s),i?(a=o[i],o[i]=s):(a=r,r=s),a&&a!==s)return void e.setEdge(a,s);s=i}})}var i=t("../lodash");e.exports=r},{"../lodash":159}],163:[function(t,e,n){function r(t,e){return i.map(e,function(e){var n=t.inEdges(e);if(n.length){var r=i.reduce(n,function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}},{sum:0,weight:0});return{v:e,barycenter:r.sum/r.weight,weight:r.weight}}return{v:e}})}var i=t("../lodash");e.exports=r},{"../lodash":159}],164:[function(t,e,n){function r(t,e,n){var r=i(t),s=new a({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(e){return t.node(e)});return o.each(t.nodes(),function(i){var a=t.node(i),u=t.parent(i);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(s.setNode(i),s.setParent(i,u||r),o.each(t[n](i),function(e){var n=e.v===i?e.w:e.v,r=s.edge(n,i),a=o.isUndefined(r)?0:r.weight;s.setEdge(n,i,{weight:t.edge(e).weight+a})}),o.has(a,"minRank")&&s.setNode(i,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))}),s}function i(t){for(var e;t.hasNode(e=o.uniqueId("_root")););return e}var o=t("../lodash"),a=t("../graphlib").Graph;e.exports=r},{"../graphlib":156,"../lodash":159}],165:[function(t,e,n){"use strict";function r(t,e){for(var n=0,r=1;r<e.length;++r)n+=i(t,e[r-1],e[r]);return n}function i(t,e,n){for(var r=o.zipObject(n,o.map(n,function(t,e){return e})),i=o.flatten(o.map(e,function(e){return o.chain(t.outEdges(e)).map(function(e){return{pos:r[e.w],weight:t.edge(e).weight}}).sortBy("pos").value()}),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var u=o.map(new Array(s),function(){return 0}),c=0;return o.each(i.forEach(function(t){var e=t.pos+a;u[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=u[e+1]),e=e-1>>1,u[e]+=t.weight;c+=t.weight*n})),c}var o=t("../lodash");e.exports=r},{"../lodash":159}],166:[function(t,e,n){"use strict";function r(t){var e=p.maxRank(t),n=i(t,s.range(1,e+1),"inEdges"),r=i(t,s.range(e-1,-1,-1),"outEdges"),l=u(t);a(t,l);for(var h,f=Number.POSITIVE_INFINITY,d=0,g=0;g<4;++d,++g){o(d%2?n:r,d%4>=2),l=p.buildLayerMatrix(t);var v=c(t,l);v<f&&(g=0,h=s.cloneDeep(l),f=v)}a(t,h)}function i(t,e,n){return s.map(e,function(e){return h(t,e,n)})}function o(t,e){var n=new d;s.each(t,function(t){var r=t.graph().root,i=l(t,r,n,e);s.each(i.vs,function(e,n){t.node(e).order=n}),f(t,n,i.vs)})}function a(t,e){s.each(e,function(e){s.each(e,function(e,n){t.node(e).order=n})})}var s=t("../lodash"),u=t("./init-order"),c=t("./cross-count"),l=t("./sort-subgraph"),h=t("./build-layer-graph"),f=t("./add-subgraph-constraints"),d=t("../graphlib").Graph,p=t("../util");e.exports=r},{"../graphlib":156,"../lodash":159,"../util":178,"./add-subgraph-constraints":162,"./build-layer-graph":164,"./cross-count":165,"./init-order":167,"./sort-subgraph":169}],167:[function(t,e,n){"use strict";function r(t){function e(r){if(!i.has(n,r)){n[r]=!0;a[t.node(r).rank].push(r),i.each(t.successors(r),e)}}var n={},r=i.filter(t.nodes(),function(e){return!t.children(e).length}),o=i.max(i.map(r,function(e){return t.node(e).rank})),a=i.map(i.range(o+1),function(){return[]}),s=i.sortBy(r,function(e){return t.node(e).rank});return i.each(s,e),a}var i=t("../lodash");e.exports=r},{"../lodash":159}],168:[function(t,e,n){"use strict";function r(t,e){var n={};return a.each(t,function(t,e){var r=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};a.isUndefined(t.barycenter)||(r.barycenter=t.barycenter,r.weight=t.weight)}),a.each(e.edges(),function(t){var e=n[t.v],r=n[t.w];a.isUndefined(e)||a.isUndefined(r)||(r.indegree++,e.out.push(n[t.w]))}),i(a.filter(n,function(t){return!t.indegree}))}function i(t){for(var e=[];t.length;){var n=t.pop();e.push(n),a.each(n.in.reverse(),function(t){return function(e){e.merged||(a.isUndefined(e.barycenter)||a.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&o(t,e)}}(n)),a.each(n.out,function(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}(n))}return a.chain(e).filter(function(t){return!t.merged}).map(function(t){return a.pick(t,["vs","i","barycenter","weight"])}).value()}function o(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}var a=t("../lodash");e.exports=r},{"../lodash":159}],169:[function(t,e,n){function r(t,e,n,l){var h=t.children(e),f=t.node(e),d=f?f.borderLeft:void 0,p=f?f.borderRight:void 0,g={};d&&(h=a.filter(h,function(t){return t!==d&&t!==p}));var v=s(t,h);a.each(v,function(e){if(t.children(e.v).length){var i=r(t,e.v,n,l);g[e.v]=i,a.has(i,"barycenter")&&o(e,i)}});var y=u(v,n);i(y,g);var m=c(y,l);if(d&&(m.vs=a.flatten([d,m.vs,p],!0),t.predecessors(d).length)){var x=t.node(t.predecessors(d)[0]),b=t.node(t.predecessors(p)[0]);a.has(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+x.order+b.order)/(m.weight+2),m.weight+=2}return m}function i(t,e){a.each(t,function(t){t.vs=a.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}function o(t,e){a.isUndefined(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}var a=t("../lodash"),s=t("./barycenter"),u=t("./resolve-conflicts"),c=t("./sort");e.exports=r},{"../lodash":159,"./barycenter":163,"./resolve-conflicts":168,"./sort":170}],170:[function(t,e,n){function r(t,e){var n=s.partition(t,function(t){return a.has(t,"barycenter")}),r=n.lhs,u=a.sortBy(n.rhs,function(t){return-t.i}),c=[],l=0,h=0,f=0;r.sort(o(!!e)),f=i(c,u,f),a.each(r,function(t){f+=t.vs.length,c.push(t.vs),l+=t.barycenter*t.weight,h+=t.weight,f=i(c,u,f)});var d={vs:a.flatten(c,!0)};return h&&(d.barycenter=l/h,d.weight=h),d}function i(t,e,n){for(var r;e.length&&(r=a.last(e)).i<=n;)e.pop(),t.push(r.vs),n++;return n}function o(t){return function(e,n){return e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}}var a=t("../lodash"),s=t("../util");e.exports=r},{"../lodash":159,"../util":178}],171:[function(t,e,n){function r(t){var e=o(t);a.each(t.graph().dummyChains,function(n){for(var r=t.node(n),o=r.edgeObj,a=i(t,e,o.v,o.w),s=a.path,u=a.lca,c=0,l=s[c],h=!0;n!==o.w;){if(r=t.node(n),h){for(;(l=s[c])!==u&&t.node(l).maxRank<r.rank;)c++;l===u&&(h=!1)}if(!h){for(;c<s.length-1&&t.node(l=s[c+1]).minRank<=r.rank;)c++;l=s[c]}t.setParent(n,l),n=t.successors(n)[0]}})}function i(t,e,n,r){var i,o,a=[],s=[],u=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),a.push(i)}while(i&&(e[i].low>u||c>e[i].lim));for(o=i,i=r;(i=t.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}function o(t){function e(i){var o=r;a.each(t.children(i),e),n[i]={low:o,lim:r++}}var n={},r=0;return a.each(t.children(),e),n}var a=t("./lodash");e.exports=r},{"./lodash":159}],172:[function(t,e,n){"use strict";function r(t,e){function n(e,n){var i=0,s=0,u=e.length,c=y.last(n);return y.each(n,function(e,l){var h=o(t,e),f=h?t.node(h).order:u;(h||e===c)&&(y.each(n.slice(s,l+1),function(e){y.each(t.predecessors(e),function(n){var o=t.node(n),s=o.order;!(s<i||f<s)||o.dummy&&t.node(e).dummy||a(r,n,e)})}),s=l+1,i=f)}),n}var r={};return y.reduce(e,n),r}function i(t,e){function n(e,n,r,o,s){var u;y.each(y.range(n,r),function(n){u=e[n],t.node(u).dummy&&y.each(t.predecessors(u),function(e){var n=t.node(e);n.dummy&&(n.order<o||n.order>s)&&a(i,e,u)})})}function r(e,r){var i,o=-1,a=0;return y.each(r,function(s,u){if("border"===t.node(s).dummy){var c=t.predecessors(s);c.length&&(i=t.node(c[0]).order,n(r,a,u,o,i),a=u,o=i)}n(r,a,r.length,i,e.length)}),r}var i={};return y.reduce(e,r),i}function o(t,e){if(t.node(e).dummy)return y.find(t.predecessors(e),function(e){return t.node(e).dummy})}function a(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function s(t,e,n){if(e>n){var r=e;e=n,n=r}return y.has(t[e],n)}function u(t,e,n,r){var i={},o={},a={};return y.each(e,function(t){y.each(t,function(t,e){i[t]=t,o[t]=t,a[t]=e})}),y.each(e,function(t){var e=-1;y.each(t,function(t){var u=r(t);if(u.length){u=y.sortBy(u,function(t){return a[t]});for(var c=(u.length-1)/2,l=Math.floor(c),h=Math.ceil(c);l<=h;++l){var f=u[l];o[t]===t&&e<a[f]&&!s(n,t,f)&&(o[f]=t,o[t]=i[t]=i[f],e=a[f])}}})}),{root:i,align:o}}function c(t,e,n,r,i){function o(t){y.has(c,t)||(c[t]=!0,s[t]=y.reduce(u.inEdges(t),function(t,e){return o(e.v),Math.max(t,s[e.v]+u.edge(e))},0))}function a(e){if(2!==c[e]){c[e]++;var n=t.node(e),r=y.reduce(u.outEdges(e),function(t,e){return a(e.w),Math.min(t,s[e.w]-u.edge(e))},Number.POSITIVE_INFINITY);r!==Number.POSITIVE_INFINITY&&n.borderType!==h&&(s[e]=Math.max(s[e],r))}}var s={},u=l(t,e,n,i),c={};y.each(u.nodes(),o);var h=i?"borderLeft":"borderRight";return y.each(u.nodes(),a),y.each(r,function(t){s[t]=s[n[t]]}),s}function l(t,e,n,r){var i=new m,o=t.graph(),a=g(o.nodesep,o.edgesep,r);return y.each(e,function(e){var r;y.each(e,function(e){var o=n[e];if(i.setNode(o),r){var s=n[r],u=i.edge(s,o);i.setEdge(s,o,Math.max(a(t,e,r),u||0))}r=e})}),i}function h(t,e){return y.min(e,function(e){var n=y.min(e,function(e,n){return e-v(t,n)/2});return y.max(e,function(e,n){return e+v(t,n)/2})-n})}function f(t,e){var n=y.min(e),r=y.max(e);y.each(["u","d"],function(i){y.each(["l","r"],function(o){var a,s=i+o,u=t[s];u!==e&&(a="l"===o?n-y.min(u):r-y.max(u))&&(t[s]=y.mapValues(u,function(t){return t+a}))})})}function d(t,e){return y.mapValues(t.ul,function(n,r){if(e)return t[e.toLowerCase()][r];var i=y.sortBy(y.pluck(t,r));return(i[1]+i[2])/2})}function p(t){var e,n=x.buildLayerMatrix(t),o=y.merge(r(t,n),i(t,n)),a={};return y.each(["u","d"],function(r){e="u"===r?n:y.values(n).reverse(),y.each(["l","r"],function(n){"r"===n&&(e=y.map(e,function(t){return y.values(t).reverse()}));var i=y.bind("u"===r?t.predecessors:t.successors,t),s=u(t,e,o,i),l=c(t,e,s.root,s.align,"r"===n);"r"===n&&(l=y.mapValues(l,function(t){return-t})),a[r+n]=l})}),f(a,h(t,a)),d(a,t.graph().align)}function g(t,e,n){return function(r,i,o){var a,s=r.node(i),u=r.node(o),c=0;if(c+=s.width/2,y.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(c+=n?a:-a),a=0,c+=(s.dummy?e:t)/2,c+=(u.dummy?e:t)/2,c+=u.width/2,y.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":a=u.width/2;break;case"r":a=-u.width/2}return a&&(c+=n?a:-a),a=0,c}}function v(t,e){return t.node(e).width}var y=t("../lodash"),m=t("../graphlib").Graph,x=t("../util");e.exports={positionX:p,findType1Conflicts:r,findType2Conflicts:i,addConflict:a,hasConflict:s,verticalAlignment:u,horizontalCompaction:c,alignCoordinates:f,findSmallestWidthAlignment:h,balance:d}},{"../graphlib":156,"../lodash":159,"../util":178}],173:[function(t,e,n){"use strict";function r(t){t=a.asNonCompoundGraph(t),i(t),o.each(s(t),function(e,n){t.node(n).x=e})}function i(t){var e=a.buildLayerMatrix(t),n=t.graph().ranksep,r=0;o.each(e,function(e){var i=o.max(o.map(e,function(e){return t.node(e).height}));o.each(e,function(e){t.node(e).y=r+i/2}),r+=i+n})}var o=t("../lodash"),a=t("../util"),s=t("./bk").positionX;e.exports=r},{"../lodash":159,"../util":178,"./bk":172}],174:[function(t,e,n){"use strict";function r(t){var e=new u({directed:!1}),n=t.nodes()[0],r=t.nodeCount();e.setNode(n,{});for(var s,l;i(e,t)<r;)s=o(e,t),l=e.hasNode(s.v)?c(t,s):-c(t,s),a(e,t,l);return e}function i(t,e){function n(r){s.each(e.nodeEdges(r),function(i){var o=i.v,a=r===o?i.w:o;t.hasNode(a)||c(e,i)||(t.setNode(a,{}),t.setEdge(r,a,{}),n(a))})}return s.each(t.nodes(),n),t.nodeCount()}function o(t,e){return s.min(e.edges(),function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return c(e,n)})}function a(t,e,n){s.each(t.nodes(),function(t){e.node(t).rank+=n})}var s=t("../lodash"),u=t("../graphlib").Graph,c=t("./util").slack;e.exports=r},{"../graphlib":156,"../lodash":159,"./util":177}],175:[function(t,e,n){"use strict";function r(t){switch(t.graph().ranker){case"network-simplex":o(t);break;case"tight-tree":i(t);break;case"longest-path":l(t);break;default:o(t)}}function i(t){s(t),u(t)}function o(t){c(t)}var a=t("./util"),s=a.longestPath,u=t("./feasible-tree"),c=t("./network-simplex");e.exports=r;var l=s},{"./feasible-tree":174,"./network-simplex":176,"./util":177}],176:[function(t,e,n){"use strict";function r(t){t=w(t),m(t);var e=v(t);s(e),i(e,t);for(var n,r;n=c(e);)r=l(e,t,n),h(e,t,n,r)}function i(t,e){var n=b(t,t.nodes());n=n.slice(0,n.length-1),g.each(n,function(n){o(t,e,n)})}function o(t,e,n){var r=t.node(n),i=r.parent;t.edge(n,i).cutvalue=a(t,e,n)}function a(t,e,n){var r=t.node(n),i=r.parent,o=!0,a=e.edge(n,i),s=0;return a||(o=!1,a=e.edge(i,n)),s=a.weight,g.each(e.nodeEdges(n),function(r){var a=r.v===n,u=a?r.w:r.v;if(u!==i){var c=a===o,l=e.edge(r).weight;if(s+=c?l:-l,d(t,n,u)){var h=t.edge(n,u).cutvalue;s+=c?-h:h}}}),s}function s(t,e){arguments.length<2&&(e=t.nodes()[0]),u(t,{},1,e)}function u(t,e,n,r,i){var o=n,a=t.node(r);return e[r]=!0,g.each(t.neighbors(r),function(i){g.has(e,i)||(n=u(t,e,n,i,r))}),a.low=o,a.lim=n++,i?a.parent=i:delete a.parent,n}function c(t){return g.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function l(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var o=t.node(r),a=t.node(i),s=o,u=!1;o.lim>a.lim&&(s=a,u=!0);var c=g.filter(e.edges(),function(e){return u===p(t,t.node(e.v),s)&&u!==p(t,t.node(e.w),s)});return g.min(c,function(t){return y(e,t)})}function h(t,e,n,r){var o=n.v,a=n.w;t.removeEdge(o,a),t.setEdge(r.v,r.w,{}),s(t),i(t,e),f(t,e)}function f(t,e){var n=g.find(t.nodes(),function(t){return!e.node(t).parent}),r=x(t,n);r=r.slice(1),g.each(r,function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)})}function d(t,e,n){return t.hasEdge(e,n)}function p(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}var g=t("../lodash"),v=t("./feasible-tree"),y=t("./util").slack,m=t("./util").longestPath,x=t("../graphlib").alg.preorder,b=t("../graphlib").alg.postorder,w=t("../util").simplify;e.exports=r,r.initLowLimValues=s,r.initCutValues=i,r.calcCutValue=a,r.leaveEdge=c,r.enterEdge=l,r.exchangeEdges=h},{"../graphlib":156,"../lodash":159,"../util":178,"./feasible-tree":174,"./util":177}],177:[function(t,e,n){"use strict";function r(t){function e(r){var i=t.node(r);if(o.has(n,r))return i.rank;n[r]=!0;var a=o.min(o.map(t.outEdges(r),function(n){return e(n.w)-t.edge(n).minlen}));return a===Number.POSITIVE_INFINITY&&(a=0),i.rank=a}var n={};o.each(t.sources(),e)}function i(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var o=t("../lodash");e.exports={longestPath:r,slack:i}},{"../lodash":159}],178:[function(t,e,n){"use strict";function r(t,e,n,r){var i;do{i=y.uniqueId(r)}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function i(t){var e=(new m).setGraph(t.graph());return y.each(t.nodes(),function(n){e.setNode(n,t.node(n))}),y.each(t.edges(),function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e}function o(t){var e=new m({multigraph:t.isMultigraph()}).setGraph(t.graph());return y.each(t.nodes(),function(n){t.children(n).length||e.setNode(n,t.node(n))}),y.each(t.edges(),function(n){e.setEdge(n,t.edge(n))}),e}function a(t){var e=y.map(t.nodes(),function(e){var n={};return y.each(t.outEdges(e),function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight}),n});return y.zipObject(t.nodes(),e)}function s(t){var e=y.map(t.nodes(),function(e){var n={};return y.each(t.inEdges(e),function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return y.zipObject(t.nodes(),e)}function u(t,e){var n=t.x,r=t.y,i=e.x-n,o=e.y-r,a=t.width/2,s=t.height/2;if(!i&&!o)throw new Error("Not possible to find intersection inside of the rectangle");var u,c;return Math.abs(o)*a>Math.abs(i)*s?(o<0&&(s=-s),u=s*i/o,c=s):(i<0&&(a=-a),u=a,c=a*o/i),{x:n+u,y:r+c}}function c(t){var e=y.map(y.range(d(t)+1),function(){return[]});return y.each(t.nodes(),function(n){var r=t.node(n),i=r.rank;y.isUndefined(i)||(e[i][r.order]=n)}),e}function l(t){var e=y.min(y.map(t.nodes(),function(e){return t.node(e).rank}));y.each(t.nodes(),function(n){var r=t.node(n);y.has(r,"rank")&&(r.rank-=e)})}function h(t){var e=y.min(y.map(t.nodes(),function(e){return t.node(e).rank})),n=[];y.each(t.nodes(),function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)});var r=0,i=t.graph().nodeRankFactor;y.each(n,function(e,n){y.isUndefined(e)&&n%i!=0?--r:r&&y.each(e,function(e){t.node(e).rank+=r})})}function f(t,e,n,i){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=i),r(t,"border",o,e)}function d(t){return y.max(y.map(t.nodes(),function(e){var n=t.node(e).rank;if(!y.isUndefined(n))return n}))}function p(t,e){var n={lhs:[],rhs:[]};return y.each(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n}function g(t,e){var n=y.now();try{return e()}finally{console.log(t+" time: "+(y.now()-n)+"ms")}}function v(t,e){return e()}var y=t("./lodash"),m=t("./graphlib").Graph;e.exports={addDummyNode:r,simplify:i,asNonCompoundGraph:o,successorWeights:a,predecessorWeights:s,intersectRect:u,buildLayerMatrix:c,normalizeRanks:l,removeEmptyRanks:h,addBorderNode:f,maxRank:d,partition:p,time:g,notime:v}},{"./graphlib":156,"./lodash":159}],179:[function(t,e,n){e.exports="0.7.4"},{}],180:[function(t,e,n){var r=t("./lib");e.exports={Graph:r.Graph,json:t("./lib/json"),alg:t("./lib/alg"),version:r.version}},{"./lib":196,"./lib/alg":187,"./lib/json":197}],181:[function(t,e,n){function r(t){function e(o){i.has(r,o)||(r[o]=!0,n.push(o),i.each(t.successors(o),e),
i.each(t.predecessors(o),e))}var n,r={},o=[];return i.each(t.nodes(),function(t){n=[],e(t),n.length&&o.push(n)}),o}var i=t("../lodash");e.exports=r},{"../lodash":198}],182:[function(t,e,n){function r(t,e,n){o.isArray(e)||(e=[e]);var r=[],a={};return o.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);i(t,e,"post"===n,a,r)}),r}function i(t,e,n,r,a){o.has(r,e)||(r[e]=!0,n||a.push(e),o.each(t.neighbors(e),function(e){i(t,e,n,r,a)}),n&&a.push(e))}var o=t("../lodash");e.exports=r},{"../lodash":198}],183:[function(t,e,n){function r(t,e,n){return o.transform(t.nodes(),function(r,o){r[o]=i(t,o,e,n)},{})}var i=t("./dijkstra"),o=t("../lodash");e.exports=r},{"../lodash":198,"./dijkstra":184}],184:[function(t,e,n){function r(t,e,n,r){return i(t,String(e),n||s,r||function(e){return t.outEdges(e)})}function i(t,e,n,r){var i,o,s={},u=new a,c=function(t){var e=t.v!==i?t.v:t.w,r=s[e],a=n(t),c=o.distance+a;if(a<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+a);c<r.distance&&(r.distance=c,r.predecessor=i,u.decrease(e,c))};for(t.nodes().forEach(function(t){var n=t===e?0:Number.POSITIVE_INFINITY;s[t]={distance:n},u.add(t,n)});u.size()>0&&(i=u.removeMin(),o=s[i],o.distance!==Number.POSITIVE_INFINITY);)r(i).forEach(c);return s}var o=t("../lodash"),a=t("../data/priority-queue");e.exports=r;var s=o.constant(1)},{"../data/priority-queue":194,"../lodash":198}],185:[function(t,e,n){function r(t){return i.filter(o(t),function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})}var i=t("../lodash"),o=t("./tarjan");e.exports=r},{"../lodash":198,"./tarjan":192}],186:[function(t,e,n){function r(t,e,n){return i(t,e||a,n||function(e){return t.outEdges(e)})}function i(t,e,n){var r={},i=t.nodes();return i.forEach(function(t){r[t]={},r[t][t]={distance:0},i.forEach(function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})}),n(t).forEach(function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}})}),i.forEach(function(t){var e=r[t];i.forEach(function(n){var o=r[n];i.forEach(function(n){var r=o[t],i=e[n],a=o[n],s=r.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)})})}),r}var o=t("../lodash");e.exports=r;var a=o.constant(1)},{"../lodash":198}],187:[function(t,e,n){e.exports={components:t("./components"),dijkstra:t("./dijkstra"),dijkstraAll:t("./dijkstra-all"),findCycles:t("./find-cycles"),floydWarshall:t("./floyd-warshall"),isAcyclic:t("./is-acyclic"),postorder:t("./postorder"),preorder:t("./preorder"),prim:t("./prim"),tarjan:t("./tarjan"),topsort:t("./topsort")}},{"./components":181,"./dijkstra":184,"./dijkstra-all":183,"./find-cycles":185,"./floyd-warshall":186,"./is-acyclic":188,"./postorder":189,"./preorder":190,"./prim":191,"./tarjan":192,"./topsort":193}],188:[function(t,e,n){function r(t){try{i(t)}catch(t){if(t instanceof i.CycleException)return!1;throw t}return!0}var i=t("./topsort");e.exports=r},{"./topsort":193}],189:[function(t,e,n){function r(t,e){return i(t,e,"post")}var i=t("./dfs");e.exports=r},{"./dfs":182}],190:[function(t,e,n){function r(t,e){return i(t,e,"pre")}var i=t("./dfs");e.exports=r},{"./dfs":182}],191:[function(t,e,n){function r(t,e){function n(t){var n=t.v===r?t.w:t.v,i=c.priority(n);if(void 0!==i){var o=e(t);o<i&&(u[n]=r,c.decrease(n,o))}}var r,s=new o,u={},c=new a;if(0===t.nodeCount())return s;i.each(t.nodes(),function(t){c.add(t,Number.POSITIVE_INFINITY),s.setNode(t)}),c.decrease(t.nodes()[0],0);for(var l=!1;c.size()>0;){if(r=c.removeMin(),i.has(u,r))s.setEdge(r,u[r]);else{if(l)throw new Error("Input graph is not connected: "+t);l=!0}t.nodeEdges(r).forEach(n)}return s}var i=t("../lodash"),o=t("../graph"),a=t("../data/priority-queue");e.exports=r},{"../data/priority-queue":194,"../graph":195,"../lodash":198}],192:[function(t,e,n){function r(t){function e(s){var u=o[s]={onStack:!0,lowlink:n,index:n++};if(r.push(s),t.successors(s).forEach(function(t){i.has(o,t)?o[t].onStack&&(u.lowlink=Math.min(u.lowlink,o[t].index)):(e(t),u.lowlink=Math.min(u.lowlink,o[t].lowlink))}),u.lowlink===u.index){var c,l=[];do{c=r.pop(),o[c].onStack=!1,l.push(c)}while(s!==c);a.push(l)}}var n=0,r=[],o={},a=[];return t.nodes().forEach(function(t){i.has(o,t)||e(t)}),a}var i=t("../lodash");e.exports=r},{"../lodash":198}],193:[function(t,e,n){function r(t){function e(s){if(o.has(r,s))throw new i;o.has(n,s)||(r[s]=!0,n[s]=!0,o.each(t.predecessors(s),e),delete r[s],a.push(s))}var n={},r={},a=[];if(o.each(t.sinks(),e),o.size(n)!==t.nodeCount())throw new i;return a}function i(){}var o=t("../lodash");e.exports=r,r.CycleException=i},{"../lodash":198}],194:[function(t,e,n){function r(){this._arr=[],this._keyIndices={}}var i=t("../lodash");e.exports=r,r.prototype.size=function(){return this._arr.length},r.prototype.keys=function(){return this._arr.map(function(t){return t.key})},r.prototype.has=function(t){return i.has(this._keyIndices,t)},r.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},r.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},r.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!i.has(n,t)){var r=this._arr,o=r.length;return n[t]=o,r.push({key:t,priority:e}),this._decrease(o),!0}return!1},r.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},r.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},r.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},r.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&(e=t>>1,!(n[e].priority<r));)this._swap(t,e),t=e},r.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e}},{"../lodash":198}],195:[function(t,e,n){"use strict";function r(t){this._isDirected=!c.has(t,"directed")||t.directed,this._isMultigraph=!!c.has(t,"multigraph")&&t.multigraph,this._isCompound=!!c.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=c.constant(void 0),this._defaultEdgeLabelFn=c.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[h]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function i(t,e){t[e]?t[e]++:t[e]=1}function o(t,e){--t[e]||delete t[e]}function a(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}return i+f+o+f+(c.isUndefined(r)?l:r)}function s(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return r&&(s.name=r),s}function u(t,e){return a(t,e.v,e.w,e.name)}var c=t("./lodash");e.exports=r;var l="\0",h="\0",f="";r.prototype._nodeCount=0,r.prototype._edgeCount=0,r.prototype.isDirected=function(){return this._isDirected},r.prototype.isMultigraph=function(){return this._isMultigraph},r.prototype.isCompound=function(){return this._isCompound},r.prototype.setGraph=function(t){return this._label=t,this},r.prototype.graph=function(){return this._label},r.prototype.setDefaultNodeLabel=function(t){return c.isFunction(t)||(t=c.constant(t)),this._defaultNodeLabelFn=t,this},r.prototype.nodeCount=function(){return this._nodeCount},r.prototype.nodes=function(){return c.keys(this._nodes)},r.prototype.sources=function(){return c.filter(this.nodes(),function(t){return c.isEmpty(this._in[t])},this)},r.prototype.sinks=function(){return c.filter(this.nodes(),function(t){return c.isEmpty(this._out[t])},this)},r.prototype.setNodes=function(t,e){var n=arguments;return c.each(t,function(t){n.length>1?this.setNode(t,e):this.setNode(t)},this),this},r.prototype.setNode=function(t,e){return c.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=h,this._children[t]={},this._children[h][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},r.prototype.node=function(t){return this._nodes[t]},r.prototype.hasNode=function(t){return c.has(this._nodes,t)},r.prototype.removeNode=function(t){var e=this;if(c.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],c.each(this.children(t),function(t){this.setParent(t)},this),delete this._children[t]),c.each(c.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],c.each(c.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},r.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(c.isUndefined(e))e=h;else{e+="";for(var n=e;!c.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},r.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},r.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==h)return e}},r.prototype.children=function(t){if(c.isUndefined(t)&&(t=h),this._isCompound){var e=this._children[t];if(e)return c.keys(e)}else{if(t===h)return this.nodes();if(this.hasNode(t))return[]}},r.prototype.predecessors=function(t){var e=this._preds[t];if(e)return c.keys(e)},r.prototype.successors=function(t){var e=this._sucs[t];if(e)return c.keys(e)},r.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return c.union(e,this.successors(t))},r.prototype.filterNodes=function(t){function e(t){var o=r.parent(t);return void 0===o||n.hasNode(o)?(i[t]=o,o):o in i?i[o]:e(o)}var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph()),c.each(this._nodes,function(e,r){t(r)&&n.setNode(r,e)},this),c.each(this._edgeObjs,function(t){n.hasNode(t.v)&&n.hasNode(t.w)&&n.setEdge(t,this.edge(t))},this);var r=this,i={};return this._isCompound&&c.each(n.nodes(),function(t){n.setParent(t,e(t))}),n},r.prototype.setDefaultEdgeLabel=function(t){return c.isFunction(t)||(t=c.constant(t)),this._defaultEdgeLabelFn=t,this},r.prototype.edgeCount=function(){return this._edgeCount},r.prototype.edges=function(){return c.values(this._edgeObjs)},r.prototype.setPath=function(t,e){var n=this,r=arguments;return c.reduce(t,function(t,i){return r.length>1?n.setEdge(t,i,e):n.setEdge(t,i),i}),this},r.prototype.setEdge=function(){var t,e,n,r,o=!1,u=arguments[0];"object"==typeof u&&null!==u&&"v"in u?(t=u.v,e=u.w,n=u.name,2===arguments.length&&(r=arguments[1],o=!0)):(t=u,e=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],o=!0)),t=""+t,e=""+e,c.isUndefined(n)||(n=""+n);var l=a(this._isDirected,t,e,n);if(c.has(this._edgeLabels,l))return o&&(this._edgeLabels[l]=r),this;if(!c.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[l]=o?r:this._defaultEdgeLabelFn(t,e,n);var h=s(this._isDirected,t,e,n);return t=h.v,e=h.w,Object.freeze(h),this._edgeObjs[l]=h,i(this._preds[e],t),i(this._sucs[t],e),this._in[e][l]=h,this._out[t][l]=h,this._edgeCount++,this},r.prototype.edge=function(t,e,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):a(this._isDirected,t,e,n);return this._edgeLabels[r]},r.prototype.hasEdge=function(t,e,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):a(this._isDirected,t,e,n);return c.has(this._edgeLabels,r)},r.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):a(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],o(this._preds[e],t),o(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},r.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=c.values(n);return e?c.filter(r,function(t){return t.v===e}):r}},r.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=c.values(n);return e?c.filter(r,function(t){return t.w===e}):r}},r.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},{"./lodash":198}],196:[function(t,e,n){e.exports={Graph:t("./graph"),version:t("./version")}},{"./graph":195,"./version":199}],197:[function(t,e,n){function r(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:i(t),edges:o(t)};return s.isUndefined(t.graph())||(e.value=s.clone(t.graph())),e}function i(t){return s.map(t.nodes(),function(e){var n=t.node(e),r=t.parent(e),i={v:e};return s.isUndefined(n)||(i.value=n),s.isUndefined(r)||(i.parent=r),i})}function o(t){return s.map(t.edges(),function(e){var n=t.edge(e),r={v:e.v,w:e.w};return s.isUndefined(e.name)||(r.name=e.name),s.isUndefined(n)||(r.value=n),r})}function a(t){var e=new u(t.options).setGraph(t.value);return s.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),s.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}var s=t("./lodash"),u=t("./graph");e.exports={write:r,read:a}},{"./graph":195,"./lodash":198}],198:[function(t,e,n){e.exports=t(159)},{lodash:200}],199:[function(t,e,n){e.exports="1.0.7"},{}],200:[function(t,e,n){(function(t){(function(){function r(t,e){if(t!==e){var n=null===t,r=t===N,i=t===t,o=null===e,a=e===N,s=e===e;if(t>e&&!o||!i||n&&!a&&s||r&&s)return 1;if(t<e&&!n||!s||o&&!r&&i||a&&i)return-1}return 0}function i(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function o(t,e,n){if(e!==e)return v(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function a(t){return"function"==typeof t||!1}function s(t){return null==t?"":t+""}function u(t,e){for(var n=-1,r=t.length;++n<r&&e.indexOf(t.charAt(n))>-1;);return n}function c(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function l(t,e){return r(t.criteria,e.criteria)||t.index-e.index}function h(t,e,n){for(var i=-1,o=t.criteria,a=e.criteria,s=o.length,u=n.length;++i<s;){var c=r(o[i],a[i]);if(c){if(i>=u)return c;var l=n[i];return c*("asc"===l||l===!0?1:-1)}}return t.index-e.index}function f(t){return Vt[t]}function d(t){return Gt[t]}function p(t,e,n){return e?t=Xt[t]:n&&(t=Ut[t]),"\\"+t}function g(t){return"\\"+Ut[t]}function v(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var o=t[i];if(o!==o)return i}return-1}function y(t){return!!t&&"object"==typeof t}function m(t){return t<=160&&t>=9&&t<=13||32==t||160==t||5760==t||6158==t||t>=8192&&(t<=8202||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function x(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;)t[n]===e&&(t[n]=Y,o[++i]=n);return o}function b(t,e){for(var n,r=-1,i=t.length,o=-1,a=[];++r<i;){var s=t[r],u=e?e(s,r,t):s;r&&n===u||(n=u,a[++o]=s)}return a}function w(t){for(var e=-1,n=t.length;++e<n&&m(t.charCodeAt(e)););return e}function _(t){for(var e=t.length;e--&&m(t.charCodeAt(e)););return e}function E(t){return qt[t]}function k(t){function e(t){if(y(t)&&!As(t)&&!(t instanceof Vt)){if(t instanceof m)return t;if(ea.call(t,"__chain__")&&ea.call(t,"__wrapped__"))return dr(t)}return new m(t)}function n(){}function m(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function Vt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ta,this.__views__=[]}function Gt(){var t=new Vt(this.__wrapped__);return t.__actions__=ne(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ne(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ne(this.__views__),t}function qt(){if(this.__filtered__){var t=new Vt(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Yt(){var t=this.__wrapped__.value(),e=this.__dir__,n=As(t),r=e<0,i=n?t.length:0,o=Un(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,h=l.length,f=0,d=Ea(u,this.__takeCount__);if(!n||i<j||i==u&&d==u)return nn(r&&n?t.reverse():t,this.__actions__);var p=[];t:for(;u--&&f<d;){c+=e;for(var g=-1,v=t[c];++g<h;){var y=l[g],m=y.iteratee,x=y.type,b=m(v);if(x==G)v=b;else if(!b){if(x==V)continue t;break t}}p[f++]=v}return p}function Xt(){this.__data__={}}function Ut(t){return this.has(t)&&delete this.__data__[t]}function Ht(t){return"__proto__"==t?N:this.__data__[t]}function Wt(t){return"__proto__"!=t&&ea.call(this.__data__,t)}function $t(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Zt(t){var e=t?t.length:0;for(this.data={hash:ya(null),set:new ha};e--;)this.push(t[e])}function Qt(t,e){var n=t.data;return("string"==typeof e||Ci(e)?n.set.has(e):n.hash[e])?0:-1}function Kt(t){var e=this.data;"string"==typeof t||Ci(t)?e.set.add(t):e.hash[t]=!0}function ee(t,e){for(var n=-1,r=t.length,i=-1,o=e.length,a=Vo(r+o);++n<r;)a[n]=t[n];for(;++i<o;)a[n++]=e[i];return a}function ne(t,e){var n=-1,r=t.length;for(e||(e=Vo(r));++n<r;)e[n]=t[n];return e}function re(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function ie(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function oe(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function ae(t,e,n,r){for(var i=-1,o=t.length,a=r,s=a;++i<o;){var u=t[i],c=+e(u);n(c,a)&&(a=c,s=u)}return s}function se(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[++i]=a)}return o}function ue(t,e){for(var n=-1,r=t.length,i=Vo(r);++n<r;)i[n]=e(t[n],n,t);return i}function ce(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function le(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function he(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function fe(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function de(t,e){for(var n=t.length,r=0;n--;)r+=+e(t[n])||0;return r}function pe(t,e){return t===N?e:t}function ge(t,e,n,r){return t!==N&&ea.call(r,n)?t:e}function ve(t,e,n){for(var r=-1,i=js(e),o=i.length;++r<o;){var a=i[r],s=t[a],u=n(s,e[a],a,t,e);(u===u?u===s:s!==s)&&(s!==N||a in t)||(t[a]=u)}return t}function ye(t,e){return null==e?t:xe(e,js(e),t)}function me(t,e){for(var n=-1,r=null==t,i=!r&&Qn(t),o=i?t.length:0,a=e.length,s=Vo(a);++n<a;){var u=e[n];s[n]=i?Kn(u,o)?t[u]:N:r?N:t[u]}return s}function xe(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var o=e[r];n[o]=t[o]}return n}function be(t,e,n){var r=typeof t;return"function"==r?e===N?t:an(t,e,n):null==t?To:"object"==r?ze(t):e===N?Co(t):je(t,e)}function we(t,e,n,r,i,o,a){var s;if(n&&(s=i?n(t,r,i):n(t)),s!==N)return s;if(!Ci(t))return t;var u=As(t);if(u){if(s=Hn(t),!e)return ne(t,s)}else{var c=ra.call(t),l=c==Z;if(c!=K&&c!=X&&(!l||i))return jt[c]?$n(t,c,e):i?t:{};if(s=Wn(l?{}:t),!e)return ye(s,t)}o||(o=[]),a||(a=[]);for(var h=o.length;h--;)if(o[h]==t)return a[h];return o.push(t),a.push(s),(u?re:Me)(t,function(r,i){s[i]=we(r,e,n,i,t,o,a)}),s}function _e(t,e,n){if("function"!=typeof t)throw new Zo(q);return fa(function(){t.apply(N,n)},e)}function Ee(t,e){var n=t?t.length:0,r=[];if(!n)return r;var i=-1,a=qn(),s=a==o,u=s&&e.length>=j?gn(e):null,c=e.length;u&&(a=Qt,s=!1,e=u);t:for(;++i<n;){var l=t[i];if(s&&l===l){for(var h=c;h--;)if(e[h]===l)continue t;r.push(l)}else a(e,l,0)<0&&r.push(l)}return r}function ke(t,e){var n=!0;return Ra(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Ne(t,e,n,r){var i=r,o=i;return Ra(t,function(t,a,s){var u=+e(t,a,s);(n(u,i)||u===r&&u===o)&&(i=u,o=t)}),o}function Le(t,e,n,r){var i=t.length;for(n=null==n?0:+n||0,n<0&&(n=-n>i?0:i+n),r=r===N||r>i?i:+r||0,r<0&&(r+=i),i=n>r?0:r>>>0,n>>>=0;n<i;)t[n++]=e;return t}function Se(t,e){var n=[];return Ra(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Te(t,e,n,r){var i;return n(t,function(t,n,o){if(e(t,n,o))return i=r?n:t,!1}),i}function Ae(t,e,n,r){r||(r=[]);for(var i=-1,o=t.length;++i<o;){var a=t[i];y(a)&&Qn(a)&&(n||As(a)||Ni(a))?e?Ae(a,e,n,r):ce(r,a):n||(r[r.length]=a)}return r}function De(t,e){return Fa(t,e,to)}function Me(t,e){return Fa(t,e,js)}function Pe(t,e){return za(t,e,js)}function Ie(t,e){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];Ii(t[a])&&(o[++i]=a)}return o}function Ce(t,e,n){if(null!=t){n!==N&&n in hr(t)&&(e=[n]);for(var r=0,i=e.length;null!=t&&r<i;)t=t[e[r++]];return r&&r==i?t:N}}function Oe(t,e,n,r,i,o){return t===e||(null==t||null==e||!Ci(t)&&!y(e)?t!==t&&e!==e:Re(t,e,Oe,n,r,i,o))}function Re(t,e,n,r,i,o,a){var s=As(t),u=As(e),c=U,l=U;s||(c=ra.call(t),c==X?c=K:c!=K&&(s=qi(t))),u||(l=ra.call(e),l==X?l=K:l!=K&&(u=qi(e)));var h=c==K,f=l==K,d=c==l;if(d&&!s&&!h)return zn(t,e,c);if(!i){var p=h&&ea.call(t,"__wrapped__"),g=f&&ea.call(e,"__wrapped__");if(p||g)return n(p?t.value():t,g?e.value():e,r,i,o,a)}if(!d)return!1;o||(o=[]),a||(a=[]);for(var v=o.length;v--;)if(o[v]==t)return a[v]==e;o.push(t),a.push(e);var y=(s?Fn:jn)(t,e,n,r,i,o,a);return o.pop(),a.pop(),y}function Be(t,e,n){var r=e.length,i=r,o=!n;if(null==t)return!i;for(t=hr(t);r--;){var a=e[r];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<i;){a=e[r];var s=a[0],u=t[s],c=a[1];if(o&&a[2]){if(u===N&&!(s in t))return!1}else{var l=n?n(u,c,s):N;if(!(l===N?Oe(c,u,n,!0):l))return!1}}return!0}function Fe(t,e){var n=-1,r=Qn(t)?Vo(t.length):[];return Ra(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function ze(t){var e=Yn(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null!=t&&(t[n]===r&&(r!==N||n in hr(t)))}}return function(t){return Be(t,e)}}function je(t,e){var n=As(t),r=tr(t)&&rr(e),i=t+"";return t=fr(t),function(o){if(null==o)return!1;var a=i;if(o=hr(o),(n||!r)&&!(a in o)){if(null==(o=1==t.length?o:Ce(o,We(t,0,-1))))return!1;a=Lr(t),o=hr(o)}return o[a]===e?e!==N||a in o:Oe(e,o[a],N,!0)}}function Ve(t,e,n,r,i){if(!Ci(t))return t;var o=Qn(e)&&(As(e)||qi(e)),a=o?N:js(e);return re(a||e,function(s,u){if(a&&(u=s,s=e[u]),y(s))r||(r=[]),i||(i=[]),Ge(t,e,u,Ve,n,r,i);else{var c=t[u],l=n?n(c,s,u,t,e):N,h=l===N;h&&(l=s),l===N&&(!o||u in t)||!h&&(l===l?l===c:c!==c)||(t[u]=l)}}),t}function Ge(t,e,n,r,i,o,a){for(var s=o.length,u=e[n];s--;)if(o[s]==u)return void(t[n]=a[s]);var c=t[n],l=i?i(c,u,n,t,e):N,h=l===N;h&&(l=u,Qn(u)&&(As(u)||qi(u))?l=As(c)?c:Qn(c)?ne(c):[]:ji(u)||Ni(u)?l=Ni(c)?Wi(c):ji(c)?c:{}:h=!1),o.push(u),a.push(l),h?t[n]=r(l,u,i,o,a):(l===l?l!==c:c===c)&&(t[n]=l)}function qe(t){return function(e){return null==e?N:e[t]}}function Ye(t){var e=t+"";return t=fr(t),function(n){return Ce(n,t,e)}}function Xe(t,e){for(var n=t?e.length:0;n--;){var r=e[n];if(r!=i&&Kn(r)){var i=r;da.call(t,r,1)}}return t}function Ue(t,e){return t+ma(La()*(e-t+1))}function He(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function We(t,e,n){var r=-1,i=t.length;e=null==e?0:+e||0,e<0&&(e=-e>i?0:i+e),n=n===N||n>i?i:+n||0,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Vo(i);++r<i;)o[r]=t[r+e];return o}function $e(t,e){var n;return Ra(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function Ze(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Qe(t,e,n){var r=Vn(),i=-1;return e=ue(e,function(t){return r(t)}),Ze(Fe(t,function(t){return{criteria:ue(e,function(e){return e(t)}),index:++i,value:t}}),function(t,e){return h(t,e,n)})}function Ke(t,e){var n=0;return Ra(t,function(t,r,i){n+=+e(t,r,i)||0}),n}function Je(t,e){var n=-1,r=qn(),i=t.length,a=r==o,s=a&&i>=j,u=s?gn():null,c=[];u?(r=Qt,a=!1):(s=!1,u=e?[]:c);t:for(;++n<i;){var l=t[n],h=e?e(l,n,t):l;if(a&&l===l){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),c.push(l)}else r(u,h,0)<0&&((e||s)&&u.push(h),c.push(l))}return c}function tn(t,e){for(var n=-1,r=e.length,i=Vo(r);++n<r;)i[n]=t[e[n]];return i}function en(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?We(t,r?0:o,r?o+1:i):We(t,r?o+1:0,r?i:o)}function nn(t,e){var n=t;n instanceof Vt&&(n=n.value());for(var r=-1,i=e.length;++r<i;){var o=e[r];n=o.func.apply(o.thisArg,ce([n],o.args))}return n}function rn(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&i<=Ma){for(;r<i;){var o=r+i>>>1,a=t[o];(n?a<=e:a<e)&&null!==a?r=o+1:i=o}return i}return on(t,e,To,n)}function on(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,a=e!==e,s=null===e,u=e===N;i<o;){var c=ma((i+o)/2),l=n(t[c]),h=l!==N,f=l===l;if(a)var d=f||r;else d=s?f&&h&&(r||null!=l):u?f&&(r||h):null!=l&&(r?l<=e:l<e);d?i=c+1:o=c}return Ea(o,Da)}function an(t,e,n){if("function"!=typeof t)return To;if(e===N)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,a){return t.call(e,n,r,i,o,a)}}return function(){return t.apply(e,arguments)}}function sn(t){var e=new aa(t.byteLength);return new pa(e).set(new pa(t)),e}function un(t,e,n){for(var r=n.length,i=-1,o=_a(t.length-r,0),a=-1,s=e.length,u=Vo(s+o);++a<s;)u[a]=e[a];for(;++i<r;)u[n[i]]=t[i];for(;o--;)u[a++]=t[i++];return u}function cn(t,e,n){for(var r=-1,i=n.length,o=-1,a=_a(t.length-i,0),s=-1,u=e.length,c=Vo(a+u);++o<a;)c[o]=t[o];for(var l=o;++s<u;)c[l+s]=e[s];for(;++r<i;)c[l+n[r]]=t[o++];return c}function ln(t,e){return function(n,r,i){var o=e?e():{};if(r=Vn(r,i,3),As(n))for(var a=-1,s=n.length;++a<s;){var u=n[a];t(o,u,r(u,a,n),n)}else Ra(n,function(e,n,i){t(o,e,r(e,n,i),i)});return o}}function hn(t){return yi(function(e,n){var r=-1,i=null==e?0:n.length,o=i>2?n[i-2]:N,a=i>2?n[2]:N,s=i>1?n[i-1]:N;for("function"==typeof o?(o=an(o,s,5),i-=2):(o="function"==typeof s?s:N,i-=o?1:0),a&&Jn(n[0],n[1],a)&&(o=i<3?N:o,i=1);++r<i;){var u=n[r];u&&t(e,u,o)}return e})}function fn(t,e){return function(n,r){var i=n?Ga(n):0;if(!nr(i))return t(n,r);for(var o=e?i:-1,a=hr(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function dn(t){return function(e,n,r){for(var i=hr(e),o=r(e),a=o.length,s=t?a:-1;t?s--:++s<a;){var u=o[s];if(n(i[u],u,i)===!1)break}return e}}function pn(t,e){function n(){return(this&&this!==Jt&&this instanceof n?r:t).apply(e,arguments)}var r=yn(t);return n}function gn(t){return ya&&ha?new Zt(t):null}function vn(t){return function(e){for(var n=-1,r=No(lo(e)),i=r.length,o="";++n<i;)o=t(o,r[n],n);return o}}function yn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Oa(t.prototype),r=t.apply(n,e);return Ci(r)?r:n}}function mn(t){function e(n,r,i){i&&Jn(n,r,i)&&(r=N);var o=Bn(n,t,N,N,N,N,N,r);return o.placeholder=e.placeholder,o}return e}function xn(t,e){return yi(function(n){var r=n[0];return null==r?r:(n.push(e),t.apply(N,n))})}function bn(t,e){return function(n,r,i){if(i&&Jn(n,r,i)&&(r=N),r=Vn(r,i,3),1==r.length){n=As(n)?n:lr(n);var o=ae(n,r,t,e);if(!n.length||o!==e)return o}return Ne(n,r,t,e)}}function wn(t,e){return function(n,r,o){if(r=Vn(r,o,3),As(n)){var a=i(n,r,e);return a>-1?n[a]:N}return Te(n,r,t)}}function _n(t){return function(e,n,r){return e&&e.length?(n=Vn(n,r,3),i(e,n,t)):-1}}function En(t){return function(e,n,r){return n=Vn(n,r,3),Te(e,n,t,!0)}}function kn(t){return function(){for(var e,n=arguments.length,r=t?n:-1,i=0,o=Vo(n);t?r--:++r<n;){var a=o[i++]=arguments[r];if("function"!=typeof a)throw new Zo(q);!e&&m.prototype.thru&&"wrapper"==Gn(a)&&(e=new m([],!0))}for(r=e?-1:n;++r<n;){a=o[r];var s=Gn(a),u="wrapper"==s?Va(a):N;e=u&&er(u[0])&&u[1]==(C|D|P|O)&&!u[4].length&&1==u[9]?e[Gn(u[0])].apply(e,u[3]):1==a.length&&er(a)?e[s]():e.thru(a)}return function(){var t=arguments,r=t[0];if(e&&1==t.length&&As(r)&&r.length>=j)return e.plant(r).value();for(var i=0,a=n?o[i].apply(this,t):r;++i<n;)a=o[i].call(this,a);return a}}}function Nn(t,e){return function(n,r,i){return"function"==typeof r&&i===N&&As(n)?t(n,r):e(n,an(r,i,3))}}function Ln(t){return function(e,n,r){return"function"==typeof n&&r===N||(n=an(n,r,3)),t(e,n,to)}}function Sn(t){return function(e,n,r){return"function"==typeof n&&r===N||(n=an(n,r,3)),t(e,n)}}function Tn(t){return function(e,n,r){var i={};return n=Vn(n,r,3),Me(e,function(e,r,o){var a=n(e,r,o);r=t?a:r,e=t?e:a,i[r]=e}),i}}function An(t){return function(e,n,r){return e=s(e),(t?e:"")+In(e,n,r)+(t?"":e)}}function Dn(t){var e=yi(function(n,r){return Bn(n,t,N,r,x(r,e.placeholder))});return e}function Mn(t,e){return function(n,r,i,o){var a=arguments.length<3;return"function"==typeof r&&o===N&&As(n)?t(n,r,i,a):He(n,Vn(r,o,4),i,a,e)}}function Pn(t,e,n,r,i,o,a,s,u,c){function l(){for(var m=arguments.length,b=m,w=Vo(m);b--;)w[b]=arguments[b];if(r&&(w=un(w,r,i)),o&&(w=cn(w,o,a)),p||v){var _=l.placeholder,E=x(w,_);if((m-=E.length)<c){var k=s?ne(s):N,L=_a(c-m,0),A=p?E:N,D=p?N:E,M=p?w:N,C=p?N:w;e|=p?P:I,e&=~(p?I:P),g||(e&=~(S|T));var O=[t,e,n,M,A,C,D,k,u,L],R=Pn.apply(N,O);return er(t)&&qa(R,O),R.placeholder=_,R}}var B=f?n:this,F=d?B[t]:t;return s&&(w=ur(w,s)),h&&u<w.length&&(w.length=u),this&&this!==Jt&&this instanceof l&&(F=y||yn(t)),F.apply(B,w)}var h=e&C,f=e&S,d=e&T,p=e&D,g=e&A,v=e&M,y=d?N:yn(t);return l}function In(t,e,n){var r=t.length;if(e=+e,r>=e||!ba(e))return"";var i=e-r;return n=null==n?" ":n+"",yo(n,va(i/n.length)).slice(0,i)}function Cn(t,e,n,r){function i(){for(var e=-1,s=arguments.length,u=-1,c=r.length,l=Vo(c+s);++u<c;)l[u]=r[u];for(;s--;)l[u++]=arguments[++e];return(this&&this!==Jt&&this instanceof i?a:t).apply(o?n:this,l)}var o=e&S,a=yn(t);return i}function On(t){var e=Xo[t];return function(t,n){return n=n===N?0:+n||0,n?(n=ca(10,n),e(t*n)/n):e(t)}}function Rn(t){return function(e,n,r,i){var o=Vn(r);return null==r&&o===be?rn(e,n,t):on(e,n,o(r,i,1),t)}}function Bn(t,e,n,r,i,o,a,s){var u=e&T;if(!u&&"function"!=typeof t)throw new Zo(q);var c=r?r.length:0;if(c||(e&=~(P|I),r=i=N),c-=i?i.length:0,e&I){var l=r,h=i;r=i=N}var f=u?N:Va(t),d=[t,e,n,r,i,l,h,o,a,s];if(f&&(ir(d,f),e=d[1],s=d[9]),d[9]=null==s?u?0:t.length:_a(s-c,0)||0,e==S)var p=pn(d[0],d[2]);else p=e!=P&&e!=(S|P)||d[4].length?Pn.apply(N,d):Cn.apply(N,d);return(f?ja:qa)(p,d)}function Fn(t,e,n,r,i,o,a){var s=-1,u=t.length,c=e.length;if(u!=c&&!(i&&c>u))return!1;for(;++s<u;){var l=t[s],h=e[s],f=r?r(i?h:l,i?l:h,s):N;if(f!==N){if(f)continue;return!1}if(i){if(!fe(e,function(t){return l===t||n(l,t,r,i,o,a)}))return!1}else if(l!==h&&!n(l,h,r,i,o,a))return!1}return!0}function zn(t,e,n){switch(n){case H:case W:return+t==+e;case $:return t.name==e.name&&t.message==e.message;case Q:return t!=+t?e!=+e:t==+e;case J:case tt:return t==e+""}return!1}function jn(t,e,n,r,i,o,a){var s=js(t),u=s.length;if(u!=js(e).length&&!i)return!1;for(var c=u;c--;){var l=s[c];if(!(i?l in e:ea.call(e,l)))return!1}for(var h=i;++c<u;){l=s[c];var f=t[l],d=e[l],p=r?r(i?d:f,i?f:d,l):N;if(!(p===N?n(f,d,r,i,o,a):p))return!1;h||(h="constructor"==l)}if(!h){var g=t.constructor,v=e.constructor;if(g!=v&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof v&&v instanceof v))return!1}return!0}function Vn(t,n,r){var i=e.callback||Lo;return i=i===Lo?be:i,r?i(t,n,r):i}function Gn(t){for(var e=t.name,n=Ca[e],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function qn(t,n,r){var i=e.indexOf||kr;return i=i===kr?o:i,t?i(t,n,r):i}function Yn(t){for(var e=eo(t),n=e.length;n--;)e[n][2]=rr(e[n][1]);return e}function Xn(t,e){var n=null==t?N:t[e];return Bi(n)?n:N}function Un(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Ea(e,t+a)
;break;case"takeRight":t=_a(t,e-a)}}return{start:t,end:e}}function Hn(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ea.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Wn(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Ho),new e}function $n(t,e,n){var r=t.constructor;switch(e){case et:return sn(t);case H:case W:return new r(+t);case nt:case rt:case it:case ot:case at:case st:case ut:case ct:case lt:var i=t.buffer;return new r(n?sn(i):i,t.byteOffset,t.length);case Q:case tt:return new r(t);case J:var o=new r(t.source,At.exec(t));o.lastIndex=t.lastIndex}return o}function Zn(t,e,n){null==t||tr(e,t)||(e=fr(e),t=1==e.length?t:Ce(t,We(e,0,-1)),e=Lr(e));var r=null==t?t:t[e];return null==r?N:r.apply(t,n)}function Qn(t){return null!=t&&nr(Ga(t))}function Kn(t,e){return t="number"==typeof t||Pt.test(t)?+t:-1,e=null==e?Pa:e,t>-1&&t%1==0&&t<e}function Jn(t,e,n){if(!Ci(n))return!1;var r=typeof e;if("number"==r?Qn(n)&&Kn(e,n.length):"string"==r&&e in n){var i=n[e];return t===t?t===i:i!==i}return!1}function tr(t,e){var n=typeof t;return!!("string"==n&&_t.test(t)||"number"==n)||!As(t)&&(!wt.test(t)||null!=e&&t in hr(e))}function er(t){var n=Gn(t);if(!(n in Vt.prototype))return!1;var r=e[n];if(t===r)return!0;var i=Va(r);return!!i&&t===i[0]}function nr(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Pa}function rr(t){return t===t&&!Ci(t)}function ir(t,e){var n=t[1],r=e[1],i=n|r,o=i<C,a=r==C&&n==D||r==C&&n==O&&t[7].length<=e[8]||r==(C|O)&&n==D;if(!o&&!a)return t;r&S&&(t[2]=e[2],i|=n&S?0:A);var s=e[3];if(s){var u=t[3];t[3]=u?un(u,s,e[4]):ne(s),t[4]=u?x(t[3],Y):ne(e[4])}return s=e[5],s&&(u=t[5],t[5]=u?cn(u,s,e[6]):ne(s),t[6]=u?x(t[5],Y):ne(e[6])),s=e[7],s&&(t[7]=ne(s)),r&C&&(t[8]=null==t[8]?e[8]:Ea(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function or(t,e){return t===N?e:Ds(t,e,or)}function ar(t,e){t=hr(t);for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];o in t&&(i[o]=t[o])}return i}function sr(t,e){var n={};return De(t,function(t,r,i){e(t,r,i)&&(n[r]=t)}),n}function ur(t,e){for(var n=t.length,r=Ea(e.length,n),i=ne(t);r--;){var o=e[r];t[r]=Kn(o,n)?i[o]:N}return t}function cr(t){for(var e=to(t),n=e.length,r=n&&t.length,i=!!r&&nr(r)&&(As(t)||Ni(t)),o=-1,a=[];++o<n;){var s=e[o];(i&&Kn(s,r)||ea.call(t,s))&&a.push(s)}return a}function lr(t){return null==t?[]:Qn(t)?Ci(t)?t:Ho(t):oo(t)}function hr(t){return Ci(t)?t:Ho(t)}function fr(t){if(As(t))return t;var e=[];return s(t).replace(Et,function(t,n,r,i){e.push(r?i.replace(St,"$1"):n||t)}),e}function dr(t){return t instanceof Vt?t.clone():new m(t.__wrapped__,t.__chain__,ne(t.__actions__))}function pr(t,e,n){e=(n?Jn(t,e,n):null==e)?1:_a(ma(e)||1,1);for(var r=0,i=t?t.length:0,o=-1,a=Vo(va(i/e));r<i;)a[++o]=We(t,r,r+=e);return a}function gr(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var o=t[e];o&&(i[++r]=o)}return i}function vr(t,e,n){return(t?t.length:0)?((n?Jn(t,e,n):null==e)&&(e=1),We(t,e<0?0:e)):[]}function yr(t,e,n){var r=t?t.length:0;return r?((n?Jn(t,e,n):null==e)&&(e=1),e=r-(+e||0),We(t,0,e<0?0:e)):[]}function mr(t,e,n){return t&&t.length?en(t,Vn(e,n,3),!0,!0):[]}function xr(t,e,n){return t&&t.length?en(t,Vn(e,n,3),!0):[]}function br(t,e,n,r){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Jn(t,e,n)&&(n=0,r=i),Le(t,e,n,r)):[]}function wr(t){return t?t[0]:N}function _r(t,e,n){var r=t?t.length:0;return n&&Jn(t,e,n)&&(e=!1),r?Ae(t,e):[]}function Er(t){return(t?t.length:0)?Ae(t,!0):[]}function kr(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=n<0?_a(r+n,0):n;else if(n){var i=rn(t,e);return i<r&&(e===e?e===t[i]:t[i]!==t[i])?i:-1}return o(t,e,n||0)}function Nr(t){return yr(t,1)}function Lr(t){var e=t?t.length:0;return e?t[e-1]:N}function Sr(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(n<0?_a(r+n,0):Ea(n||0,r-1))+1;else if(n){i=rn(t,e,!0)-1;var o=t[i];return(e===e?e===o:o!==o)?i:-1}if(e!==e)return v(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function Tr(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=qn(),i=t.length;++n<i;)for(var o=0,a=t[n];(o=r(e,a,o))>-1;)da.call(e,o,1);return e}function Ar(t,e,n){var r=[];if(!t||!t.length)return r;var i=-1,o=[],a=t.length;for(e=Vn(e,n,3);++i<a;){var s=t[i];e(s,i,t)&&(r.push(s),o.push(i))}return Xe(t,o),r}function Dr(t){return vr(t,1)}function Mr(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Jn(t,e,n)&&(e=0,n=r),We(t,e,n)):[]}function Pr(t,e,n){return(t?t.length:0)?((n?Jn(t,e,n):null==e)&&(e=1),We(t,0,e<0?0:e)):[]}function Ir(t,e,n){var r=t?t.length:0;return r?((n?Jn(t,e,n):null==e)&&(e=1),e=r-(+e||0),We(t,e<0?0:e)):[]}function Cr(t,e,n){return t&&t.length?en(t,Vn(e,n,3),!1,!0):[]}function Or(t,e,n){return t&&t.length?en(t,Vn(e,n,3)):[]}function Rr(t,e,n,r){if(!(t?t.length:0))return[];null!=e&&"boolean"!=typeof e&&(r=n,n=Jn(t,e,r)?N:e,e=!1);var i=Vn();return null==n&&i===be||(n=i(n,r,3)),e&&qn()==o?b(t,n):Je(t,n)}function Br(t){if(!t||!t.length)return[];var e=-1,n=0;t=se(t,function(t){if(Qn(t))return n=_a(t.length,n),!0});for(var r=Vo(n);++e<n;)r[e]=ue(t,qe(e));return r}function Fr(t,e,n){if(!(t?t.length:0))return[];var r=Br(t);return null==e?r:(e=an(e,n,4),ue(r,function(t){return le(t,e,N,!0)}))}function zr(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Qn(n))var r=r?ce(Ee(r,n),Ee(n,r)):n}return r?Je(r):[]}function jr(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||As(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function Vr(t){var n=e(t);return n.__chain__=!0,n}function Gr(t,e,n){return e.call(n,t),t}function qr(t,e,n){return e.call(n,t)}function Yr(){return Vr(this)}function Xr(){return new m(this.value(),this.__chain__)}function Ur(t){for(var e,r=this;r instanceof n;){var i=dr(r);e?o.__wrapped__=i:e=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,e}function Hr(){var t=this.__wrapped__,e=function(t){return n&&n.__dir__<0?t:t.reverse()};if(t instanceof Vt){var n=t;return this.__actions__.length&&(n=new Vt(this)),n=n.reverse(),n.__actions__.push({func:qr,args:[e],thisArg:N}),new m(n,this.__chain__)}return this.thru(e)}function Wr(){return this.value()+""}function $r(){return nn(this.__wrapped__,this.__actions__)}function Zr(t,e,n){var r=As(t)?oe:ke;return n&&Jn(t,e,n)&&(e=N),"function"==typeof e&&n===N||(e=Vn(e,n,3)),r(t,e)}function Qr(t,e,n){var r=As(t)?se:Se;return e=Vn(e,n,3),r(t,e)}function Kr(t,e){return is(t,ze(e))}function Jr(t,e,n,r){var i=t?Ga(t):0;return nr(i)||(t=oo(t),i=t.length),n="number"!=typeof n||r&&Jn(e,n,r)?0:n<0?_a(i+n,0):n||0,"string"==typeof t||!As(t)&&Gi(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&qn(t,e,n)>-1}function ti(t,e,n){var r=As(t)?ue:Fe;return e=Vn(e,n,3),r(t,e)}function ei(t,e){return ti(t,Co(e))}function ni(t,e,n){var r=As(t)?se:Se;return e=Vn(e,n,3),r(t,function(t,n,r){return!e(t,n,r)})}function ri(t,e,n){if(n?Jn(t,e,n):null==e){t=lr(t);var r=t.length;return r>0?t[Ue(0,r-1)]:N}var i=-1,o=Hi(t),r=o.length,a=r-1;for(e=Ea(e<0?0:+e||0,r);++i<e;){var s=Ue(i,a),u=o[s];o[s]=o[i],o[i]=u}return o.length=e,o}function ii(t){return ri(t,Ta)}function oi(t){var e=t?Ga(t):0;return nr(e)?e:js(t).length}function ai(t,e,n){var r=As(t)?fe:$e;return n&&Jn(t,e,n)&&(e=N),"function"==typeof e&&n===N||(e=Vn(e,n,3)),r(t,e)}function si(t,e,n){if(null==t)return[];n&&Jn(t,e,n)&&(e=N);var r=-1;return e=Vn(e,n,3),Ze(Fe(t,function(t,n,i){return{criteria:e(t,n,i),index:++r,value:t}}),l)}function ui(t,e,n,r){return null==t?[]:(r&&Jn(e,n,r)&&(n=N),As(e)||(e=null==e?[]:[e]),As(n)||(n=null==n?[]:[n]),Qe(t,e,n))}function ci(t,e){return Qr(t,ze(e))}function li(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Zo(q);var n=t;t=e,e=n}return t=ba(t=+t)?t:0,function(){if(--t<1)return e.apply(this,arguments)}}function hi(t,e,n){return n&&Jn(t,e,n)&&(e=N),e=t&&null==e?t.length:_a(+e||0,0),Bn(t,C,N,N,N,N,e)}function fi(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Zo(q);var r=t;t=e,e=r}return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=N),n}}function di(t,e,n){function r(){d&&sa(d),c&&sa(c),g=0,c=d=p=N}function i(e,n){n&&sa(n),c=d=p=N,e&&(g=gs(),l=t.apply(f,u),d||c||(u=f=N))}function o(){var t=e-(gs()-h);t<=0||t>e?i(p,c):d=fa(o,t)}function a(){i(y,d)}function s(){if(u=arguments,h=gs(),f=this,p=y&&(d||!m),v===!1)var n=m&&!d;else{c||m||(g=h);var r=v-(h-g),i=r<=0||r>v;i?(c&&(c=sa(c)),g=h,l=t.apply(f,u)):c||(c=fa(a,r))}return i&&d?d=sa(d):d||e===v||(d=fa(o,e)),n&&(i=!0,l=t.apply(f,u)),!i||d||c||(u=f=N),l}var u,c,l,h,f,d,p,g=0,v=!1,y=!0;if("function"!=typeof t)throw new Zo(q);if(e=e<0?0:+e||0,n===!0){var m=!0;y=!1}else Ci(n)&&(m=!!n.leading,v="maxWait"in n&&_a(+n.maxWait||0,e),y="trailing"in n?!!n.trailing:y);return s.cancel=r,s}function pi(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Zo(q);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new pi.Cache,n}function gi(t){if("function"!=typeof t)throw new Zo(q);return function(){return!t.apply(this,arguments)}}function vi(t){return fi(2,t)}function yi(t,e){if("function"!=typeof t)throw new Zo(q);return e=_a(e===N?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=_a(n.length-e,0),o=Vo(i);++r<i;)o[r]=n[e+r];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var a=Vo(e+1);for(r=-1;++r<e;)a[r]=n[r];return a[e]=o,t.apply(this,a)}}function mi(t){if("function"!=typeof t)throw new Zo(q);return function(e){return t.apply(this,e)}}function xi(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Zo(q);return n===!1?r=!1:Ci(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),di(t,e,{leading:r,maxWait:+e,trailing:i})}function bi(t,e){return e=null==e?To:e,Bn(e,P,N,[t],[])}function wi(t,e,n,r){return e&&"boolean"!=typeof e&&Jn(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof n?we(t,e,an(n,r,1)):we(t,e)}function _i(t,e,n){return"function"==typeof e?we(t,!0,an(e,n,1)):we(t,!0)}function Ei(t,e){return t>e}function ki(t,e){return t>=e}function Ni(t){return y(t)&&Qn(t)&&ea.call(t,"callee")&&!la.call(t,"callee")}function Li(t){return t===!0||t===!1||y(t)&&ra.call(t)==H}function Si(t){return y(t)&&ra.call(t)==W}function Ti(t){return!!t&&1===t.nodeType&&y(t)&&!ji(t)}function Ai(t){return null==t||(Qn(t)&&(As(t)||Gi(t)||Ni(t)||y(t)&&Ii(t.splice))?!t.length:!js(t).length)}function Di(t,e,n,r){n="function"==typeof n?an(n,r,3):N;var i=n?n(t,e):N;return i===N?Oe(t,e,n):!!i}function Mi(t){return y(t)&&"string"==typeof t.message&&ra.call(t)==$}function Pi(t){return"number"==typeof t&&ba(t)}function Ii(t){return Ci(t)&&ra.call(t)==Z}function Ci(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Oi(t,e,n,r){return n="function"==typeof n?an(n,r,3):N,Be(t,Yn(e),n)}function Ri(t){return zi(t)&&t!=+t}function Bi(t){return null!=t&&(Ii(t)?oa.test(ta.call(t)):y(t)&&Mt.test(t))}function Fi(t){return null===t}function zi(t){return"number"==typeof t||y(t)&&ra.call(t)==Q}function ji(t){var e;if(!y(t)||ra.call(t)!=K||Ni(t)||!ea.call(t,"constructor")&&"function"==typeof(e=t.constructor)&&!(e instanceof e))return!1;var n;return De(t,function(t,e){n=e}),n===N||ea.call(t,n)}function Vi(t){return Ci(t)&&ra.call(t)==J}function Gi(t){return"string"==typeof t||y(t)&&ra.call(t)==tt}function qi(t){return y(t)&&nr(t.length)&&!!zt[ra.call(t)]}function Yi(t){return t===N}function Xi(t,e){return t<e}function Ui(t,e){return t<=e}function Hi(t){var e=t?Ga(t):0;return nr(e)?e?ne(t):[]:oo(t)}function Wi(t){return xe(t,to(t))}function $i(t,e,n){var r=Oa(t);return n&&Jn(t,e,n)&&(e=N),e?ye(r,e):r}function Zi(t){return Ie(t,to(t))}function Qi(t,e,n){var r=null==t?N:Ce(t,fr(e),e+"");return r===N?n:r}function Ki(t,e){if(null==t)return!1;var n=ea.call(t,e);if(!n&&!tr(e)){if(e=fr(e),null==(t=1==e.length?t:Ce(t,We(e,0,-1))))return!1;e=Lr(e),n=ea.call(t,e)}return n||nr(t.length)&&Kn(e,t.length)&&(As(t)||Ni(t))}function Ji(t,e,n){n&&Jn(t,e,n)&&(e=N);for(var r=-1,i=js(t),o=i.length,a={};++r<o;){var s=i[r],u=t[s];e?ea.call(a,u)?a[u].push(s):a[u]=[s]:a[u]=s}return a}function to(t){if(null==t)return[];Ci(t)||(t=Ho(t));var e=t.length;e=e&&nr(e)&&(As(t)||Ni(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,o=Vo(e),a=e>0;++r<e;)o[r]=r+"";for(var s in t)a&&Kn(s,e)||"constructor"==s&&(i||!ea.call(t,s))||o.push(s);return o}function eo(t){t=hr(t);for(var e=-1,n=js(t),r=n.length,i=Vo(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}function no(t,e,n){var r=null==t?N:t[e];return r===N&&(null==t||tr(e,t)||(e=fr(e),t=1==e.length?t:Ce(t,We(e,0,-1)),r=null==t?N:t[Lr(e)]),r=r===N?n:r),Ii(r)?r.call(t):r}function ro(t,e,n){if(null==t)return t;var r=e+"";e=null!=t[r]||tr(e,t)?[r]:fr(e);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=e[i];Ci(s)&&(i==a?s[u]=n:null==s[u]&&(s[u]=Kn(e[i+1])?[]:{})),s=s[u]}return t}function io(t,e,n,r){var i=As(t)||qi(t);if(e=Vn(e,r,4),null==n)if(i||Ci(t)){var o=t.constructor;n=i?As(t)?new o:[]:Oa(Ii(o)?o.prototype:N)}else n={};return(i?re:Me)(t,function(t,r,i){return e(n,t,r,i)}),n}function oo(t){return tn(t,js(t))}function ao(t){return tn(t,to(t))}function so(t,e,n){return e=+e||0,n===N?(n=e,e=0):n=+n||0,t>=Ea(e,n)&&t<_a(e,n)}function uo(t,e,n){n&&Jn(t,e,n)&&(e=n=N);var r=null==t,i=null==e;if(null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=La();return Ea(t+o*(e-t+ua("1e-"+((o+"").length-1))),e)}return Ue(t,e)}function co(t){return(t=s(t))&&t.charAt(0).toUpperCase()+t.slice(1)}function lo(t){return(t=s(t))&&t.replace(It,f).replace(Lt,"")}function ho(t,e,n){t=s(t),e+="";var r=t.length;return n=n===N?r:Ea(n<0?0:+n||0,r),(n-=e.length)>=0&&t.indexOf(e,n)==n}function fo(t){return t=s(t),t&&yt.test(t)?t.replace(gt,d):t}function po(t){return t=s(t),t&&Nt.test(t)?t.replace(kt,p):t||"(?:)"}function go(t,e,n){t=s(t),e=+e;var r=t.length;if(r>=e||!ba(e))return t;var i=(e-r)/2,o=ma(i);return n=In("",va(i),n),n.slice(0,o)+t+n}function vo(t,e,n){return(n?Jn(t,e,n):null==e)?e=0:e&&(e=+e),t=bo(t),Na(t,e||(Dt.test(t)?16:10))}function yo(t,e){var n="";if(t=s(t),(e=+e)<1||!t||!ba(e))return n;do{e%2&&(n+=t),e=ma(e/2),t+=t}while(e);return n}function mo(t,e,n){return t=s(t),n=null==n?0:Ea(n<0?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function xo(t,n,r){var i=e.templateSettings;r&&Jn(t,n,r)&&(n=r=N),t=s(t),n=ve(ye({},r||n),i,ge);var o,a,u=ve(ye({},n.imports),i.imports,ge),c=js(u),l=tn(u,c),h=0,f=n.interpolate||Ct,d="__p += '",p=Wo((n.escape||Ct).source+"|"+f.source+"|"+(f===bt?Tt:Ct).source+"|"+(n.evaluate||Ct).source+"|$","g"),v="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Ft+"]")+"\n";t.replace(p,function(e,n,r,i,s,u){return r||(r=i),d+=t.slice(h,u).replace(Ot,g),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=u+e.length,e}),d+="';\n";var y=n.variable;y||(d="with (obj) {\n"+d+"\n}\n"),d=(a?d.replace(ht,""):d).replace(ft,"$1").replace(dt,"$1;"),d="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Qs(function(){return Yo(c,v+"return "+d).apply(N,l)});if(m.source=d,Mi(m))throw m;return m}function bo(t,e,n){var r=t;return(t=s(t))?(n?Jn(r,e,n):null==e)?t.slice(w(t),_(t)+1):(e+="",t.slice(u(t,e),c(t,e)+1)):t}function wo(t,e,n){var r=t;return t=s(t),t?(n?Jn(r,e,n):null==e)?t.slice(w(t)):t.slice(u(t,e+"")):t}function _o(t,e,n){var r=t;return t=s(t),t?(n?Jn(r,e,n):null==e)?t.slice(0,_(t)+1):t.slice(0,c(t,e+"")+1):t}function Eo(t,e,n){n&&Jn(t,e,n)&&(e=N);var r=R,i=B;if(null!=e)if(Ci(e)){var o="separator"in e?e.separator:o;r="length"in e?+e.length||0:r,i="omission"in e?s(e.omission):i}else r=+e||0;if(t=s(t),r>=t.length)return t;var a=r-i.length;if(a<1)return i;var u=t.slice(0,a);if(null==o)return u+i;if(Vi(o)){if(t.slice(a).search(o)){var c,l,h=t.slice(0,a);for(o.global||(o=Wo(o.source,(At.exec(o)||"")+"g")),o.lastIndex=0;c=o.exec(h);)l=c.index;u=u.slice(0,null==l?a:l)}}else if(t.indexOf(o,a)!=a){var f=u.lastIndexOf(o);f>-1&&(u=u.slice(0,f))}return u+i}function ko(t){return t=s(t),t&&vt.test(t)?t.replace(pt,E):t}function No(t,e,n){return n&&Jn(t,e,n)&&(e=N),t=s(t),t.match(e||Rt)||[]}function Lo(t,e,n){return n&&Jn(t,e,n)&&(e=N),y(t)?Ao(t):be(t,e)}function So(t){return function(){return t}}function To(t){return t}function Ao(t){return ze(we(t,!0))}function Do(t,e){return je(t,we(e,!0))}function Mo(t,e,n){if(null==n){var r=Ci(e),i=r?js(e):N,o=i&&i.length?Ie(e,i):N;(o?o.length:r)||(o=!1,n=e,e=t,t=this)}o||(o=Ie(e,js(e)));var a=!0,s=-1,u=Ii(t),c=o.length;n===!1?a=!1:Ci(n)&&"chain"in n&&(a=n.chain);for(;++s<c;){var l=o[s],h=e[l];t[l]=h,u&&(t.prototype[l]=function(e){return function(){var n=this.__chain__;if(a||n){var r=t(this.__wrapped__);return(r.__actions__=ne(this.__actions__)).push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}return e.apply(t,ce([this.value()],arguments))}}(h))}return t}function Po(){return Jt._=ia,this}function Io(){}function Co(t){return tr(t)?qe(t):Ye(t)}function Oo(t){return function(e){return Ce(t,fr(e),e+"")}}function Ro(t,e,n){n&&Jn(t,e,n)&&(e=n=N),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var r=-1,i=_a(va((e-t)/(n||1)),0),o=Vo(i);++r<i;)o[r]=t,t+=n;return o}function Bo(t,e,n){if((t=ma(t))<1||!ba(t))return[];var r=-1,i=Vo(Ea(t,Aa));for(e=an(e,n,1);++r<t;)r<Aa?i[r]=e(r):e(r);return i}function Fo(t){var e=++na;return s(t)+e}function zo(t,e){return(+t||0)+(+e||0)}function jo(t,e,n){return n&&Jn(t,e,n)&&(e=N),e=Vn(e,n,3),1==e.length?de(As(t)?t:lr(t),e):Ke(t,e)}t=t?te.defaults(Jt.Object(),t,te.pick(Jt,Bt)):Jt;var Vo=t.Array,Go=t.Date,qo=t.Error,Yo=t.Function,Xo=t.Math,Uo=t.Number,Ho=t.Object,Wo=t.RegExp,$o=t.String,Zo=t.TypeError,Qo=Vo.prototype,Ko=Ho.prototype,Jo=$o.prototype,ta=Yo.prototype.toString,ea=Ko.hasOwnProperty,na=0,ra=Ko.toString,ia=Jt._,oa=Wo("^"+ta.call(ea).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aa=t.ArrayBuffer,sa=t.clearTimeout,ua=t.parseFloat,ca=Xo.pow,la=Ko.propertyIsEnumerable,ha=Xn(t,"Set"),fa=t.setTimeout,da=Qo.splice,pa=t.Uint8Array,ga=Xn(t,"WeakMap"),va=Xo.ceil,ya=Xn(Ho,"create"),ma=Xo.floor,xa=Xn(Vo,"isArray"),ba=t.isFinite,wa=Xn(Ho,"keys"),_a=Xo.max,Ea=Xo.min,ka=Xn(Go,"now"),Na=t.parseInt,La=Xo.random,Sa=Uo.NEGATIVE_INFINITY,Ta=Uo.POSITIVE_INFINITY,Aa=4294967295,Da=Aa-1,Ma=Aa>>>1,Pa=9007199254740991,Ia=ga&&new ga,Ca={};e.support={};e.templateSettings={escape:mt,evaluate:xt,interpolate:bt,variable:"",imports:{_:e}};var Oa=function(){function t(){}return function(e){if(Ci(e)){t.prototype=e;var n=new t;t.prototype=N}return n||{}}}(),Ra=fn(Me),Ba=fn(Pe,!0),Fa=dn(),za=dn(!0),ja=Ia?function(t,e){return Ia.set(t,e),t}:To,Va=Ia?function(t){return Ia.get(t)}:Io,Ga=qe("length"),qa=function(){var t=0,e=0;return function(n,r){var i=gs(),o=z-(i-e);if(e=i,o>0){if(++t>=F)return n}else t=0;return ja(n,r)}}(),Ya=yi(function(t,e){return y(t)&&Qn(t)?Ee(t,Ae(e,!1,!0)):[]}),Xa=_n(),Ua=_n(!0),Ha=yi(function(t){for(var e=t.length,n=e,r=Vo(h),i=qn(),a=i==o,s=[];n--;){var u=t[n]=Qn(u=t[n])?u:[];r[n]=a&&u.length>=120?gn(n&&u):null}var c=t[0],l=-1,h=c?c.length:0,f=r[0];t:for(;++l<h;)if(u=c[l],(f?Qt(f,u):i(s,u,0))<0){for(var n=e;--n;){var d=r[n];if((d?Qt(d,u):i(t[n],u,0))<0)continue t}f&&f.push(u),s.push(u)}return s}),Wa=yi(function(t,e){e=Ae(e);var n=me(t,e);return Xe(t,e.sort(r)),n}),$a=Rn(),Za=Rn(!0),Qa=yi(function(t){return Je(Ae(t,!1,!0))}),Ka=yi(function(t,e){return Qn(t)?Ee(t,e):[]}),Ja=yi(Br),ts=yi(function(t){var e=t.length,n=e>2?t[e-2]:N,r=e>1?t[e-1]:N;return e>2&&"function"==typeof n?e-=2:(n=e>1&&"function"==typeof r?(--e,r):N,r=N),t.length=e,Fr(t,n,r)}),es=yi(function(t){return t=Ae(t),this.thru(function(e){return ee(As(e)?e:[hr(e)],t)})}),ns=yi(function(t,e){return me(t,Ae(e))}),rs=ln(function(t,e,n){ea.call(t,n)?++t[n]:t[n]=1}),is=wn(Ra),os=wn(Ba,!0),as=Nn(re,Ra),ss=Nn(ie,Ba),us=ln(function(t,e,n){ea.call(t,n)?t[n].push(e):t[n]=[e]}),cs=ln(function(t,e,n){t[n]=e}),ls=yi(function(t,e,n){var r=-1,i="function"==typeof e,o=tr(e),a=Qn(t)?Vo(t.length):[];return Ra(t,function(t){var s=i?e:o&&null!=t?t[e]:N;a[++r]=s?s.apply(t,n):Zn(t,e,n)}),a}),hs=ln(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),fs=Mn(le,Ra),ds=Mn(he,Ba),ps=yi(function(t,e){if(null==t)return[];var n=e[2];return n&&Jn(e[0],e[1],n)&&(e.length=1),Qe(t,Ae(e),[])}),gs=ka||function(){return(new Go).getTime()},vs=yi(function(t,e,n){var r=S;if(n.length){var i=x(n,vs.placeholder);r|=P}return Bn(t,r,e,n,i)}),ys=yi(function(t,e){e=e.length?Ae(e):Zi(t);for(var n=-1,r=e.length;++n<r;){var i=e[n];t[i]=Bn(t[i],S,t)}return t}),ms=yi(function(t,e,n){var r=S|T;if(n.length){var i=x(n,ms.placeholder);r|=P}return Bn(e,r,t,n,i)}),xs=mn(D),bs=mn(M),ws=yi(function(t,e){return _e(t,1,e)}),_s=yi(function(t,e,n){return _e(t,e,n)}),Es=kn(),ks=kn(!0),Ns=yi(function(t,e){if(e=Ae(e),"function"!=typeof t||!oe(e,a))throw new Zo(q);var n=e.length;return yi(function(r){for(var i=Ea(r.length,n);i--;)r[i]=e[i](r[i]);return t.apply(this,r)})}),Ls=Dn(P),Ss=Dn(I),Ts=yi(function(t,e){return Bn(t,O,N,N,N,Ae(e))}),As=xa||function(t){return y(t)&&nr(t.length)&&ra.call(t)==U},Ds=hn(Ve),Ms=hn(function(t,e,n){return n?ve(t,e,n):ye(t,e)}),Ps=xn(Ms,pe),Is=xn(Ds,or),Cs=En(Me),Os=En(Pe),Rs=Ln(Fa),Bs=Ln(za),Fs=Sn(Me),zs=Sn(Pe),js=wa?function(t){var e=null==t?N:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Qn(t)?cr(t):Ci(t)?wa(t):[]}:cr,Vs=Tn(!0),Gs=Tn(),qs=yi(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=ue(Ae(e),$o);return ar(t,Ee(to(t),e))}var n=an(e[0],e[1],3);return sr(t,function(t,e,r){return!n(t,e,r)})}),Ys=yi(function(t,e){return null==t?{}:"function"==typeof e[0]?sr(t,an(e[0],e[1],3)):ar(t,Ae(e))}),Xs=vn(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Us=vn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Hs=An(),Ws=An(!0),$s=vn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Zs=vn(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Qs=yi(function(t,e){try{return t.apply(N,e)}catch(t){return Mi(t)?t:new qo(t)}}),Ks=yi(function(t,e){return function(n){return Zn(n,t,e)}}),Js=yi(function(t,e){return function(n){return Zn(t,n,e)}}),tu=On("ceil"),eu=On("floor"),nu=bn(Ei,Sa),ru=bn(Xi,Ta),iu=On("round");return e.prototype=n.prototype,m.prototype=Oa(n.prototype),m.prototype.constructor=m,Vt.prototype=Oa(n.prototype),Vt.prototype.constructor=Vt,Xt.prototype.delete=Ut,Xt.prototype.get=Ht,Xt.prototype.has=Wt,Xt.prototype.set=$t,Zt.prototype.push=Kt,pi.Cache=Xt,e.after=li,e.ary=hi,e.assign=Ms,e.at=ns,e.before=fi,e.bind=vs,e.bindAll=ys,e.bindKey=ms,e.callback=Lo,e.chain=Vr,e.chunk=pr,e.compact=gr,e.constant=So,e.countBy=rs,e.create=$i,e.curry=xs,e.curryRight=bs,e.debounce=di,e.defaults=Ps,e.defaultsDeep=Is,e.defer=ws,e.delay=_s,e.difference=Ya,e.drop=vr,e.dropRight=yr,e.dropRightWhile=mr,e.dropWhile=xr,e.fill=br,e.filter=Qr,e.flatten=_r,e.flattenDeep=Er,e.flow=Es,e.flowRight=ks,e.forEach=as,e.forEachRight=ss,e.forIn=Rs,e.forInRight=Bs,e.forOwn=Fs,e.forOwnRight=zs,e.functions=Zi,e.groupBy=us,e.indexBy=cs,e.initial=Nr,e.intersection=Ha,e.invert=Ji,e.invoke=ls,e.keys=js,e.keysIn=to,e.map=ti,e.mapKeys=Vs,e.mapValues=Gs,e.matches=Ao,e.matchesProperty=Do,e.memoize=pi,e.merge=Ds,e.method=Ks,e.methodOf=Js,e.mixin=Mo,e.modArgs=Ns,e.negate=gi,e.omit=qs,e.once=vi,e.pairs=eo,e.partial=Ls,e.partialRight=Ss,e.partition=hs,e.pick=Ys,e.pluck=ei,e.property=Co,e.propertyOf=Oo,e.pull=Tr,e.pullAt=Wa,e.range=Ro,e.rearg=Ts,e.reject=ni,e.remove=Ar,e.rest=Dr,e.restParam=yi,e.set=ro,e.shuffle=ii,e.slice=Mr,e.sortBy=si,e.sortByAll=ps,e.sortByOrder=ui,e.spread=mi,e.take=Pr,e.takeRight=Ir,e.takeRightWhile=Cr,e.takeWhile=Or,e.tap=Gr,e.throttle=xi,e.thru=qr,e.times=Bo,e.toArray=Hi,e.toPlainObject=Wi,e.transform=io,e.union=Qa,e.uniq=Rr,e.unzip=Br,e.unzipWith=Fr,e.values=oo,e.valuesIn=ao,e.where=ci,e.without=Ka,e.wrap=bi,e.xor=zr,e.zip=Ja,e.zipObject=jr,e.zipWith=ts,e.backflow=ks,e.collect=ti,e.compose=ks,e.each=as,e.eachRight=ss,e.extend=Ms,e.iteratee=Lo,e.methods=Zi,e.object=jr,e.select=Qr,e.tail=Dr,e.unique=Rr,Mo(e,e),e.add=zo,e.attempt=Qs,e.camelCase=Xs,e.capitalize=co,e.ceil=tu,e.clone=wi,e.cloneDeep=_i,e.deburr=lo,e.endsWith=ho,e.escape=fo,e.escapeRegExp=po,e.every=Zr,e.find=is,e.findIndex=Xa,e.findKey=Cs,e.findLast=os,e.findLastIndex=Ua,e.findLastKey=Os,e.findWhere=Kr,e.first=wr,e.floor=eu,e.get=Qi,e.gt=Ei,e.gte=ki,e.has=Ki,e.identity=To,e.includes=Jr,e.indexOf=kr,e.inRange=so,e.isArguments=Ni,e.isArray=As,e.isBoolean=Li,e.isDate=Si,e.isElement=Ti,e.isEmpty=Ai,e.isEqual=Di,e.isError=Mi,e.isFinite=Pi,e.isFunction=Ii,e.isMatch=Oi,e.isNaN=Ri,e.isNative=Bi,e.isNull=Fi,e.isNumber=zi,e.isObject=Ci,e.isPlainObject=ji,e.isRegExp=Vi,e.isString=Gi,e.isTypedArray=qi,e.isUndefined=Yi,e.kebabCase=Us,e.last=Lr,e.lastIndexOf=Sr,e.lt=Xi,e.lte=Ui,e.max=nu,e.min=ru,e.noConflict=Po,e.noop=Io,e.now=gs,e.pad=go,e.padLeft=Hs,e.padRight=Ws,e.parseInt=vo,e.random=uo,e.reduce=fs,e.reduceRight=ds,e.repeat=yo,e.result=no,e.round=iu,e.runInContext=k,e.size=oi,e.snakeCase=$s,e.some=ai,e.sortedIndex=$a,e.sortedLastIndex=Za,e.startCase=Zs,e.startsWith=mo,e.sum=jo,e.template=xo,e.trim=bo,e.trimLeft=wo,e.trimRight=_o,e.trunc=Eo,e.unescape=ko,e.uniqueId=Fo,e.words=No,e.all=Zr,e.any=ai,e.contains=Jr,e.eq=Di,e.detect=is,e.foldl=fs,e.foldr=ds,e.head=wr,e.include=Jr,e.inject=fs,Mo(e,function(){var t={};return Me(e,function(n,r){e.prototype[r]||(t[r]=n)}),t}(),!1),e.sample=ri,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return ri(e,t)}):ri(this.value())},e.VERSION=L,re(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),re(["drop","take"],function(t,e){Vt.prototype[t]=function(n){var r=this.__filtered__;if(r&&!e)return new Vt(this);n=null==n?1:_a(ma(n)||0,0);var i=this.clone();return r?i.__takeCount__=Ea(i.__takeCount__,n):i.__views__.push({size:n,type:t+(i.__dir__<0?"Right":"")}),i},Vt.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),re(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n!=G;Vt.prototype[t]=function(t,e){var i=this.clone();return i.__iteratees__.push({iteratee:Vn(t,e,1),type:n}),i.__filtered__=i.__filtered__||r,i}}),re(["first","last"],function(t,e){var n="take"+(e?"Right":"");Vt.prototype[t]=function(){return this[n](1).value()[0]}}),re(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");Vt.prototype[t]=function(){return this.__filtered__?new Vt(this):this[n](1)}}),re(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?ze:Co;Vt.prototype[t]=function(t){return this[n](r(t))}}),Vt.prototype.compact=function(){return this.filter(To)},Vt.prototype.reject=function(t,e){return t=Vn(t,e,1),this.filter(function(e){return!t(e)})},Vt.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(t>0||e<0)?new Vt(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==N&&(e=+e||0,n=e<0?n.dropRight(-e):n.take(e-t)),n)},Vt.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},Vt.prototype.toArray=function(){return this.take(Ta)},Me(Vt.prototype,function(t,n){var r=/^(?:filter|map|reject)|While$/.test(n),i=/^(?:first|last)$/.test(n),o=e[i?"take"+("last"==n?"Right":""):n];o&&(e.prototype[n]=function(){var e=i?[1]:arguments,n=this.__chain__,a=this.__wrapped__,s=!!this.__actions__.length,u=a instanceof Vt,c=e[0],l=u||As(a);l&&r&&"function"==typeof c&&1!=c.length&&(u=l=!1);var h=function(t){return i&&n?o(t,1)[0]:o.apply(N,ce([t],e))},f={func:qr,args:[h],thisArg:N},d=u&&!s;if(i&&!n)return d?(a=a.clone(),a.__actions__.push(f),t.call(a)):o.call(N,this.value())[0];if(!i&&l){a=d?a:new Vt(this);var p=t.apply(a,e);return p.__actions__.push(f),new m(p,n)}return this.thru(h)})}),re(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?Jo:Qo)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?n.apply(this.value(),t):this[r](function(e){return n.apply(e,t)})}}),Me(Vt.prototype,function(t,n){var r=e[n];if(r){var i=r.name;(Ca[i]||(Ca[i]=[])).push({name:n,func:r})}}),Ca[Pn(N,T).name]=[{name:"wrapper",func:N}],Vt.prototype.clone=Gt,Vt.prototype.reverse=qt,Vt.prototype.value=Yt,e.prototype.chain=Yr,e.prototype.commit=Xr,e.prototype.concat=es,e.prototype.plant=Ur,e.prototype.reverse=Hr,e.prototype.toString=Wr,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=$r,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var N,L="3.10.1",S=1,T=2,A=4,D=8,M=16,P=32,I=64,C=128,O=256,R=30,B="...",F=150,z=16,j=200,V=1,G=2,q="Expected a function",Y="__lodash_placeholder__",X="[object Arguments]",U="[object Array]",H="[object Boolean]",W="[object Date]",$="[object Error]",Z="[object Function]",Q="[object Number]",K="[object Object]",J="[object RegExp]",tt="[object String]",et="[object ArrayBuffer]",nt="[object Float32Array]",rt="[object Float64Array]",it="[object Int8Array]",ot="[object Int16Array]",at="[object Int32Array]",st="[object Uint8Array]",ut="[object Uint8ClampedArray]",ct="[object Uint16Array]",lt="[object Uint32Array]",ht=/\b__p \+= '';/g,ft=/\b(__p \+=) '' \+/g,dt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pt=/&(?:amp|lt|gt|quot|#39|#96);/g,gt=/[&<>"'`]/g,vt=RegExp(pt.source),yt=RegExp(gt.source),mt=/<%-([\s\S]+?)%>/g,xt=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,wt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,_t=/^\w*$/,Et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,kt=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Nt=RegExp(kt.source),Lt=/[\u0300-\u036f\ufe20-\ufe23]/g,St=/\\(\\)?/g,Tt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,At=/\w*$/,Dt=/^0[xX]/,Mt=/^\[object .+?Constructor\]$/,Pt=/^\d+$/,It=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ct=/($^)/,Ot=/['\n\r\u2028\u2029\\]/g,Rt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),Bt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Ft=-1,zt={};zt[nt]=zt[rt]=zt[it]=zt[ot]=zt[at]=zt[st]=zt[ut]=zt[ct]=zt[lt]=!0,zt[X]=zt[U]=zt[et]=zt[H]=zt[W]=zt[$]=zt[Z]=zt["[object Map]"]=zt[Q]=zt[K]=zt[J]=zt["[object Set]"]=zt[tt]=zt["[object WeakMap]"]=!1;var jt={};jt[X]=jt[U]=jt[et]=jt[H]=jt[W]=jt[nt]=jt[rt]=jt[it]=jt[ot]=jt[at]=jt[Q]=jt[K]=jt[J]=jt[tt]=jt[st]=jt[ut]=jt[ct]=jt[lt]=!0,jt[$]=jt[Z]=jt["[object Map]"]=jt["[object Set]"]=jt["[object WeakMap]"]=!1;var Vt={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Gt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},qt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Yt={function:!0,object:!0},Xt={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",
f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ht=Yt[typeof n]&&n&&!n.nodeType&&n,Wt=Yt[typeof e]&&e&&!e.nodeType&&e,$t=Ht&&Wt&&"object"==typeof t&&t&&t.Object&&t,Zt=Yt[typeof self]&&self&&self.Object&&self,Qt=Yt[typeof window]&&window&&window.Object&&window,Kt=Wt&&Wt.exports===Ht&&Ht,Jt=$t||Qt!==(this&&this.window)&&Qt||Zt||this,te=k();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Jt._=te,define(function(){return te})):Ht&&Wt?Kt?(Wt.exports=te)._=te:Ht._=te:Jt._=te}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],201:[function(t,e,n){n.endianness=function(){return"LE"},n.hostname=function(){return"undefined"!=typeof location?location.hostname:""},n.loadavg=function(){return[]},n.uptime=function(){return 0},n.freemem=function(){return Number.MAX_VALUE},n.totalmem=function(){return Number.MAX_VALUE},n.cpus=function(){return[]},n.type=function(){return"Browser"},n.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},n.networkInterfaces=n.getNetworkInterfaces=function(){return{}},n.arch=function(){return"javascript"},n.platform=function(){return"browser"},n.tmpdir=n.tmpDir=function(){return"/tmp"},n.EOL="\n"},{}],202:[function(t,e,n){(function(t){function e(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};n.resolve=function(){for(var n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,i="/"===a.charAt(0))}return n=e(r(n.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+n||"."},n.normalize=function(t){var i=n.isAbsolute(t),o="/"===a(t,-1);return t=e(r(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(r(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var i=r(t.split("/")),o=r(e.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}for(var c=[],u=s;u<i.length;u++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var e=o(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return o(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,t("g5I+bs"))},{"g5I+bs":203}],203:[function(t,e,n){function r(){}var i=e.exports={};i.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){n.shift()()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=r,i.addListener=r,i.once=r,i.off=r,i.removeListener=r,i.removeAllListeners=r,i.emit=r,i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],204:[function(t,e,n){!function(t,r){"function"==typeof define&&define.amd?define(function(){return t.returnExportsGlobal=r()}):"object"==typeof n?e.exports=r():t.Springy=r()}(this,function(){var t={},e=t.Graph=function(){this.nodeSet={},this.nodes=[],this.edges=[],this.adjacency={},this.nextNodeId=0,this.nextEdgeId=0,this.eventListeners=[]},n=t.Node=function(t,e){this.id=t,this.data=void 0!==e?e:{}},r=t.Edge=function(t,e,n,r){this.id=t,this.source=e,this.target=n,this.data=void 0!==r?r:{}};e.prototype.addNode=function(t){return t.id in this.nodeSet||this.nodes.push(t),this.nodeSet[t.id]=t,this.notify(),t},e.prototype.addNodes=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t],r=new n(e,{label:e});this.addNode(r)}},e.prototype.addEdge=function(t){var e=!1;return this.edges.forEach(function(n){t.id===n.id&&(e=!0)}),e||this.edges.push(t),t.source.id in this.adjacency||(this.adjacency[t.source.id]={}),t.target.id in this.adjacency[t.source.id]||(this.adjacency[t.source.id][t.target.id]=[]),e=!1,this.adjacency[t.source.id][t.target.id].forEach(function(n){t.id===n.id&&(e=!0)}),e||this.adjacency[t.source.id][t.target.id].push(t),this.notify(),t},e.prototype.addEdges=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t],n=this.nodeSet[e[0]];if(void 0==n)throw new TypeError("invalid node name: "+e[0]);var r=this.nodeSet[e[1]];if(void 0==r)throw new TypeError("invalid node name: "+e[1]);var i=e[2];this.newEdge(n,r,i)}},e.prototype.newNode=function(t){var e=new n(this.nextNodeId++,t);return this.addNode(e),e},e.prototype.newEdge=function(t,e,n){var i=new r(this.nextEdgeId++,t,e,n);return this.addEdge(i),i},e.prototype.loadJSON=function(t){("string"==typeof t||t instanceof String)&&(t=JSON.parse(t)),("nodes"in t||"edges"in t)&&(this.addNodes.apply(this,t.nodes),this.addEdges.apply(this,t.edges))},e.prototype.getEdges=function(t,e){return t.id in this.adjacency&&e.id in this.adjacency[t.id]?this.adjacency[t.id][e.id]:[]},e.prototype.removeNode=function(t){t.id in this.nodeSet&&delete this.nodeSet[t.id];for(var e=this.nodes.length-1;e>=0;e--)this.nodes[e].id===t.id&&this.nodes.splice(e,1);this.detachNode(t)},e.prototype.detachNode=function(t){this.edges.slice().forEach(function(e){e.source.id!==t.id&&e.target.id!==t.id||this.removeEdge(e)},this),this.notify()},e.prototype.removeEdge=function(t){for(var e=this.edges.length-1;e>=0;e--)this.edges[e].id===t.id&&this.edges.splice(e,1);for(var n in this.adjacency){for(var r in this.adjacency[n]){for(var i=this.adjacency[n][r],o=i.length-1;o>=0;o--)this.adjacency[n][r][o].id===t.id&&this.adjacency[n][r].splice(o,1);0==this.adjacency[n][r].length&&delete this.adjacency[n][r]}s(this.adjacency[n])&&delete this.adjacency[n]}this.notify()},e.prototype.merge=function(t){var e=[];t.nodes.forEach(function(t){e.push(this.addNode(new n(t.id,t.data)))},this),t.edges.forEach(function(t){var n=e[t.from],i=e[t.to],o=t.directed?o=t.type+"-"+n.id+"-"+i.id:n.id<i.id?t.type+"-"+n.id+"-"+i.id:t.type+"-"+i.id+"-"+n.id;this.addEdge(new r(o,n,i,t.data)).data.type=t.type},this)},e.prototype.filterNodes=function(t){this.nodes.slice().forEach(function(e){t(e)||this.removeNode(e)},this)},e.prototype.filterEdges=function(t){this.edges.slice().forEach(function(e){t(e)||this.removeEdge(e)},this)},e.prototype.addGraphListener=function(t){this.eventListeners.push(t)},e.prototype.notify=function(){this.eventListeners.forEach(function(t){t.graphChanged()})};var i=t.Layout={};i.ForceDirected=function(t,e,n,r,i){this.graph=t,this.stiffness=e,this.repulsion=n,this.damping=r,this.minEnergyThreshold=i||.01,this.nodePoints={},this.edgeSprings={}},i.ForceDirected.prototype.point=function(t){if(!(t.id in this.nodePoints)){var e=void 0!==t.data.mass?t.data.mass:1;this.nodePoints[t.id]=new i.ForceDirected.Point(o.random(),e)}return this.nodePoints[t.id]},i.ForceDirected.prototype.spring=function(t){if(!(t.id in this.edgeSprings)){var e=void 0!==t.data.length?t.data.length:1,n=!1,r=this.graph.getEdges(t.source,t.target);if(r.forEach(function(t){n===!1&&t.id in this.edgeSprings&&(n=this.edgeSprings[t.id])},this),n!==!1)return new i.ForceDirected.Spring(n.point1,n.point2,0,0);this.graph.getEdges(t.target,t.source);if(r.forEach(function(t){n===!1&&t.id in this.edgeSprings&&(n=this.edgeSprings[t.id])},this),n!==!1)return new i.ForceDirected.Spring(n.point2,n.point1,0,0);this.edgeSprings[t.id]=new i.ForceDirected.Spring(this.point(t.source),this.point(t.target),e,this.stiffness)}return this.edgeSprings[t.id]},i.ForceDirected.prototype.eachNode=function(t){var e=this;this.graph.nodes.forEach(function(n){t.call(e,n,e.point(n))})},i.ForceDirected.prototype.eachEdge=function(t){var e=this;this.graph.edges.forEach(function(n){t.call(e,n,e.spring(n))})},i.ForceDirected.prototype.eachSpring=function(t){var e=this;this.graph.edges.forEach(function(n){t.call(e,e.spring(n))})},i.ForceDirected.prototype.applyCoulombsLaw=function(){this.eachNode(function(t,e){this.eachNode(function(t,n){if(e!==n){var r=e.p.subtract(n.p),i=r.magnitude()+.1,o=r.normalise();e.applyForce(o.multiply(this.repulsion).divide(i*i*.5)),n.applyForce(o.multiply(this.repulsion).divide(i*i*-.5))}})})},i.ForceDirected.prototype.applyHookesLaw=function(){this.eachSpring(function(t){var e=t.point2.p.subtract(t.point1.p),n=t.length-e.magnitude(),r=e.normalise();t.point1.applyForce(r.multiply(t.k*n*-.5)),t.point2.applyForce(r.multiply(t.k*n*.5))})},i.ForceDirected.prototype.attractToCentre=function(){this.eachNode(function(t,e){var n=e.p.multiply(-1);e.applyForce(n.multiply(this.repulsion/50))})},i.ForceDirected.prototype.updateVelocity=function(t){this.eachNode(function(e,n){n.v=n.v.add(n.a.multiply(t)).multiply(this.damping),n.a=new o(0,0)})},i.ForceDirected.prototype.updatePosition=function(t){this.eachNode(function(e,n){n.p=n.p.add(n.v.multiply(t))})},i.ForceDirected.prototype.totalEnergy=function(t){var e=0;return this.eachNode(function(t,n){var r=n.v.magnitude();e+=.5*n.m*r*r}),e};t.requestAnimationFrame=function(t,e){return function(){return t.apply(e,arguments)}}(this.requestAnimationFrame||this.webkitRequestAnimationFrame||this.mozRequestAnimationFrame||this.oRequestAnimationFrame||this.msRequestAnimationFrame||function(t,e){this.setTimeout(t,10)},this),i.ForceDirected.prototype.start=function(e,n,r){var i=this;this._started||(this._started=!0,this._stop=!1,void 0!==r&&r(),t.requestAnimationFrame(function r(){i.tick(.03),void 0!==e&&e(),i._stop||i.totalEnergy()<i.minEnergyThreshold?(i._started=!1,void 0!==n&&n()):t.requestAnimationFrame(r)}))},i.ForceDirected.prototype.stop=function(){this._stop=!0},i.ForceDirected.prototype.tick=function(t){this.applyCoulombsLaw(),this.applyHookesLaw(),this.attractToCentre(),this.updateVelocity(t),this.updatePosition(t)},i.ForceDirected.prototype.nearest=function(t){var e={node:null,point:null,distance:null},n=this;return this.graph.nodes.forEach(function(r){var i=n.point(r),o=i.p.subtract(t).magnitude();(null===e.distance||o<e.distance)&&(e={node:r,point:i,distance:o})}),e},i.ForceDirected.prototype.getBoundingBox=function(){var t=new o(-2,-2),e=new o(2,2);this.eachNode(function(n,r){r.p.x<t.x&&(t.x=r.p.x),r.p.y<t.y&&(t.y=r.p.y),r.p.x>e.x&&(e.x=r.p.x),r.p.y>e.y&&(e.y=r.p.y)});var n=e.subtract(t).multiply(.07);return{bottomleft:t.subtract(n),topright:e.add(n)}};var o=t.Vector=function(t,e){this.x=t,this.y=e};o.random=function(){return new o(10*(Math.random()-.5),10*(Math.random()-.5))},o.prototype.add=function(t){return new o(this.x+t.x,this.y+t.y)},o.prototype.subtract=function(t){return new o(this.x-t.x,this.y-t.y)},o.prototype.multiply=function(t){return new o(this.x*t,this.y*t)},o.prototype.divide=function(t){return new o(this.x/t||0,this.y/t||0)},o.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},o.prototype.normal=function(){return new o(-this.y,this.x)},o.prototype.normalise=function(){return this.divide(this.magnitude())},i.ForceDirected.Point=function(t,e){this.p=t,this.m=e,this.v=new o(0,0),this.a=new o(0,0)},i.ForceDirected.Point.prototype.applyForce=function(t){this.a=this.a.add(t.divide(this.m))},i.ForceDirected.Spring=function(t,e,n,r){this.point1=t,this.point2=e,this.length=n,this.k=r};var a=t.Renderer=function(t,e,n,r,i,o){this.layout=t,this.clear=e,this.drawEdge=n,this.drawNode=r,this.onRenderStop=i,this.onRenderStart=o,this.layout.graph.addGraphListener(this)};a.prototype.graphChanged=function(t){this.start()},a.prototype.start=function(t){var e=this;this.layout.start(function(){e.clear(),e.layout.eachEdge(function(t,n){e.drawEdge(t,n.point1.p,n.point2.p)}),e.layout.eachNode(function(t,n){e.drawNode(t,n.p)})},this.onRenderStop,this.onRenderStart)},a.prototype.stop=function(){this.layout.stop()},Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,r;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),o=i.length>>>0;if("[object Function]"!={}.toString.call(t))throw new TypeError(t+" is not a function");for(e&&(n=e),r=0;r<o;){var a;r in i&&(a=i[r],t.call(n,a,r,i)),r++}});var s=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};return t})},{}],205:[function(t,e,n){(function(){function t(t){function e(e,n,r,i,o,a){for(;o>=0&&o<a;o+=t){var s=i?i[o]:o;r=n(r,e[s],s,e)}return r}return function(n,r,i,o){r=w(r,o,4);var a=!T(n)&&b.keys(n),s=(a||n).length,u=t>0?0:s-1;return arguments.length<3&&(i=n[a?a[u]:u],u+=t),e(n,r,i,a,u,s)}}function r(t){return function(e,n,r){n=_(n,r);for(var i=S(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}function i(t,e,n){return function(r,i,o){var a=0,s=S(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=e(f.call(r,a,s),b.isNaN),o>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&o<s;o+=t)if(r[o]===i)return o;return-1}}function o(t,e){var n=I.length,r=t.constructor,i=b.isFunction(r)&&r.prototype||c,o="constructor";for(b.has(t,o)&&!b.contains(e,o)&&e.push(o);n--;)(o=I[n])in t&&t[o]!==i[o]&&!b.contains(e,o)&&e.push(o)}var a=this,s=a._,u=Array.prototype,c=Object.prototype,l=Function.prototype,h=u.push,f=u.slice,d=c.toString,p=c.hasOwnProperty,g=Array.isArray,v=Object.keys,y=l.bind,m=Object.create,x=function(){},b=function(t){return t instanceof b?t:this instanceof b?void(this._wrapped=t):new b(t)};void 0!==n?(void 0!==e&&e.exports&&(n=e.exports=b),n._=b):a._=b,b.VERSION="1.8.3";var w=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},_=function(t,e,n){return null==t?b.identity:b.isFunction(t)?w(t,e,n):b.isObject(t)?b.matcher(t):b.property(t)};b.iteratee=function(t,e){return _(t,e,1/0)};var E=function(t,e){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),s=a.length,u=0;u<s;u++){var c=a[u];e&&void 0!==n[c]||(n[c]=o[c])}return n}},k=function(t){if(!b.isObject(t))return{};if(m)return m(t);x.prototype=t;var e=new x;return x.prototype=null,e},N=function(t){return function(e){return null==e?void 0:e[t]}},L=Math.pow(2,53)-1,S=N("length"),T=function(t){var e=S(t);return"number"==typeof e&&e>=0&&e<=L};b.each=b.forEach=function(t,e,n){e=w(e,n);var r,i;if(T(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=b.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},b.map=b.collect=function(t,e,n){e=_(e,n);for(var r=!T(t)&&b.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o},b.reduce=b.foldl=b.inject=t(1),b.reduceRight=b.foldr=t(-1),b.find=b.detect=function(t,e,n){var r;if(void 0!==(r=T(t)?b.findIndex(t,e,n):b.findKey(t,e,n))&&r!==-1)return t[r]},b.filter=b.select=function(t,e,n){var r=[];return e=_(e,n),b.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},b.reject=function(t,e,n){return b.filter(t,b.negate(_(e)),n)},b.every=b.all=function(t,e,n){e=_(e,n);for(var r=!T(t)&&b.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},b.some=b.any=function(t,e,n){e=_(e,n);for(var r=!T(t)&&b.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},b.contains=b.includes=b.include=function(t,e,n,r){return T(t)||(t=b.values(t)),("number"!=typeof n||r)&&(n=0),b.indexOf(t,e,n)>=0},b.invoke=function(t,e){var n=f.call(arguments,2),r=b.isFunction(e);return b.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},b.pluck=function(t,e){return b.map(t,b.property(e))},b.where=function(t,e){return b.filter(t,b.matcher(e))},b.findWhere=function(t,e){return b.find(t,b.matcher(e))},b.max=function(t,e,n){var r,i,o=-(1/0),a=-(1/0);if(null==e&&null!=t){t=T(t)?t:b.values(t);for(var s=0,u=t.length;s<u;s++)(r=t[s])>o&&(o=r)}else e=_(e,n),b.each(t,function(t,n,r){((i=e(t,n,r))>a||i===-(1/0)&&o===-(1/0))&&(o=t,a=i)});return o},b.min=function(t,e,n){var r,i,o=1/0,a=1/0;if(null==e&&null!=t){t=T(t)?t:b.values(t);for(var s=0,u=t.length;s<u;s++)(r=t[s])<o&&(o=r)}else e=_(e,n),b.each(t,function(t,n,r){((i=e(t,n,r))<a||i===1/0&&o===1/0)&&(o=t,a=i)});return o},b.shuffle=function(t){for(var e,n=T(t)?t:b.values(t),r=n.length,i=Array(r),o=0;o<r;o++)e=b.random(0,o),e!==o&&(i[o]=i[e]),i[e]=n[o];return i},b.sample=function(t,e,n){return null==e||n?(T(t)||(t=b.values(t)),t[b.random(t.length-1)]):b.shuffle(t).slice(0,Math.max(0,e))},b.sortBy=function(t,e,n){return e=_(e,n),b.pluck(b.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var A=function(t){return function(e,n,r){var i={};return n=_(n,r),b.each(e,function(r,o){t(i,r,n(r,o,e))}),i}};b.groupBy=A(function(t,e,n){b.has(t,n)?t[n].push(e):t[n]=[e]}),b.indexBy=A(function(t,e,n){t[n]=e}),b.countBy=A(function(t,e,n){b.has(t,n)?t[n]++:t[n]=1}),b.toArray=function(t){return t?b.isArray(t)?f.call(t):T(t)?b.map(t,b.identity):b.values(t):[]},b.size=function(t){return null==t?0:T(t)?t.length:b.keys(t).length},b.partition=function(t,e,n){e=_(e,n);var r=[],i=[];return b.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},b.first=b.head=b.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:b.initial(t,t.length-e)},b.initial=function(t,e,n){return f.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},b.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:b.rest(t,Math.max(0,t.length-e))},b.rest=b.tail=b.drop=function(t,e,n){return f.call(t,null==e||n?1:e)},b.compact=function(t){return b.filter(t,b.identity)};var D=function(t,e,n,r){for(var i=[],o=0,a=r||0,s=S(t);a<s;a++){var u=t[a];if(T(u)&&(b.isArray(u)||b.isArguments(u))){e||(u=D(u,e,n));var c=0,l=u.length;for(i.length+=l;c<l;)i[o++]=u[c++]}else n||(i[o++]=u)}return i};b.flatten=function(t,e){return D(t,e,!1)},b.without=function(t){return b.difference(t,f.call(arguments,1))},b.uniq=b.unique=function(t,e,n,r){b.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=_(n,r));for(var i=[],o=[],a=0,s=S(t);a<s;a++){var u=t[a],c=n?n(u,a,t):u;e?(a&&o===c||i.push(u),o=c):n?b.contains(o,c)||(o.push(c),i.push(u)):b.contains(i,u)||i.push(u)}return i},b.union=function(){return b.uniq(D(arguments,!0,!0))},b.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=S(t);r<i;r++){var o=t[r];if(!b.contains(e,o)){for(var a=1;a<n&&b.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},b.difference=function(t){var e=D(arguments,!0,!0,1);return b.filter(t,function(t){return!b.contains(e,t)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(t){for(var e=t&&b.max(t,S).length||0,n=Array(e),r=0;r<e;r++)n[r]=b.pluck(t,r);return n},b.object=function(t,e){for(var n={},r=0,i=S(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},b.findIndex=r(1),b.findLastIndex=r(-1),b.sortedIndex=function(t,e,n,r){n=_(n,r,1);for(var i=n(e),o=0,a=S(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o},b.indexOf=i(1,b.findIndex,b.sortedIndex),b.lastIndexOf=i(-1,b.findLastIndex),b.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i};var M=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=k(t.prototype),a=t.apply(o,i);return b.isObject(a)?a:o};b.bind=function(t,e){if(y&&t.bind===y)return y.apply(t,f.call(arguments,1));if(!b.isFunction(t))throw new TypeError("Bind must be called on a function");var n=f.call(arguments,2),r=function(){return M(t,r,e,this,n.concat(f.call(arguments)))};return r},b.partial=function(t){var e=f.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),a=0;a<i;a++)o[a]=e[a]===b?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return M(t,n,this,this,o)};return n},b.bindAll=function(t){var e,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)n=arguments[e],t[n]=b.bind(t[n],t);return t},b.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return b.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},b.delay=function(t,e){var n=f.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},b.defer=b.partial(b.delay,b,1),b.throttle=function(t,e,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:b.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var c=b.now();s||n.leading!==!1||(s=c);var l=e-(c-s);return r=this,i=arguments,l<=0||l>e?(a&&(clearTimeout(a),a=null),s=c,o=t.apply(r,i),a||(r=i=null)):a||n.trailing===!1||(a=setTimeout(u,l)),o}},b.debounce=function(t,e,n){var r,i,o,a,s,u=function(){var c=b.now()-a;c<e&&c>=0?r=setTimeout(u,e-c):(r=null,n||(s=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=b.now();var c=n&&!r;return r||(r=setTimeout(u,e)),c&&(s=t.apply(o,i),o=i=null),s}},b.wrap=function(t,e){return b.partial(e,t)},b.negate=function(t){return function(){return!t.apply(this,arguments)}},b.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},b.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},b.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},b.once=b.partial(b.before,2);var P=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(t){if(!b.isObject(t))return[];if(v)return v(t);var e=[];for(var n in t)b.has(t,n)&&e.push(n);return P&&o(t,e),e},b.allKeys=function(t){if(!b.isObject(t))return[];var e=[];for(var n in t)e.push(n);return P&&o(t,e),e},b.values=function(t){for(var e=b.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},b.mapObject=function(t,e,n){e=_(e,n);for(var r,i=b.keys(t),o=i.length,a={},s=0;s<o;s++)r=i[s],a[r]=e(t[r],r,t);return a},b.pairs=function(t){for(var e=b.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},b.invert=function(t){for(var e={},n=b.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},b.functions=b.methods=function(t){var e=[];for(var n in t)b.isFunction(t[n])&&e.push(n);return e.sort()},b.extend=E(b.allKeys),b.extendOwn=b.assign=E(b.keys),b.findKey=function(t,e,n){e=_(e,n);for(var r,i=b.keys(t),o=0,a=i.length;o<a;o++)if(r=i[o],e(t[r],r,t))return r},b.pick=function(t,e,n){var r,i,o={},a=t;if(null==a)return o;b.isFunction(e)?(i=b.allKeys(a),r=w(e,n)):(i=D(arguments,!1,!1,1),r=function(t,e,n){return e in n},a=Object(a));for(var s=0,u=i.length;s<u;s++){var c=i[s],l=a[c];r(l,c,a)&&(o[c]=l)}return o},b.omit=function(t,e,n){if(b.isFunction(e))e=b.negate(e);else{var r=b.map(D(arguments,!1,!1,1),String);e=function(t,e){return!b.contains(r,e)}}return b.pick(t,e,n)},b.defaults=E(b.allKeys,!0),b.create=function(t,e){var n=k(t);return e&&b.extendOwn(n,e),n},b.clone=function(t){return b.isObject(t)?b.isArray(t)?t.slice():b.extend({},t):t},b.tap=function(t,e){return e(t),t},b.isMatch=function(t,e){var n=b.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0};var C=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof b&&(t=t._wrapped),e instanceof b&&(e=e._wrapped);var i=d.call(t);if(i!==d.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(b.isFunction(a)&&a instanceof a&&b.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),o){if((u=t.length)!==e.length)return!1;for(;u--;)if(!C(t[u],e[u],n,r))return!1}else{var c,l=b.keys(t);if(u=l.length,b.keys(e).length!==u)return!1;for(;u--;)if(c=l[u],!b.has(e,c)||!C(t[c],e[c],n,r))return!1}return n.pop(),r.pop(),!0};b.isEqual=function(t,e){return C(t,e)},b.isEmpty=function(t){return null==t||(T(t)&&(b.isArray(t)||b.isString(t)||b.isArguments(t))?0===t.length:0===b.keys(t).length)},b.isElement=function(t){return!(!t||1!==t.nodeType)},b.isArray=g||function(t){return"[object Array]"===d.call(t)},b.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){b["is"+t]=function(e){return d.call(e)==="[object "+t+"]"}}),b.isArguments(arguments)||(b.isArguments=function(t){return b.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(t){return"function"==typeof t||!1}),b.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},b.isNaN=function(t){return b.isNumber(t)&&t!==+t},b.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===d.call(t)},b.isNull=function(t){return null===t},b.isUndefined=function(t){return void 0===t},b.has=function(t,e){return null!=t&&p.call(t,e)},b.noConflict=function(){return a._=s,this},b.identity=function(t){return t},b.constant=function(t){return function(){return t}},b.noop=function(){},b.property=N,b.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},b.matcher=b.matches=function(t){return t=b.extendOwn({},t),function(e){return b.isMatch(e,t)}},b.times=function(t,e,n){var r=Array(Math.max(0,t));e=w(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},b.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},b.now=Date.now||function(){return(new Date).getTime()};var O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},R=b.invert(O),B=function(t){var e=function(e){return t[e]},n="(?:"+b.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};b.escape=B(O),b.unescape=B(R),b.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),b.isFunction(r)?r.call(t):r};var F=0;b.uniqueId=function(t){var e=++F+"";return t?t+e:e},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},j=function(t){return"\\"+z[t]};b.template=function(t,e,n){!e&&n&&(e=n),e=b.defaults({},e,b.templateSettings);var r=RegExp([(e.escape||/(.)^/).source,(e.interpolate||/(.)^/).source,(e.evaluate||/(.)^/).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,a,s){return o+=t.slice(i,s).replace(/\\|'|\r|\n|\u2028|\u2029/g,j),i=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var s=function(t){return a.call(this,t,b)},u=e.variable||"obj";return s.source="function("+u+"){\n"+o+"}",s},b.chain=function(t){var e=b(t);return e._chain=!0,e};var V=function(t,e){return t._chain?b(e).chain():e};b.mixin=function(t){b.each(b.functions(t),function(e){var n=b[e]=t[e];b.prototype[e]=function(){var t=[this._wrapped];return h.apply(t,arguments),V(this,n.apply(b,t))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=u[t];b.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],V(this,n)}}),b.each(["concat","join","slice"],function(t){var e=u[t];b.prototype[t]=function(){return V(this,e.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}).call(this)},{}],206:[function(t,e,n){"use strict";function r(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}r(t("./src/adaptor")),r(t("./src/d3adaptor")),r(t("./src/descent")),r(t("./src/geom")),r(t("./src/gridrouter")),r(t("./src/handledisconnected")),r(t("./src/layout")),r(t("./src/layout3d")),r(t("./src/linklengths")),r(t("./src/powergraph")),r(t("./src/pqueue")),r(t("./src/rbtree")),r(t("./src/rectangle")),r(t("./src/shortestpaths")),r(t("./src/vpsc")),r(t("./src/batch"))},{"./src/adaptor":207,"./src/batch":208,"./src/d3adaptor":209,"./src/descent":212,"./src/geom":213,"./src/gridrouter":214,"./src/handledisconnected":215,"./src/layout":216,"./src/layout3d":217,"./src/linklengths":218,"./src/powergraph":219,"./src/pqueue":220,"./src/rbtree":221,"./src/rectangle":222,"./src/shortestpaths":223,"./src/vpsc":224}],207:[function(t,e,n){"use strict";function r(t){return new a(t)}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=t("./layout"),a=function(t){function e(e){var n=t.call(this)||this,r=e;return r.trigger&&(n.trigger=r.trigger),r.kick&&(n.kick=r.kick),r.drag&&(n.drag=r.drag),r.on&&(n.on=r.on),n.dragstart=n.dragStart=o.Layout.dragStart,n.dragend=n.dragEnd=o.Layout.dragEnd,n}return i(e,t),e.prototype.trigger=function(t){},e.prototype.kick=function(){},e.prototype.drag=function(){},e.prototype.on=function(t,e){return this},e}(o.Layout);n.LayoutAdaptor=a,n.adaptor=r},{"./layout":216}],208:[function(t,e,n){"use strict";function r(t,e,n,r){return t.cola.start(0,0,0,10,!1),i(t.cola.nodes(),t.cola.groups(),n,r).routeEdges(t.powerGraph.powerEdges,e,function(t){return t.source.routerNode.id},function(t){return t.target.routerNode.id})}function i(t,e,n,r){t.forEach(function(t){t.routerNode={name:t.name,bounds:t.bounds.inflate(-n)}}),e.forEach(function(e){e.routerNode={bounds:e.bounds.inflate(-r),children:(void 0!==e.groups?e.groups.map(function(e){return t.length+e.id}):[]).concat(void 0!==e.leaves?e.leaves.map(function(t){return t.index}):[])}});var i=t.concat(e).map(function(t,e){return t.routerNode.id=e,t.routerNode});return new s.GridRouter(i,{getChildren:function(t){return t.children},getBounds:function(t){return t.bounds}},n-r)}function o(t,e,n){var r;t.nodes.forEach(function(t,e){return t.index=e}),(new a.Layout).avoidOverlaps(!1).nodes(t.nodes).links(t.links).powerGraphGroups(function(t){r=t,r.groups.forEach(function(t){return t.padding=n})})
;var i=t.nodes.length,o=[],s=t.nodes.slice(0);return s.forEach(function(t,e){return t.index=e}),r.groups.forEach(function(t){var e=t.index=t.id+i;s.push(t),void 0!==t.leaves&&t.leaves.forEach(function(t){return o.push({source:e,target:t.index})}),void 0!==t.groups&&t.groups.forEach(function(t){return o.push({source:e,target:t.id+i})})}),r.powerEdges.forEach(function(t){o.push({source:t.source.index,target:t.target.index})}),(new a.Layout).size(e).nodes(s).links(o).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new a.Layout).convergenceThreshold(.001).size(e).avoidOverlaps(!0).nodes(t.nodes).links(t.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(t){r=t,r.groups.forEach(function(t){t.padding=n})}).start(50,0,100,0,!1),powerGraph:r}}var a=t("./layout"),s=t("./gridrouter");n.gridify=r,n.powerGraphGridLayout=o},{"./gridrouter":214,"./layout":216}],209:[function(t,e,n){"use strict";function r(t){return!t||i(t)?new o.D3StyleLayoutAdaptor:new a.D3StyleLayoutAdaptor(t)}function i(t){return t.version&&null!==t.version.match(/^3\./)}var o=t("./d3v3adaptor"),a=t("./d3v4adaptor");n.d3adaptor=r},{"./d3v3adaptor":210,"./d3v4adaptor":211}],210:[function(t,e,n){"use strict";function r(){return new a}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=t("./layout"),a=function(t){function e(){var e=t.call(this)||this;e.event=d3.dispatch(o.EventType[o.EventType.start],o.EventType[o.EventType.tick],o.EventType[o.EventType.end]);var n=e;return e.drag=function(){if(!t)var t=d3.behavior.drag().origin(o.Layout.dragOrigin).on("dragstart.d3adaptor",o.Layout.dragStart).on("drag.d3adaptor",function(t){o.Layout.drag(t,d3.event),n.resume()}).on("dragend.d3adaptor",o.Layout.dragEnd);if(!arguments.length)return t;this.call(t)},e}return i(e,t),e.prototype.trigger=function(t){var e={type:o.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event[e.type](e)},e.prototype.kick=function(){var e=this;d3.timer(function(){return t.prototype.tick.call(e)})},e.prototype.on=function(t,e){return"string"==typeof t?this.event.on(t,e):this.event.on(o.EventType[t],e),this},e}(o.Layout);n.D3StyleLayoutAdaptor=a,n.d3adaptor=r},{"./layout":216}],211:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("./layout"),o=function(t){function e(e){var n=t.call(this)||this;n.d3Context=e,n.event=e.dispatch(i.EventType[i.EventType.start],i.EventType[i.EventType.tick],i.EventType[i.EventType.end]);var r=n;return n.drag=function(){if(!t)var t=e.drag().subject(i.Layout.dragOrigin).on("start.d3adaptor",i.Layout.dragStart).on("drag.d3adaptor",function(t){i.Layout.drag(t,e.event),r.resume()}).on("end.d3adaptor",i.Layout.dragEnd);if(!arguments.length)return t;arguments[0].call(t)},n}return r(e,t),e.prototype.trigger=function(t){var e={type:i.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event.call(e.type,e)},e.prototype.kick=function(){var e=this,n=this.d3Context.timer(function(){return t.prototype.tick.call(e)&&n.stop()})},e.prototype.on=function(t,e){return"string"==typeof t?this.event.on(t,e):this.event.on(i.EventType[t],e),this},e}(i.Layout);n.D3StyleLayoutAdaptor=o},{"./layout":216}],212:[function(t,e,n){"use strict";var r=function(){function t(){this.locks={}}return t.prototype.add=function(t,e){this.locks[t]=e},t.prototype.clear=function(){this.locks={}},t.prototype.isEmpty=function(){for(var t in this.locks)return!1;return!0},t.prototype.apply=function(t){for(var e in this.locks)t(Number(e),this.locks[e])},t}();n.Locks=r;var i=function(){function t(t,e,n){void 0===n&&(n=null),this.D=e,this.G=n,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new o,this.project=null,this.x=t,this.k=t.length;var i=this.n=t[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new r,this.minD=Number.MAX_VALUE;for(var a,s=i;s--;)for(a=i;--a>s;){var u=e[s][a];u>0&&u<this.minD&&(this.minD=u)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),s=this.k;s--;){for(this.g[s]=new Array(i),this.H[s]=new Array(i),a=i;a--;)this.H[s][a]=new Array(i);this.Hd[s]=new Array(i),this.a[s]=new Array(i),this.b[s]=new Array(i),this.c[s]=new Array(i),this.d[s]=new Array(i),this.e[s]=new Array(i),this.ia[s]=new Array(i),this.ib[s]=new Array(i),this.xtmp[s]=new Array(i)}}return t.createSquareMatrix=function(t,e){for(var n=new Array(t),r=0;r<t;++r){n[r]=new Array(t);for(var i=0;i<t;++i)n[r][i]=e(r,i)}return n},t.prototype.offsetDir=function(){for(var t=this,e=new Array(this.k),n=0,r=0;r<this.k;++r){var i=e[r]=this.random.getNextBetween(.01,1)-.5;n+=i*i}return n=Math.sqrt(n),e.map(function(e){return e*=t.minD/n})},t.prototype.computeDerivatives=function(t){var e=this,n=this.n;if(!(n<1)){for(var r,i=new Array(this.k),o=new Array(this.k),a=new Array(this.k),s=0,u=0;u<n;++u){for(r=0;r<this.k;++r)a[r]=this.g[r][u]=0;for(var c=0;c<n;++c)if(u!==c){for(var l=n;l--;){var h=0;for(r=0;r<this.k;++r){var f=i[r]=t[r][u]-t[r][c];h+=o[r]=f*f}if(h>1e-9)break;var d=this.offsetDir();for(r=0;r<this.k;++r)t[r][c]+=d[r]}var p=Math.sqrt(h),g=this.D[u][c],v=null!=this.G?this.G[u][c]:1;if(v>1&&p>g||!isFinite(g))for(r=0;r<this.k;++r)this.H[r][u][c]=0;else{v>1&&(v=1);var y=g*g,m=2*v*(p-g)/(y*p),x=p*p*p,b=2*-v/(y*x);for(isFinite(m)||console.log(m),r=0;r<this.k;++r)this.g[r][u]+=i[r]*m,a[r]-=this.H[r][u][c]=b*(x+g*(o[r]-h)+p*h)}}for(r=0;r<this.k;++r)s=Math.max(s,this.H[r][u][u]=a[r])}for(var w=this.snapGridSize/2,_=this.snapGridSize,E=this.snapStrength,k=E/(w*w),N=this.numGridSnapNodes,u=0;u<N;++u)for(r=0;r<this.k;++r){var L=this.x[r][u],S=L/_,T=S%1,A=S-T,D=Math.abs(T),f=D<=.5?L-A*_:L>0?L-(A+1)*_:L-(A-1)*_;-w<f&&f<=w&&(this.scaleSnapByMaxH?(this.g[r][u]+=s*k*f,this.H[r][u][u]+=s*k):(this.g[r][u]+=k*f,this.H[r][u][u]+=k))}this.locks.isEmpty()||this.locks.apply(function(n,i){for(r=0;r<e.k;++r)e.H[r][n][n]+=s,e.g[r][n]-=s*(i[r]-t[r][n])})}},t.dotProd=function(t,e){for(var n=0,r=t.length;r--;)n+=t[r]*e[r];return n},t.rightMultiply=function(e,n,r){for(var i=e.length;i--;)r[i]=t.dotProd(e[i],n)},t.prototype.computeStepSize=function(e){for(var n=0,r=0,i=0;i<this.k;++i)n+=t.dotProd(this.g[i],e[i]),t.rightMultiply(this.H[i],e[i],this.Hd[i]),r+=t.dotProd(e[i],this.Hd[i]);return 0!==r&&isFinite(r)?1*n/r:0},t.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var t=this.computeStepSize(this.g),e=0;e<this.k;++e)this.takeDescentStep(this.x[e],this.g[e],t);return this.computeStress()},t.copy=function(t,e){for(var n=t.length,r=e[0].length,i=0;i<n;++i)for(var o=0;o<r;++o)e[i][o]=t[i][o]},t.prototype.stepAndProject=function(e,n,r,i){t.copy(e,n),this.takeDescentStep(n[0],r[0],i),this.project&&this.project[0](e[0],e[1],n[0]),this.takeDescentStep(n[1],r[1],i),this.project&&this.project[1](n[0],e[1],n[1]);for(var o=2;o<this.k;o++)this.takeDescentStep(n[o],r[o],i)},t.mApply=function(t,e,n){for(var r=t;r-- >0;)for(var i=e;i-- >0;)n(r,i)},t.prototype.matrixApply=function(e){t.mApply(this.k,this.n,e)},t.prototype.computeNextPosition=function(t,e){var n=this;this.computeDerivatives(t);var r=this.computeStepSize(this.g);if(this.stepAndProject(t,e,this.g,r),this.project){this.matrixApply(function(r,i){return n.e[r][i]=t[r][i]-e[r][i]});var i=this.computeStepSize(this.e);i=Math.max(.2,Math.min(i,1)),this.stepAndProject(t,e,this.e,i)}},t.prototype.run=function(t){for(var e=Number.MAX_VALUE,n=!1;!n&&t-- >0;){var r=this.rungeKutta();n=Math.abs(e/r-1)<this.threshold,e=r}return e},t.prototype.rungeKutta=function(){var e=this;this.computeNextPosition(this.x,this.a),t.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),t.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var n=0;return this.matrixApply(function(t,r){var i=(e.a[t][r]+2*e.b[t][r]+2*e.c[t][r]+e.d[t][r])/6,o=e.x[t][r]-i;n+=o*o,e.x[t][r]=i}),n},t.mid=function(e,n,r){t.mApply(e.length,e[0].length,function(t,i){return r[t][i]=e[t][i]+(n[t][i]-e[t][i])/2})},t.prototype.takeDescentStep=function(t,e,n){for(var r=0;r<this.n;++r)t[r]=t[r]-n*e[r]},t.prototype.computeStress=function(){for(var t=0,e=0,n=this.n-1;e<n;++e)for(var r=e+1,i=this.n;r<i;++r){for(var o=0,a=0;a<this.k;++a){var s=this.x[a][e]-this.x[a][r];o+=s*s}o=Math.sqrt(o);var u=this.D[e][r];if(isFinite(u)){var c=u-o,l=u*u;t+=c*c/l}}return t},t}();i.zeroDistance=1e-10,n.Descent=i;var o=function(){function t(t){void 0===t&&(t=1),this.seed=t,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return t.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},t.prototype.getNextBetween=function(t,e){return t+this.getNext()*(e-t)},t}();n.PseudoRandom=o},{}],213:[function(t,e,n){"use strict";function r(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)}function i(t,e,n){return r(t,e,n)>0}function o(t,e,n){return r(t,e,n)<0}function a(t){var e,n=t.slice(0).sort(function(t,e){return t.x!==e.x?e.x-t.x:e.y-t.y}),i=t.length,o=n[0].x;for(e=1;e<i&&n[e].x===o;++e);var a=e-1,s=[];if(s.push(n[0]),a===i-1)n[a].y!==n[0].y&&s.push(n[a]);else{var u,c=i-1,l=n[i-1].x;for(e=i-2;e>=0&&n[e].x===l;e--);for(u=e+1,e=a;++e<=u;)if(!(r(n[0],n[u],n[e])>=0&&e<u)){for(;s.length>1&&!(r(s[s.length-2],s[s.length-1],n[e])>0);)s.length-=1;0!=e&&s.push(n[e])}c!=u&&s.push(n[c]);var h=s.length;for(e=u;--e>=a;)if(!(r(n[c],n[a],n[e])>=0&&e>a)){for(;s.length>h&&!(r(s[s.length-2],s[s.length-1],n[e])>0);)s.length-=1;0!=e&&s.push(n[e])}}return s}function s(t,e,n){e.slice(0).sort(function(e,n){return Math.atan2(e.y-t.y,e.x-t.x)-Math.atan2(n.y-t.y,n.x-t.x)}).forEach(n)}function u(t,e){return{rtan:c(t,e),ltan:l(t,e)}}function c(t,e){var n,r,a,s,u,c=e.length-1;if(o(t,e[1],e[0])&&!i(t,e[c-1],e[0]))return 0;for(n=0,r=c;;){if(r-n==1)return i(t,e[n],e[r])?n:r;if(a=Math.floor((n+r)/2),(u=o(t,e[a+1],e[a]))&&!i(t,e[a-1],e[a]))return a;s=i(t,e[n+1],e[n]),s?u?r=a:i(t,e[n],e[a])?r=a:n=a:u&&o(t,e[n],e[a])?r=a:n=a}}function l(t,e){var n,r,a,s,u,c=e.length-1;if(i(t,e[c-1],e[0])&&!o(t,e[1],e[0]))return 0;for(n=0,r=c;;){if(r-n==1)return o(t,e[n],e[r])?n:r;if(a=Math.floor((n+r)/2),u=o(t,e[a+1],e[a]),i(t,e[a-1],e[a])&&!u)return a;s=o(t,e[n+1],e[n]),s?u?o(t,e[n],e[a])?r=a:n=a:r=a:u?n=a:i(t,e[n],e[a])?r=a:n=a}}function h(t,e,n,r,i,o){var a,s;a=n(e[0],t),s=r(t[a],e);for(var u=!1;!u;){for(u=!0;;){if(a===t.length-1&&(a=0),i(e[s],t[a],t[a+1]))break;++a}for(;;){if(0===s&&(s=e.length-1),o(t[a],e[s],e[s-1]))break;--s,u=!1}}return{t1:a,t2:s}}function f(t,e){var n=d(e,t);return{t1:n.t2,t2:n.t1}}function d(t,e){return h(t,e,c,l,i,o)}function p(t,e){return h(t,e,l,l,o,o)}function g(t,e){return h(t,e,c,c,i,i)}function v(t,e){for(var n=[],r=1,i=e.length;r<i;++r){var o=_.Rectangle.lineIntersection(t.x1,t.y1,t.x2,t.y2,e[r-1].x,e[r-1].y,e[r].x,e[r].y);o&&n.push(o)}return n}function y(t,e){for(var n=t.length-1,i=e.length-1,o=new S,a=0;a<n;++a)for(var s=0;s<i;++s){var u=t[0==a?n-1:a-1],c=t[a],l=t[a+1],h=e[0==s?i-1:s-1],f=e[s],d=e[s+1],p=r(u,c,f),g=r(c,h,f),v=r(c,f,d),y=r(h,f,c),m=r(f,u,c),x=r(f,c,l);p>=0&&g>=0&&v<0&&y>=0&&m>=0&&x<0?o.ll=new L(a,s):p<=0&&g<=0&&v>0&&y<=0&&m<=0&&x>0?o.rr=new L(a,s):p<=0&&g>0&&v<=0&&y>=0&&m<0&&x>=0?o.rl=new L(a,s):p>=0&&g<0&&v>=0&&y<=0&&m>0&&x<=0&&(o.lr=new L(a,s))}return o}function m(t,e){for(var n=1,r=e.length;n<r;++n)if(o(e[n-1],e[n],t))return!1;return!0}function x(t,e){return!t.every(function(t){return!m(t,e)})}function b(t,e){if(x(t,e))return!0;if(x(e,t))return!0;for(var n=1,r=t.length;n<r;++n){var i=t[n],o=t[n-1];if(v(new k(o.x,o.y,i.x,i.y),e).length>0)return!0}return!1}var w=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},_=t("./rectangle"),E=function(){function t(){}return t}();n.Point=E;var k=function(){function t(t,e,n,r){this.x1=t,this.y1=e,this.x2=n,this.y2=r}return t}();n.LineSegment=k;var N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(E);n.PolyPoint=N,n.isLeft=r,n.ConvexHull=a,n.clockwiseRadialSweep=s,n.tangent_PolyPolyC=h,n.LRtangent_PolyPolyC=f,n.RLtangent_PolyPolyC=d,n.LLtangent_PolyPolyC=p,n.RRtangent_PolyPolyC=g;var L=function(){function t(t,e){this.t1=t,this.t2=e}return t}();n.BiTangent=L;var S=function(){function t(){}return t}();n.BiTangents=S;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(E);n.TVGPoint=T;var A=function(){function t(t,e,n,r){this.id=t,this.polyid=e,this.polyvertid=n,this.p=r,r.vv=this}return t}();n.VisibilityVertex=A;var D=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.length=function(){var t=this.source.p.x-this.target.p.x,e=this.source.p.y-this.target.p.y;return Math.sqrt(t*t+e*e)},t}();n.VisibilityEdge=D;var M=function(){function t(t,e){if(this.P=t,this.V=[],this.E=[],e)this.V=e.V.slice(0),this.E=e.E.slice(0);else{for(var n=t.length,r=0;r<n;r++)for(var i=t[r],o=0;o<i.length;++o){var a=i[o],s=new A(this.V.length,r,o,a);this.V.push(s),o>0&&this.E.push(new D(i[o-1].vv,s))}for(var r=0;r<n-1;r++)for(var u=t[r],o=r+1;o<n;o++){var c=t[o],l=y(u,c);for(var h in l){var f=l[h],d=u[f.t1],p=c[f.t2];this.addEdgeIfVisible(d,p,r,o)}}}}return t.prototype.addEdgeIfVisible=function(t,e,n,r){this.intersectsPolys(new k(t.x,t.y,e.x,e.y),n,r)||this.E.push(new D(t.vv,e.vv))},t.prototype.addPoint=function(t,e){var n=this.P.length;this.V.push(new A(this.V.length,n,0,t));for(var r=0;r<n;++r)if(r!==e){var i=this.P[r],o=u(t,i);this.addEdgeIfVisible(t,i[o.ltan],e,r),this.addEdgeIfVisible(t,i[o.rtan],e,r)}return t.vv},t.prototype.intersectsPolys=function(t,e,n){for(var r=0,i=this.P.length;r<i;++r)if(r!=e&&r!=n&&v(t,this.P[r]).length>0)return!0;return!1},t}();n.TangentVisibilityGraph=M,n.tangents=y,n.polysOverlap=b},{"./rectangle":222}],214:[function(t,e,n){"use strict";var r=t("./rectangle"),i=t("./vpsc"),o=t("./shortestpaths"),a=function(){function t(t,e,n){this.id=t,this.rect=e,this.children=n,this.leaf=void 0===n||0===n.length}return t}();n.NodeWrapper=a;var s=function(){function t(t,e,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null),this.id=t,this.x=e,this.y=n,this.node=r,this.line=i}return t}();n.Vert=s;var u=function(){function t(e,n){this.s=e,this.t=n;var r=t.findMatch(e,n),i=n.slice(0).reverse(),o=t.findMatch(e,i);r.length>=o.length?(this.length=r.length,this.si=r.si,this.ti=r.ti,this.reversed=!1):(this.length=o.length,this.si=o.si,this.ti=n.length-o.ti-o.length,this.reversed=!0)}return t.findMatch=function(t,e){for(var n=t.length,r=e.length,i={length:0,si:-1,ti:-1},o=new Array(n),a=0;a<n;a++){o[a]=new Array(r);for(var s=0;s<r;s++)if(t[a]===e[s]){var u=o[a][s]=0===a||0===s?1:o[a-1][s-1]+1;u>i.length&&(i.length=u,i.si=a-u+1,i.ti=s-u+1)}else o[a][s]=0}return i},t.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},t}();n.LongestCommonSubsequence=u;var c=function(){function t(t,e,n){void 0===n&&(n=12);var i=this;this.originalnodes=t,this.groupPadding=n,this.leaves=null,this.nodes=t.map(function(t,n){return new a(n,e.getBounds(t),e.getChildren(t))}),this.leaves=this.nodes.filter(function(t){return t.leaf}),this.groups=this.nodes.filter(function(t){return!t.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(t){return t.children.forEach(function(e){return i.nodes[e].parent=t})}),this.root={children:[]},this.nodes.forEach(function(t){void 0===t.parent&&(t.parent=i.root,i.root.children.push(t.id)),t.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(t,e){return i.getDepth(t)-i.getDepth(e)}),this.backToFront.slice(0).reverse().filter(function(t){return!t.leaf}).forEach(function(t){var e=r.Rectangle.empty();t.children.forEach(function(t){return e=e.union(i.nodes[t].rect)}),t.rect=e.inflate(i.groupPadding)});var o=this.midPoints(this.cols.map(function(t){return t.pos})),u=this.midPoints(this.rows.map(function(t){return t.pos})),c=o[0],l=o[o.length-1],h=u[0],f=u[u.length-1],d=this.rows.map(function(t){return{x1:c,x2:l,y1:t.pos,y2:t.pos}}).concat(u.map(function(t){return{x1:c,x2:l,y1:t,y2:t}})),p=this.cols.map(function(t){return{x1:t.pos,x2:t.pos,y1:h,y2:f}}).concat(o.map(function(t){return{x1:t,x2:t,y1:h,y2:f}})),g=d.concat(p);g.forEach(function(t){return t.verts=[]}),this.verts=[],this.edges=[],d.forEach(function(t){return p.forEach(function(e){var n=new s(i.verts.length,e.x1,t.y1);t.verts.push(n),e.verts.push(n),i.verts.push(n);for(var r=i.backToFront.length;r-- >0;){var o=i.backToFront[r],a=o.rect,u=Math.abs(n.x-a.cx()),c=Math.abs(n.y-a.cy());if(u<a.width()/2&&c<a.height()/2){n.node=o;break}}})}),g.forEach(function(t,e){i.nodes.forEach(function(e,n){e.rect.lineIntersections(t.x1,t.y1,t.x2,t.y2).forEach(function(n,r){var o=new s(i.verts.length,n.x,n.y,e,t);i.verts.push(o),t.verts.push(o),e.ports.push(o)})});var n=Math.abs(t.y1-t.y2)<.1,r=function(t,e){return n?e.x-t.x:e.y-t.y};t.verts.sort(r);for(var o=1;o<t.verts.length;o++){var a=t.verts[o-1],u=t.verts[o];a.node&&a.node===u.node&&a.node.leaf||i.edges.push({source:a.id,target:u.id,length:Math.abs(r(a,u))})}})}return t.prototype.avg=function(t){return t.reduce(function(t,e){return t+e})/t.length},t.prototype.getGridLines=function(t){for(var e=[],n=this.leaves.slice(0,this.leaves.length);n.length>0;){var r=n.filter(function(e){return e.rect["overlap"+t.toUpperCase()](n[0].rect)}),i={nodes:r,pos:this.avg(r.map(function(e){return e.rect["c"+t]()}))};e.push(i),i.nodes.forEach(function(t){return n.splice(n.indexOf(t),1)})}return e.sort(function(t,e){return t.pos-e.pos}),e},t.prototype.getDepth=function(t){for(var e=0;t.parent!==this.root;)e++,t=t.parent;return e},t.prototype.midPoints=function(t){for(var e=t[1]-t[0],n=[t[0]-e/2],r=1;r<t.length;r++)n.push((t[r]+t[r-1])/2);return n.push(t[t.length-1]+e/2),n},t.prototype.findLineage=function(t){var e=[t];do{t=t.parent,e.push(t)}while(t!==this.root);return e.reverse()},t.prototype.findAncestorPathBetween=function(t,e){for(var n=this.findLineage(t),r=this.findLineage(e),i=0;n[i]===r[i];)i++;return{commonAncestor:n[i-1],lineages:n.slice(i).concat(r.slice(i))}},t.prototype.siblingObstacles=function(t,e){var n=this,r=this.findAncestorPathBetween(t,e),i={};r.lineages.forEach(function(t){return i[t.id]={}});var o=r.commonAncestor.children.filter(function(t){return!(t in i)});return r.lineages.filter(function(t){return t.parent!==r.commonAncestor}).forEach(function(t){return o=o.concat(t.parent.children.filter(function(e){return e!==t.id}))}),o.map(function(t){return n.nodes[t]})},t.getSegmentSets=function(t,e,n){for(var r=[],i=0;i<t.length;i++)for(var o=t[i],a=0;a<o.length;a++){var s=o[a];s.edgeid=i,s.i=a;var u=s[1][e]-s[0][e];Math.abs(u)<.1&&r.push(s)}r.sort(function(t,n){return t[0][e]-n[0][e]});for(var c=[],l=null,h=0;h<r.length;h++){var s=r[h];(!l||Math.abs(s[0][e]-l.pos)>.1)&&(l={pos:s[0][e],segments:[]},c.push(l)),l.segments.push(s)}return c},t.nudgeSegs=function(t,e,n,r,o,a){var s=r.length;if(!(s<=1)){for(var u=r.map(function(e){return new i.Variable(e[0][t])}),c=[],l=0;l<s;l++)for(var h=0;h<s;h++)if(l!==h){var f=r[l],d=r[h],p=f.edgeid,g=d.edgeid,v=-1,y=-1;"x"==t?o(p,g)&&(f[0][e]<f[1][e]?(v=h,y=l):(v=l,y=h)):o(p,g)&&(f[0][e]<f[1][e]?(v=l,y=h):(v=h,y=l)),v>=0&&c.push(new i.Constraint(u[v],u[y],a))}new i.Solver(u,c).solve(),u.forEach(function(e,i){var o=r[i],a=e.position();o[0][t]=o[1][t]=a;var s=n[o.edgeid];o.i>0&&(s[o.i-1][1][t]=a),o.i<s.length-1&&(s[o.i+1][0][t]=a)})}},t.nudgeSegments=function(e,n,r,i,o){for(var a=t.getSegmentSets(e,n,r),s=0;s<a.length;s++){for(var u=a[s],c=[],l=0;l<u.segments.length;l++){var h=u.segments[l];c.push({type:0,s:h,pos:Math.min(h[0][r],h[1][r])}),c.push({type:1,s:h,pos:Math.max(h[0][r],h[1][r])})}c.sort(function(t,e){return t.pos-e.pos+t.type-e.type});var f=[],d=0;c.forEach(function(a){0===a.type?(f.push(a.s),d++):d--,0==d&&(t.nudgeSegs(n,r,e,f,i,o),f=[])})}},t.prototype.routeEdges=function(e,n,r,i){var o=this,a=e.map(function(t){return o.route(r(t),i(t))}),s=t.orderEdges(a),u=a.map(function(e){return t.makeSegments(e)});return t.nudgeSegments(u,"x","y",s,n),t.nudgeSegments(u,"y","x",s,n),t.unreverseEdges(u,a),u},t.unreverseEdges=function(t,e){t.forEach(function(t,n){e[n].reversed&&(t.reverse(),t.forEach(function(t){t.reverse()}))})},t.angleBetween2Lines=function(t,e){var n=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),r=Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x),i=n-r;return(i>Math.PI||i<-Math.PI)&&(i=r-n),i},t.isLeft=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)<=0},t.getOrder=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];void 0===e[r.l]&&(e[r.l]={}),e[r.l][r.r]=!0}return function(t,n){return void 0!==e[t]&&e[t][n]}},t.orderEdges=function(e){for(var n=[],r=0;r<e.length-1;r++)for(var i=r+1;i<e.length;i++){var o,a,s,c=e[r],l=e[i],h=new u(c,l);0!==h.length&&(h.reversed&&(l.reverse(),l.reversed=!0,h=new u(c,l)),(h.si<=0||h.ti<=0)&&(h.si+h.length>=c.length||h.ti+h.length>=l.length)?n.push({l:r,r:i}):(h.si+h.length>=c.length||h.ti+h.length>=l.length?(o=c[h.si+1],s=c[h.si-1],a=l[h.ti-1]):(o=c[h.si+h.length-2],a=c[h.si+h.length],s=l[h.ti+h.length]),t.isLeft(o,a,s)?n.push({l:i,r:r}):n.push({l:r,r:i})))}return t.getOrder(n)},t.makeSegments=function(t){function e(t){return{x:t.x,y:t.y}}for(var n=[],r=e(t[0]),i=1;i<t.length;i++){var o=e(t[i]),a=i<t.length-1?t[i+1]:null;a&&function(t,e,n){return Math.abs((e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x))<.001}(r,o,a)||(n.push([r,o]),r=o)}return n},t.prototype.route=function(t,e){var n=this,r=this.nodes[t],i=this.nodes[e];this.obstacles=this.siblingObstacles(r,i);var a={};this.obstacles.forEach(function(t){return a[t.id]=t}),this.passableEdges=this.edges.filter(function(t){var e=n.verts[t.source],r=n.verts[t.target];return!(e.node&&e.node.id in a||r.node&&r.node.id in a)});for(var s=1;s<r.ports.length;s++){var u=r.ports[0].id,c=r.ports[s].id;this.passableEdges.push({source:u,target:c,length:0})}for(var s=1;s<i.ports.length;s++){var u=i.ports[0].id,c=i.ports[s].id;this.passableEdges.push({source:u,target:c,length:0})}var l=function(t){return t.source},h=function(t){return t.target},f=function(t){return t.length},d=new o.Calculator(this.verts.length,this.passableEdges,l,h,f),p=function(t,e,o){var a=n.verts[t],s=n.verts[e],u=n.verts[o],c=Math.abs(u.x-a.x),l=Math.abs(u.y-a.y);return a.node===r&&a.node===s.node||s.node===i&&s.node===u.node?0:c>1&&l>1?1e3:0},g=d.PathFromNodeToNodeWithPrevCost(r.ports[0].id,i.ports[0].id,p),v=g.reverse().map(function(t){return n.verts[t]});return v.push(this.nodes[i.id].ports[0]),v.filter(function(t,e){return!(e<v.length-1&&v[e+1].node===r&&t.node===r||e>0&&t.node===i&&v[e-1].node===i)})},t.getRoutePath=function(e,n,r,i){var o={routepath:"M "+e[0][0].x+" "+e[0][0].y+" ",arrowpath:""};if(e.length>1)for(var a=0;a<e.length;a++){var s=e[a],u=s[1].x,c=s[1].y,l=u-s[0].x,h=c-s[0].y;if(a<e.length-1){Math.abs(l)>0?u-=l/Math.abs(l)*n:c-=h/Math.abs(h)*n,o.routepath+="L "+u+" "+c+" ";var f=e[a+1],d=f[0].x,p=f[0].y,g=f[1].x,v=f[1].y;l=g-d,h=v-p;var y,m,x=t.angleBetween2Lines(s,f)<0?1:0;Math.abs(l)>0?(y=d+l/Math.abs(l)*n,m=p):(y=d,m=p+h/Math.abs(h)*n);var b=Math.abs(y-u),w=Math.abs(m-c);o.routepath+="A "+b+" "+w+" 0 0 "+x+" "+y+" "+m+" "}else{var _,E,k=[u,c];Math.abs(l)>0?(u-=l/Math.abs(l)*i,_=[u,c+r],E=[u,c-r]):(c-=h/Math.abs(h)*i,_=[u+r,c],E=[u-r,c]),o.routepath+="L "+u+" "+c+" ",i>0&&(o.arrowpath="M "+k[0]+" "+k[1]+" L "+_[0]+" "+_[1]+" L "+E[0]+" "+E[1])}}else{var _,E,s=e[0],u=s[1].x,c=s[1].y,l=u-s[0].x,h=c-s[0].y,k=[u,c];Math.abs(l)>0?(u-=l/Math.abs(l)*i,_=[u,c+r],E=[u,c-r]):(c-=h/Math.abs(h)*i,_=[u+r,c],E=[u-r,c]),o.routepath+="L "+u+" "+c+" ",i>0&&(o.arrowpath="M "+k[0]+" "+k[1]+" L "+_[0]+" "+_[1]+" L "+E[0]+" "+E[1])}return o},t}();n.GridRouter=c},{"./rectangle":222,"./shortestpaths":223,"./vpsc":224}],215:[function(t,e,n){"use strict";function r(t,e,n,r,i){function a(t,e){m=[],p=0,g=0,y=h;for(var n=0;n<t.length;n++){s(t[n],e)}return Math.abs(c()-i)}function s(t,e){for(var n=void 0,r=0;r<m.length;r++)if(m[r].space_left>=t.height&&m[r].x+m[r].width+t.width+o.PADDING-e<=o.FLOAT_EPSILON){n=m[r];break}m.push(t),void 0!==n?(t.x=n.x+n.width+o.PADDING,t.y=n.bottom,t.space_left=t.height,t.bottom=t.y,n.space_left-=t.height+o.PADDING,n.bottom+=t.height+o.PADDING):(t.y=y,y+=t.height+o.PADDING,t.x=l,t.bottom=t.y,t.space_left=t.height),t.y+t.height-g>-o.FLOAT_EPSILON&&(g=t.y+t.height-h),t.x+t.width-p>-o.FLOAT_EPSILON&&(p=t.x+t.width-l)}function u(t){var e=0;return t.forEach(function(t){return e+=t.width+o.PADDING}),e}function c(){return p/g}void 0===i&&(i=1);var l=0,h=0,f=e,d=n,i=void 0!==i?i:1,r=void 0!==r?r:0,p=0,g=0,v=0,y=0,m=[];0!=t.length&&(function(t){function e(t){var e=Number.MAX_VALUE,n=Number.MAX_VALUE,i=0,o=0;t.array.forEach(function(t){var a=void 0!==t.width?t.width:r,s=void 0!==t.height?t.height:r;a/=2,s/=2,i=Math.max(t.x+a,i),e=Math.min(t.x-a,e),o=Math.max(t.y+s,o),n=Math.min(t.y-s,n)}),t.width=i-e,t.height=o-n}t.forEach(function(t){e(t)})}(t),function(t,e){var n=Number.POSITIVE_INFINITY,r=0;t.sort(function(t,e){return e.height-t.height}),v=t.reduce(function(t,e){return t.width<e.width?t.width:e.width});for(var i=g=v,s=y=u(t),c=0,l=Number.MAX_VALUE,h=Number.MAX_VALUE,f=-1,d=Number.MAX_VALUE,p=Number.MAX_VALUE;d>v||p>o.FLOAT_EPSILON;){if(1!=f)var g=s-(s-i)/o.GOLDEN_SECTION,l=a(t,g);if(0!=f)var y=i+(s-i)/o.GOLDEN_SECTION,h=a(t,y);if(d=Math.abs(g-y),p=Math.abs(l-h),l<n&&(n=l,r=g),h<n&&(n=h,r=y),l>h?(i=g,g=y,l=h,f=1):(s=y,y=g,h=l,f=0),c++>100)break}a(t,r)}(t,i),function(t){t.forEach(function(t){var e={x:0,y:0};t.array.forEach(function(t){e.x+=t.x,e.y+=t.y}),e.x/=t.array.length,e.y/=t.array.length;var n={x:e.x-t.width/2,y:e.y-t.height/2},r={x:t.x-n.x+f/2-p/2,y:t.y-n.y+d/2-g/2};t.array.forEach(function(t){t.x+=r.x,t.y+=r.y})})}(t))}function i(t,e){function n(t,e){if(void 0===r[t.index]){e&&(a++,o.push({array:[]})),r[t.index]=a,o[a-1].array.push(t);var s=i[t.index];if(s)for(var u=0;u<s.length;u++)n(s[u],!1)}}for(var r={},i={},o=[],a=0,s=0;s<e.length;s++){var u=e[s],c=u.source,l=u.target;i[c.index]?i[c.index].push(l):i[c.index]=[l],i[l.index]?i[l.index].push(c):i[l.index]=[c]}for(var s=0;s<t.length;s++){var h=t[s];r[h.index]||n(h,!0)}return o}var o={PADDING:10,GOLDEN_SECTION:(1+Math.sqrt(5))/2,FLOAT_EPSILON:1e-4,MAX_INERATIONS:100};n.applyPacking=r,n.separateGraphs=i},{}],216:[function(t,e,n){"use strict";function r(t){return void 0!==t.leaves||void 0!==t.groups}var i,o=t("./powergraph"),a=t("./linklengths"),s=t("./descent"),u=t("./rectangle"),c=t("./shortestpaths"),l=t("./geom"),h=t("./handledisconnected");!function(t){t[t.start=0]="start",t[t.tick=1]="tick",t[t.end=2]="end"}(i=n.EventType||(n.EventType={}));var f=function(){function t(){var e=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:t.getSourceIndex,getTargetIndex:t.getTargetIndex,setLength:t.setLinkLength,getType:function(t){return"function"==typeof e._linkType?e._linkType(t):0}}}return t.prototype.on=function(t,e){return this.event||(this.event={}),"string"==typeof t?this.event[i[t]]=e:this.event[t]=e,this},t.prototype.trigger=function(t){this.event&&void 0!==this.event[t.type]&&this.event[t.type](t)},t.prototype.kick=function(){for(;!this.tick(););},t.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:i.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var t,e,n=this._nodes.length;this._links.length;for(this._descent.locks.clear(),e=0;e<n;++e)if(t=this._nodes[e],t.fixed){void 0!==t.px&&void 0!==t.py||(t.px=t.x,t.py=t.y);var r=[t.px,t.py];this._descent.locks.add(e,r)}var o=this._descent.rungeKutta();return 0===o?this._alpha=0:void 0!==this._lastStress&&(this._alpha=o),this._lastStress=o,this.updateNodePositions(),this.trigger({type:i.tick,alpha:this._alpha,stress:this._lastStress}),!1},t.prototype.updateNodePositions=function(){for(var t,e=this._descent.x[0],n=this._descent.x[1],r=this._nodes.length;r--;)t=this._nodes[r],t.x=e[r],t.y=n[r]},t.prototype.nodes=function(t){if(!t){if(0===this._nodes.length&&this._links.length>0){var e=0;this._links.forEach(function(t){e=Math.max(e,t.source,t.target)}),this._nodes=new Array(++e);for(var n=0;n<e;++n)this._nodes[n]={}}return this._nodes}return this._nodes=t,this},t.prototype.groups=function(t){var e=this;return t?(this._groups=t,this._rootGroup={},this._groups.forEach(function(t){void 0===t.padding&&(t.padding=1),void 0!==t.leaves&&t.leaves.forEach(function(n,r){"number"==typeof n&&((t.leaves[r]=e._nodes[n]).parent=t)}),void 0!==t.groups&&t.groups.forEach(function(n,r){"number"==typeof n&&((t.groups[r]=e._groups[n]).parent=t)})}),this._rootGroup.leaves=this._nodes.filter(function(t){return void 0===t.parent}),this._rootGroup.groups=this._groups.filter(function(t){return void 0===t.parent}),this):this._groups},t.prototype.powerGraphGroups=function(t){var e=o.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(e.groups),t(e),this},t.prototype.avoidOverlaps=function(t){return arguments.length?(this._avoidOverlaps=t,this):this._avoidOverlaps},t.prototype.handleDisconnected=function(t){return arguments.length?(this._handleDisconnected=t,this):this._handleDisconnected},t.prototype.flowLayout=function(t,e){return arguments.length||(t="y"),this._directedLinkConstraints={axis:t,getMinSeparation:"number"==typeof e?function(){return e}:e},this},t.prototype.links=function(t){return arguments.length?(this._links=t,this):this._links},t.prototype.constraints=function(t){return arguments.length?(this._constraints=t,this):this._constraints},t.prototype.distanceMatrix=function(t){return arguments.length?(this._distanceMatrix=t,this):this._distanceMatrix},t.prototype.size=function(t){return t?(this._canvasSize=t,this):this._canvasSize},t.prototype.defaultNodeSize=function(t){return t?(this._defaultNodeSize=t,this):this._defaultNodeSize},t.prototype.groupCompactness=function(t){return t?(this._groupCompactness=t,this):this._groupCompactness},t.prototype.linkDistance=function(t){return t?(this._linkDistance="function"==typeof t?t:+t,this._linkLengthCalculator=null,this):this._linkDistance},t.prototype.linkType=function(t){return this._linkType=t,this},t.prototype.convergenceThreshold=function(t){return t?(this._threshold="function"==typeof t?t:+t,this):this._threshold},t.prototype.alpha=function(t){return arguments.length?(t=+t,this._alpha?this._alpha=t>0?t:0:t>0&&(this._running||(this._running=!0,this.trigger({type:i.start,alpha:this._alpha=t}),this.kick())),this):this._alpha},t.prototype.getLinkLength=function(t){return"function"==typeof this._linkDistance?+this._linkDistance(t):this._linkDistance},t.setLinkLength=function(t,e){t.length=e},t.prototype.getLinkType=function(t){return"function"==typeof this._linkType?this._linkType(t):0},t.prototype.symmetricDiffLinkLengths=function(t,e){var n=this;return void 0===e&&(e=1),this.linkDistance(function(e){return t*e.length}),this._linkLengthCalculator=function(){return a.symmetricDiffLinkLengths(n._links,n.linkAccessor,e)},this},
t.prototype.jaccardLinkLengths=function(t,e){var n=this;return void 0===e&&(e=1),this.linkDistance(function(e){return t*e.length}),this._linkLengthCalculator=function(){return a.jaccardLinkLengths(n._links,n.linkAccessor,e)},this},t.prototype.start=function(e,n,r,i,o){var l=this;void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=!0);var h,f=this.nodes().length,d=f+2*this._groups.length,p=(this._links.length,this._canvasSize[0]),g=this._canvasSize[1],v=new Array(d),y=new Array(d),m=null,x=this._avoidOverlaps;this._nodes.forEach(function(t,e){t.index=e,void 0===t.x&&(t.x=p/2,t.y=g/2),v[e]=t.x,y[e]=t.y}),this._linkLengthCalculator&&this._linkLengthCalculator();var b;this._distanceMatrix?b=this._distanceMatrix:(b=new c.Calculator(d,this._links,t.getSourceIndex,t.getTargetIndex,function(t){return l.getLinkLength(t)}).DistanceMatrix(),m=s.Descent.createSquareMatrix(d,function(){return 2}),this._links.forEach(function(t){"number"==typeof t.source&&(t.source=l._nodes[t.source]),"number"==typeof t.target&&(t.target=l._nodes[t.target])}),this._links.forEach(function(e){var n=t.getSourceIndex(e),r=t.getTargetIndex(e);m[n][r]=m[r][n]=e.weight||1}));var w=s.Descent.createSquareMatrix(d,function(t,e){return b[t][e]});if(this._rootGroup&&void 0!==this._rootGroup.groups){var h=f,_=function(t,e,n,r){m[t][e]=m[e][t]=n,w[t][e]=w[e][t]=r};this._groups.forEach(function(t){_(h,h+1,l._groupCompactness,.1),v[h]=0,y[h++]=0,v[h]=0,y[h++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var E=this._constraints||[];this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,E=E.concat(a.generateDirectedEdgeConstraints(f,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new s.Descent([v,y],w),this._descent.locks.clear();for(var h=0;h<f;++h){var k=this._nodes[h];if(k.fixed){k.px=k.x,k.py=k.y;var N=[k.x,k.y];this._descent.locks.add(h,N)}}if(this._descent.threshold=this._threshold,this.initialLayout(e,v,y),E.length>0&&(this._descent.project=new u.Projection(this._nodes,this._groups,this._rootGroup,E).projectFunctions()),this._descent.run(n),this.separateOverlappingComponents(p,g),this.avoidOverlaps(x),x&&(this._nodes.forEach(function(t,e){t.x=v[e],t.y=y[e]}),this._descent.project=new u.Projection(this._nodes,this._groups,this._rootGroup,E,!0).projectFunctions(),this._nodes.forEach(function(t,e){v[e]=t.x,y[e]=t.y})),this._descent.G=m,this._descent.run(r),i){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=f,this._descent.scaleSnapByMaxH=f!=d;var L=s.Descent.createSquareMatrix(d,function(t,e){return t>=f||e>=f?m[t][e]:0});this._descent.G=L,this._descent.run(i)}return this.updateNodePositions(),this.separateOverlappingComponents(p,g),o?this.resume():this},t.prototype.initialLayout=function(e,n,r){if(this._groups.length>0&&e>0){var i=this._nodes.length,o=this._links.map(function(t){return{source:t.source.index,target:t.target.index}}),a=this._nodes.map(function(t){return{index:t.index}});this._groups.forEach(function(t,e){a.push({index:t.index=i+e})}),this._groups.forEach(function(t,e){void 0!==t.leaves&&t.leaves.forEach(function(e){return o.push({source:t.index,target:e.index})}),void 0!==t.groups&&t.groups.forEach(function(e){return o.push({source:t.index,target:e.index})})}),(new t).size(this.size()).nodes(a).links(o).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(e,0,0,0,!1),this._nodes.forEach(function(t){n[t.index]=a[t.index].x,r[t.index]=a[t.index].y})}else this._descent.run(e)},t.prototype.separateOverlappingComponents=function(t,e){var n=this;if(!this._distanceMatrix&&this._handleDisconnected){var r=this._descent.x[0],i=this._descent.x[1];this._nodes.forEach(function(t,e){t.x=r[e],t.y=i[e]});var o=h.separateGraphs(this._nodes,this._links);h.applyPacking(o,t,e,this._defaultNodeSize),this._nodes.forEach(function(t,e){n._descent.x[0][e]=t.x,n._descent.x[1][e]=t.y,t.bounds&&(t.bounds.setXCentre(t.x),t.bounds.setYCentre(t.y))})}},t.prototype.resume=function(){return this.alpha(.1)},t.prototype.stop=function(){return this.alpha(0)},t.prototype.prepareEdgeRouting=function(t){void 0===t&&(t=0),this._visibilityGraph=new l.TangentVisibilityGraph(this._nodes.map(function(e){return e.bounds.inflate(-t).vertices()}))},t.prototype.routeEdge=function(t,e){var n=[],r=new l.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),i={x:t.source.x,y:t.source.y},o={x:t.target.x,y:t.target.y},a=r.addPoint(i,t.source.index),s=r.addPoint(o,t.target.index);r.addEdgeIfVisible(i,o,t.source.index,t.target.index),void 0!==e&&e(r);var h=function(t){return t.source.id},f=function(t){return t.target.id},d=function(t){return t.length()},p=new c.Calculator(r.V.length,r.E,h,f,d),g=p.PathFromNodeToNode(a.id,s.id);if(1===g.length||g.length===r.V.length){var v=u.makeEdgeBetween(t.source.innerBounds,t.target.innerBounds,5);n=[v.sourceIntersection,v.arrowStart]}else{for(var y=g.length-2,m=r.V[g[y]].p,x=r.V[g[0]].p,n=[t.source.innerBounds.rayIntersection(m.x,m.y)],b=y;b>=0;--b)n.push(r.V[g[b]].p);n.push(u.makeEdgeTo(x,t.target.innerBounds,5))}return n},t.getSourceIndex=function(t){return"number"==typeof t.source?t.source:t.source.index},t.getTargetIndex=function(t){return"number"==typeof t.target?t.target:t.target.index},t.linkId=function(e){return t.getSourceIndex(e)+"-"+t.getTargetIndex(e)},t.dragStart=function(e){r(e)?t.storeOffset(e,t.dragOrigin(e)):(t.stopNode(e),e.fixed|=2)},t.stopNode=function(t){t.px=t.x,t.py=t.y},t.storeOffset=function(e,n){void 0!==e.leaves&&e.leaves.forEach(function(e){e.fixed|=2,t.stopNode(e),e._dragGroupOffsetX=e.x-n.x,e._dragGroupOffsetY=e.y-n.y}),void 0!==e.groups&&e.groups.forEach(function(e){return t.storeOffset(e,n)})},t.dragOrigin=function(t){return r(t)?{x:t.bounds.cx(),y:t.bounds.cy()}:t},t.drag=function(e,n){r(e)?(void 0!==e.leaves&&e.leaves.forEach(function(t){e.bounds.setXCentre(n.x),e.bounds.setYCentre(n.y),t.px=t._dragGroupOffsetX+n.x,t.py=t._dragGroupOffsetY+n.y}),void 0!==e.groups&&e.groups.forEach(function(e){return t.drag(e,n)})):(e.px=n.x,e.py=n.y)},t.dragEnd=function(e){r(e)?(void 0!==e.leaves&&e.leaves.forEach(function(e){t.dragEnd(e),delete e._dragGroupOffsetX,delete e._dragGroupOffsetY}),void 0!==e.groups&&e.groups.forEach(t.dragEnd)):e.fixed&=-7},t.mouseOver=function(t){t.fixed|=4,t.px=t.x,t.py=t.y},t.mouseOut=function(t){t.fixed&=-5},t}();n.Layout=f},{"./descent":212,"./geom":213,"./handledisconnected":215,"./linklengths":218,"./powergraph":219,"./rectangle":222,"./shortestpaths":223}],217:[function(t,e,n){"use strict";var r=t("./shortestpaths"),i=t("./descent"),o=t("./rectangle"),a=t("./linklengths"),s=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.actualLength=function(t){var e=this;return Math.sqrt(t.reduce(function(t,n){var r=n[e.target]-n[e.source];return t+r*r},0))},t}();n.Link3D=s;var u=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n}return t}();n.Node3D=u;var c=function(){function t(e,n,r){void 0===r&&(r=1);var i=this;this.nodes=e,this.links=n,this.idealLinkLength=r,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(t.k);for(var o=0;o<t.k;++o)this.result[o]=new Array(e.length);e.forEach(function(e,n){for(var r=0,o=t.dims;r<o.length;r++){var a=o[r];void 0===e[a]&&(e[a]=Math.random())}i.result[0][n]=e.x,i.result[1][n]=e.y,i.result[2][n]=e.z})}return t.prototype.linkLength=function(t){return t.actualLength(this.result)},t.prototype.start=function(t){var e=this;void 0===t&&(t=100);var n=this.nodes.length,s=new l;this.useJaccardLinkLengths&&a.jaccardLinkLengths(this.links,s,1.5),this.links.forEach(function(t){return t.length*=e.idealLinkLength});var u=new r.Calculator(n,this.links,function(t){return t.source},function(t){return t.target},function(t){return t.length}).DistanceMatrix(),c=i.Descent.createSquareMatrix(n,function(t,e){return u[t][e]}),h=i.Descent.createSquareMatrix(n,function(){return 2});this.links.forEach(function(t){var e=t.source,n=t.target;return h[e][n]=h[n][e]=1}),this.descent=new i.Descent(this.result,c),this.descent.threshold=.001,this.descent.G=h,this.constraints&&(this.descent.project=new o.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var f=0;f<this.nodes.length;f++){var d=this.nodes[f];d.fixed&&this.descent.locks.add(f,[d.x,d.y,d.z])}return this.descent.run(t),this},t.prototype.tick=function(){this.descent.locks.clear();for(var t=0;t<this.nodes.length;t++){var e=this.nodes[t];e.fixed&&this.descent.locks.add(t,[e.x,e.y,e.z])}return this.descent.rungeKutta()},t}();c.dims=["x","y","z"],c.k=c.dims.length,n.Layout3D=c;var l=function(){function t(){}return t.prototype.getSourceIndex=function(t){return t.source},t.prototype.getTargetIndex=function(t){return t.target},t.prototype.getLength=function(t){return t.length},t.prototype.setLength=function(t,e){t.length=e},t}()},{"./descent":212,"./linklengths":218,"./rectangle":222,"./shortestpaths":223}],218:[function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)n[r]={};for(var r in e)n[r]={};return Object.keys(n).length}function i(t,e){var n=0;for(var r in t)void 0!==e[r]&&++n;return n}function o(t,e){var n={},r=function(t,e){void 0===n[t]&&(n[t]={}),n[t][e]={}};return t.forEach(function(t){var n=e.getSourceIndex(t),i=e.getTargetIndex(t);r(n,i),r(i,n)}),n}function a(t,e,n,r){var i=o(t,r);t.forEach(function(t){var o=i[r.getSourceIndex(t)],a=i[r.getTargetIndex(t)];r.setLength(t,1+e*n(o,a))})}function s(t,e,n){void 0===n&&(n=1),a(t,n,function(t,e){return Math.sqrt(r(t,e)-i(t,e))},e)}function u(t,e,n){void 0===n&&(n=1),a(t,n,function(t,e){return Math.min(Object.keys(t).length,Object.keys(e).length)<1.1?0:i(t,e)/r(t,e)},e)}function c(t,e,n,r){var i=l(t,e,r),o={};i.forEach(function(t,e){return t.forEach(function(t){return o[t]=e})});var a=[];return e.forEach(function(t){var e=r.getSourceIndex(t),i=r.getTargetIndex(t);o[e]!==o[i]&&a.push({axis:n,left:e,right:i,gap:r.getMinSeparation(t)})}),a}function l(t,e,n){function r(t){t.index=t.lowlink=o++,a.push(t),t.onStack=!0;for(var e=0,n=t.out;e<n.length;e++){var i=n[e];void 0===i.index?(r(i),t.lowlink=Math.min(t.lowlink,i.lowlink)):i.onStack&&(t.lowlink=Math.min(t.lowlink,i.index))}if(t.lowlink===t.index){for(var u=[];a.length&&(i=a.pop(),i.onStack=!1,u.push(i),i!==t););s.push(u.map(function(t){return t.id}))}}for(var i=[],o=0,a=[],s=[],u=0;u<t;u++)i.push({id:u,out:[]});for(var c=0,l=e;c<l.length;c++){var h=l[c],f=i[n.getSourceIndex(h)],d=i[n.getTargetIndex(h)];f.out.push(d)}for(var p=0,g=i;p<g.length;p++){var v=g[p];void 0===v.index&&r(v)}return s}n.symmetricDiffLinkLengths=s,n.jaccardLinkLengths=u,n.generateDirectedEdgeConstraints=c,n.stronglyConnectedComponents=l},{}],219:[function(t,e,n){"use strict";function r(t,e,n){t.forAll(function(t){if(t.isLeaf())e.leaves||(e.leaves=[]),e.leaves.push(t.id);else{var i=e;if(t.gid=n.length,!t.isIsland()||t.isPredefined()){if(i={id:t.gid},t.isPredefined())for(var o in t.definition)i[o]=t.definition[o];e.groups||(e.groups=[]),e.groups.push(t.gid),n.push(i)}r(t.children,i,n)}})}function i(t,e){var n={};for(var r in t)r in e&&(n[r]=t[r]);return n}function o(t,e,n,r){for(var i=t.length,o=new s(i,e,n,r);o.greedyMerge(););var a=[],u=o.getGroupHierarchy(a);return a.forEach(function(e){var n=function(n){var r=e[n];"number"==typeof r&&(e[n]=t[r])};n("source"),n("target")}),{groups:u,powerEdges:a}}var a=function(){function t(t,e,n){this.source=t,this.target=e,this.type=n}return t}();n.PowerEdge=a;var s=function(){function t(t,e,n,r){var i=this;if(this.linkAccessor=n,this.modules=new Array(t),this.roots=[],r)this.initModulesFromGroup(r);else{this.roots.push(new c);for(var o=0;o<t;++o)this.roots[0].add(this.modules[o]=new u(o))}this.R=e.length,e.forEach(function(t){var e=i.modules[n.getSourceIndex(t)],r=i.modules[n.getTargetIndex(t)],o=n.getType(t);e.outgoing.add(o,r),r.incoming.add(o,e)})}return t.prototype.initModulesFromGroup=function(t){var e=new c;this.roots.push(e);for(var n=0;n<t.leaves.length;++n){var r=t.leaves[n],i=new u(r.id);this.modules[r.id]=i,e.add(i)}if(t.groups)for(var o=0;o<t.groups.length;++o){var a=t.groups[o],s={};for(var h in a)"leaves"!==h&&"groups"!==h&&a.hasOwnProperty(h)&&(s[h]=a[h]);e.add(new u(-1-o,new l,new l,this.initModulesFromGroup(a),s))}return e},t.prototype.merge=function(t,e,n){void 0===n&&(n=0);var r=t.incoming.intersection(e.incoming),i=t.outgoing.intersection(e.outgoing),o=new c;o.add(t),o.add(e);var a=new u(this.modules.length,i,r,o);this.modules.push(a);var s=function(n,r,i){n.forAll(function(n,o){n.forAll(function(n){var s=n[r];s.add(o,a),s.remove(o,t),s.remove(o,e),t[i].remove(o,n),e[i].remove(o,n)})})};return s(i,"incoming","outgoing"),s(r,"outgoing","incoming"),this.R-=r.count()+i.count(),this.roots[n].remove(t),this.roots[n].remove(e),this.roots[n].add(a),a},t.prototype.rootMerges=function(t){void 0===t&&(t=0);for(var e=this.roots[t].modules(),n=e.length,r=new Array(n*(n-1)),i=0,o=0,a=n-1;o<a;++o)for(var s=o+1;s<n;++s){var u=e[o],c=e[s];r[i]={id:i,nEdges:this.nEdges(u,c),a:u,b:c},i++}return r},t.prototype.greedyMerge=function(){for(var t=0;t<this.roots.length;++t)if(!(this.roots[t].modules().length<2)){var e=this.rootMerges(t).sort(function(t,e){return t.nEdges==e.nEdges?t.id-e.id:t.nEdges-e.nEdges}),n=e[0];if(!(n.nEdges>=this.R))return this.merge(n.a,n.b,t),!0}},t.prototype.nEdges=function(t,e){var n=t.incoming.intersection(e.incoming),r=t.outgoing.intersection(e.outgoing);return this.R-n.count()-r.count()},t.prototype.getGroupHierarchy=function(t){var e=this,n=[],i={};return r(this.roots[0],i,n),this.allEdges().forEach(function(r){var i=e.modules[r.source],o=e.modules[r.target];t.push(new a(void 0===i.gid?r.source:n[i.gid],void 0===o.gid?r.target:n[o.gid],r.type))}),n},t.prototype.allEdges=function(){var e=[];return t.getEdges(this.roots[0],e),e},t.getEdges=function(e,n){e.forAll(function(e){e.getEdges(n),t.getEdges(e.children,n)})},t}();n.Configuration=s;var u=function(){function t(t,e,n,r,i){void 0===e&&(e=new l),void 0===n&&(n=new l),void 0===r&&(r=new c),this.id=t,this.outgoing=e,this.incoming=n,this.children=r,this.definition=i}return t.prototype.getEdges=function(t){var e=this;this.outgoing.forAll(function(n,r){n.forAll(function(n){t.push(new a(e.id,n.id,r))})})},t.prototype.isLeaf=function(){return 0===this.children.count()},t.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},t.prototype.isPredefined=function(){return void 0!==this.definition},t}();n.Module=u;var c=function(){function t(){this.table={}}return t.prototype.count=function(){return Object.keys(this.table).length},t.prototype.intersection=function(e){var n=new t;return n.table=i(this.table,e.table),n},t.prototype.intersectionCount=function(t){return this.intersection(t).count()},t.prototype.contains=function(t){return t in this.table},t.prototype.add=function(t){this.table[t.id]=t},t.prototype.remove=function(t){delete this.table[t.id]},t.prototype.forAll=function(t){for(var e in this.table)t(this.table[e])},t.prototype.modules=function(){var t=[];return this.forAll(function(e){e.isPredefined()||t.push(e)}),t},t}();n.ModuleSet=c;var l=function(){function t(){this.sets={},this.n=0}return t.prototype.count=function(){return this.n},t.prototype.contains=function(t){var e=!1;return this.forAllModules(function(n){e||n.id!=t||(e=!0)}),e},t.prototype.add=function(t,e){(t in this.sets?this.sets[t]:this.sets[t]=new c).add(e),++this.n},t.prototype.remove=function(t,e){var n=this.sets[t];n.remove(e),0===n.count()&&delete this.sets[t],--this.n},t.prototype.forAll=function(t){for(var e in this.sets)t(this.sets[e],Number(e))},t.prototype.forAllModules=function(t){this.forAll(function(e,n){return e.forAll(t)})},t.prototype.intersection=function(e){var n=new t;return this.forAll(function(t,r){if(r in e.sets){var i=t.intersection(e.sets[r]),o=i.count();o>0&&(n.sets[r]=i,n.n+=o)}}),n},t}();n.LinkSets=l,n.getGroups=o},{}],220:[function(t,e,n){"use strict";var r=function(){function t(t){this.elem=t,this.subheaps=[]}return t.prototype.toString=function(t){for(var e="",n=!1,r=0;r<this.subheaps.length;++r){var i=this.subheaps[r];i.elem?(n&&(e+=","),e+=i.toString(t),n=!0):n=!1}return""!==e&&(e="("+e+")"),(this.elem?t(this.elem):"")+e},t.prototype.forEach=function(t){this.empty()||(t(this.elem,this),this.subheaps.forEach(function(e){return e.forEach(t)}))},t.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(t,e){return t+e.count()},0)},t.prototype.min=function(){return this.elem},t.prototype.empty=function(){return null==this.elem},t.prototype.contains=function(t){if(this===t)return!0;for(var e=0;e<this.subheaps.length;e++)if(this.subheaps[e].contains(t))return!0;return!1},t.prototype.isHeap=function(t){var e=this;return this.subheaps.every(function(n){return t(e.elem,n.elem)&&n.isHeap(t)})},t.prototype.insert=function(e,n){return this.merge(new t(e),n)},t.prototype.merge=function(t,e){return this.empty()?t:t.empty()?this:e(this.elem,t.elem)?(this.subheaps.push(t),this):(t.subheaps.push(this),t)},t.prototype.removeMin=function(t){return this.empty()?null:this.mergePairs(t)},t.prototype.mergePairs=function(e){if(0==this.subheaps.length)return new t(null);if(1==this.subheaps.length)return this.subheaps[0];var n=this.subheaps.pop().merge(this.subheaps.pop(),e),r=this.mergePairs(e);return n.merge(r,e)},t.prototype.decreaseKey=function(e,n,r,i){var o=e.removeMin(i);e.elem=o.elem,e.subheaps=o.subheaps,null!==r&&null!==o.elem&&r(e.elem,e);var a=new t(n);return null!==r&&r(n,a),this.merge(a,i)},t}();n.PairingHeap=r;var i=function(){function t(t){this.lessThan=t}return t.prototype.top=function(){return this.empty()?null:this.root.elem},t.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n,i,o=0;i=t[o];++o)n=new r(i),this.root=this.empty()?n:this.root.merge(n,this.lessThan);return n},t.prototype.empty=function(){return!this.root||!this.root.elem},t.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},t.prototype.forEach=function(t){this.root.forEach(t)},t.prototype.pop=function(){if(this.empty())return null;var t=this.root.min();return this.root=this.root.removeMin(this.lessThan),t},t.prototype.reduceKey=function(t,e,n){void 0===n&&(n=null),this.root=this.root.decreaseKey(t,e,n,this.lessThan)},t.prototype.toString=function(t){return this.root.toString(t)},t.prototype.count=function(){return this.root.count()},t}();n.PriorityQueue=i},{}],221:[function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(){function t(){this.findIter=function(t){for(var e=this._root,n=this.iterator();null!==e;){var r=this._comparator(t,e.data);if(0===r)return n._cursor=e,n;n._ancestors.push(e),e=e.get_child(r>0)}return null}}return t.prototype.clear=function(){this._root=null,this.size=0},t.prototype.find=function(t){for(var e=this._root;null!==e;){var n=this._comparator(t,e.data);if(0===n)return e.data;e=e.get_child(n>0)}return null},t.prototype.lowerBound=function(t){return this._bound(t,this._comparator)},t.prototype.upperBound=function(t){function e(t,e){return n(e,t)}var n=this._comparator;return this._bound(t,e)},t.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},t.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},t.prototype.iterator=function(){return new o(this)},t.prototype.each=function(t){for(var e,n=this.iterator();null!==(e=n.next());)t(e)},t.prototype.reach=function(t){for(var e,n=this.iterator();null!==(e=n.prev());)t(e)},t.prototype._bound=function(t,e){for(var n=this._root,r=this.iterator();null!==n;){var i=this._comparator(t,n.data);if(0===i)return r._cursor=n,r;r._ancestors.push(n),n=n.get_child(i>0)}for(var o=r._ancestors.length-1;o>=0;--o)if(n=r._ancestors[o],e(t,n.data)>0)return r._cursor=n,r._ancestors.length=o,r;return r._ancestors.length=0,r},t}();n.TreeBase=i;var o=function(){function t(t){this._tree=t,this._ancestors=[],this._cursor=null}return t.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},t.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else if(null===this._cursor.right){var e;do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===e)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},t.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else if(null===this._cursor.left){var e;do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===e)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},t.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},t.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},t}();n.Iterator=o;var a=function(){function t(t){this.data=t,this.left=null,this.right=null,this.red=!0}return t.prototype.get_child=function(t){return t?this.right:this.left},t.prototype.set_child=function(t,e){t?this.right=e:this.left=e},t}(),s=function(t){function e(e){var n=t.call(this)||this;return n._root=null,n._comparator=e,n.size=0,n}return r(e,t),e.prototype.insert=function(t){var n=!1;if(null===this._root)this._root=new a(t),n=!0,this.size++;else{var r=new a(void 0),i=!1,o=!1,s=null,u=r,c=null,l=this._root;for(u.right=this._root;;){if(null===l?(l=new a(t),c.set_child(i,l),n=!0,this.size++):e.is_red(l.left)&&e.is_red(l.right)&&(l.red=!0,l.left.red=!1,l.right.red=!1),e.is_red(l)&&e.is_red(c)){var h=u.right===s;l===c.get_child(o)?u.set_child(h,e.single_rotate(s,!o)):u.set_child(h,e.double_rotate(s,!o))}var f=this._comparator(l.data,t);if(0===f)break;o=i,i=f<0,null!==s&&(u=s),s=c,c=l,l=l.get_child(i)}this._root=r.right}return this._root.red=!1,n},e.prototype.remove=function(t){if(null===this._root)return!1;var n=new a(void 0),r=n;r.right=this._root;for(var i=null,o=null,s=null,u=!0;null!==r.get_child(u);){var c=u;o=i,i=r,r=r.get_child(u);var l=this._comparator(t,r.data);if(u=l>0,0===l&&(s=r),!e.is_red(r)&&!e.is_red(r.get_child(u)))if(e.is_red(r.get_child(!u))){var h=e.single_rotate(r,u);i.set_child(c,h),i=h}else if(!e.is_red(r.get_child(!u))){var f=i.get_child(!c);if(null!==f)if(e.is_red(f.get_child(!c))||e.is_red(f.get_child(c))){var d=o.right===i;e.is_red(f.get_child(c))?o.set_child(d,e.double_rotate(i,c)):e.is_red(f.get_child(!c))&&o.set_child(d,e.single_rotate(i,c));var p=o.get_child(d);p.red=!0,r.red=!0,p.left.red=!1,p.right.red=!1}else i.red=!1,f.red=!0,r.red=!0}}return null!==s&&(s.data=r.data,i.set_child(i.right===r,r.get_child(null===r.left)),this.size--),this._root=n.right,null!==this._root&&(this._root.red=!1),null!==s},e.is_red=function(t){return null!==t&&t.red},e.single_rotate=function(t,e){var n=t.get_child(!e);return t.set_child(!e,n.get_child(e)),n.set_child(e,t),t.red=!0,n.red=!1,n},e.double_rotate=function(t,n){return t.set_child(!n,e.single_rotate(t.get_child(!n),!n)),e.single_rotate(t,n)},e}(i);n.RBTree=s},{}],222:[function(t,e,n){"use strict";function r(t){return t.bounds=void 0!==t.leaves?t.leaves.reduce(function(t,e){return e.bounds.union(t)},b.empty()):b.empty(),void 0!==t.groups&&(t.bounds=t.groups.reduce(function(t,e){return r(e).union(t)},t.bounds)),t.bounds=t.bounds.inflate(t.padding),t.bounds}function i(t,e,n){var r=t.rayIntersection(e.cx(),e.cy())||{x:t.cx(),y:t.cy()},i=e.rayIntersection(t.cx(),t.cy())||{x:e.cx(),y:e.cy()},o=i.x-r.x,a=i.y-r.y,s=Math.sqrt(o*o+a*a),u=s-n;return{sourceIntersection:r,targetIntersection:i,arrowStart:{x:r.x+u*o/s,y:r.y+u*a/s}}}function o(t,e,n){var r=e.rayIntersection(t.x,t.y);r||(r={x:e.cx(),y:e.cy()});var i=r.x-t.x,o=r.y-t.y,a=Math.sqrt(i*i+o*o);return{x:r.x-n*i/a,y:r.y-n*o/a}}function a(t,e){return t.pos>e.pos?1:t.pos<e.pos?-1:t.isOpen?-1:e.isOpen?1:0}function s(){return new x.RBTree(function(t,e){return t.pos-e.pos})}function u(t,e,n,r){void 0===r&&(r=!1);var i=t.padding,o=void 0!==t.groups?t.groups.length:0,a=void 0!==t.leaves?t.leaves.length:0,s=o?t.groups.reduce(function(t,r){return t.concat(u(r,e,n,!0))},[]):[],l=(r?2:0)+a+o,h=new Array(l),f=new Array(l),d=0,p=function(t,e){f[d]=t,h[d++]=e};if(r){var g=t.bounds,v=e.getCentre(g),y=e.getSize(g)/2,m=e.getOpen(g),x=e.getClose(g),b=v-y+i/2,w=v+y-i/2;t.minVar.desiredPosition=b,p(e.makeRect(m,x,b,i),t.minVar),t.maxVar.desiredPosition=w,p(e.makeRect(m,x,w,i),t.maxVar)}a&&t.leaves.forEach(function(t){return p(t.bounds,t.variable)}),o&&t.groups.forEach(function(t){var n=t.bounds;p(e.makeRect(e.getOpen(n),e.getClose(n),e.getCentre(n),e.getSize(n)),t.minVar)});var _=c(f,h,e,n);return o&&(h.forEach(function(t){t.cOut=[],t.cIn=[]}),_.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),t.groups.forEach(function(t){var n=(t.padding-e.getSize(t.bounds))/2;t.minVar.cIn.forEach(function(t){return t.gap+=n}),t.minVar.cOut.forEach(function(e){e.left=t.maxVar,e.gap+=n})})),s.concat(_)}function c(t,e,n,r){var i,o=t.length,u=2*o;console.assert(e.length>=o);var c=new Array(u);for(i=0;i<o;++i){var l=t[i],h=new w(e[i],l,n.getCentre(l));c[i]=new _(!0,h,n.getOpen(l)),c[i+o]=new _(!1,h,n.getClose(l))}c.sort(a);var f=new Array,d=s();for(i=0;i<u;++i){var p=c[i],h=p.v;if(p.isOpen)d.insert(h),n.findNeighbours(h,d);else{d.remove(h);var g=function(t,e){var i=(n.getSize(t.r)+n.getSize(e.r))/2+r;f.push(new m.Constraint(t.v,e.v,i))},v=function(t,e,n){for(var r,i=h[t].iterator();null!==(r=i[t]());)n(r,h),r[e].remove(h)};v("prev","next",function(t,e){return g(t,e)}),v("next","prev",function(t,e){return g(e,t)})}}return console.assert(0===d.size),f}function l(t,e){var n=function(n,r){for(var i,o=e.findIter(t);null!==(i=o[n]());){var a=i.r.overlapX(t.r);if((a<=0||a<=i.r.overlapY(t.r))&&(t[n].insert(i),i[r].insert(t)),a<=0)break}};n("next","prev"),n("prev","next")}function h(t,e){var n=function(n,r){var i=e.findIter(t)[n]();null!==i&&i.r.overlapX(t.r)>0&&(t[n].insert(i),i[r].insert(t))};n("next","prev"),n("prev","next")}function f(t,e){return c(t,e,E,1e-6)}function d(t,e){return c(t,e,k,1e-6)}function p(t){return u(t,E,1e-6)}function g(t){return u(t,k,1e-6)}function v(t){var e=t.map(function(t){return new m.Variable(t.cx())}),n=f(t,e),r=new m.Solver(e,n);r.solve(),e.forEach(function(e,n){return t[n].setXCentre(e.position())}),e=t.map(function(t){return new m.Variable(t.cy())}),n=d(t,e),r=new m.Solver(e,n),r.solve(),e.forEach(function(e,n){return t[n].setYCentre(e.position())})}var y=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},m=t("./vpsc"),x=t("./rbtree");n.computeGroupBounds=r;var b=function(){function t(t,e,n,r){this.x=t,this.X=e,this.y=n,this.Y=r}return t.empty=function(){return new t(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},t.prototype.cx=function(){return(this.x+this.X)/2},t.prototype.cy=function(){return(this.y+this.Y)/2},t.prototype.overlapX=function(t){var e=this.cx(),n=t.cx();return e<=n&&t.x<this.X?this.X-t.x:n<=e&&this.x<t.X?t.X-this.x:0},t.prototype.overlapY=function(t){var e=this.cy(),n=t.cy();return e<=n&&t.y<this.Y?this.Y-t.y:n<=e&&this.y<t.Y?t.Y-this.y:0},t.prototype.setXCentre=function(t){var e=t-this.cx();this.x+=e,this.X+=e},t.prototype.setYCentre=function(t){var e=t-this.cy();this.y+=e,this.Y+=e},t.prototype.width=function(){return this.X-this.x},t.prototype.height=function(){return this.Y-this.y},t.prototype.union=function(e){return new t(Math.min(this.x,e.x),Math.max(this.X,e.X),Math.min(this.y,e.y),Math.max(this.Y,e.Y))},t.prototype.lineIntersections=function(e,n,r,i){for(var o=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],a=[],s=0;s<4;++s){var u=t.lineIntersection(e,n,r,i,o[s][0],o[s][1],o[s][2],o[s][3]);null!==u&&a.push({x:u.x,y:u.y})}return a},t.prototype.rayIntersection=function(t,e){var n=this.lineIntersections(this.cx(),this.cy(),t,e);return n.length>0?n[0]:null},t.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y},{x:this.x,y:this.y}]},t.lineIntersection=function(t,e,n,r,i,o,a,s){var u=n-t,c=a-i,l=r-e,h=s-o,f=h*u-c*l;if(0==f)return null;var d=t-i,p=e-o,g=c*p-h*d,v=g/f,y=u*p-l*d,m=y/f;return v>=0&&v<=1&&m>=0&&m<=1?{x:t+v*u,y:e+v*l}:null},t.prototype.inflate=function(e){return new t(this.x-e,this.X+e,this.y-e,this.Y+e)},t}();n.Rectangle=b,n.makeEdgeBetween=i,n.makeEdgeTo=o;var w=function(){function t(t,e,n){this.v=t,this.r=e,this.pos=n,this.prev=s(),this.next=s()}return t}(),_=function(){function t(t,e,n){this.isOpen=t,this.v=e,this.pos=n}return t}(),E={getCentre:function(t){return t.cx()},getOpen:function(t){return t.y},getClose:function(t){return t.Y},getSize:function(t){return t.width()},makeRect:function(t,e,n,r){return new b(n-r/2,n+r/2,t,e)},findNeighbours:l},k={getCentre:function(t){return t.cy()},getOpen:function(t){return t.x},getClose:function(t){return t.X},getSize:function(t){return t.height()},makeRect:function(t,e,n,r){return new b(t,e,n-r/2,n+r/2)},findNeighbours:h};n.generateXConstraints=f,n.generateYConstraints=d,n.generateXGroupConstraints=p,n.generateYGroupConstraints=g,n.removeOverlaps=v;var N=function(t){function e(e,n){var r=t.call(this,0,n)||this;return r.index=e,r}return y(e,t),e}(m.Variable);n.IndexedVariable=N;var L=function(){function t(t,e,n,i,o){void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=!1);var a=this;if(this.nodes=t,this.groups=e,this.rootGroup=n,this.avoidOverlaps=o,this.variables=t.map(function(t,e){return t.variable=new N(e,1)}),i&&this.createConstraints(i),o&&n&&void 0!==n.groups){t.forEach(function(t){if(!t.width||!t.height)return void(t.bounds=new b(t.x,t.x,t.y,t.y));var e=t.width/2,n=t.height/2;t.bounds=new b(t.x-e,t.x+e,t.y-n,t.y+n)}),r(n);var s=t.length;e.forEach(function(t){a.variables[s]=t.minVar=new N(s++,void 0!==t.stiffness?t.stiffness:.01),a.variables[s]=t.maxVar=new N(s++,void 0!==t.stiffness?t.stiffness:.01)})}}return t.prototype.createSeparation=function(t){return new m.Constraint(this.nodes[t.left].variable,this.nodes[t.right].variable,t.gap,void 0!==t.equality&&t.equality)},t.prototype.makeFeasible=function(t){var e=this;if(this.avoidOverlaps){var n="x",r="width";"x"===t.axis&&(n="y",r="height");var i=t.offsets.map(function(t){return e.nodes[t.node]}).sort(function(t,e){return t[n]-e[n]}),o=null;i.forEach(function(t){o&&(t[n]=o[n]+o[r]+1),o=t})}},t.prototype.createAlignment=function(t){var e=this,n=this.nodes[t.offsets[0].node].variable;this.makeFeasible(t);var r="x"===t.axis?this.xConstraints:this.yConstraints;t.offsets.slice(1).forEach(function(t){var i=e.nodes[t.node].variable;r.push(new m.Constraint(n,i,t.offset,!0))})},t.prototype.createConstraints=function(t){var e=this,n=function(t){return void 0===t.type||"separation"===t.type};this.xConstraints=t.filter(function(t){return"x"===t.axis&&n(t)}).map(function(t){return e.createSeparation(t)}),this.yConstraints=t.filter(function(t){return"y"===t.axis&&n(t)}).map(function(t){return e.createSeparation(t)}),t.filter(function(t){return"alignment"===t.type}).forEach(function(t){return e.createAlignment(t)})},t.prototype.setupVariablesAndBounds=function(t,e,n,r){this.nodes.forEach(function(i,o){
i.fixed?(i.variable.weight=i.fixedWeight?i.fixedWeight:1e3,n[o]=r(i)):i.variable.weight=1;var a=(i.width||0)/2,s=(i.height||0)/2,u=t[o],c=e[o];i.bounds=new b(u-a,u+a,c-s,c+s)})},t.prototype.xProject=function(t,e,n){(this.rootGroup||this.avoidOverlaps||this.xConstraints)&&this.project(t,e,t,n,function(t){return t.px},this.xConstraints,p,function(t){return t.bounds.setXCentre(n[t.variable.index]=t.variable.position())},function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.x=e-i,t.bounds.X=r+i})},t.prototype.yProject=function(t,e,n){(this.rootGroup||this.yConstraints)&&this.project(t,e,e,n,function(t){return t.py},this.yConstraints,g,function(t){return t.bounds.setYCentre(n[t.variable.index]=t.variable.position())},function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.y=e-i,t.bounds.Y=r+i})},t.prototype.projectFunctions=function(){var t=this;return[function(e,n,r){return t.xProject(e,n,r)},function(e,n,r){return t.yProject(e,n,r)}]},t.prototype.project=function(t,e,n,i,o,a,s,u,c){this.setupVariablesAndBounds(t,e,i,o),this.rootGroup&&this.avoidOverlaps&&(r(this.rootGroup),a=a.concat(s(this.rootGroup))),this.solve(this.variables,a,n,i),this.nodes.forEach(u),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(c),r(this.rootGroup))},t.prototype.solve=function(t,e,n,r){var i=new m.Solver(t,e);i.setStartingPositions(n),i.setDesiredPositions(r),i.solve()},t}();n.Projection=L},{"./rbtree":221,"./vpsc":224}],223:[function(t,e,n){"use strict";var r=t("./pqueue"),i=function(){function t(t,e){this.id=t,this.distance=e}return t}(),o=function(){function t(t){this.id=t,this.neighbours=[]}return t}(),a=function(){function t(t,e,n){this.node=t,this.prev=e,this.d=n}return t}(),s=function(){function t(t,e,n,r,a){this.n=t,this.es=e,this.neighbours=new Array(this.n);for(var s=this.n;s--;)this.neighbours[s]=new o(s);for(s=this.es.length;s--;){var u=this.es[s],c=n(u),l=r(u),h=a(u);this.neighbours[c].neighbours.push(new i(l,h)),this.neighbours[l].neighbours.push(new i(c,h))}}return t.prototype.DistanceMatrix=function(){for(var t=new Array(this.n),e=0;e<this.n;++e)t[e]=this.dijkstraNeighbours(e);return t},t.prototype.DistancesFromNode=function(t){return this.dijkstraNeighbours(t)},t.prototype.PathFromNodeToNode=function(t,e){return this.dijkstraNeighbours(t,e)},t.prototype.PathFromNodeToNodeWithPrevCost=function(t,e,n){var i=new r.PriorityQueue(function(t,e){return t.d<=e.d}),o=this.neighbours[t],s=new a(o,null,0),u={};for(i.push(s);!i.empty()&&(s=i.pop(),o=s.node,o.id!==e);)for(var c=o.neighbours.length;c--;){var l=o.neighbours[c],h=this.neighbours[l.id];if(!s.prev||h.id!==s.prev.node.id){var f=h.id+","+o.id;if(!(f in u&&u[f]<=s.d)){var d=s.prev?n(s.prev.node.id,o.id,h.id):0,p=s.d+l.distance+d;u[f]=p,i.push(new a(h,s,p))}}}for(var g=[];s.prev;)s=s.prev,g.push(s.node.id);return g},t.prototype.dijkstraNeighbours=function(t,e){void 0===e&&(e=-1);for(var n=new r.PriorityQueue(function(t,e){return t.d<=e.d}),i=this.neighbours.length,o=new Array(i);i--;){var a=this.neighbours[i];a.d=i===t?0:Number.POSITIVE_INFINITY,a.q=n.push(a)}for(;!n.empty();){var s=n.pop();if(o[s.id]=s.d,s.id===e){for(var u=[],c=s;void 0!==c.prev;)u.push(c.prev.id),c=c.prev;return u}for(i=s.neighbours.length;i--;){var l=s.neighbours[i],c=this.neighbours[l.id],h=s.d+l.distance;s.d!==Number.MAX_VALUE&&c.d>h&&(c.d=h,c.prev=s,n.reduceKey(c.q,c,function(t,e){return t.q=e}))}}return o},t}();n.Calculator=s},{"./pqueue":220}],224:[function(t,e,n){"use strict";function r(t,e,n){for(var r=t.map(function(t){return new a(t.desiredCenter)}),i=[],s=t.length,u=0;u<s-1;u++){var l=t[u],h=t[u+1];i.push(new o(r[u],r[u+1],(l.size+h.size)/2))}var f=r[0],d=r[s-1],p=t[0].size/2,g=t[s-1].size/2,v=null,y=null;return e&&(v=new a(e,1e3*f.weight),r.push(v),i.push(new o(v,f,p))),n&&(y=new a(n,1e3*d.weight),r.push(y),i.push(new o(d,y,g))),new c(r,i).solve(),{newCenters:r.slice(0,t.length).map(function(t){return t.position()}),lowerBound:v?v.position():f.position()-p,upperBound:y?y.position():d.position()+g}}var i=function(){function t(t){this.scale=t,this.AB=0,this.AD=0,this.A2=0}return t.prototype.addVariable=function(t){var e=this.scale/t.scale,n=t.offset/t.scale,r=t.weight;this.AB+=r*e*n,this.AD+=r*e*t.desiredPosition,this.A2+=r*e*e},t.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},t}();n.PositionStats=i;var o=function(){function t(t,e,n,r){void 0===r&&(r=!1),this.left=t,this.right=e,this.gap=n,this.equality=r,this.active=!1,this.unsatisfiable=!1,this.left=t,this.right=e,this.gap=n,this.equality=r}return t.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},t}();n.Constraint=o;var a=function(){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=1),this.desiredPosition=t,this.weight=e,this.scale=n,this.offset=0}return t.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},t.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},t.prototype.visitNeighbours=function(t,e){var n=function(n,r){return n.active&&t!==r&&e(n,r)};this.cOut.forEach(function(t){return n(t,t.right)}),this.cIn.forEach(function(t){return n(t,t.left)})},t}();n.Variable=a;var s=function(){function t(t){this.vars=[],t.offset=0,this.ps=new i(t.scale),this.addVariable(t)}return t.prototype.addVariable=function(t){t.block=this,this.vars.push(t),this.ps.addVariable(t),this.posn=this.ps.getPosn()},t.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var t=0,e=this.vars.length;t<e;++t)this.ps.addVariable(this.vars[t]);this.posn=this.ps.getPosn()},t.prototype.compute_lm=function(t,e,n){var r=this,i=t.dfdv();return t.visitNeighbours(e,function(e,o){var a=r.compute_lm(o,t,n);o===e.right?(i+=a*e.left.scale,e.lm=a):(i+=a*e.right.scale,e.lm=-a),n(e)}),i/t.scale},t.prototype.populateSplitBlock=function(t,e){var n=this;t.visitNeighbours(e,function(e,r){r.offset=t.offset+(r===e.right?e.gap:-e.gap),n.addVariable(r),n.populateSplitBlock(r,t)})},t.prototype.traverse=function(t,e,n,r){var i=this;void 0===n&&(n=this.vars[0]),void 0===r&&(r=null),n.visitNeighbours(r,function(r,o){e.push(t(r)),i.traverse(t,e,o,n)})},t.prototype.findMinLM=function(){var t=null;return this.compute_lm(this.vars[0],null,function(e){!e.equality&&(null===t||e.lm<t.lm)&&(t=e)}),t},t.prototype.findMinLMBetween=function(t,e){this.compute_lm(t,null,function(){});var n=null;return this.findPath(t,null,e,function(t,e){!t.equality&&t.right===e&&(null===n||t.lm<n.lm)&&(n=t)}),n},t.prototype.findPath=function(t,e,n,r){var i=this,o=!1;return t.visitNeighbours(e,function(e,a){o||a!==n&&!i.findPath(a,t,n,r)||(o=!0,r(e,a))}),o},t.prototype.isActiveDirectedPathBetween=function(t,e){if(t===e)return!0;for(var n=t.cOut.length;n--;){var r=t.cOut[n];if(r.active&&this.isActiveDirectedPathBetween(r.right,e))return!0}return!1},t.split=function(e){return e.active=!1,[t.createSplitBlock(e.left),t.createSplitBlock(e.right)]},t.createSplitBlock=function(e){var n=new t(e);return n.populateSplitBlock(e,null),n},t.prototype.splitBetween=function(e,n){var r=this.findMinLMBetween(e,n);if(null!==r){var i=t.split(r);return{constraint:r,lb:i[0],rb:i[1]}}return null},t.prototype.mergeAcross=function(t,e,n){e.active=!0;for(var r=0,i=t.vars.length;r<i;++r){var o=t.vars[r];o.offset+=n,this.addVariable(o)}this.posn=this.ps.getPosn()},t.prototype.cost=function(){for(var t=0,e=this.vars.length;e--;){var n=this.vars[e],r=n.position()-n.desiredPosition;t+=r*r*n.weight}return t},t}();n.Block=s;var u=function(){function t(t){this.vs=t;var e=t.length;for(this.list=new Array(e);e--;){var n=new s(t[e]);this.list[e]=n,n.blockInd=e}}return t.prototype.cost=function(){for(var t=0,e=this.list.length;e--;)t+=this.list[e].cost();return t},t.prototype.insert=function(t){t.blockInd=this.list.length,this.list.push(t)},t.prototype.remove=function(t){var e=this.list.length-1,n=this.list[e];this.list.length=e,t!==n&&(this.list[t.blockInd]=n,n.blockInd=t.blockInd)},t.prototype.merge=function(t){var e=t.left.block,n=t.right.block,r=t.right.offset-t.left.offset-t.gap;e.vars.length<n.vars.length?(n.mergeAcross(e,t,r),this.remove(e)):(e.mergeAcross(n,t,-r),this.remove(n))},t.prototype.forEach=function(t){this.list.forEach(t)},t.prototype.updateBlockPositions=function(){this.list.forEach(function(t){return t.updateWeightedPosition()})},t.prototype.split=function(t){var e=this;this.updateBlockPositions(),this.list.forEach(function(n){var r=n.findMinLM();null!==r&&r.lm<c.LAGRANGIAN_TOLERANCE&&(n=r.left.block,s.split(r).forEach(function(t){return e.insert(t)}),e.remove(n),t.push(r))})},t}();n.Blocks=u;var c=function(){function t(t,e){this.vs=t,this.cs=e,this.vs=t,t.forEach(function(t){t.cIn=[],t.cOut=[]}),this.cs=e,e.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),this.inactive=e.map(function(t){return t.active=!1,t}),this.bs=null}return t.prototype.cost=function(){return this.bs.cost()},t.prototype.setStartingPositions=function(t){this.inactive=this.cs.map(function(t){return t.active=!1,t}),this.bs=new u(this.vs),this.bs.forEach(function(e,n){return e.posn=t[n]})},t.prototype.setDesiredPositions=function(t){this.vs.forEach(function(e,n){return e.desiredPosition=t[n]})},t.prototype.mostViolated=function(){for(var e=Number.MAX_VALUE,n=null,r=this.inactive,i=r.length,o=i,a=0;a<i;++a){var s=r[a];if(!s.unsatisfiable){var u=s.slack();if((s.equality||u<e)&&(e=u,n=s,o=a,s.equality))break}}return o!==i&&(e<t.ZERO_UPPERBOUND&&!n.active||n.equality)&&(r[o]=r[i-1],r.length=i-1),n},t.prototype.satisfy=function(){null==this.bs&&(this.bs=new u(this.vs)),this.bs.split(this.inactive);for(var e=null;(e=this.mostViolated())&&(e.equality||e.slack()<t.ZERO_UPPERBOUND&&!e.active);){var n=e.left.block;if(n!==e.right.block)this.bs.merge(e);else{if(n.isActiveDirectedPathBetween(e.right,e.left)){e.unsatisfiable=!0;continue}var r=n.splitBetween(e.left,e.right);if(null===r){e.unsatisfiable=!0;continue}this.bs.insert(r.lb),this.bs.insert(r.rb),this.bs.remove(n),this.inactive.push(r.constraint),e.slack()>=0?this.inactive.push(e):this.bs.merge(e)}}},t.prototype.solve=function(){this.satisfy();for(var t=Number.MAX_VALUE,e=this.bs.cost();Math.abs(t-e)>1e-4;)this.satisfy(),t=e,e=this.bs.cost();return e},t}();c.LAGRANGIAN_TOLERANCE=-1e-4,c.ZERO_UPPERBOUND=-1e-10,n.Solver=c,n.removeOverlapInOneDimension=r},{}]},{},[1]);