!function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){var r=(e("when"),e("cytoscape")),i=e("domready"),o=e("underscore"),a=e("cytoscape-cola"),s=e("webcola"),u=e("cytoscape-dagre"),l=e("dagre"),c=e("cytoscape-springy"),h=e("springy");a(r,s),u(r,l),c(r,h),i(function(){function e(){var e={},a={},s=$("#notes").val(),u=$("#layout option:selected").text(),l=$("#layout_time").val();clearTimeout(t),s.split("\n").forEach(function(t){var n;(n=t.match(/(\S+) reblogged this from (\S+)/))&&(e[n[1]]?e[n[1]].score+=5:e[n[1]]={id:n[1],name:n[1],score:1},e[n[2]]?e[n[2]].score+=5:e[n[2]]={id:n[2],name:n[2],score:1},a[n[1]+","+n[2]]||(a[n[1]+","+n[2]]={source:n[1],target:n[2]})),(n=t.match(/(\S+) posted this/))&&(i=n[1])});var c=o.map(e,function(e){return{data:e}}),h=o.map(a,function(e){return{data:e}}),d=r.stylesheet().selector("node").style({content:"data(name)","text-valign":"center","text-outline-width":2,"text-outline-color":"#000",color:"#fff"}).selector("edge").css({"target-arrow-shape":"triangle"});n=r({container:document.getElementById("cy"),style:d,elements:{nodes:c,edges:h}});var f=n.makeLayout({name:u,padding:10,randomize:!0,animate:!0,infinite:!0,repulsion:1});f.run();if($("#status").text("Optimizing layout ..."),$("#status").css("background-color","hsl(20,80%,70%)"),t=setTimeout(function(){f.stop(),$("#status").css("background-color","hsl(120,80%,70%)"),$("#status").text("Done with layout")},l),$("#color_by_bfs").prop("checked")){var p=1;n.elements().bfs("#"+i,function(e,t){t>p&&(p=t)},!1),n.elements().bfs("#"+i,function(e,t){this.style("background-color","hsl("+150*t/p+",80%,55%)")},!1)}}var t,n,i;$("#myform").submit(function(t){return e(),!1}),$("#save_button").on("click",function(e){$("#output").append($("<a/>").attr({href:n.png({scale:3})}).append("Download picture"))}),$("#animate_graph").on("click",function(e){function t(e,n){if(n<e.length)setTimeout(function(){e[n].style("visibility","visible"),o.add($("[data-id=layer2-node]")[0]),t(e,n+1)},r);else{var i=o.compile(),a=window.URL.createObjectURL(i);$("#output").empty(),$("#output").append($("<a/>").attr({href:a,download:"video.webm"}).append("Download video"))}}var r=$("#animate_speed").val(),o=new Whammy.Video(1e3/r),a=n.elements("node");a.forEach(function(e){e.style("visibility","hidden")});{var s=[];n.elements().bfs("#"+i,function(e,t){s.push(this)},!1)}t(s,0)}),e()})},{cytoscape:5,"cytoscape-cola":2,"cytoscape-dagre":3,"cytoscape-springy":4,dagre:6,domready:36,springy:59,underscore:60,webcola:61,when:79}],2:[function(e,t,n){!function(){"use strict";var e=function(e,t){function n(e){var t=this.options={};for(var n in s)t[n]=s[n];for(var n in e)t[n]=e[n]}if(e&&t){var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,i=function(e){return"string"==typeof e},o=function(e){return"number"==typeof e},a=function(e){return null!=e&&typeof e==typeof{}},s={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,nodeSpacing:function(e){return 10},flow:void 0,alignment:void 0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1};n.prototype.run=function(){var e=this,n=this.options;e.manuallyStopped=!1;var s=n.cy,u=n.eles,l=u.nodes(),c=u.edges(),h=!1,d=n.boundingBox||{x1:0,y1:0,w:s.width(),h:s.height()};void 0===d.x2&&(d.x2=d.x1+d.w),void 0===d.w&&(d.w=d.x2-d.x1),void 0===d.y2&&(d.y2=d.y1+d.h),void 0===d.h&&(d.h=d.y2-d.y1);var f="function",p=function(e,t){if(typeof e===f){var n=e;return n.apply(t,[t])}return e},v=function(){for(var e={min:1/0,max:-(1/0)},t={min:1/0,max:-(1/0)},r=0;r<l.length;r++){var i=l[r],a=i.scratch("cola");if(e.min=Math.min(e.min,a.x||0),e.max=Math.max(e.max,a.x||0),t.min=Math.min(t.min,a.y||0),t.max=Math.max(t.max,a.y||0),!a.updatedDims){var u=i.boundingBox(),c=p(n.nodeSpacing,i);a.width=u.w+2*c,a.height=u.h+2*c}}l.positions(function(n,r){var i,a=r.scratch().cola;return r.grabbed()||r.isParent()||(i={x:d.x1+a.x-e.min,y:d.y1+a.y-t.min},o(i.x)&&o(i.y)||(i=void 0)),i}),l.updateCompoundBounds(),h||(y(),h=!0),n.fit&&s.fit(n.padding)},g=function(){n.ungrabifyWhileSimulating&&w.grabify(),l.off("grab free position",_),l.off("lock unlock",E),e.one("layoutstop",n.stop),e.trigger({type:"layoutstop",layout:e})},y=function(){e.one("layoutready",n.ready),e.trigger({type:"layoutready",layout:e})},m=n.refresh,b=1;n.refresh<0?(b=Math.abs(n.refresh),m=1):m=Math.max(1,m);var x=e.adaptor=t.adaptor({trigger:function(e){var r=t.EventType?t.EventType.tick:null,i=t.EventType?t.EventType.end:null;switch(e.type){case"tick":case r:n.animate&&v();break;case"end":case i:v(),n.infinite||g()}},kick:function(){var t=function(){if(e.manuallyStopped)return g(),!0;var t=x.tick();return t&&n.infinite&&x.resume(),t},i=function(){for(var e,n=0;m>n&&!e;n++)e=e||t();return e};if(n.animate){var o=function(){i()||r(o)};r(o)}else for(;!t(););},on:function(e,t){},drag:function(){}});e.adaptor=x;var w=l.filter(":grabbable");n.ungrabifyWhileSimulating&&w.ungrabify();var _;l.on("grab free position",_=function(e){var t=this,n=t.scratch().cola,r=t.position();switch(n.x=r.x-d.x1,n.y=r.y-d.y1,e.type){case"grab":x.dragstart(n),x.resume();break;case"free":x.dragend(n)}});var E;l.on("lock unlock",E=function(e){var t=this,n=t.scratch().cola;n.fixed=t.locked(),t.locked()?x.dragstart(n):x.dragend(n)});var k=l.stdFilter(function(e){return!e.isParent()});if(x.nodes(k.map(function(e,t){var r=p(n.nodeSpacing,e),i=e.position(),o=e.boundingBox(),a=e.scratch().cola={x:n.randomize||void 0===i.x?Math.round(Math.random()*d.w):i.x,y:n.randomize||void 0===i.y?Math.round(Math.random()*d.h):i.y,width:o.w+2*r,height:o.h+2*r,index:t,fixed:e.locked()};return a})),n.alignment){var S=[],N=[];k.forEach(function(e){var t=p(n.alignment,e),r=e.scratch().cola,i=r.index;t&&(null!=t.x&&S.push({node:i,offset:t.x}),null!=t.y&&N.push({node:i,offset:t.y}))});var T=[];S.length>0&&T.push({type:"alignment",axis:"x",offsets:S}),N.length>0&&T.push({type:"alignment",axis:"y",offsets:N}),x.constraints(T)}x.groups(l.stdFilter(function(e){return e.isParent()}).map(function(e,t){var r=p(n.nodeSpacing,e),i=function(t){return parseFloat(e.style("padding-"+t))},o=i("left")+r,a=i("right")+r,s=i("top")+r,u=i("bottom")+r;return e.scratch().cola={index:t,padding:Math.max(o,a,s,u),leaves:e.descendants().stdFilter(function(e){return!e.isParent()}).map(function(e){return e[0].scratch().cola.index}),fixed:e.locked()},e}).map(function(e){return e.scratch().cola.groups=e.descendants().stdFilter(function(e){return e.isParent()}).map(function(e){return e.scratch().cola.index}),e.scratch().cola}));var D,P;null!=n.edgeLength?(D=n.edgeLength,P="linkDistance"):null!=n.edgeSymDiffLength?(D=n.edgeSymDiffLength,P="symmetricDiffLinkLengths"):null!=n.edgeJaccardLength?(D=n.edgeJaccardLength,P="jaccardLinkLengths"):(D=100,P="linkDistance");var C=function(e){return e.calcLength};if(x.links(c.stdFilter(function(e){return!e.source().isParent()&&!e.target().isParent()}).map(function(e,t){var n=e.scratch().cola={source:e.source()[0].scratch().cola.index,target:e.target()[0].scratch().cola.index};return null!=D&&(n.calcLength=p(D,e)),n})),x.size([d.w,d.h]),null!=D&&x[P](C),n.flow){var M,A="y",I=50;i(n.flow)?M={axis:n.flow,minSeparation:I}:o(n.flow)?M={axis:A,minSeparation:n.flow}:a(n.flow)?(M=n.flow,M.axis=M.axis||A,M.minSeparation=null!=M.minSeparation?M.minSeparation:I):M={axis:A,minSeparation:I},x.flowLayout(M.axis,M.minSeparation)}return e.trigger({type:"layoutstart",layout:e}),x.avoidOverlaps(n.avoidOverlap).handleDisconnected(n.handleDisconnected).start(n.unconstrIter,n.userConstIter,n.allConstIter),n.infinite||setTimeout(function(){e.manuallyStopped||x.stop()},n.maxSimulationTime),this},n.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},e("layout","cola",n)}};"undefined"!=typeof t&&t.exports&&(t.exports=e),"undefined"!=typeof define&&define.amd&&define("cytoscape-cola",function(){return e}),"undefined"!=typeof cytoscape&&e(cytoscape,cola)}()},{}],3:[function(e,t,n){!function(){"use strict";var e=function(e,t){function n(e){var t=this.options={};for(var n in i)t[n]=i[n];for(var n in e)t[n]=e[n]}if(e&&t){var r=function(e){return"function"==typeof e},i={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,minLen:function(e){return 1},edgeWeight:function(e){return 1},fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,boundingBox:void 0,ready:function(){},stop:function(){}};n.prototype.run=function(){var e=this.options,n=this,i=e.cy,o=e.eles,a=function(e,t){return r(t)?t.apply(e,[e]):t},s=e.boundingBox||{x1:0,y1:0,w:i.width(),h:i.height()};void 0===s.x2&&(s.x2=s.x1+s.w),void 0===s.w&&(s.w=s.x2-s.x1),void 0===s.y2&&(s.y2=s.y1+s.h),void 0===s.h&&(s.h=s.y2-s.y1);var u=new t.graphlib.Graph({multigraph:!0,compound:!0}),l={},c=function(e,t){null!=t&&(l[e]=t)};c("nodesep",e.nodeSep),c("edgesep",e.edgeSep),c("ranksep",e.rankSep),c("rankdir",e.rankDir),u.setGraph(l),u.setDefaultEdgeLabel(function(){return{}}),u.setDefaultNodeLabel(function(){return{}});for(var h=o.nodes(),d=0;d<h.length;d++){var f=h[d],p=f.boundingBox();u.setNode(f.id(),{width:p.w,height:p.h,name:f.id()})}for(var d=0;d<h.length;d++){var f=h[d];f.isChild()&&u.setParent(f.id(),f.parent().id())}for(var v=o.edges().stdFilter(function(e){return!e.source().isParent()&&!e.target().isParent()}),d=0;d<v.length;d++){var g=v[d];u.setEdge(g.source().id(),g.target().id(),{minlen:a(g,e.minLen),weight:a(g,e.edgeWeight),name:g.id()},g.id())}t.layout(u);for(var y=u.nodes(),d=0;d<y.length;d++){var m=y[d],b=u.node(m);i.getElementById(m).scratch().dagre=b}var x;e.boundingBox?(x={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)},h.forEach(function(e){var t=e.scratch().dagre;x.x1=Math.min(x.x1,t.x),x.x2=Math.max(x.x2,t.x),x.y1=Math.min(x.y1,t.y),x.y2=Math.max(x.y2,t.y)}),x.w=x.x2-x.x1,x.h=x.y2-x.y1):x=s;var w=function(t){if(e.boundingBox){var n=(t.x-x.x1)/x.w,r=(t.y-x.y1)/x.h;return{x:s.x1+n*s.w,y:s.y1+r*s.h}}return t};return h.layoutPositions(n,e,function(){var e=this.scratch().dagre;return w({x:e.x,y:e.y})}),this},e("layout","dagre",n)}};"undefined"!=typeof t&&t.exports&&(t.exports=e),"undefined"!=typeof define&&define.amd&&define("cytoscape-dagre",function(){return e}),"undefined"!=typeof cytoscape&&"undefined"!=typeof dagre&&e(cytoscape,dagre)}()},{}],4:[function(e,t,n){!function(){"use strict";var e=function(e,t){function n(e){var t=this.options={};for(var n in r)t[n]=r[n];for(var n in e)t[n]=e[n]}if(e&&t){var r={animate:!0,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,randomize:!1,infinite:!1,ready:void 0,stop:void 0,stiffness:400,repulsion:400,damping:.5,edgeLength:function(e){var t=e.data("length");return void 0===t||isNaN(t)?void 0:t}};n.prototype.run=function(){function e(e){var t=e.scratch("springy").model.id,n=x.layout.nodePoints[t].p,r=e.position(),i=null!=r.x&&null!=r.y?g(e.position()):{x:4*Math.random()-2,y:4*Math.random()-2};n.x=i.x,n.y=i.y}function n(){i.stopped=!1,o.ungrabifyWhileSimulating&&_.ungrabify(),x.start()}var r=this,i=this,o=this.options;o.random=o.randomize;var a=!1,s=o.cy;r.trigger({type:"layoutstart",layout:r});var u=o.eles,l=u.nodes().not(":parent"),c=u.edges(),h=o.boundingBox||{x1:0,y1:0,w:s.width(),h:s.height()};void 0===h.x2&&(h.x2=h.x1+h.w),void 0===h.w&&(h.w=h.x2-h.x1),void 0===h.y2&&(h.y2=h.y1+h.h),void 0===h.h&&(h.h=h.y2-h.y1);var d=new t.Graph;l.each(function(e,t){t.scratch("springy",{model:d.newNode({element:t})})}),c.each(function(e,t){var n=t.source().scratch("springy").model,r=t.target().scratch("springy").model;t.scratch("springy",{model:d.newEdge(n,r,{element:t,length:o.edgeLength.call(t,t)})})});var f=window.sim=new t.Layout.ForceDirected(d,o.stiffness,o.repulsion,o.damping);o.infinite&&(f.minEnergyThreshold=-(1/0));var p=f.getBoundingBox(),v=function(e){p=f.getBoundingBox();var n=p.topright.subtract(p.bottomleft),r=e.subtract(p.bottomleft).divide(n.x).x*h.w+h.x1,i=e.subtract(p.bottomleft).divide(n.y).y*h.h+h.x1;return new t.Vector(r,i)},g=function(e){p=f.getBoundingBox();var n=p.topright.subtract(p.bottomleft),r=(e.x-h.x1)/h.w*n.x+p.bottomleft.x,i=(e.y-h.y1)/h.h*n.y+p.bottomleft.y;return new t.Vector(r,i)},y=s.collection(),m=s.nodes().size(),b=1,x=new t.Renderer(f,function(){i.stopped||y.length>0&&o.animate&&(a=!0,y.positions(function(e,t){return t.scratch("springy").position}),o.fit&&s.fit(o.padding),y=s.collection(),a=!1)},function(e,t,n){},function(e,t){if(!i.stopped){var n=v(t),a=e.data.element;a.locked()||a.grabbed()||(a.scratch("springy").position={x:n.x,y:n.y},y.merge(a)),b==m&&(r.one("layoutready",o.ready),r.trigger({type:"layoutready",layout:r})),b++}});l.each(function(t,n){o.random||e(n)});var w;l.on("position",w=function(){a||e(this)});var _=l.filter(":grabbable");return i.stopSystem=function(){i.stopped=!0,d.filterNodes(function(){return!1}),o.ungrabifyWhileSimulating&&_.grabify(),o.fit&&s.fit(o.padding),l.off("drag position",w),r.one("layoutstop",o.stop),r.trigger({type:"layoutstop",layout:r}),i.stopSystem=null},n(),o.infinite||setTimeout(function(){i.stop()},o.maxSimulationTime),this},n.prototype.stop=function(){return null!=this.stopSystem&&this.stopSystem(),this},e("layout","springy",n)}};"undefined"!=typeof t&&t.exports&&(t.exports=e),"undefined"!=typeof define&&define.amd&&define("cytoscape-springy",function(){return e}),"undefined"!=typeof cytoscape&&e(cytoscape,Springy)}()},{}],5:[function(require,module,exports){(function(global,__dirname){!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.cytoscape=e()}}(function(){var define,module,exports;return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";var r=e("./util"),i=e("./is"),o=e("./promise"),a=function(e,t,n){if(!(this instanceof a))return new a(e,t,n);var o=this._private=r.extend({duration:1e3},t,n);o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&i.fn(o.complete)&&o.completes.push(o.complete),this.length=1,this[0]=this},s=a.prototype;r.extend(s,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;t=e.queue?n.queue:n.current,t.push(this),i.elementOrCollection(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return void 0===e?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return void 0===e?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(t,n){var r=e[t];e[t]=e[n],e[n]=r};n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition");for(var i=0;i<e.style.length;i++){var o=e.style[i],a=o.name,s=e.startStyle[a];e.startStyle[a]=e.startStyle[r.dash2camel(a)]=o,e.style[i]=s}return t&&this.play(),this},promise:function(e){var t,n=this._private;switch(e){case"frame":t=n.frames;break;default:case"complete":case"completed":t=n.completes}return new o(function(e,n){t.push(function(){e()})})}}),s.complete=s.completed,t.exports=a},{"./is":77,"./promise":80,"./util":94}],2:[function(e,t,n){"use strict";var r=e("../../is"),i={aStar:function(e){var t=this;e=e||{};var n=function(e,t,r,i){if(e==t)return i.push(o.getElementById(t)),i;if(t in r){var a=r[t],s=p[t];return i.push(o.getElementById(t)),i.push(o.getElementById(s)),n(e,a,r,i)}return void 0},i=function(e,t){if(0===e.length)return void 0;for(var n=0,r=t[e[0]],i=1;i<e.length;i++){var o=t[e[i]];r>o&&(r=o,n=i)}return n},o=this._private.cy;if(null==e||null==e.root)return void 0;var a=r.string(e.root)?this.filter(e.root)[0]:e.root[0];if(null==e.goal)return void 0;var s=r.string(e.goal)?this.filter(e.goal)[0]:e.goal[0];if(null!=e.heuristic&&r.fn(e.heuristic))var u=e.heuristic;else var u=function(){return 0};if(null!=e.weight&&r.fn(e.weight))var l=e.weight;else var l=function(e){return 1};if(null!=e.directed)var c=e.directed;else var c=!1;var h=[],d=[a.id()],f={},p={},v={},g={};v[a.id()]=0,g[a.id()]=u(a);for(var y=this.edges().stdFilter(function(e){return!e.isLoop()}),m=this.nodes(),b=0;d.length>0;){var x=i(d,g),w=o.getElementById(d[x]);if(b++,w.id()==s.id()){var _=n(a.id(),s.id(),f,[]);return _.reverse(),{found:!0,distance:v[w.id()],path:t.spawn(_),steps:b}}h.push(w.id()),d.splice(x,1);var E=w.connectedEdges();c&&(E=E.stdFilter(function(e){return e.data("source")===w.id()})),E=E.intersect(y);for(var k=0;k<E.length;k++){var S=E[k],N=S.connectedNodes().stdFilter(function(e){return e.id()!==w.id()}).intersect(m);if(-1==h.indexOf(N.id())){var T=v[w.id()]+l.apply(S,[S]);-1!=d.indexOf(N.id())?T<v[N.id()]&&(v[N.id()]=T,g[N.id()]=T+u(N),f[N.id()]=w.id()):(v[N.id()]=T,g[N.id()]=T+u(N),d.push(N.id()),f[N.id()]=w.id(),p[N.id()]=S.id())}}}return{found:!1,distance:void 0,path:void 0,steps:b}}};t.exports=i},{"../../is":77}],3:[function(e,t,n){"use strict";var r=e("../../is"),i=e("../../util"),o={bellmanFord:function(e){var t=this;if(e=e||{},null!=e.weight&&r.fn(e.weight))var n=e.weight;else var n=function(e){return 1};if(null!=e.directed)var o=e.directed;else var o=!1;if(null==e.root)return void 0;if(r.string(e.root))var a=this.filter(e.root)[0];else var a=e.root[0];for(var s=this._private.cy,u=this.edges().stdFilter(function(e){return!e.isLoop()}),l=this.nodes(),c=l.length,h={},d=0;c>d;d++)h[l[d].id()]=d;for(var f=[],p=[],v=[],d=0;c>d;d++)f[d]=l[d].id()===a.id()?0:1/0,p[d]=void 0;for(var g=!1,d=1;c>d;d++){g=!1;for(var y=0;y<u.length;y++){var m=h[u[y].source().id()],b=h[u[y].target().id()],x=n.apply(u[y],[u[y]]),w=f[m]+x;if(w<f[b]&&(f[b]=w,p[b]=m,v[b]=u[y],g=!0),!o){var w=f[b]+x;w<f[m]&&(f[m]=w,p[m]=b,v[m]=u[y],g=!0)}}if(!g)break}if(g)for(var y=0;y<u.length;y++){var m=h[u[y].source().id()],b=h[u[y].target().id()],x=n.apply(u[y],[u[y]]);if(f[m]+x<f[b])return i.error("Graph contains a negative weight cycle for Bellman-Ford"),{pathTo:void 0,distanceTo:void 0,hasNegativeWeightCycle:!0}}for(var _=[],d=0;c>d;d++)_.push(l[d].id());var E={distanceTo:function(e){if(r.string(e))var t=s.filter(e)[0].id();else var t=e.id();return f[h[t]]},pathTo:function(e){var n=function(e,t,n,r,i,o){for(;;){if(i.push(s.getElementById(r[n])),i.push(o[n]),t===n)return i;var a=e[n];if("undefined"==typeof a)return void 0;n=a}};if(r.string(e))var i=s.filter(e)[0].id();else var i=e.id();var o=[],u=n(p,h[a.id()],h[i],_,o,v);return null!=u&&u.reverse(),t.spawn(u)},hasNegativeWeightCycle:!1};return E}};t.exports=o},{"../../is":77,"../../util":94}],4:[function(e,t,n){"use strict";var r=e("../../is"),i={betweennessCentrality:function(e){if(e=e||{},null!=e.weight&&r.fn(e.weight))var t=e.weight,n=!0;else var n=!1;if(null!=e.directed&&r.bool(e.directed))var i=e.directed;else var i=!1;for(var o=function(e,t){e.unshift(t);for(var n=0;v[e[n]]<v[e[n+1]]&&n<e.length-1;n++){var r=e[n];e[n]=e[n+1],e[n+1]=r}},a=this._private.cy,s=this.nodes(),u={},l={},c=0;c<s.length;c++)u[s[c].id()]=i?s[c].outgoers("node"):s[c].openNeighborhood("node");for(var c=0;c<s.length;c++)l[s[c].id()]=0;for(var h=0;h<s.length;h++){for(var d=[],f={},p={},v={},g=[],c=0;c<s.length;c++)f[s[c].id()]=[],p[s[c].id()]=0,v[s[c].id()]=Number.POSITIVE_INFINITY;for(p[s[h].id()]=1,v[s[h].id()]=0,g.unshift(s[h].id());g.length>0;){var y=g.pop();d.push(y),u[y].forEach(n?function(e){if(a.$("#"+y).edgesTo(e).length>0)var n=a.$("#"+y).edgesTo(e)[0];else var n=e.edgesTo("#"+y)[0];var r=t.apply(n,[n]);v[e.id()]>v[y]+r&&(v[e.id()]=v[y]+r,g.indexOf(e.id())<0?o(g,e.id()):(g.splice(g.indexOf(e.id()),1),o(g,e.id())),p[e.id()]=0,f[e.id()]=[]),v[e.id()]==v[y]+r&&(p[e.id()]=p[e.id()]+p[y],f[e.id()].push(y))}:function(e){v[e.id()]==Number.POSITIVE_INFINITY&&(g.unshift(e.id()),v[e.id()]=v[y]+1),v[e.id()]==v[y]+1&&(p[e.id()]=p[e.id()]+p[y],f[e.id()].push(y))})}for(var m={},c=0;c<s.length;c++)m[s[c].id()]=0;for(;d.length>0;){var b=d.pop();f[b].forEach(function(e){m[e]=m[e]+p[e]/p[b]*(1+m[b]),b!=s[h].id()&&(l[b]=l[b]+m[b])})}}var x=0;for(var w in l)x<l[w]&&(x=l[w]);var _={betweenness:function(e){if(r.string(e))var e=a.filter(e)[0].id();else var e=e.id();return l[e]},betweennessNormalized:function(e){if(r.string(e))var e=a.filter(e)[0].id();else var e=e.id();return l[e]/x}};return _.betweennessNormalised=_.betweennessNormalized,_}};i.bc=i.betweennessCentrality,t.exports=i},{"../../is":77}],5:[function(e,t,n){"use strict";var r=e("../../is"),i=e("../../heap"),o=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(t,n,i){var o,a,s;r.plainObject(t)&&!r.elementOrCollection(t)&&(o=t,t=o.roots||o.root,n=o.visit,i=o.directed,a=o.std,s=o.thisArg),i=2!==arguments.length||r.fn(n)?i:n,n=r.fn(n)?n:function(){};for(var u,l=this._private.cy,c=t=r.string(t)?this.filter(t):t,h=[],d=[],f={},p={},v={},g=0,y=this.nodes(),m=this.edges(),b=0;b<c.length;b++)c[b].isNode()&&(h.unshift(c[b]),e.bfs&&(v[c[b].id()]=!0,d.push(c[b])),p[c[b].id()]=0);for(;0!==h.length;){var c=e.bfs?h.shift():h.pop();if(e.dfs){if(v[c.id()])continue;v[c.id()]=!0,d.push(c)}var x,w=p[c.id()],_=f[c.id()],E=null==_?void 0:_.connectedNodes().not(c)[0];if(x=a?n.call(s,c,_,E,g++,w):n.call(c,g++,w,c,_,E),x===!0){u=c;break}if(x===!1)break;for(var k=c.connectedEdges(i?function(){return this.data("source")===c.id()}:void 0).intersect(m),b=0;b<k.length;b++){var S=k[b],N=S.connectedNodes(function(){return this.id()!==c.id()}).intersect(y);0===N.length||v[N.id()]||(N=N[0],h.push(N),e.bfs&&(v[N.id()]=!0,d.push(N)),f[N.id()]=S,p[N.id()]=p[c.id()]+1)}}for(var T=[],b=0;b<d.length;b++){var D=d[b],P=f[D.id()];P&&T.push(P),T.push(D)}return{path:l.collection(T,{unique:!0}),found:l.collection(u)}}},a={breadthFirstSearch:o({bfs:!0}),depthFirstSearch:o({dfs:!0}),kruskal:function(e){function t(e){for(var t=0;t<o.length;t++){var n=o[t];if(n.anySame(e))return{eles:n,index:t}}}var n=this.cy();e=r.fn(e)?e:function(){return 1};for(var i=n.collection(n,[]),o=[],a=this.nodes(),s=0;s<a.length;s++)o.push(a[s].collection());for(var u=this.edges(),l=u.toArray().sort(function(t,n){var r=e.call(t,t),i=e.call(n,n);return r-i}),s=0;s<l.length;s++){var c=l[s],h=c.source()[0],d=c.target()[0],f=t(h),p=t(d);f.index!==p.index&&(i=i.add(c),o[f.index]=f.eles.add(p.eles),o.splice(p.index,1))}return a.add(i)},dijkstra:function(e,t,n){var o;r.plainObject(e)&&!r.elementOrCollection(e)&&(o=e,e=o.root,t=o.weight,n=o.directed);var a=this._private.cy;t=r.fn(t)?t:function(){return 1};for(var s=r.string(e)?this.filter(e)[0]:e[0],u={},l={},c={},h=this.edges().filter(function(){return!this.isLoop()}),d=this.nodes(),f=function(e){return u[e.id()]},p=function(e,t){u[e.id()]=t,v.updateItem(e)},v=new i(function(e,t){return f(e)-f(t)}),g=0;g<d.length;g++){var y=d[g];u[y.id()]=y.same(s)?0:1/0,v.push(y)}for(var m=function(e,r){for(var i,o=(n?e.edgesTo(r):e.edgesWith(r)).intersect(h),a=1/0,s=0;s<o.length;s++){var u=o[s],l=t.apply(u,[u]);(a>l||!i)&&(a=l,i=u)}return{edge:i,dist:a}};v.size()>0;){var b=v.pop(),x=f(b),w=b.id();if(c[w]=x,x===Math.Infinite)break;for(var _=b.neighborhood().intersect(d),g=0;g<_.length;g++){var E=_[g],k=E.id(),S=m(b,E),N=x+S.dist;N<f(E)&&(p(E,N),l[k]={node:b,edge:S.edge})}}return{distanceTo:function(e){var t=r.string(e)?d.filter(e)[0]:e[0];return c[t.id()]},pathTo:function(e){var t=r.string(e)?d.filter(e)[0]:e[0],n=[],i=t;if(t.length>0)for(n.unshift(t);l[i.id()];){var o=l[i.id()];n.unshift(o.edge),n.unshift(o.node),i=o.node}return a.collection(n)}}}};a.bfs=a.breadthFirstSearch,a.dfs=a.depthFirstSearch,t.exports=a},{"../../heap":75,"../../is":77}],6:[function(e,t,n){"use strict";var r=e("../../is"),i={closenessCentralityNormalized:function(e){e=e||{};var t=this.cy(),n=e.harmonic;void 0===n&&(n=!0);for(var i={},o=0,a=this.nodes(),s=this.floydWarshall({weight:e.weight,directed:e.directed}),u=0;u<a.length;u++){for(var l=0,c=0;c<a.length;c++)if(u!=c){var h=s.distance(a[u],a[c]);l+=n?1/h:h}n||(l=1/l),l>o&&(o=l),i[a[u].id()]=l}return{closeness:function(e){if(r.string(e))var e=t.filter(e)[0].id();else var e=e.id();return i[e]/o}}},closenessCentrality:function(e){if(e=e||{},null==e.root)return void 0;if(r.string(e.root))var t=this.filter(e.root)[0];else var t=e.root[0];if(null!=e.weight&&r.fn(e.weight))var n=e.weight;else var n=function(){return 1};if(null!=e.directed&&r.bool(e.directed))var i=e.directed;else var i=!1;var o=e.harmonic;void 0===o&&(o=!0);for(var a=this.dijkstra({root:t,weight:n,directed:i}),s=0,u=this.nodes(),l=0;l<u.length;l++)if(u[l].id()!=t.id()){var c=a.distanceTo(u[l]);s+=o?1/c:c}return o?s:1/s}};i.cc=i.closenessCentrality,i.ccn=i.closenessCentralityNormalised=i.closenessCentralityNormalized,t.exports=i},{"../../is":77}],7:[function(e,t,n){"use strict";var r=e("../../is"),i=e("../../util"),o={degreeCentralityNormalized:function(e){e=e||{};var t=this.cy();if(null!=e.directed)var n=e.directed;else var n=!1;var o=this.nodes(),a=o.length;if(n){for(var s={},u={},l=0,c=0,h=0;a>h;h++){var d=o[h],f=this.degreeCentrality(i.extend({},e,{root:d}));l<f.indegree&&(l=f.indegree),c<f.outdegree&&(c=f.outdegree),s[d.id()]=f.indegree,u[d.id()]=f.outdegree}return{indegree:function(e){if(r.string(e))var e=t.filter(e)[0].id();else var e=e.id();return s[e]/l},outdegree:function(e){if(r.string(e))var e=t.filter(e)[0].id();else var e=e.id();return u[e]/c}}}for(var p={},v=0,h=0;a>h;h++){var d=o[h],f=this.degreeCentrality(i.extend({},e,{root:d}));v<f.degree&&(v=f.degree),p[d.id()]=f.degree}return{degree:function(e){if(r.string(e))var e=t.filter(e)[0].id();else var e=e.id();return p[e]/v}}},degreeCentrality:function(e){e=e||{};var t=this;if(null==e||null==e.root)return void 0;var n=r.string(e.root)?this.filter(e.root)[0]:e.root[0];if(null!=e.weight&&r.fn(e.weight))var i=e.weight;else var i=function(e){return 1};if(null!=e.directed)var o=e.directed;else var o=!1;if(null!=e.alpha&&r.number(e.alpha))var a=e.alpha;else a=0;if(o){for(var s=n.connectedEdges('edge[target = "'+n.id()+'"]').intersection(t),u=n.connectedEdges('edge[source = "'+n.id()+'"]').intersection(t),l=s.length,c=u.length,h=0,d=0,f=0;f<s.length;f++){var p=s[f];h+=i.apply(p,[p])}for(var f=0;f<u.length;f++){var p=u[f];d+=i.apply(p,[p])}return{indegree:Math.pow(l,1-a)*Math.pow(h,a),outdegree:Math.pow(c,1-a)*Math.pow(d,a)}}for(var v=n.connectedEdges().intersection(t),g=v.length,y=0,f=0;f<v.length;f++){var p=v[f];y+=i.apply(p,[p])}return{degree:Math.pow(g,1-a)*Math.pow(y,a)}}};o.dc=o.degreeCentrality,o.dcn=o.degreeCentralityNormalised=o.degreeCentralityNormalized,t.exports=o},{"../../is":77,"../../util":94}],8:[function(e,t,n){"use strict";var r=e("../../is"),i={floydWarshall:function(e){e=e||{};var t=this.cy();if(null!=e.weight&&r.fn(e.weight))var n=e.weight;else var n=function(e){return 1};if(null!=e.directed)var i=e.directed;else var i=!1;for(var o=this.edges().stdFilter(function(e){return!e.isLoop()}),a=this.nodes(),s=a.length,u={},l=0;s>l;l++)u[a[l].id()]=l;for(var c=[],l=0;s>l;l++){for(var h=new Array(s),d=0;s>d;d++)h[d]=l==d?0:1/0;c.push(h)}var f=[],p=[],v=function(e){for(var t=0;s>t;t++){for(var n=new Array(s),r=0;s>r;r++)n[r]=void 0;e.push(n)}};v(f),v(p);for(var l=0;l<o.length;l++){var g=u[o[l].source().id()],y=u[o[l].target().id()],m=n.apply(o[l],[o[l]]);c[g][y]>m&&(c[g][y]=m,f[g][y]=y,p[g][y]=o[l])}if(!i)for(var l=0;l<o.length;l++){var g=u[o[l].target().id()],y=u[o[l].source().id()],m=n.apply(o[l],[o[l]]);c[g][y]>m&&(c[g][y]=m,f[g][y]=y,p[g][y]=o[l])}for(var b=0;s>b;b++)for(var l=0;s>l;l++)for(var d=0;s>d;d++)c[l][b]+c[b][d]<c[l][d]&&(c[l][d]=c[l][b]+c[b][d],f[l][d]=f[l][b]);for(var x=[],l=0;s>l;l++)x.push(a[l].id());var w={distance:function(e,n){if(r.string(e))var i=t.filter(e)[0].id();else var i=e.id();if(r.string(n))var o=t.filter(n)[0].id();else var o=n.id();return c[u[i]][u[o]]},path:function(e,n){var i=function(e,n,r,i,o){if(e===n)return t.getElementById(i[e]);if(void 0===r[e][n])return void 0;for(var a=[t.getElementById(i[e])],s=e;e!==n;){s=e,e=r[e][n];var u=o[s][e];a.push(u),a.push(t.getElementById(i[e]))}return a};if(r.string(e))var o=t.filter(e)[0].id();else var o=e.id();if(r.string(n))var a=t.filter(n)[0].id();else var a=n.id();var s=i(u[o],u[a],f,x,p);return t.collection(s)}};return w}};t.exports=i},{"../../is":77}],9:[function(e,t,n){"use strict";var r=e("../../util"),i={};[e("./bfs-dfs"),e("./a-star"),e("./floyd-warshall"),e("./bellman-ford"),e("./kerger-stein"),e("./page-rank"),e("./degree-centrality"),e("./closeness-centrality"),e("./betweenness-centrality")].forEach(function(e){r.extend(i,e)}),t.exports=i},{"../../util":94,"./a-star":2,"./bellman-ford":3,"./betweenness-centrality":4,"./bfs-dfs":5,"./closeness-centrality":6,"./degree-centrality":7,"./floyd-warshall":8,"./kerger-stein":10,"./page-rank":11}],10:[function(e,t,n){"use strict";var r=e("../../util"),i={kargerStein:function(e){var t=this;e=e||{};var n=function(e,t,n){for(var r=n[e],i=r[1],o=r[2],a=t[i],s=t[o],u=n.filter(function(e){return t[e[1]]===a&&t[e[2]]===s?!1:t[e[1]]===s&&t[e[2]]===a?!1:!0}),l=0;l<u.length;l++){var c=u[l];c[1]===s?(u[l]=c.slice(0),u[l][1]=a):c[2]===s&&(u[l]=c.slice(0),u[l][2]=a)}for(var l=0;l<t.length;l++)t[l]===s&&(t[l]=a);return u},i=function(e,t,r,o){if(o>=r)return t;var a=Math.floor(Math.random()*t.length),s=n(a,e,t);return i(e,s,r-1,o)},o=this._private.cy,a=this.edges().stdFilter(function(e){return!e.isLoop()}),s=this.nodes(),u=s.length,l=a.length,c=Math.ceil(Math.pow(Math.log(u)/Math.LN2,2)),h=Math.floor(u/Math.sqrt(2));if(2>u)return void r.error("At least 2 nodes are required for Karger-Stein algorithm");for(var d={},f=0;u>f;f++)d[s[f].id()]=f;for(var p=[],f=0;l>f;f++){var v=a[f];p.push([f,d[v.source().id()],d[v.target().id()]])}for(var g,y=1/0,m=[],f=0;u>f;f++)m.push(f);for(var b=0;c>=b;b++){var x=m.slice(0),w=i(x,p,u,h),_=x.slice(0),E=i(x,w,h,2),k=i(_,w,h,2);E.length<=k.length&&E.length<y?(y=E.length,g=[E,x]):k.length<=E.length&&k.length<y&&(y=k.length,g=[k,_])}for(var S=g[0].map(function(e){return a[e[0]]}),N=[],T=[],D=g[1][0],f=0;f<g[1].length;f++){var P=g[1][f];P===D?N.push(s[f]):T.push(s[f])}var C={cut:t.spawn(o,S),partition1:t.spawn(N),partition2:t.spawn(T)};return C}};t.exports=i},{"../../util":94}],11:[function(e,t,n){"use strict";var r=e("../../is"),i={pageRank:function(e){e=e||{};var t=function(e){for(var t=e.length,n=0,r=0;t>r;r++)n+=e[r];

for(var r=0;t>r;r++)e[r]=e[r]/n};if(null!=e&&null!=e.dampingFactor)var n=e.dampingFactor;else var n=.8;if(null!=e&&null!=e.precision)var i=e.precision;else var i=1e-6;if(null!=e&&null!=e.iterations)var o=e.iterations;else var o=200;if(null!=e&&null!=e.weight&&r.fn(e.weight))var a=e.weight;else var a=function(e){return 1};for(var s=this._private.cy,u=this.edges().stdFilter(function(e){return!e.isLoop()}),l=this.nodes(),c=l.length,h=u.length,d={},f=0;c>f;f++)d[l[f].id()]=f;for(var p=[],v=[],g=(1-n)/c,f=0;c>f;f++){for(var y=[],m=0;c>m;m++)y.push(0);p.push(y),v.push(0)}for(var f=0;h>f;f++){var b=u[f],x=d[b.source().id()],w=d[b.target().id()],_=a.apply(b,[b]);p[w][x]+=_,v[x]+=_}for(var E=1/c+g,m=0;c>m;m++)if(0===v[m])for(var f=0;c>f;f++)p[f][m]=E;else for(var f=0;c>f;f++)p[f][m]=p[f][m]/v[m]+g;for(var k,S=[],N=[],f=0;c>f;f++)S.push(1),N.push(0);for(var T=0;o>T;T++){for(var D=N.slice(0),f=0;c>f;f++)for(var m=0;c>m;m++)D[f]+=p[f][m]*S[m];t(D),k=S,S=D;for(var P=0,f=0;c>f;f++)P+=Math.pow(k[f]-S[f],2);if(i>P)break}var C={rank:function(e){if(r.string(e))var t=s.filter(e)[0].id();else var t=e.id();return S[d[t]]}};return C}};t.exports=i},{"../../is":77}],12:[function(e,t,n){"use strict";var r=e("../define"),i={animate:r.animate(),animation:r.animation(),animated:r.animated(),clearQueue:r.clearQueue(),delay:r.delay(),delayAnimation:r.delayAnimation(),stop:r.stop()};t.exports=i},{"../define":41}],13:[function(e,t,n){"use strict";var r=e("../util"),i={classes:function(e){e=e.match(/\S+/g)||[];for(var t=this,n=[],i={},o=0;o<e.length;o++){var a=e[o];i[a]=!0}for(var s=0;s<t.length;s++){for(var u=t[s],l=u._private,c=l.classes,h=!1,o=0;o<e.length;o++){var a=e[o],d=c[a];if(!d){h=!0;break}}if(!h)for(var f in c){var d=c[f],p=i[f];if(d&&!p){h=!0;break}}h&&(l.classes=r.copy(i),n.push(u))}return n.length>0&&this.spawn(n).updateStyle().trigger("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes[e]?!0:!1},toggleClass:function(e,t){for(var n=e.match(/\S+/g)||[],r=this,i=[],o=0,a=r.length;a>o;o++)for(var s=r[o],u=!1,l=0;l<n.length;l++){var c=n[l],h=s._private.classes,d=h[c],f=t||void 0===t&&!d;f?(h[c]=!0,d||u||(i.push(s),u=!0)):(h[c]=!1,d&&!u&&(i.push(s),u=!0))}return i.length>0&&this.spawn(i).updateStyle().trigger("class"),r},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(null==t)t=250;else if(0===t)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};t.exports=i},{"../util":94}],14:[function(e,t,n){"use strict";var r={allAre:function(e){return this.filter(e).length===this.length},is:function(e){return this.filter(e).length>0},some:function(e,t){for(var n=0;n<this.length;n++){var r=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(r)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var r=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!r)return!1}return!0},same:function(e){return e=this.cy().collection(e),this.length!==e.length?!1:this.intersect(e).length===this.length},anySame:function(e){return e=this.cy().collection(e),this.intersect(e).length>0},allAreNeighbors:function(e){return e=this.cy().collection(e),this.neighborhood().intersect(e).length===e.length}};r.allAreNeighbours=r.allAreNeighbors,t.exports=r},{}],15:[function(e,t,n){"use strict";var r={parent:function(e){for(var t=[],n=this._private.cy,r=0;r<this.length;r++){var i=this[r],o=n.getElementById(i._private.data.parent);o.size()>0&&t.push(o)}return this.spawn(t,{unique:!0}).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++){var i=n[r];t.push(i)}n=n.parent()}return this.spawn(t,{unique:!0}).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var r=this[n],i=r.parents();t=t||i,t=t.intersect(i)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(e){return e.isNode()&&e.parent().empty()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(e){return e.isNode()&&e.parent().nonempty()}).filter(e)},children:function(e){for(var t=[],n=0;n<this.length;n++){var r=this[n];t=t.concat(r._private.children)}return this.spawn(t,{unique:!0}).filter(e)},siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];return e?0!==e._private.children.length:void 0},isChild:function(){var e=this[0];return e?void 0!==e._private.data.parent&&0!==e.parent().length:void 0},descendants:function(e){function t(e){for(var r=0;r<e.length;r++){var i=e[r];n.push(i),i.children().nonempty()&&t(i.children())}}var n=[];return t(this.children()),this.spawn(n,{unique:!0}).filter(e)}};r.ancestors=r.parents,t.exports=r},{}],16:[function(e,t,n){"use strict";var r,i,o=e("../define");r=i={data:o.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:o.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:o.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:o.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:o.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:o.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];return e?e._private.data.id:void 0}},r.attr=r.data,r.removeAttr=r.removeData,t.exports=i},{"../define":41}],17:[function(e,t,n){"use strict";function r(e){return function(t){var n=this;if(void 0===t&&(t=!0),0!==n.length&&n.isNode()&&!n.removed()){for(var r=0,i=n[0],o=i._private.edges,a=0;a<o.length;a++){var s=o[a];(t||!s.isLoop())&&(r+=e(i,s))}return r}}}function i(e,t){return function(n){for(var r,i=this.nodes(),o=0;o<i.length;o++){var a=i[o],s=a[e](n);void 0===s||void 0!==r&&!t(s,r)||(r=s)}return r}}var o=e("../util"),a={};o.extend(a,{degree:r(function(e,t){return t.source().same(t.target())?2:1}),indegree:r(function(e,t){return t.target().same(e)?1:0}),outdegree:r(function(e,t){return t.source().same(e)?1:0})}),o.extend(a,{minDegree:i("degree",function(e,t){return t>e}),maxDegree:i("degree",function(e,t){return e>t}),minIndegree:i("indegree",function(e,t){return t>e}),maxIndegree:i("indegree",function(e,t){return e>t}),minOutdegree:i("outdegree",function(e,t){return t>e}),maxOutdegree:i("outdegree",function(e,t){return e>t})}),o.extend(a,{totalDegree:function(e){for(var t=0,n=this.nodes(),r=0;r<n.length;r++)t+=n[r].degree(e);return t}}),t.exports=a},{"../util":94}],18:[function(e,t,n){"use strict";var r,i,o=e("../define"),a=e("../is"),s=e("../util");r=i={position:o.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"],onSet:function(e){var t=e.updateCompoundBounds();t.rtrigger("position")},canSet:function(e){return!e.locked()&&!e.isParent()}}),silentPosition:o.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!0,validKeys:["x","y"],onSet:function(e){e.updateCompoundBounds()},canSet:function(e){return!e.locked()&&!e.isParent()}}),positions:function(e,t){if(a.plainObject(e))this.position(e);else if(a.fn(e)){for(var n=e,r=0;r<this.length;r++){var i=this[r],e=n.apply(i,[r,i]);if(e&&!i.locked()&&!i.isParent()){var o=i._private.position;o.x=e.x,o.y=e.y}}var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;t?u.trigger("position"):u.rtrigger("position")}return this},silentPositions:function(e){return this.positions(e,!0)},renderedPosition:function(e,t){var n=this[0],r=this.cy(),i=r.zoom(),o=r.pan(),s=a.plainObject(e)?e:void 0,u=void 0!==s||void 0!==t&&a.string(e);if(n&&n.isNode()){if(!u){var l=n._private.position;return s={x:l.x*i+o.x,y:l.y*i+o.y},void 0===e?s:s[e]}for(var c=0;c<this.length;c++){var n=this[c];void 0!==t?n._private.position[e]=(t-o[e])/i:void 0!==s&&(n._private.position={x:(s.x-o.x)/i,y:(s.y-o.y)/i})}this.rtrigger("position")}else if(!u)return void 0;return this},relativePosition:function(e,t){var n=this[0],r=this.cy(),i=a.plainObject(e)?e:void 0,o=void 0!==i||void 0!==t&&a.string(e),s=r.hasCompoundNodes();if(n&&n.isNode()){if(!o){var u=n._private.position,l=s?n.parent():null,c=l&&l.length>0,h=c;c&&(l=l[0]);var d=h?l._private.position:{x:0,y:0};return i={x:u.x-d.x,y:u.y-d.y},void 0===e?i:i[e]}for(var f=0;f<this.length;f++){var n=this[f],l=s?n.parent():null,c=l&&l.length>0,h=c;c&&(l=l[0]);var d=h?l._private.position:{x:0,y:0};void 0!==t?n._private.position[e]=t+d[e]:void 0!==i&&(n._private.position={x:i.x+d.x,y:i.y+d.y})}this.rtrigger("position")}else if(!o)return void 0;return this},renderedBoundingBox:function(e){var t=this.boundingBox(e),n=this.cy(),r=n.zoom(),i=n.pan(),o=t.x1*r+i.x,a=t.x2*r+i.x,s=t.y1*r+i.y,u=t.y2*r+i.y;return{x1:o,x2:a,y1:s,y2:u,w:a-o,h:u-s}},updateCompoundBounds:function(){function e(e){var t=e.children(),r=e._private.style,i="include"===r["compound-sizing-wrt-labels"].value,o=t.boundingBox({includeLabels:i,includeEdges:!0}),a={top:r["padding-top"].pfValue,bottom:r["padding-bottom"].pfValue,left:r["padding-left"].pfValue,right:r["padding-right"].pfValue},s=e._private.position,u=!1;"auto"===r.width.value&&(e._private.autoWidth=o.w,s.x=(o.x1+o.x2-a.left+a.right)/2,u=!0),"auto"===r.height.value&&(e._private.autoHeight=o.h,s.y=(o.y1+o.y2-a.top+a.bottom)/2,u=!0),u&&n.push(e)}var t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return t.collection();for(var n=[],r=this.parent();r.nonempty();){for(var i=0;i<r.length;i++){var o=r[i];e(o)}r=r.parent()}return this.spawn(n)},boundingBox:function(e){var t=this,n=t._private.cy,r=n._private,i=r.styleEnabled;e=e||s.staticEmptyObject();var o=void 0===e.includeNodes?!0:e.includeNodes,a=void 0===e.includeEdges?!0:e.includeEdges,u=void 0===e.includeLabels?!0:e.includeLabels;i&&r.renderer.recalculateRenderedStyle(this);for(var l=1/0,c=-(1/0),h=1/0,d=-(1/0),f=0;f<t.length;f++){var p,v,g,y,m,b,x=t[f],w=x._private,_=w.style,E=i?w.style.display.value:"element",k="nodes"===w.group,S=!1;if("none"!==E){if(k&&o){S=!0;var N=w.position;m=N.x,b=N.y;var T=x.outerWidth(),D=T/2,P=x.outerHeight(),C=P/2;p=m-D,v=m+D,g=b-C,y=b+C,l=l>p?p:l,c=v>c?v:c,h=h>g?g:h,d=y>d?y:d}else if(x.isEdge()&&a){S=!0;var M=w.source,A=M._private,I=A.position,L=w.target,O=L._private,j=O.position,B=w.rstyle||{},T=0,R=0;if(i&&(T=_.width.pfValue,R=T/2),p=I.x,v=j.x,g=I.y,y=j.y,p>v){var z=p;p=v,v=z}if(g>y){var z=g;g=y,y=z}if(p-=R,v+=R,g-=R,y+=R,l=l>p?p:l,c=v>c?v:c,h=h>g?g:h,d=y>d?y:d,i)for(var F=B.bezierPts||B.linePts||[],V=0;V<F.length;V++){var q=F[V];p=q.x-R,v=q.x+R,g=q.y-R,y=q.y+R,l=l>p?p:l,c=v>c?v:c,h=h>g?g:h,d=y>d?y:d}if(i&&"haystack"===_["curve-style"].strValue){var X=B.haystackPts;if(p=X[0].x,g=X[0].y,v=X[1].x,y=X[1].y,p>v){var z=p;p=v,v=z}if(g>y){var z=g;g=y,y=z}l=l>p?p:l,c=v>c?v:c,h=h>g?g:h,d=y>d?y:d}}if(i){var w=x._private,_=w.style,B=w.rstyle,Y=_.label.strValue,$=_["font-size"],G=_["text-halign"],W=_["text-valign"],U=B.labelWidth,H=B.labelHeight,Z=B.labelX,K=B.labelY,J=x.isEdge(),Q="autorotate"===_["edge-text-rotation"].strValue;if(u&&Y&&$&&null!=H&&null!=U&&null!=Z&&null!=K&&G&&W){var ee,te,ne,re,ie=H,oe=U;if(J){if(ee=Z-oe/2,te=Z+oe/2,ne=K-ie/2,re=K+ie/2,Q){var ae=w.rscratch.labelAngle,se=Math.cos(ae),ue=Math.sin(ae),le=function(e,t){return e-=Z,t-=K,{x:e*se-t*ue+Z,y:e*ue+t*se+K}},ce=le(ee,ne),he=le(ee,re),de=le(te,ne),fe=le(te,re);ee=Math.min(ce.x,he.x,de.x,fe.x),te=Math.max(ce.x,he.x,de.x,fe.x),ne=Math.min(ce.y,he.y,de.y,fe.y),re=Math.max(ce.y,he.y,de.y,fe.y)}}else{switch(G.value){case"left":ee=Z-oe,te=Z;break;case"center":ee=Z-oe/2,te=Z+oe/2;break;case"right":ee=Z,te=Z+oe}switch(W.value){case"top":ne=K-ie,re=K;break;case"center":ne=K-ie/2,re=K+ie/2;break;case"bottom":ne=K,re=K+ie}}l=l>ee?ee:l,c=te>c?te:c,h=h>ne?ne:h,d=re>d?re:d}}}}var pe=function(e){return e===1/0||e===-(1/0)?0:e};return l=pe(l),c=pe(c),h=pe(h),d=pe(d),{x1:l,x2:c,y1:h,y2:d,w:c-l,h:d-h}}};var u=function(e){e.uppercaseName=s.capitalize(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=s.capitalize(e.outerName),r[e.name]=function(){var t=this[0],n=t._private,r=n.cy,i=r._private.styleEnabled;if(t){if(!i)return 1;var o=n.style[e.name];switch(o.strValue){case"auto":return n[e.autoName]||0;case"label":return n.rstyle[e.labelName]||0;default:return o.pfValue}}},r["outer"+e.uppercaseName]=function(){var t=this[0],n=t._private,r=n.cy,i=r._private.styleEnabled;if(t){if(i){var o=n.style,a=t[e.name](),s=o["border-width"].pfValue,u=o[e.paddings[0]].pfValue+o[e.paddings[1]].pfValue;return a+s+u}return 1}},r["rendered"+e.uppercaseName]=function(){var t=this[0];if(t){var n=t[e.name]();return n*this.cy().zoom()}},r["rendered"+e.uppercaseOuterName]=function(){var t=this[0];if(t){var n=t[e.outerName]();return n*this.cy().zoom()}}};u({name:"width",paddings:["padding-left","padding-right"]}),u({name:"height",paddings:["padding-top","padding-bottom"]}),r.modelPosition=r.point=r.position,r.modelPositions=r.points=r.positions,r.renderedPoint=r.renderedPosition,r.relativePoint=r.relativePosition,r.boundingbox=r.boundingBox,r.renderedBoundingbox=r.renderedBoundingBox,t.exports=i},{"../define":41,"../is":77,"../util":94}],19:[function(e,t,n){"use strict";var r=e("../util"),i=e("../is"),o=function(e,t,n){if(!(this instanceof o))return new o(e,t,n);var a=this;if(n=void 0===n||n?!0:!1,void 0===e||void 0===t||!i.core(e))return void r.error("An element must have a core reference and parameters set");var s=t.group;if(null==s&&(s=null!=t.data.source&&null!=t.data.target?"edges":"nodes"),"nodes"!==s&&"edges"!==s)return void r.error("An element must be of type `nodes` or `edges`; you specified `"+s+"`");if(this.length=1,this[0]=this,this._private={cy:e,single:!0,data:t.data||{},position:t.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:s,style:{},rstyle:{},styleCxts:[],removed:!0,selected:t.selected?!0:!1,selectable:void 0===t.selectable?!0:t.selectable?!0:!1,locked:t.locked?!0:!1,grabbed:!1,grabbable:void 0===t.grabbable?!0:t.grabbable?!0:!1,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[]},t.renderedPosition){var u=t.renderedPosition,l=e.pan(),c=e.zoom();this._private.position={x:(u.x-l.x)/c,y:(u.y-l.y)/c}}if(i.string(t.classes))for(var h=t.classes.split(/\s+/),d=0,f=h.length;f>d;d++){var p=h[d];p&&""!==p&&(a._private.classes[p]=!0)}(t.style||t.css)&&e.style().applyBypass(this,t.style||t.css),(void 0===n||n)&&this.restore()};t.exports=o},{"../is":77,"../util":94}],20:[function(e,t,n){"use strict";var r=e("../define"),i={on:r.on(),one:r.on({unbindSelfOnTrigger:!0}),once:r.on({unbindAllBindersOnTrigger:!0}),off:r.off(),trigger:r.trigger(),rtrigger:function(e,t){return 0!==this.length?(this.cy().notify({type:e,collection:this}),this.trigger(e,t),this):void 0}};r.eventAliasesOn(i),t.exports=i},{"../define":41}],21:[function(e,t,n){"use strict";var r=e("../is"),i=e("../selector"),o={nodes:function(e){return this.filter(function(e,t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(e,t){return t.isEdge()}).filter(e)},filter:function(e){if(r.fn(e)){for(var t=[],n=0;n<this.length;n++){var o=this[n];e.apply(o,[n,o])&&t.push(o)}return this.spawn(t)}return r.string(e)||r.elementOrCollection(e)?i(e).filter(this):void 0===e?this:this.spawn()},not:function(e){if(e){r.string(e)&&(e=this.filter(e));for(var t=[],n=0;n<this.length;n++){var i=this[n],o=e._private.ids[i.id()];o||t.push(i)}return this.spawn(t)}return this},absoluteComplement:function(){var e=this._private.cy;return e.elements().not(this)},intersect:function(e){if(r.string(e)){var t=e;return this.filter(t)}for(var n=[],i=this,o=e,a=this.length<e.length,s=a?o._private.ids:i._private.ids,u=a?i:o,l=0;l<u.length;l++){var c=u[l]._private.data.id,h=s[c];h&&n.push(h)}return this.spawn(n)},xor:function(e){var t=this._private.cy;r.string(e)&&(e=t.$(e));var n=[],i=this,o=e,a=function(e,t){for(var r=0;r<e.length;r++){var i=e[r],o=i._private.data.id,a=t._private.ids[o];a||n.push(i)}};return a(i,o),a(o,i),this.spawn(n)},diff:function(e){var t=this._private.cy;r.string(e)&&(e=t.$(e));var n=[],i=[],o=[],a=this,s=e,u=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r],a=i._private.data.id,s=t._private.ids[a];s?o.push(i):n.push(i)}};return u(a,s,n),u(s,a,i),{left:this.spawn(n,{unique:!0}),right:this.spawn(i,{unique:!0}),both:this.spawn(o,{unique:!0})}},add:function(e){var t=this._private.cy;if(!e)return this;if(r.string(e)){var n=e;e=t.elements(n)}for(var i=[],o=0;o<this.length;o++)i.push(this[o]);for(var o=0;o<e.length;o++){var a=!this._private.ids[e[o].id()];a&&i.push(e[o])}return this.spawn(i)},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(r.string(e)){var i=e;e=n.elements(i)}for(var o=0;o<e.length;o++){var a=e[o],s=a.id(),u=!t.ids[s];if(u){var l=this.length++;this[l]=a,t.ids[s]=a,t.indexes[s]=l}}return this},unmergeOne:function(e){e=e[0];var t=this._private,n=e.id(),r=t.indexes[n];if(null==r)return this;this[r]=void 0,t.ids[n]=void 0,t.indexes[n]=void 0;var i=r===this.length-1;if(this.length>1&&!i){var o=this.length-1,a=this[o];this[o]=void 0,this[r]=a,t.indexes[a.id()]=r}return this.length--,this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(r.string(e)){var n=e;e=t.elements(n)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},map:function(e,t){for(var n=[],r=this,i=0;i<r.length;i++){var o=r[i],a=t?e.apply(t,[o,i,r]):e(o,i,r);n.push(a)}return n},stdFilter:function(e,t){for(var n=[],r=this,i=0;i<r.length;i++){var o=r[i],a=t?e.apply(t,[o,i,r]):e(o,i,r);a&&n.push(o)}return this.spawn(n)},max:function(e,t){for(var n,r=-(1/0),i=this,o=0;o<i.length;o++){var a=i[o],s=t?e.apply(t,[a,o,i]):e(a,o,i);s>r&&(r=s,n=a)}return{value:r,ele:n}},min:function(e,t){for(var n,r=1/0,i=this,o=0;o<i.length;o++){var a=i[o],s=t?e.apply(t,[a,o,i]):e(a,o,i);r>s&&(r=s,n=a)}return{value:r,ele:n}}},a=o;a.u=a["|"]=a["+"]=a.union=a.or=a.add,a["\\"]=a["!"]=a["-"]=a.difference=a.relativeComplement=a.subtract=a.not,a.n=a["&"]=a["."]=a.and=a.intersection=a.intersect,a["^"]=a["(+)"]=a["(-)"]=a.symmetricDifference=a.symdiff=a.xor,a.fnFilter=a.filterFn=a.stdFilter,a.complement=a.abscomp=a.absoluteComplement,t.exports=o},{"../is":77,"../selector":81}],22:[function(e,t,n){"use strict";var r={isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},isSimple:function(){return this.isEdge()&&this.source().id()!==this.target().id()},group:function(){var e=this[0];return e?e._private.group:void 0}};t.exports=r},{}],23:[function(e,t,n){"use strict";var r=e("../util"),i=e("../is"),o=e("./element"),a={prefix:"ele",id:0,generate:function(e,t,n){var r=(i.element(t)?t._private:t,null!=n?n:this.prefix+this.id);if(e.getElementById(r).empty())this.id++;else for(;!e.getElementById(r).empty();)r=this.prefix+ ++this.id;return r}},s=function(e,t,n){if(!(this instanceof s))return new s(e,t,n);if(void 0===e||!i.core(e))return void r.error("A collection must have a reference to the core");var u={},l={},c=!1;if(t){if(t.length>0&&i.plainObject(t[0])&&!i.element(t[0])){c=!0;for(var h=[],d={},f=0,p=t.length;p>f;f++){var v=t[f];null==v.data&&(v.data={});var g=v.data;if(null==g.id)g.id=a.generate(e,v);else if(0!==e.getElementById(g.id).length||d[g.id])continue;var y=new o(e,v,!1);h.push(y),d[g.id]=!0}t=h}}else t=[];this.length=0;for(var f=0,p=t.length;p>f;f++){var m=t[f];if(m){var b=m._private.data.id;(!n||n.unique&&!u[b])&&(u[b]=m,l[b]=this.length,this[this.length]=m,this.length++)}}this._private={cy:e,ids:u,indexes:l},c&&this.restore()},u=o.prototype=s.prototype;u.instanceString=function(){return"collection"},u.spawn=function(e,t,n){return i.core(e)||(n=t,t=e,e=this.cy()),new s(e,t,n)},u.cy=function(){return this._private.cy},u.element=function(){return this[0]},u.collection=function(){return i.collection(this)?this:new s(this._private.cy,[this])},u.unique=function(){return new s(this._private.cy,this,{unique:!0})},u.getElementById=function(e){var t=this._private.cy,n=this._private.ids[e];return n?n:new s(t)},u.json=function(e){var t=this.element(),n=this.cy();if(null==t&&e)return this;if(null==t)return void 0;var o=t._private;if(i.plainObject(e)){n.startBatch(),e.data&&t.data(e.data),e.position&&t.position(e.position);var a=function(n,r,i){var a=e[n];null!=a&&a!==o[n]&&(a?t[r]():t[i]())};return a("removed","remove","restore"),a("selected","select","unselect"),a("selectable","selectify","unselectify"),a("locked","lock","unlock"),a("grabbable","grabify","ungrabify"),null!=e.classes&&t.classes(e.classes),n.endBatch(),this}if(void 0===e){var s={data:r.copy(o.data),position:r.copy(o.position),group:o.group,removed:o.removed,selected:o.selected,selectable:o.selectable,locked:o.locked,grabbable:o.grabbable,classes:null},u=[];for(var l in o.classes)o.classes[l]&&u.push(l);return s.classes=u.join(" "),s}},u.jsons=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t],r=n.json();e.push(r)}return e},u.clone=function(){for(var e=this.cy(),t=[],n=0;n<this.length;n++){var r=this[n],i=r.json(),a=new o(e,i,!1);t.push(a)}return new s(e,t)},u.copy=u.clone,u.restore=function(e){var t=this,n=[],o=t.cy();void 0===e&&(e=!0);for(var u=[],l=[],c=[],h=0,d=0,f=0,p=t.length;p>f;f++){var v=t[f];v.isNode()?(l.push(v),h++):(c.push(v),d++)}u=l.concat(c);for(var f=0,p=u.length;p>f;f++){var v=u[f];if(v.removed()){var g=v._private,y=g.data;if(void 0===y.id)y.id=a.generate(o,v);else if(i.number(y.id))y.id=""+y.id;else{if(i.emptyString(y.id)||!i.string(y.id)){r.error("Can not create element with invalid string ID `"+y.id+"`");continue}if(0!==o.getElementById(y.id).length){r.error("Can not create second element with ID `"+y.id+"`");continue}}var m=y.id;if(v.isNode()){var b=v,x=g.position;null==x.x&&(x.x=0),null==x.y&&(x.y=0)}if(v.isEdge()){for(var w=v,_=["source","target"],E=_.length,k=!1,S=0;E>S;S++){var N=_[S],T=y[N];i.number(T)&&(T=y[N]=""+y[N]),null==T||""===T?(r.error("Can not create edge `"+m+"` with unspecified "+N),k=!0):o.getElementById(T).empty()&&(r.error("Can not create edge `"+m+"` with nonexistant "+N+" `"+T+"`"),k=!0)}if(k)continue;var D=o.getElementById(y.source),P=o.getElementById(y.target);D._private.edges.push(w),P._private.edges.push(w),w._private.source=D,w._private.target=P}g.ids={},g.ids[m]=v,g.removed=!1,o.addToPool(v),n.push(v)}}for(var f=0;h>f;f++){var b=u[f],y=b._private.data;i.number(y.parent)&&(y.parent=""+y.parent);var C=y.parent,M=null!=C;if(M){var A=o.getElementById(C);if(A.empty())y.parent=void 0;else{for(var I=!1,L=A;!L.empty();){if(b.same(L)){I=!0,y.parent=void 0;break}L=L.parent()}I||(A[0]._private.children.push(b),b._private.parent=A[0],o._private.hasCompoundNodes=!0)}}}if(n=new s(o,n),n.length>0){var O=n.add(n.connectedNodes()).add(n.parent());O.updateStyle(e),e?n.rtrigger("add"):n.trigger("add")}return t},u.removed=function(){var e=this[0];return e&&e._private.removed},u.inside=function(){var e=this[0];return e&&!e._private.removed},u.remove=function(e){function t(e){for(var t=e._private.edges,n=0;n<t.length;n++)r(t[n])}function n(e){for(var t=e._private.children,n=0;n<t.length;n++)r(t[n])}function r(e){var r=c[e.id()];r||(c[e.id()]=!0,e.isNode()?(l.push(e),t(e),n(e)):l.unshift(e))}function i(e,t){for(var n=e._private.edges,r=0;r<n.length;r++){var i=n[r];if(t===i){n.splice(r,1);break}}}function o(e,t){t=t[0],e=e[0];for(var n=e._private.children,r=0;r<n.length;r++)if(n[r][0]===t[0]){n.splice(r,1);break}}var a=this,u=[],l=[],c={},h=a._private.cy;void 0===e&&(e=!0);for(var d=0,f=a.length;f>d;d++){var p=a[d];r(p)}for(var d=0;d<l.length;d++){var p=l[d];if(p._private.removed=!0,h.removeFromPool(p),u.push(p),p.isEdge()){var v=p.source()[0],g=p.target()[0];i(v,p),i(g,p)}else{var y=p.parent();0!==y.length&&o(y,p)}}var m=h._private.elements;h._private.hasCompoundNodes=!1;for(var d=0;d<m.length;d++){var p=m[d];if(p.isParent()){h._private.hasCompoundNodes=!0;break}}var b=new s(this.cy(),u);b.size()>0&&(e&&this.cy().notify({type:"remove",collection:b}),b.trigger("remove"));for(var x={},d=0;d<l.length;d++){var p=l[d],w="nodes"===p._private.group,_=p._private.data.parent;if(w&&void 0!==_&&!x[_]){x[_]=!0;var y=h.getElementById(_);y&&0!==y.length&&!y._private.removed&&0===y.children().length&&y.updateStyle()}}return new s(h,u)},u.move=function(e){var t=this._private.cy;if(void 0!==e.source||void 0!==e.target){var n=e.source,r=e.target,i=t.getElementById(n).length>0,o=t.getElementById(r).length>0;if(i||o){var a=this.jsons();this.remove();for(var s=0;s<a.length;s++){var u=a[s];"edges"===u.group&&(i&&(u.data.source=n),o&&(u.data.target=r))}return t.add(a)}}else if(void 0!==e.parent){var l=e.parent,c=null===l||t.getElementById(l).length>0;if(c){var a=this.jsons(),h=this.descendants(),d=h.merge(h.add(this).connectedEdges());this.remove();for(var s=0;s<this.length;s++){var u=a[s];"nodes"===u.group&&(u.data.parent=null===l?void 0:l)}}return t.add(a).merge(d.restore())}return this},[e("./algorithms"),e("./animation"),e("./class"),e("./comparators"),e("./compounds"),e("./data"),e("./degree"),e("./dimensions"),e("./events"),e("./filter"),e("./group"),e("./index"),e("./iteration"),e("./layout"),e("./style"),e("./switch-functions"),e("./traversing")].forEach(function(e){r.extend(u,e)}),t.exports=s},{"../is":77,"../util":94,"./algorithms":9,"./animation":12,"./class":13,"./comparators":14,"./compounds":15,"./data":16,"./degree":17,"./dimensions":18,"./element":19,"./events":20,"./filter":21,"./group":22,"./index":23,"./iteration":24,"./layout":25,"./style":26,"./switch-functions":27,"./traversing":28}],24:[function(e,t,n){"use strict";var r=e("../is"),i=e("./zsort"),o={each:function(e){if(r.fn(e))for(var t=0;t<this.length;t++){var n=this[t],i=e.apply(n,[t,n]);if(i===!1)break}return this},forEach:function(e,t){if(r.fn(e))for(var n=0;n<this.length;n++){var i=this[n],o=t?e.apply(t,[i,n,this]):e(i,n,this);if(o===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],r=this.length;null==t&&(t=r),null==e&&(e=0),0>e&&(e=r+e),0>t&&(t=r+t);for(var i=e;i>=0&&t>i&&r>i;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!r.fn(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(i)},zDepth:function(){var e=this[0];if(!e)return void 0;var t=e._private,n=t.group;if("nodes"===n){var r=t.data.parent?e.parents().size():0;return e.isParent()?r:Number.MAX_VALUE}var i=t.source,o=t.target,a=i.zDepth(),s=o.zDepth();return Math.max(a,s,0)}};t.exports=o},{"../is":77,"./zsort":29}],25:[function(e,t,n){"use strict";var r=e("../is"),i=e("../util"),o={layoutPositions:function(e,t,n){var i=this.nodes(),o=this.cy();if(e.trigger({type:"layoutstart",layout:e}),e.animations=[],t.animate){for(var a=0;a<i.length;a++){var s=i[a],u=a===i.length-1,l=n.call(s,a,s),c=s.position();r.number(c.x)&&r.number(c.y)||s.silentPosition({x:0,y:0});var h=s.animation({position:l,duration:t.animationDuration,easing:t.animationEasing,step:u?function(){t.fit&&o.fit(t.eles,t.padding)}:void 0,complete:u?function(){null!=t.zoom&&o.zoom(t.zoom),t.pan&&o.pan(t.pan),t.fit&&o.fit(t.eles,t.padding),e.one("layoutstop",t.stop),e.trigger({type:"layoutstop",layout:e})}:void 0});e.animations.push(h),h.play()}e.one("layoutready",t.ready),e.trigger({type:"layoutready",layout:e})}else i.positions(n),t.fit&&o.fit(t.eles,t.padding),null!=t.zoom&&o.zoom(t.zoom),t.pan&&o.pan(t.pan),e.one("layoutready",t.ready),e.trigger({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.trigger({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.layout(i.extend({},e,{eles:this})),this},makeLayout:function(e){var t=this.cy();return t.makeLayout(i.extend({},e,{eles:this}))}};o.createLayout=o.makeLayout,t.exports=o},{"../is":77,"../util":94}],26:[function(e,t,n){"use strict";var r=e("../is"),i={updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t._private.batchingStyle){var n=t._private.batchStyleEles;return n.merge(this),this}var r=t.style();e=e||void 0===e?!0:!1,r.apply(this);var i=this.updateCompoundBounds(),o=i.length>0?this.add(i):this;return e?o.rtrigger("style"):o.trigger("style"),this},updateMappers:function(e){var t=this._private.cy,n=t.style();if(e=e||void 0===e?!0:!1,!t.styleEnabled())return this;n.updateMappers(this);var r=this.updateCompoundBounds(),i=r.length>0?this.add(r):this;return e?i.rtrigger("style"):i.trigger("style"),this},renderedCss:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n){var r=n.cy().style().getRenderedStyle(n);return void 0===e?r:r[e]}},css:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var i=!1,o=n.style();if(r.plainObject(e)){var a=e;o.applyBypass(this,a,i);var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;u.rtrigger("style")}else if(r.string(e)){if(void 0===t){var l=this[0];return l?o.getStylePropertyValue(l,e):void 0}o.applyBypass(this,e,t,i);var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;u.rtrigger("style")}else if(void 0===e){var l=this[0];return l?o.getRawStyle(l):void 0}return this},removeCss:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,r=t.style(),i=this;if(void 0===e)for(var o=0;o<i.length;o++){var a=i[o];r.removeAllBypasses(a,n)}else{e=e.split(/\s+/);for(var o=0;o<i.length;o++){var a=i[o];r.removeBypasses(a,e,n)}}var s=this.updateCompoundBounds(),u=s.length>0?this.add(s):this;return u.rtrigger("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},visible:function(){var e=this.cy();if(!e.styleEnabled())return!0;var t=this[0],n=e.hasCompoundNodes();if(t){var r=t._private.style;if("visible"!==r.visibility.value||"element"!==r.display.value)return!1;if("nodes"===t._private.group){if(!n)return!0;var i=t._private.data.parent?t.parents():null;if(i)for(var o=0;o<i.length;o++){var a=i[o],s=a._private.style,u=s.visibility.value,l=s.display.value;if("visible"!==u||"element"!==l)return!1}return!0}var c=t._private.source,h=t._private.target;return c.visible()&&h.visible()}},hidden:function(){var e=this[0];return e?!e.visible():void 0},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=r.style.opacity.value;if(!t)return i;var o=r.data.parent?n.parents():null;if(o)for(var a=0;a<o.length;a++){var s=o[a],u=s._private.style.opacity.value;i=u*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();return t?n?0===t.effectiveOpacity():0===t._private.style.opacity.value:void 0},isFullAutoParent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];if(t){var n="auto"===t._private.style.width.value,r="auto"===t._private.style.height.value;return t.isParent()&&n&&r}},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return t._private.backgrounding?!0:!1}};i.bypass=i.style=i.css,i.renderedStyle=i.renderedCss,i.removeBypass=i.removeStyle=i.removeCss,t.exports=i},{"../is":77}],27:[function(e,t,n){"use strict";

function r(e){return function(){var t=arguments,n=[];if(2===t.length){var r=t[0],i=t[1];this.bind(e.event,r,i)}else if(1===t.length){var i=t[0];this.bind(e.event,i)}else if(0===t.length){for(var o=0;o<this.length;o++){var a=this[o],s=!e.ableField||a._private[e.ableField],u=a._private[e.field]!=e.value;if(e.overrideAble){var l=e.overrideAble(a);if(void 0!==l&&(s=l,!l))return this}s&&(a._private[e.field]=e.value,u&&n.push(a))}var c=this.spawn(n);c.updateStyle(),c.trigger(e.event)}return this}}function i(e){o[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var n=e.overrideField(t);if(void 0!==n)return n}return t._private[e.field]}},o[e.on]=r({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),o[e.off]=r({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}var o={};i({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"}),i({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()?!1:void 0},on:"grabify",off:"ungrabify"}),i({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"}),i({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"}),o.deselect=o.unselect,o.grabbed=function(){var e=this[0];return e?e._private.grabbed:void 0},i({field:"active",on:"activate",off:"unactivate"}),o.inactive=function(){var e=this[0];return e?!e._private.active:void 0},t.exports=o},{}],28:[function(e,t,n){"use strict";function r(e){return function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r],o=i._private[e.attr];o&&n.push(o)}return this.spawn(n,{unique:!0}).filter(t)}}function i(e){return function(t){var n=[],r=this._private.cy,i=e||{};s.string(t)&&(t=r.$(t));for(var o=this._private.ids,a=t._private.ids,u=0;u<t.length;u++)for(var l=t[u]._private.edges,c=0;c<l.length;c++){var h=l[c],d=h._private.data,f=o[d.source]&&a[d.target],p=a[d.source]&&o[d.target],v=f||p;if(v){if(i.thisIs){if("source"===i.thisIs&&!f)continue;if("target"===i.thisIs&&!p)continue}n.push(h)}}return this.spawn(n,{unique:!0})}}function o(e){var t={codirected:!1};return e=a.extend({},t,e),function(t){for(var n=[],r=this.edges(),i=e,o=0;o<r.length;o++)for(var a=r[o],s=a.source()[0],u=s.id(),l=a.target()[0],c=l.id(),h=s._private.edges,d=0;d<h.length;d++){var f=h[d],p=f._private.data,v=p.target,g=p.source,y=v===c&&g===u,m=u===v&&c===g;(i.codirected&&y||!i.codirected&&(y||m))&&n.push(f)}return this.spawn(n,{unique:!0}).filter(t)}}var a=e("../util"),s=e("../is"),u={};a.extend(u,{roots:function(e){for(var t=this,n=[],r=0;r<t.length;r++){var i=t[r];if(i.isNode()){var o=i.connectedEdges(function(){return this.data("target")===i.id()&&this.data("source")!==i.id()}).length>0;o||n.push(i)}}return this.spawn(n,{unique:!0}).filter(e)},leaves:function(e){for(var t=this,n=[],r=0;r<t.length;r++){var i=t[r];if(i.isNode()){var o=i.connectedEdges(function(){return this.data("source")===i.id()&&this.data("target")!==i.id()}).length>0;o||n.push(i)}}return this.spawn(n,{unique:!0}).filter(e)},outgoers:function(e){for(var t=this,n=[],r=0;r<t.length;r++){var i=t[r],o=i.id();if(i.isNode())for(var a=i._private.edges,s=0;s<a.length;s++){var u=a[s],l=u._private.data.source,c=u._private.data.target;l===o&&c!==o&&(n.push(u),n.push(u.target()[0]))}}return this.spawn(n,{unique:!0}).filter(e)},successors:function(e){for(var t=this,n=[],r={};;){var i=t.outgoers();if(0===i.length)break;for(var o=!1,a=0;a<i.length;a++){var s=i[a],u=s.id();r[u]||(r[u]=!0,n.push(s),o=!0)}if(!o)break;t=i}return this.spawn(n,{unique:!0}).filter(e)},incomers:function(e){for(var t=this,n=[],r=0;r<t.length;r++){var i=t[r],o=i.id();if(i.isNode())for(var a=i._private.edges,s=0;s<a.length;s++){var u=a[s],l=u._private.data.source,c=u._private.data.target;c===o&&l!==o&&(n.push(u),n.push(u.source()[0]))}}return this.spawn(n,{unique:!0}).filter(e)},predecessors:function(e){for(var t=this,n=[],r={};;){var i=t.incomers();if(0===i.length)break;for(var o=!1,a=0;a<i.length;a++){var s=i[a],u=s.id();r[u]||(r[u]=!0,n.push(s),o=!0)}if(!o)break;t=i}return this.spawn(n,{unique:!0}).filter(e)}}),a.extend(u,{neighborhood:function(e){for(var t=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],u=s._private.source,l=s._private.target,c=i===u?l:u;c.length>0&&t.push(c[0]),t.push(s[0])}return this.spawn(t,{unique:!0}).filter(e)},closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),u.neighbourhood=u.neighborhood,u.closedNeighbourhood=u.closedNeighborhood,u.openNeighbourhood=u.openNeighborhood,a.extend(u,{source:function(e){var t,n=this[0];return n&&(t=n._private.source),t&&e?t.filter(e):t},target:function(e){var t,n=this[0];return n&&(t=n._private.target),t&&e?t.filter(e):t},sources:r({attr:"source"}),targets:r({attr:"target"})}),a.extend(u,{edgesWith:i(),edgesTo:i({thisIs:"source"})}),a.extend(u,{connectedEdges:function(e){for(var t=[],n=this,r=0;r<n.length;r++){var i=n[r];if(i.isNode())for(var o=i._private.edges,a=0;a<o.length;a++){var s=o[a];t.push(s)}}return this.spawn(t,{unique:!0}).filter(e)},connectedNodes:function(e){for(var t=[],n=this,r=0;r<n.length;r++){var i=n[r];i.isEdge()&&(t.push(i.source()[0]),t.push(i.target()[0]))}return this.spawn(t,{unique:!0}).filter(e)},parallelEdges:o(),codirectedEdges:o({codirected:!0})}),a.extend(u,{components:function(){var e=this.cy(),t=e.collection(),n=this.nodes(),r=[],i=function(e,r){t.merge(e),n.unmerge(e),r.merge(e)};do{var o=e.collection();r.push(o);var a=n[0];i(a,o),this.bfs({directed:!1,roots:a,visit:function(e,t,n,r,a){i(n,o)}})}while(n.length>0);return r.map(function(e){return e.closedNeighborhood()})}}),t.exports=u},{"../is":77,"../util":94}],29:[function(e,t,n){"use strict";var r=function(e,t){var n=e.cy(),r=e._private,i=t._private,o=r.style["z-index"].value-i.style["z-index"].value,a=0,s=0,u=n.hasCompoundNodes(),l="nodes"===r.group,c="edges"===r.group,h="nodes"===i.group,d="edges"===i.group;u&&(a=e.zDepth(),s=t.zDepth());var f=a-s,p=0===f;return p?l&&d?1:c&&h?-1:0===o?r.index-i.index:o:f};t.exports=r},{}],30:[function(e,t,n){"use strict";var r=e("../is"),i=e("../util"),o=e("../collection"),a=e("../collection/element"),s=e("../window"),u=(s?s.document:null,e("../extensions/renderer/null"),{add:function(e){var t,n=this;if(r.elementOrCollection(e)){var s=e;if(s._private.cy===n)t=s.restore();else{for(var u=[],l=0;l<s.length;l++){var c=s[l];u.push(c.json())}t=new o(n,u)}}else if(r.array(e)){var u=e;t=new o(n,u)}else if(r.plainObject(e)&&(r.array(e.nodes)||r.array(e.edges))){for(var h=e,u=[],d=["nodes","edges"],l=0,f=d.length;f>l;l++){var p=d[l],v=h[p];if(r.array(v))for(var g=0,y=v.length;y>g;g++){var m=i.extend({group:p},v[g]);u.push(m)}}t=new o(n,u)}else{var m=e;t=new a(n,m).collection()}return t},remove:function(e){if(r.elementOrCollection(e))e=e;else if(r.string(e)){var t=e;e=this.$(t)}return e.remove()},load:function(e,t,n){var o=this;o.notifications(!1);var a=o.elements();a.length>0&&a.remove(),null!=e&&(r.plainObject(e)||r.array(e))&&o.add(e),o.one("layoutready",function(e){o.notifications(!0),o.trigger(e),o.notify({type:"load",collection:o.elements()}),o.one("load",t),o.trigger("load")}).one("layoutstop",function(){o.one("done",n),o.trigger("done")});var s=i.extend({},o._private.options.layout);return s.eles=o.$(),o.layout(s),this}});t.exports=u},{"../collection":23,"../collection/element":19,"../extensions/renderer/null":73,"../is":77,"../util":94,"../window":100}],31:[function(e,t,n){"use strict";var r=e("../define"),i=e("../util"),o=e("../is"),a={animate:r.animate(),animation:r.animation(),animated:r.animated(),clearQueue:r.clearQueue(),delay:r.delay(),delayAnimation:r.delayAnimation(),stop:r.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){function e(){c._private.animationsRunning&&i.requestAnimationFrame(function(n){t(n),e()})}function t(e){function t(t,i){var a=t._private,s=a.animation.current,u=a.animation.queue,l=!1;if(0===s.length){var c=u.shift();c&&s.push(c)}for(var h=function(e){for(var t=e.length-1;t>=0;t--){var n=e[t];n()}e.splice(0,e.length)},d=s.length-1;d>=0;d--){var f=s[d],p=f._private;p.stopped?(s.splice(d,1),p.hooked=!1,p.playing=!1,p.started=!1,h(p.frames)):(p.playing||p.applying)&&(p.playing&&p.applying&&(p.applying=!1),p.started||n(t,f,e),r(t,f,e,i),p.applying&&(p.applying=!1),h(p.frames),f.completed()&&(s.splice(d,1),p.hooked=!1,p.playing=!1,p.started=!1,h(p.completes)),l=!0)}return i||0!==s.length||0!==u.length||o.push(t),l}for(var i=c._private.aniEles,o=[],a=!1,s=0;s<i.length;s++){var u=i[s],l=t(u);a=a||l}var h=t(c,!0);if(a||h){var d;if(i.length>0){var f=i.updateCompoundBounds();d=f.length>0?i.add(f):i}c.notify({type:"draw",collection:d})}i.unmerge(o)}function n(e,t,n){var r=o.core(e),i=!r,a=e,s=c._private.style,u=t._private;if(i){var l=a._private.position;u.startPosition=u.startPosition||{x:l.x,y:l.y},u.startStyle=u.startStyle||s.getValueStyle(a)}if(r){var h=c._private.pan;u.startPan=u.startPan||{x:h.x,y:h.y},u.startZoom=null!=u.startZoom?u.startZoom:c._private.zoom}u.started=!0,u.startTime=n-u.progress*u.duration}function r(e,t,n,r){var i=c._private.style,s=!r,u=e._private,h=t._private,f=h.easing,p=h.startTime;if(!h.easingImpl)if(null==f)h.easingImpl=d.linear;else{var v;if(o.string(f)){var g=i.parse("transition-timing-function",f);v=g.value}else v=f;var y,m;o.string(v)?(y=v,m=[]):(y=v[1],m=v.slice(2).map(function(e){return+e})),m.length>0?("spring"===y&&m.push(h.duration),h.easingImpl=d[y].apply(null,m)):h.easingImpl=d[y]}var b,x=h.easingImpl;if(b=0===h.duration?1:(n-p)/h.duration,h.applying&&(b=h.progress),0>b?b=0:b>1&&(b=1),null==h.delay){var w=h.startPosition,_=h.position,E=u.position;_&&s&&(a(w.x,_.x)&&(E.x=l(w.x,_.x,b,x)),a(w.y,_.y)&&(E.y=l(w.y,_.y,b,x)));var k=h.startPan,S=h.pan,N=u.pan,T=null!=S&&r;T&&(a(k.x,S.x)&&(N.x=l(k.x,S.x,b,x)),a(k.y,S.y)&&(N.y=l(k.y,S.y,b,x)),e.trigger("pan"));var D=h.startZoom,P=h.zoom,C=null!=P&&r;C&&(a(D,P)&&(u.zoom=l(D,P,b,x)),e.trigger("zoom")),(T||C)&&e.trigger("viewport");var M=h.style;if(M&&s)for(var A=0;A<M.length;A++){var I=M[A],y=I.name,L=I,O=h.startStyle[y],j=l(O,L,b,x);i.overrideBypass(e,y,j)}}return o.fn(h.step)&&h.step.apply(e,[n]),h.progress=b,b}function a(e,t){return null==e||null==t?!1:o.number(e)&&o.number(t)?!0:e&&t?!0:!1}function s(e,t,n){var r=1-n,i=n*n;return 3*r*r*n*e+3*r*i*t+i*n}function u(e,t){return function(n,r,i){return n+(r-n)*s(e,t,i)}}function l(e,t,n,r){0>n?n=0:n>1&&(n=1);var i,a;if(i=null!=e.pfValue||null!=e.value?null!=e.pfValue?e.pfValue:e.value:e,a=null!=t.pfValue||null!=t.value?null!=t.pfValue?t.pfValue:t.value:t,o.number(i)&&o.number(a))return r(i,a,n);if(o.array(i)&&o.array(a)){for(var s=[],u=0;u<a.length;u++){var l=i[u],c=a[u];if(null!=l&&null!=c){var h=r(l,c,n);e.roundValue&&(h=Math.round(h)),s.push(h)}else s.push(c)}return s}return void 0}var c=this;if(c._private.animationsRunning=!0,c.styleEnabled()){e();var h=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,n,r){var i={x:t.x+r.dx*n,v:t.v+r.dv*n,tension:t.tension,friction:t.friction};return{dx:i.v,dv:e(i)}}function n(n,r){var i={dx:n.v,dv:e(n)},o=t(n,.5*r,i),a=t(n,.5*r,o),s=t(n,r,a),u=1/6*(i.dx+2*(o.dx+a.dx)+s.dx),l=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+u*r,n.v=n.v+l*r,n}return function r(e,t,i){var o,a,s,u={x:-1,v:0,tension:null,friction:null},l=[0],c=0,h=1e-4,d=.016;for(e=parseFloat(e)||500,t=parseFloat(t)||20,i=i||null,u.tension=e,u.friction=t,o=null!==i,o?(c=r(e,t),a=c/i*d):a=d;;)if(s=n(s||u,a),l.push(1+s.x),c+=16,!(Math.abs(s.x)>h&&Math.abs(s.v)>h))break;return o?function(e){return l[e*(l.length-1)|0]}:c}}(),d={linear:function(e,t,n){return e+(t-e)*n},ease:u(.25,.1,.25,1),"ease-in":u(.42,0,1,1),"ease-out":u(0,0,.58,1),"ease-in-out":u(.42,0,.58,1),"ease-in-sine":u(.47,0,.745,.715),"ease-out-sine":u(.39,.575,.565,1),"ease-in-out-sine":u(.445,.05,.55,.95),"ease-in-quad":u(.55,.085,.68,.53),"ease-out-quad":u(.25,.46,.45,.94),"ease-in-out-quad":u(.455,.03,.515,.955),"ease-in-cubic":u(.55,.055,.675,.19),"ease-out-cubic":u(.215,.61,.355,1),"ease-in-out-cubic":u(.645,.045,.355,1),"ease-in-quart":u(.895,.03,.685,.22),"ease-out-quart":u(.165,.84,.44,1),"ease-in-out-quart":u(.77,0,.175,1),"ease-in-quint":u(.755,.05,.855,.06),"ease-out-quint":u(.23,1,.32,1),"ease-in-out-quint":u(.86,0,.07,1),"ease-in-expo":u(.95,.05,.795,.035),"ease-out-expo":u(.19,1,.22,1),"ease-in-out-expo":u(1,0,0,1),"ease-in-circ":u(.6,.04,.98,.335),"ease-out-circ":u(.075,.82,.165,1),"ease-in-out-circ":u(.785,.135,.15,.86),spring:function(e,t,n){var r=h(e,t,n);return function(e,t,n){return e+(t-e)*r(n)}},"cubic-bezier":function(e,t,n,r){return u(e,t,n,r)}}}}};t.exports=a},{"../define":41,"../is":77,"../util":94}],32:[function(e,t,n){"use strict";var r=e("../define"),i={on:r.on(),one:r.on({unbindSelfOnTrigger:!0}),once:r.on({unbindAllBindersOnTrigger:!0}),off:r.off(),trigger:r.trigger()};r.eventAliasesOn(i),t.exports=i},{"../define":41}],33:[function(e,t,n){"use strict";var r={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};r.jpeg=r.jpg,t.exports=r},{}],34:[function(e,t,n){"use strict";var r=e("../window"),i=e("../util"),o=e("../collection"),a=e("../is"),s=e("../promise"),u=e("../define"),l=function(e){if(!(this instanceof l))return new l(e);var t=this;e=i.extend({},e);var n=e.container;n&&!a.htmlElement(n)&&a.htmlElement(n[0])&&(n=n[0]);var u=n?n._cyreg:null;u=u||{},u&&u.cy&&(u.cy.destroy(),u={});var c=u.readies=u.readies||[];n&&(n._cyreg=u),u.cy=t;var h=void 0!==r&&void 0!==n&&!e.headless,d=e;d.layout=i.extend({name:h?"grid":"null"},d.layout),d.renderer=i.extend({name:h?"canvas":"null"},d.renderer);var f=function(e,t,n){return void 0!==t?t:void 0!==n?n:e},p=this._private={container:n,ready:!1,initrender:!1,options:d,elements:[],id2index:{},listeners:[],onRenders:[],aniEles:o(this),scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:f(!0,d.zoomingEnabled),userZoomingEnabled:f(!0,d.userZoomingEnabled),panningEnabled:f(!0,d.panningEnabled),userPanningEnabled:f(!0,d.userPanningEnabled),boxSelectionEnabled:f(!0,d.boxSelectionEnabled),autolock:f(!1,d.autolock,d.autolockNodes),autoungrabify:f(!1,d.autoungrabify,d.autoungrabifyNodes),autounselectify:f(!1,d.autounselectify),styleEnabled:void 0===d.styleEnabled?h:d.styleEnabled,zoom:a.number(d.zoom)?d.zoom:1,pan:{x:a.plainObject(d.pan)&&a.number(d.pan.x)?d.pan.x:0,y:a.plainObject(d.pan)&&a.number(d.pan.y)?d.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,deferredExecQueue:[]},v=d.selectionType;p.selectionType=void 0===v||"additive"!==v&&"single"!==v?"single":v,a.number(d.minZoom)&&a.number(d.maxZoom)&&d.minZoom<d.maxZoom?(p.minZoom=d.minZoom,p.maxZoom=d.maxZoom):a.number(d.minZoom)&&void 0===d.maxZoom?p.minZoom=d.minZoom:a.number(d.maxZoom)&&void 0===d.minZoom&&(p.maxZoom=d.maxZoom);var g=function(e){for(var t=!1,n=0;n<y.length;n++){var r=y[n];if(a.promise(r)){t=!0;break}}return t?s.all(y).then(e):void e(y)};t.initRenderer(i.extend({hideEdgesOnViewport:d.hideEdgesOnViewport,hideLabelsOnViewport:d.hideLabelsOnViewport,textureOnViewport:d.textureOnViewport,wheelSensitivity:a.number(d.wheelSensitivity)&&d.wheelSensitivity>0?d.wheelSensitivity:1,motionBlur:void 0===d.motionBlur?!0:d.motionBlur,motionBlurOpacity:void 0===d.motionBlurOpacity?.05:d.motionBlurOpacity,pixelRatio:a.number(d.pixelRatio)&&d.pixelRatio>0?d.pixelRatio:void 0,desktopTapThreshold:void 0===d.desktopTapThreshold?4:d.desktopTapThreshold,touchTapThreshold:void 0===d.touchTapThreshold?8:d.touchTapThreshold},d.renderer));var y=[d.style,d.elements];g(function(e){var n=e[0],r=e[1];p.styleEnabled&&t.setStyle(n),d.initrender&&(t.on("initrender",d.initrender),t.on("initrender",function(){p.initrender=!0})),t.load(r,function(){t.startAnimationLoop(),p.ready=!0,a.fn(d.ready)&&t.on("ready",d.ready);for(var e=0;e<c.length;e++){var n=c[e];t.on("ready",n)}u&&(u.readies=[]),t.trigger("ready")},d.done)})},c=l.prototype;i.extend(c,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},ready:function(e){return this.isReady()?this.trigger("ready",[],e):this.on("ready",e),this},initrender:function(){return this._private.initrender},destroy:function(){var e=this;e.stopAnimationLoop(),e.notify({type:"destroy"});var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);return e},getElementById:function(e){var t=this._private.id2index[e];return void 0!==t?this._private.elements[t]:o(this)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){for(var t=this._private.elements,n=this._private.id2index,r=0;r<e.length;r++){var i=e[r],o=i._private.data.id,a=n[o],s=void 0!==a;s||(a=t.length,t.push(i),n[o]=a,i._private.index=a)}return this},removeFromPool:function(e){for(var t=this._private.elements,n=this._private.id2index,r=0;r<e.length;r++){var i=e[r],o=i._private.data.id,a=n[o],s=void 0!==a;if(s){this._private.id2index[o]=void 0,t.splice(a,1);for(var u=a;u<t.length;u++){var l=t[u]._private.data.id;n[l]--,t[u]._private.index--}}}},container:function(){return this._private.container},options:function(){return i.copy(this._private.options)},json:function(e){var t=this,n=t._private;if(a.plainObject(e)){if(t.startBatch(),e.elements){var r={},o=function(e,n){for(var o=0;o<e.length;o++){var a=e[o],s=a.data.id,u=t.getElementById(s);r[s]=!0,0!==u.length?u.json(a):t.add(n?i.extend({group:n},a):a)}};if(a.array(e.elements))o(e.elements);else for(var s=["nodes","edges"],u=0;u<s.length;u++){var l=s[u],c=e.elements[l];a.array(c)&&o(c,l)}t.elements().stdFilter(function(e){return!r[e.id()]}).remove()}e.style&&t.style(e.style),null!=e.zoom&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],u=0;u<h.length;u++){var d=h[u];null!=e[d]&&t[d](e[d])}return t.endBatch(),this}if(void 0===e){var f={};return f.elements={},t.elements().each(function(e,t){var n=t.group();f.elements[n]||(f.elements[n]=[]),f.elements[n].push(t.json())}),this._private.styleEnabled&&(f.style=t.style().json()),f.zoomingEnabled=t._private.zoomingEnabled,f.userZoomingEnabled=t._private.userZoomingEnabled,f.zoom=t._private.zoom,f.minZoom=t._private.minZoom,f.maxZoom=t._private.maxZoom,f.panningEnabled=t._private.panningEnabled,f.userPanningEnabled=t._private.userPanningEnabled,f.pan=i.copy(t._private.pan),f.boxSelectionEnabled=t._private.boxSelectionEnabled,f.renderer=i.copy(t._private.options.renderer),f.hideEdgesOnViewport=t._private.options.hideEdgesOnViewport,f.hideLabelsOnViewport=t._private.options.hideLabelsOnViewport,f.textureOnViewport=t._private.options.textureOnViewport,f.wheelSensitivity=t._private.options.wheelSensitivity,f.motionBlur=t._private.options.motionBlur,f}},scratch:u.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:u.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})}),[e("./add-remove"),e("./animation"),e("./events"),e("./export"),e("./layout"),e("./notification"),e("./renderer"),e("./search"),e("./style"),e("./viewport")].forEach(function(e){i.extend(c,e)}),t.exports=l},{"../collection":23,"../define":41,"../is":77,"../promise":80,"../util":94,"../window":100,"./add-remove":30,"./animation":31,"./events":32,"./export":33,"./layout":35,"./notification":36,"./renderer":37,"./search":38,"./style":39,"./viewport":40}],35:[function(e,t,n){"use strict";var r=e("../util"),i=e("../is"),o={layout:function(e){var t=this._private.prevLayout=null==e?this._private.prevLayout:this.makeLayout(e);return t.run(),this},makeLayout:function(e){var t=this;if(null==e)return void r.error("Layout options must be specified to make a layout");if(null==e.name)return void r.error("A `name` must be specified to make a layout");var n=e.name,o=t.extension("layout",n);if(null==o)return void r.error("Can not apply layout: No such layout `"+n+"` found; did you include its JS file?");var a;a=i.string(e.eles)?t.$(e.eles):null!=e.eles?e.eles:t.$();var s=new o(r.extend({},e,{cy:t,eles:a}));return s}};o.createLayout=o.makeLayout,t.exports=o},{"../is":77,"../util":94}],36:[function(e,t,n){"use strict";var r={notify:function(e){var t=this._private;if(t.batchingNotify){var n=t.batchNotifyEles,r=t.batchNotifyTypes;return e.collection&&n.merge(e.collection),void(r.ids[e.type]||r.push(e.type))}if(t.notificationsEnabled){var i=this.renderer();i.notify(e)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:void(t.notificationsEnabled=e?!0:!1)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},startBatch:function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchingStyle=e.batchingNotify=!0,e.batchStyleEles=this.collection(),e.batchNotifyEles=this.collection(),e.batchNotifyTypes=[],e.batchNotifyTypes.ids={}),e.batchCount++,this},endBatch:function(){var e=this._private;return e.batchCount--,0===e.batchCount&&(e.batchingStyle=!1,e.batchStyleEles.updateStyle(),e.batchingNotify=!1,this.notify({type:e.batchNotifyTypes,collection:e.batchNotifyEles})),this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n in e){var r=e[n],i=t.getElementById(n);i.data(r)}})}};t.exports=r},{}],37:[function(e,t,n){"use strict";var r=e("../util"),i={renderTo:function(e,t,n,r){var i=this._private.renderer;return i.renderTo(e,t,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},resize:function(){return this.notify({type:"resize"}),this.trigger("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(null==n)return void r.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",e.name);var i=r.extend({},e,{cy:t}),o=t._private.renderer=new n(i);o.init(i)},triggerOnRender:function(){for(var e=this._private.onRenders,t=0;t<e.length;t++){var n=e[t];n()}return this},onRender:function(e){return this._private.onRenders.push(e),this},offRender:function(e){var t=this._private.onRenders;if(null==e)return this._private.onRenders=[],this;for(var n=0;n<t.length;n++){var r=t[n];if(e===r){t.splice(n,1);break}}return this}};i.invalidateDimensions=i.resize,t.exports=i},{"../util":94}],38:[function(e,t,n){"use strict";var r=e("../is"),i=e("../collection"),o={collection:function(e,t){return r.string(e)?this.$(e):r.elementOrCollection(e)?e.collection():r.array(e)?i(this,e,t):i(this)},nodes:function(e){var t=this.$(function(){return this.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(){return this.isEdge()});return e?t.filter(e):t},$:function(e){var t=new i(this,this._private.elements);return e?t.filter(e):t}};o.elements=o.filter=o.$,t.exports=o},{"../collection":23,"../is":77}],39:[function(e,t,n){"use strict";var r=e("../is"),i=e("../style"),o={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return t.style=r.stylesheet(e)?e.generateStyle(this):r.array(e)?i.fromJson(this,e):r.string(e)?i.fromString(this,e):i(this),t.style}};t.exports=o},{"../is":77,"../style":86}],40:[function(e,t,n){"use strict";var r=e("../is"),i={autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=e?!0:!1,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=e?!0:!1,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=e?!0:!1,this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=e?!0:!1,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=e?!0:!1,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=e?!0:!1,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=e?!0:!1,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=e?!0:!1,this)},pan:function(){var e,t,n,i,o,a=arguments,s=this._private.pan;switch(a.length){case 0:return s;case 1:if(r.string(a[0]))return e=a[0],s[e];if(r.plainObject(a[0])){if(!this._private.panningEnabled)return this;n=a[0],i=n.x,o=n.y,r.number(i)&&(s.x=i),r.number(o)&&(s.y=o),this.trigger("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;e=a[0],t=a[1],"x"!==e&&"y"!==e||!r.number(t)||(s[e]=t),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},panBy:function(e){var t,n,i,o,a,s=arguments,u=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:r.plainObject(s[0])&&(i=s[0],o=i.x,a=i.y,r.number(o)&&(u.x+=o),r.number(a)&&(u.y+=a),this.trigger("pan viewport"));break;case 2:t=s[0],n=s[1],"x"!==t&&"y"!==t||!r.number(n)||(u[t]+=n),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.trigger("pan zoom viewport"),this.notify({type:"viewport"})}return this},getFitViewport:function(e,t){if(r.number(e)&&void 0===t&&(t=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var n;if(r.string(e)){var i=e;e=this.$(i)}else if(r.boundingBox(e)){var o=e;n={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else r.elementOrCollection(e)||(e=this.elements());n=n||e.boundingBox();var a,s=this.width(),u=this.height();if(t=r.number(t)?t:0,!isNaN(s)&&!isNaN(u)&&s>0&&u>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){a=Math.min((s-2*t)/n.w,(u-2*t)/n.h),a=a>this._private.maxZoom?this._private.maxZoom:a,a=a<this._private.minZoom?this._private.minZoom:a;var l={x:(s-a*(n.x1+n.x2))/2,y:(u-a*(n.y1+n.y2))/2};return{zoom:a,pan:l}}}},minZoom:function(e){return void 0===e?this._private.minZoom:(r.number(e)&&(this._private.minZoom=e),this)},maxZoom:function(e){return void 0===e?this._private.maxZoom:(r.number(e)&&(this._private.maxZoom=e),this)},zoom:function(e){var t,n;if(void 0===e)return this._private.zoom;if(r.number(e))n=e;else if(r.plainObject(e)){if(n=e.level,e.position){var i=e.position,o=this._private.pan,a=this._private.zoom;t={x:i.x*a+o.x,y:i.y*a+o.y}}else e.renderedPosition&&(t=e.renderedPosition);if(t&&!this._private.panningEnabled)return this}if(!this._private.zoomingEnabled)return this;if(!r.number(n)||t&&(!r.number(t.x)||!r.number(t.y)))return this;if(n=n>this._private.maxZoom?this._private.maxZoom:n,n=n<this._private.minZoom?this._private.minZoom:n,t){var s=this._private.pan,u=this._private.zoom,l=n,c={x:-l/u*(t.x-s.x)+t.x,y:-l/u*(t.y-s.y)+t.y};this._private.zoom=n,this._private.pan=c;var h=s.x!==c.x||s.y!==c.y;this.trigger(" zoom "+(h?" pan ":"")+" viewport ")}else this._private.zoom=n,this.trigger("zoom viewport");return this.notify({type:"viewport"}),this},viewport:function(e){var t=this._private,n=!0,i=!0,o=[],a=!1,s=!1;if(!e)return this;if(r.number(e.zoom)||(n=!1),r.plainObject(e.pan)||(i=!1),!n&&!i)return this;if(n){var u=e.zoom;u<t.minZoom||u>t.maxZoom||!t.zoomingEnabled?a=!0:(t.zoom=u,o.push("zoom"))}if(i&&(!a||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;r.number(l.x)&&(t.pan.x=l.x,s=!1),r.number(l.y)&&(t.pan.y=l.y,s=!1),s||o.push("pan")}return o.length>0&&(o.push("viewport"),this.trigger(o.join(" ")),this.notify({type:"viewport"})),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.trigger("pan viewport"),this.notify({type:"viewport"})),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(r.string(e)){var n=e;e=this.elements(n)}else r.elementOrCollection(e)||(e=this.elements());var i=e.boundingBox(),o=this.width(),a=this.height();t=void 0===t?this._private.zoom:t;var s={x:(o-t*(i.x1+i.x2))/2,y:(a-t*(i.y1+i.y2))/2};return s}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},width:function(){var e=this._private.container;return e?e.clientWidth:1},height:function(){var e=this._private.container;return e?e.clientHeight:1},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}}};i.centre=i.center,i.autolockNodes=i.autolock,i.autoungrabifyNodes=i.autoungrabify,t.exports=i},{"../is":77}],41:[function(e,t,n){"use strict";var r=e("./util"),i=e("./is"),o=e("./selector"),a=e("./promise"),s=e("./event"),u=e("./animation"),l={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,onSet:function(e){},canSet:function(e){return!0}};return e=r.extend({},t,e),function(t,n){var r=e,o=this,a=void 0!==o.length,s=a?o:[o],u=a?o[0]:o;if(i.string(t)){if(r.allowGetting&&void 0===n){var l;return u&&(l=u._private[r.field][t]),l}if(r.allowSetting&&void 0!==n){var c=!r.immutableKeys[t];if(c){for(var h=0,d=s.length;d>h;h++)r.canSet(s[h])&&(s[h]._private[r.field][t]=n);r.updateStyle&&o.updateStyle(),r.onSet(o),r.settingTriggersEvent&&o[r.triggerFnName](r.settingEvent)}}}else if(r.allowSetting&&i.plainObject(t)){var f,p,v=t;for(f in v){p=v[f];var c=!r.immutableKeys[f];if(c)for(var h=0,d=s.length;d>h;h++)r.canSet(s[h])&&(s[h]._private[r.field][f]=p)}r.updateStyle&&o.updateStyle(),r.onSet(o),r.settingTriggersEvent&&o[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&i.fn(t)){var g=t;o.bind(r.bindingEvent,g)}else if(r.allowGetting&&void 0===t){var l;return u&&(l=u._private[r.field]),l}return o}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=r.extend({},t,e),function(t){var n=e,r=this,o=void 0!==r.length,a=o?r:[r];if(i.string(t)){for(var s=t.split(/\s+/),u=s.length,l=0;u>l;l++){var c=s[l];if(!i.emptyString(c)){var h=!n.immutableKeys[c];if(h)for(var d=0,f=a.length;f>d;d++)a[d]._private[n.field][c]=void 0}}n.triggerEvent&&r[n.triggerFnName](n.event)}else if(void 0===t){for(var d=0,f=a.length;f>d;d++){var p=a[d]._private[n.field];for(var c in p){var v=!n.immutableKeys[c];v&&(p[c]=void 0)}}n.triggerEvent&&r[n.triggerFnName](n.event)}return r}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,falseCallback:function(){return!1}},on:function(e){var t={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};return e=r.extend({},t,e),function(t,n,r,a){var s=this,u=void 0!==s.length,c=u?s:[s],h=i.string(t),d=e;if(i.plainObject(n)?(a=r,r=n,n=void 0):(i.fn(n)||n===!1)&&(a=n,r=void 0,n=void 0),(i.fn(r)||r===!1)&&(a=r,r=void 0),!i.fn(a)&&a!==!1&&h)return s;if(h){var f={};f[t]=a,t=f}for(var p in t)if(a=t[p],a===!1&&(a=l.event.falseCallback),i.fn(a)){p=p.split(/\s+/);for(var v=0;v<p.length;v++){var g=p[v];if(!i.emptyString(g)){var y=g.match(l.event.regex);if(y)for(var m=y[1],b=y[2]?y[2]:void 0,x={
callback:a,data:r,delegated:n?!0:!1,selector:n,selObj:new o(n),type:m,namespace:b,unbindSelfOnTrigger:d.unbindSelfOnTrigger,unbindAllBindersOnTrigger:d.unbindAllBindersOnTrigger,binders:c},w=0;w<c.length;w++){var _=c[w]._private;_.listeners=_.listeners||[],_.listeners.push(x)}}}}return s}},eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.removeListener=t.unlisten=t.unbind=t.off,t.emit=t.trigger,t.pon=t.promiseOn=function(e,t){var n=this,r=Array.prototype.slice.call(arguments,0);return new a(function(e,t){var i=function(t){n.off.apply(n,a),e(t)},o=r.concat([i]),a=o.concat([]);n.on.apply(n,o)})}},off:function(e){var t={};return e=r.extend({},t,e),function(e,t,n){var r=this,o=void 0!==r.length,a=o?r:[r],s=i.string(e);if(0===arguments.length){for(var u=0;u<a.length;u++)a[u]._private.listeners=[];return r}if((i.fn(t)||t===!1)&&(n=t,t=void 0),s){var c={};c[e]=n,e=c}for(var h in e){n=e[h],n===!1&&(n=l.event.falseCallback),h=h.split(/\s+/);for(var d=0;d<h.length;d++){var f=h[d];if(!i.emptyString(f)){var p=f.match(l.event.optionalTypeRegex);if(p)for(var v=p[1]?p[1]:void 0,g=p[2]?p[2]:void 0,u=0;u<a.length;u++)for(var y=a[u]._private.listeners=a[u]._private.listeners||[],m=0;m<y.length;m++){var b=y[m],x=!g||g===b.namespace,w=!v||b.type===v,_=!n||n===b.callback,E=x&&w&&_;E&&(y.splice(m,1),m--)}}}}return r}},trigger:function(e){var t={};return e=r.extend({},t,e),function(t,n,r){var o=this,a=void 0!==o.length,u=a?o:[o],c=i.string(t),h=i.plainObject(t),d=i.event(t),f=this._private.cy||(i.core(this)?this:null),p=f?f.hasCompoundNodes():!1;if(c){var v=t.split(/\s+/);t=[];for(var g=0;g<v.length;g++){var y=v[g];if(!i.emptyString(y)){var m=y.match(l.event.regex),b=m[1],x=m[2]?m[2]:void 0;t.push({type:b,namespace:x})}}}else if(h){var w=t;t=[w]}n?i.array(n)||(n=[n]):n=[];for(var g=0;g<t.length;g++)for(var _=t[g],E=0;E<u.length;E++){var y,k=u[E],S=k._private.listeners=k._private.listeners||[],N=i.element(k),T=N||e.layout;if(d?(y=_,y.cyTarget=y.cyTarget||k,y.cy=y.cy||f):y=new s(_,{cyTarget:k,cy:f,namespace:_.namespace}),_.layout&&(y.layout=_.layout),e.layout&&(y.layout=k),y.cyPosition){var D=y.cyPosition,P=f.zoom(),C=f.pan();y.cyRenderedPosition={x:D.x*P+C.x,y:D.y*P+C.y}}r&&(S=[{namespace:y.namespace,type:y.type,callback:r}]);for(var M=0;M<S.length;M++){var A=S[M],I=!A.namespace||A.namespace===y.namespace,L=A.type===y.type,O=A.delegated?k!==y.cyTarget&&i.element(y.cyTarget)&&A.selObj.matches(y.cyTarget):!0,j=I&&L&&O;if(j){var B=[y];if(B=B.concat(n),y.data=A.data?A.data:void 0,(A.unbindSelfOnTrigger||A.unbindAllBindersOnTrigger)&&(S.splice(M,1),M--),A.unbindAllBindersOnTrigger)for(var R=A.binders,z=0;z<R.length;z++){var F=R[z];if(F&&F!==k)for(var V=F._private.listeners,q=0;q<V.length;q++){var X=V[q];X===A&&(V.splice(q,1),q--)}}var Y=A.delegated?y.cyTarget:k,$=A.callback.apply(Y,B);($===!1||y.isPropagationStopped())&&(T=!1,$===!1&&(y.stopPropagation(),y.preventDefault()))}}if(T){var G=p?k._private.parent:null,W=null!=G&&0!==G.length;W?(G=G[0],G.trigger(y)):f.trigger(y)}}return o}},animated:function(e){var t={};return e=r.extend({},t,e),function(){var e=this,t=void 0!==e.length,n=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return!1;var i=n[0];return i?i._private.animation.current.length>0:void 0}},clearQueue:function(e){var t={};return e=r.extend({},t,e),function(){var e=this,t=void 0!==e.length,n=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){var o=n[i];o._private.animation.queue=[]}return this}},delay:function(e){var t={};return e=r.extend({},t,e),function(e,t){var n=this._private.cy||this;return n.styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}},delayAnimation:function(e){var t={};return e=r.extend({},t,e),function(e,t){var n=this._private.cy||this;return n.styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}},animation:function(e){var t={};return e=r.extend({},t,e),function(e,t){var n=this,i=void 0!==n.length,o=i?n:[n],a=this._private.cy||this,s=!i,l=!s;if(!a.styleEnabled())return this;var c=a.style();switch(e=r.extend({},e,t),void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}var h=!0;if(e)for(var d in e){h=!1;break}if(h)return new u(o[0],e);if(l&&(e.style=c.getPropsList(e.style||e.css),e.css=void 0),e.renderedPosition&&l){var f=e.renderedPosition,p=a.pan(),v=a.zoom();e.position={x:(f.x-p.x)/v,y:(f.y-p.y)/v}}if(e.panBy&&s){var g=e.panBy,y=a.pan();e.pan={x:y.x+g.x,y:y.y+g.y}}var m=e.center||e.centre;if(m&&s){var b=a.getCenterPan(m.eles,e.zoom);b&&(e.pan=b)}if(e.fit&&s){var x=e.fit,w=a.getFitViewport(x.eles||x.boundingBox,x.padding);w&&(e.pan=w.pan,e.zoom=w.zoom)}return new u(o[0],e)}},animate:function(e){var t={};return e=r.extend({},t,e),function(e,t){var n=this,i=void 0!==n.length,o=i?n:[n],a=this._private.cy||this;if(!a.styleEnabled())return this;t&&(e=r.extend({},e,t));for(var s=0;s<o.length;s++){var u=o[s],l=u.animated()&&(void 0===e.queue||e.queue),c=u.animation(e,l?{queue:!0}:void 0);c.play()}return this}},stop:function(e){var t={};return e=r.extend({},t,e),function(e,t){var n=this,r=void 0!==n.length,i=r?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var a=0;a<i.length;a++){for(var s=i[a],u=s._private,l=u.animation.current,c=0;c<l.length;c++){var h=l[c],d=h._private;t&&(d.duration=0)}e&&(u.animation.queue=[]),t||(u.animation.current=[])}return o.notify({collection:this,type:"draw"}),this}}};t.exports=l},{"./animation":1,"./event":42,"./is":77,"./promise":80,"./selector":81,"./util":94}],42:[function(e,t,n){"use strict";function r(){return!1}function i(){return!0}var o=function(e,t){return this instanceof o?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?i:r):this.type=e,t&&(this.type=void 0!==t.type?t.type:this.type,this.cy=t.cy,this.cyTarget=t.cyTarget,this.cyPosition=t.cyPosition,this.cyRenderedPosition=t.cyRenderedPosition,this.namespace=t.namespace,this.layout=t.layout,this.data=t.data,this.message=t.message),void(this.timeStamp=e&&e.timeStamp||Date.now())):new o(e,t)};o.prototype={instanceString:function(){return"event"},preventDefault:function(){this.isDefaultPrevented=i;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=i;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()},isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r},t.exports=o},{}],43:[function(e,t,n){"use strict";function r(e,t,n){var r=n;if("core"===e)c.prototype[t]=n;else if("collection"===e)l.prototype[t]=n;else if("layout"===e){for(var o=function(e){this.options=e,n.call(this,e),d.plainObject(this._private)||(this._private={}),this._private.cy=e.cy,this._private.listeners=[]},a=o.prototype=Object.create(n.prototype),h=[],p=0;p<h.length;p++){var v=h[p];a[v]=a[v]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this}),a.stop||(a.stop=function(){var e=this.options;if(e&&e.animate)for(var t=this.animations,n=0;n<t.length;n++)t[n].stop();return this.trigger("layoutstop"),this}),a.destroy||(a.destroy=function(){return this}),a.on=u.on({layout:!0}),a.one=u.on({layout:!0,unbindSelfOnTrigger:!0}),a.once=u.on({layout:!0,unbindAllBindersOnTrigger:!0}),a.off=u.off({layout:!0}),a.trigger=u.trigger({layout:!0}),u.eventAliasesOn(a),r=o}else if("renderer"===e&&"null"!==t&&"base"!==t){var g=i("renderer","base").prototype,y=n.prototype;for(var m in g){var b=g[m],x=null!=y[m];if(x)return void s.error("Can not register renderer `"+t+"` since it overrides `"+m+"` in its prototype");y[m]=b}g.clientFunctions.forEach(function(e){y[e]=y[e]||function(){s.error("Renderer does not implement `renderer."+e+"()` on its prototype")}})}return s.setMap({map:f,keys:[e,t],value:r})}function i(e,t){return s.getMap({map:f,keys:[e,t]})}function o(e,t,n,r,i){return s.setMap({map:p,keys:[e,t,n,r],value:i})}function a(e,t,n,r){return s.getMap({map:p,keys:[e,t,n,r]})}var s=e("./util"),u=e("./define"),l=e("./collection"),c=e("./core"),h=e("./extensions"),d=e("./is"),f={},p={},v=function(){return 2===arguments.length?i.apply(null,arguments):3===arguments.length?r.apply(null,arguments):4===arguments.length?a.apply(null,arguments):5===arguments.length?o.apply(null,arguments):void s.error("Invalid extension access syntax")};c.prototype.extension=v,h.forEach(function(e){e.extensions.forEach(function(t){r(e.type,t.name,t.impl)})}),t.exports=v},{"./collection":23,"./core":34,"./define":41,"./extensions":44,"./is":77,"./util":94}],44:[function(e,t,n){"use strict";t.exports=[{type:"layout",extensions:e("./layout")},{type:"renderer",extensions:e("./renderer")}]},{"./layout":50,"./renderer":72}],45:[function(e,t,n){"use strict";function r(e){this.options=i.extend({},s,e)}var i=e("../../util"),o=e("../../math"),a=e("../../is"),s={fit:!0,directed:!1,padding:30,circle:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,roots:void 0,maximalAdjustments:0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var e,t=this.options,n=t,r=t.cy,i=n.eles,s=i.nodes().not(":parent"),u=i,l=o.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(a.elementOrCollection(n.roots))e=n.roots;else if(a.array(n.roots)){for(var c=[],h=0;h<n.roots.length;h++){var d=n.roots[h],f=r.getElementById(d);c.push(f)}e=r.collection(c)}else if(a.string(n.roots))e=r.$(n.roots);else if(n.directed)e=s.roots();else{for(var p=[],v=s;v.length>0;){var g=r.collection();i.bfs({roots:v[0],visit:function(e,t,n,r,i){g=g.add(n)},directed:!1}),v=v.not(g),p.push(g)}e=r.collection();for(var h=0;h<p.length;h++){var y=p[h],m=y.maxDegree(!1),b=y.filter(function(){return this.degree(!1)===m});e=e.add(b)}}var x=[],w={},_={},E={},k={},S={};u.bfs({roots:e,directed:n.directed,visit:function(e,t,n,r,i){var o=this[0],a=o.id();if(x[t]||(x[t]=[]),x[t].push(o),w[a]=!0,_[a]=t,E[a]=i,k[a]=r,i){var s=i.id(),u=S[s]=S[s]||[];u.push(n)}}});for(var N=[],h=0;h<s.length;h++){var f=s[h];w[f.id()]||N.push(f)}for(var T=3*N.length,D=0;0!==N.length&&T>D;){for(var P=N.shift(),C=P.neighborhood().nodes(),M=!1,h=0;h<C.length;h++){var A=_[C[h].id()];if(void 0!==A){x[A].push(P),M=!0;break}}M||N.push(P),D++}for(;0!==N.length;){var P=N.shift(),M=!1;M||(0===x.length&&x.push([]),x[0].push(P))}var I=function(){for(var e=0;e<x.length;e++)for(var t=x[e],n=0;n<t.length;n++){var r=t[n];r._private.scratch.breadthfirst={depth:e,index:n}}};I();for(var L=function(e){for(var t,n=e.connectedEdges(function(){return this.data("target")===e.id()}),r=e._private.scratch.breadthfirst,i=0,o=0;o<n.length;o++){var a=n[o],s=a.source()[0],u=s._private.scratch.breadthfirst;r.depth<=u.depth&&i<u.depth&&(i=u.depth,t=s)}return t},O=0;O<n.maximalAdjustments;O++){for(var j=x.length,B=[],h=0;j>h;h++)for(var A=x[h],R=A.length,z=0;R>z;z++){var f=A[z],F=f._private.scratch.breadthfirst,V=L(f);V&&(F.intEle=V,B.push(f))}for(var h=0;h<B.length;h++){var f=B[h],F=f._private.scratch.breadthfirst,V=F.intEle,q=V._private.scratch.breadthfirst;x[F.depth].splice(F.index,1);for(var X=q.depth+1;X>x.length-1;)x.push([]);x[X].push(f),F.depth=X,F.index=x[X].length-1}I()}var Y=0;if(n.avoidOverlap){for(var h=0;h<s.length;h++){var $=s[h],G=$.boundingBox(),W=G.w,U=G.h;Y=Math.max(Y,W,U)}Y*=n.spacingFactor}for(var H={},Z=function(e){if(H[e.id()])return H[e.id()];for(var t=e._private.scratch.breadthfirst.depth,n=e.neighborhood().nodes().not(":parent"),r=0,i=0,o=0;o<n.length;o++){var a=n[o],s=a._private.scratch.breadthfirst,u=s.index,l=s.depth,c=x[l].length;(t>l||0===t)&&(r+=u/c,i++)}return i=Math.max(1,i),r/=i,0===i&&(r=void 0),H[e.id()]=r,r},K=function(e,t){var n=Z(e),r=Z(t);return n-r},J=0;3>J;J++){for(var h=0;h<x.length;h++)x[h]=x[h].sort(K);I()}for(var Q=0,h=0;h<x.length;h++)Q=Math.max(x[h].length,Q);for(var ee={x:l.x1+l.w/2,y:l.x1+l.h/2},te=function(e,t){var r=e._private.scratch.breadthfirst,i=r.depth,o=r.index,a=x[i].length,s=Math.max(l.w/(a+1),Y),u=Math.max(l.h/(x.length+1),Y),c=Math.min(l.w/2/x.length,l.h/2/x.length);if(c=Math.max(c,Y),n.circle){if(n.circle){var h=c*i+c-(x.length>0&&x[0].length<=3?c/2:0),d=2*Math.PI/x[i].length*o;return 0===i&&1===x[0].length&&(h=1),{x:ee.x+h*Math.cos(d),y:ee.y+h*Math.sin(d)}}return{x:ee.x+(o+1-(a+1)/2)*s,y:(i+1)*u}}var f={x:ee.x+(o+1-(a+1)/2)*s,y:(i+1)*u};return t?f:f},ne={},h=x.length-1;h>=0;h--)for(var A=x[h],z=0;z<A.length;z++){var P=A[z];ne[P.id()]=te(P,h===x.length-1)}return s.layoutPositions(this,n,function(){return ne[this.id()]}),this},t.exports=r},{"../../is":77,"../../math":79,"../../util":94}],46:[function(e,t,n){"use strict";function r(e){this.options=i.extend({},s,e)}var i=e("../../util"),o=e("../../math"),a=e("../../is"),s={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,i=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,s=r.nodes().not(":parent");t.sort&&(s=s.sort(t.sort));for(var u,l=o.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),c={x:l.x1+l.w/2,y:l.y1+l.h/2},h=void 0===t.sweep?2*Math.PI-2*Math.PI/s.length:t.sweep,d=h/Math.max(1,s.length-1),f=0,p=0;p<s.length;p++){var v=s[p],g=v.boundingBox(),y=g.w,m=g.h;f=Math.max(f,y,m)}if(u=a.number(t.radius)?t.radius:s.length<=1?0:Math.min(l.h,l.w)/2-f,s.length>1&&t.avoidOverlap){f*=1.75;var b=Math.cos(d)-Math.cos(0),x=Math.sin(d)-Math.sin(0),w=Math.sqrt(f*f/(b*b+x*x));u=Math.max(w,u)}var _=function(e,n){var r=t.startAngle+e*d*(i?1:-1),o=u*Math.cos(r),a=u*Math.sin(r),s={x:c.x+o,y:c.y+a};return s};return s.layoutPositions(this,t,_),this},t.exports=r},{"../../is":77,"../../math":79,"../../util":94}],47:[function(e,t,n){"use strict";function r(e){this.options=i.extend({},a,e)}var i=e("../../util"),o=e("../../math"),a={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,height:void 0,width:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){for(var e=this.options,t=e,n=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,r=e.cy,i=t.eles,a=i.nodes().not(":parent"),s=o.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),u={x:s.x1+s.w/2,y:s.y1+s.h/2},l=[],c=t.startAngle,h=0,d=0;d<a.length;d++){var f,p=a[d];f=t.concentric.apply(p,[p]),l.push({value:f,node:p}),p._private.scratch.concentric=f}a.updateStyle();for(var d=0;d<a.length;d++){var p=a[d],v=p.boundingBox();h=Math.max(h,v.w,v.h)}l.sort(function(e,t){return t.value-e.value});for(var g=t.levelWidth(a),y=[[]],m=y[0],d=0;d<l.length;d++){var b=l[d];if(m.length>0){var x=Math.abs(m[0].value-b.value);x>=g&&(m=[],y.push(m))}m.push(b)}var w=h+t.minNodeSpacing;if(!t.avoidOverlap){var _=y.length>0&&y[0].length>1,E=Math.min(s.w,s.h)/2-w,k=E/(y.length+_?1:0);w=Math.min(w,k)}for(var S=0,d=0;d<y.length;d++){var N=y[d],T=void 0===t.sweep?2*Math.PI-2*Math.PI/N.length:t.sweep,D=N.dTheta=T/Math.max(1,N.length-1);if(N.length>1&&t.avoidOverlap){var P=Math.cos(D)-Math.cos(0),C=Math.sin(D)-Math.sin(0),M=Math.sqrt(w*w/(P*P+C*C));S=Math.max(M,S)}N.r=S,S+=w}if(t.equidistant){for(var A=0,S=0,d=0;d<y.length;d++){var N=y[d],I=N.r-S;A=Math.max(A,I)}S=0;for(var d=0;d<y.length;d++){var N=y[d];0===d&&(S=N.r),N.r=S,S+=A}}for(var L={},d=0;d<y.length;d++)for(var N=y[d],D=N.dTheta,S=N.r,O=0;O<N.length;O++){var b=N[O],c=t.startAngle+(n?1:-1)*D*O,j={x:u.x+S*Math.cos(c),y:u.y+S*Math.sin(c)};L[b.node.id()]=j}return a.layoutPositions(this,t,function(){var e=this.id();return L[e]}),this},t.exports=r},{"../../math":79,"../../util":94}],48:[function(e,t,n){"use strict";function r(e){this.options=o.extend({},l,e),this.options.layout=this}var i,o=e("../../util"),a=e("../../math"),s=e("../../thread"),u=e("../../is"),l={ready:function(){},stop:function(){},animate:!0,animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,componentSpacing:100,nodeRepulsion:function(e){return 4e5},nodeOverlap:10,idealEdgeLength:function(e){return 10},edgeElasticity:function(e){return 100},nestingFactor:5,gravity:80,numIter:1e3,initialTemp:200,coolingFactor:.95,minTemp:1,useMultitasking:!0};r.prototype.run=function(){var e=this.options,t=e.cy,n=this,r=this.thread;(!r||r.stopped())&&(r=this.thread=s({disabled:!e.useMultitasking})),n.stopped=!1,n.trigger({type:"layoutstart",layout:n}),i=!0===e.debug?!0:!1;var a=c(t,n,e);i&&f(a),p(a,t);var u=Date.now(),l=!1,h=function(n){n=n||{},l||!n.force&&Date.now()-u<e.animationThreshold||(l=!0,o.requestAnimationFrame(function(){v(a,t,e),!0===e.fit&&t.fit(e.padding),l=!1,n.next&&n.next()}))};r.on("message",function(e){var t=e.message;a.layoutNodes=t,h()}),r.pass({layoutInfo:a,options:{animate:e.animate,refresh:e.refresh,componentSpacing:e.componentSpacing,nodeOverlap:e.nodeOverlap,nestingFactor:e.nestingFactor,gravity:e.gravity,numIter:e.numIter,initialTemp:e.initialTemp,coolingFactor:e.coolingFactor,minTemp:e.minTemp}}).run(function(e){var t,n=e.layoutInfo,r=e.options,i=!1,o=function(e,t,n){a(e,t),c(e,t),h(e,t),d(e,t),f(e,t)},a=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var r=e.graphSet[n],i=r.length,o=0;i>o;o++)for(var a=e.layoutNodes[e.idToIndex[r[o]]],u=o+1;i>u;u++){var l=e.layoutNodes[e.idToIndex[r[u]]];s(a,l,e,t)}},s=function(e,t,n,r){var i=e.cmptId,o=t.cmptId;if(i===o||n.isCompound){var a=t.positionX-e.positionX,s=t.positionY-e.positionY;if(0!==a||0!==s){var c=u(e,t,a,s);if(c>0)var h=r.nodeOverlap*c,d=Math.sqrt(a*a+s*s),f=h*a/d,p=h*s/d;else var v=l(e,a,s),g=l(t,-1*a,-1*s),y=g.x-v.x,m=g.y-v.y,b=y*y+m*m,d=Math.sqrt(b),h=(e.nodeRepulsion+t.nodeRepulsion)/b,f=h*y/d,p=h*m/d;e.isLocked||(e.offsetX-=f,e.offsetY-=p),t.isLocked||(t.offsetX+=f,t.offsetY+=p)}}},u=function(e,t,n,r){if(n>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(r>0)var o=e.maxY-t.minY;else var o=t.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},l=function(e,t,n){var r=e.positionX,i=e.positionY,o=e.height||1,a=e.width||1,s=n/t,u=o/a,l={};do{if(0===t&&n>0){l.x=r,l.y=i+o/2;break}if(0===t&&0>n){l.x=r,l.y=i+o/2;break}if(t>0&&s>=-1*u&&u>=s){l.x=r+a/2,l.y=i+a*n/2/t;break}if(0>t&&s>=-1*u&&u>=s){l.x=r-a/2,l.y=i-a*n/2/t;break}if(n>0&&(-1*u>=s||s>=u)){l.x=r+o*t/2/n,l.y=i+o/2;break}if(0>n&&(-1*u>=s||s>=u)){l.x=r-o*t/2/n,l.y=i-o/2;break}}while(!1);return l},c=function(e,t){for(var n=0;n<e.edgeSize;n++){var r=e.layoutEdges[n],i=e.idToIndex[r.sourceId],o=e.layoutNodes[i],a=e.idToIndex[r.targetId],s=e.layoutNodes[a],u=s.positionX-o.positionX,c=s.positionY-o.positionY;if(0===u&&0===c)return;var h=l(o,u,c),d=l(s,-1*u,-1*c),f=d.x-h.x,p=d.y-h.y,v=Math.sqrt(f*f+p*p),g=Math.pow(r.idealLength-v,2)/r.elasticity;if(0!==v)var y=g*f/v,m=g*p/v;else var y=0,m=0;o.isLocked||(o.offsetX+=y,o.offsetY+=m),s.isLocked||(s.offsetX-=y,s.offsetY-=m)}},h=function(e,t){for(var n=1,r=0;r<e.graphSet.length;r++){var i=e.graphSet[r],o=i.length;if(0===r)var a=e.clientHeight/2,s=e.clientWidth/2;else var u=e.layoutNodes[e.idToIndex[i[0]]],l=e.layoutNodes[e.idToIndex[u.parentId]],a=l.positionX,s=l.positionY;for(var c=0;o>c;c++){var h=e.layoutNodes[e.idToIndex[i[c]]];if(!h.isLocked){var d=a-h.positionX,f=s-h.positionY,p=Math.sqrt(d*d+f*f);if(p>n){var v=t.gravity*d/p,g=t.gravity*f/p;h.offsetX+=v,h.offsetY+=g}}}}},d=function(e,t){var n=[],r=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;i>=r;){var o=n[r++],a=e.idToIndex[o],s=e.layoutNodes[a],u=s.children;if(0<u.length&&!s.isLocked){for(var l=s.offsetX,c=s.offsetY,h=0;h<u.length;h++){var d=e.layoutNodes[e.idToIndex[u[h]]];d.offsetX+=l,d.offsetY+=c,n[++i]=u[h]}s.offsetX=0,s.offsetY=0}}},f=function(e,t){for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&(r.maxX=void 0,r.minX=void 0,r.maxY=void 0,r.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];if(!(0<r.children.length||r.isLocked)){var i=p(r.offsetX,r.offsetY,e.temperature);r.positionX+=i.x,r.positionY+=i.y,r.offsetX=0,r.offsetY=0,r.minX=r.positionX-r.width,r.maxX=r.positionX+r.width,r.minY=r.positionY-r.height,r.maxY=r.positionY+r.height,v(r,e)}}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&!r.isLocked&&(r.positionX=(r.maxX+r.minX)/2,r.positionY=(r.maxY+r.minY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY)}},p=function(e,t,n){var r=Math.sqrt(e*e+t*t);if(r>n)var i={x:n*e/r,y:n*t/r};else var i={x:e,y:t};return i},v=function(e,t){var n=e.parentId;if(null!=n){var r=t.layoutNodes[t.idToIndex[n]],i=!1;return(null==r.maxX||e.maxX+r.padRight>r.maxX)&&(r.maxX=e.maxX+r.padRight,i=!0),(null==r.minX||e.minX-r.padLeft<r.minX)&&(r.minX=e.minX-r.padLeft,i=!0),(null==r.maxY||e.maxY+r.padBottom>r.maxY)&&(r.maxY=e.maxY+r.padBottom,i=!0),(null==r.minY||e.minY-r.padTop<r.minY)&&(r.minY=e.minY-r.padTop,i=!0),i?v(r,t):void 0}},g=function(e,t){for(var r=n.layoutNodes,i=[],o=0;o<r.length;o++){var a=r[o],s=a.cmptId,u=i[s]=i[s]||[];u.push(a)}for(var l=0,o=0;o<i.length;o++){var c=i[o];c.x1=1/0,c.x2=-(1/0),c.y1=1/0,c.y2=-(1/0);for(var h=0;h<c.length;h++){var d=c[h];c.x1=Math.min(c.x1,d.positionX-d.width/2),c.x2=Math.max(c.x2,d.positionX+d.width/2),c.y1=Math.min(c.y1,d.positionY-d.height/2),c.y2=Math.max(c.y2,d.positionY+d.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}i.sort(function(e,t){return t.w*t.h-e.w*e.h});for(var f=0,p=0,v=0,g=0,y=Math.sqrt(l)*n.clientWidth/n.clientHeight,o=0;o<i.length;o++){for(var c=i[o],h=0;h<c.length;h++){var d=c[h];d.isLocked||(d.positionX+=f,d.positionY+=p)}f+=c.w+t.componentSpacing,v+=c.w+t.componentSpacing,g=Math.max(g,c.h),v>y&&(p+=g+t.componentSpacing,f=0,v=0,g=0)}},y=function(e){return i?!1:(o(n,r,e),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp?!1:!0)},m=0;do{for(var b=0;b<r.refresh&&m<r.numIter;){var t=y(m);if(!t)break;b++,m++}r.animate&&broadcast(n.layoutNodes)}while(t&&m+1<r.numIter);return g(n,r),n}).then(function(e){a.layoutNodes=e.layoutNodes,r.stop(),d()});var d=function(){h({force:!0,next:function(){n.one("layoutstop",e.stop),n.trigger({type:"layoutstop",layout:n})}})};return this},r.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.trigger("layoutstop"),this},r.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var c=function(e,t,n){for(var r=n.eles.edges(),i=n.eles.nodes(),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:a.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},s=n.eles.components(),l={},c=0;c<s.length;c++)for(var d=s[c],f=0;f<d.length;f++){var p=d[f];l[p.id()]=c}for(var c=0;c<o.nodeSize;c++){var v=i[c],g=v.boundingBox(),y={};y.isLocked=v.locked(),y.id=v.data("id"),y.parentId=v.data("parent"),y.cmptId=l[v.id()],y.children=[],y.positionX=v.position("x"),y.positionY=v.position("y"),y.offsetX=0,y.offsetY=0,y.height=g.w,y.width=g.h,y.maxX=y.positionX+y.width/2,y.minX=y.positionX-y.width/2,y.maxY=y.positionY+y.height/2,y.minY=y.positionY-y.height/2,y.padLeft=parseFloat(v.style("padding-left")),y.padRight=parseFloat(v.style("padding-right")),y.padTop=parseFloat(v.style("padding-top")),y.padBottom=parseFloat(v.style("padding-bottom")),y.nodeRepulsion=u.fn(n.nodeRepulsion)?n.nodeRepulsion.call(v,v):n.nodeRepulsion,o.layoutNodes.push(y),o.idToIndex[y.id]=c}for(var m=[],b=0,x=-1,w=[],c=0;c<o.nodeSize;c++){var v=o.layoutNodes[c],_=v.parentId;null!=_?o.layoutNodes[o.idToIndex[_]].children.push(v.id):(m[++x]=v.id,w.push(v.id))}for(o.graphSet.push(w);x>=b;){var E=m[b++],k=o.idToIndex[E],p=o.layoutNodes[k],S=p.children;if(S.length>0){o.graphSet.push(S);for(var c=0;c<S.length;c++)m[++x]=S[c]}}for(var c=0;c<o.graphSet.length;c++)for(var N=o.graphSet[c],f=0;f<N.length;f++){var T=o.idToIndex[N[f]];o.indexToGraph[T]=c}for(var c=0;c<o.edgeSize;c++){var D=r[c],P={};P.id=D.data("id"),P.sourceId=D.data("source"),P.targetId=D.data("target");var C=u.fn(n.idealEdgeLength)?n.idealEdgeLength.call(D,D):n.idealEdgeLength,M=u.fn(n.edgeElasticity)?n.edgeElasticity.call(D,D):n.edgeElasticity,A=o.idToIndex[P.sourceId],I=o.idToIndex[P.targetId],L=o.indexToGraph[A],O=o.indexToGraph[I];if(L!=O){for(var j=h(P.sourceId,P.targetId,o),B=o.graphSet[j],R=0,y=o.layoutNodes[A];-1===B.indexOf(y.id);)y=o.layoutNodes[o.idToIndex[y.parentId]],R++;for(y=o.layoutNodes[I];-1===B.indexOf(y.id);)y=o.layoutNodes[o.idToIndex[y.parentId]],R++;C*=R*n.nestingFactor}P.idealLength=C,P.elasticity=M,o.layoutEdges.push(P)}return o},h=function(e,t,n){var r=d(e,t,0,n);return 2>r.count?0:r.graph},d=function(e,t,n,r){var i=r.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(t))return{count:2,graph:n};for(var o=0,a=0;a<i.length;a++){var s=i[a],u=r.idToIndex[s],l=r.layoutNodes[u].children;if(0!==l.length){var c=r.indexToGraph[r.idToIndex[l[0]]],h=d(e,t,c,r);if(0!==h.count){if(1!==h.count)return h;if(o++,2===o)break}}}return{count:o,graph:n}},f=function(e){if(i){console.debug("layoutNodes:");for(var t=0;t<e.nodeSize;t++){var n=e.layoutNodes[t],r="\nindex: "+t+"\nId: "+n.id+"\nChildren: "+n.children.toString()+"\nparentId: "+n.parentId+"\npositionX: "+n.positionX+"\npositionY: "+n.positionY+"\nOffsetX: "+n.offsetX+"\nOffsetY: "+n.offsetY+"\npadLeft: "+n.padLeft+"\npadRight: "+n.padRight+"\npadTop: "+n.padTop+"\npadBottom: "+n.padBottom;console.debug(r)}console.debug("idToIndex");for(var t in e.idToIndex)console.debug("Id: "+t+"\nIndex: "+e.idToIndex[t]);console.debug("Graph Set");for(var o=e.graphSet,t=0;t<o.length;t++)console.debug("Set : "+t+": "+o[t].toString());for(var r="IndexToGraph",t=0;t<e.indexToGraph.length;t++)r+="\nIndex : "+t+" Graph: "+e.indexToGraph[t];console.debug(r),r="Layout Edges";for(var t=0;t<e.layoutEdges.length;t++){var a=e.layoutEdges[t];r+="\nEdge Index: "+t+" ID: "+a.id+" SouceID: "+a.sourceId+" TargetId: "+a.targetId+" Ideal Length: "+a.idealLength}console.debug(r),r="nodeSize: "+e.nodeSize,r+="\nedgeSize: "+e.edgeSize,r+="\ntemperature: "+e.temperature,console.debug(r)}},p=function(e,t){for(var n=e.clientWidth,r=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];0!==o.children.length||o.isLocked||(o.positionX=Math.random()*n,o.positionY=Math.random()*r)}},v=function(e,t,n){var r=n.layout,i=n.eles.nodes(),o=e.boundingBox,a={x1:1/0,x2:-(1/0),y1:1/0,y2:-(1/0)};n.boundingBox&&(i.forEach(function(t){var n=e.layoutNodes[e.idToIndex[t.data("id")]];a.x1=Math.min(a.x1,n.positionX),a.x2=Math.max(a.x2,n.positionX),a.y1=Math.min(a.y1,n.positionY),a.y2=Math.max(a.y2,n.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),i.positions(function(t,r){var i=e.layoutNodes[e.idToIndex[r.data("id")]];if(n.boundingBox){var s=(i.positionX-a.x1)/a.w,u=(i.positionY-a.y1)/a.h;return{x:o.x1+s*o.w,y:o.y1+u*o.h}}return{x:i.positionX,y:i.positionY}}),!0!==e.ready&&(e.ready=!0,r.one("layoutready",n.ready),r.trigger({type:"layoutready",layout:this}))};t.exports=r},{"../../is":77,"../../math":79,"../../thread":92,"../../util":94}],49:[function(e,t,n){"use strict";function r(e){this.options=i.extend({},a,e)}var i=e("../../util"),o=e("../../math"),a={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,i=r.nodes().not(":parent");t.sort&&(i=i.sort(t.sort));var a=o.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===a.h||0===a.w)i.layoutPositions(this,t,function(){return{x:a.x1,y:a.y1}});else{var s=i.size(),u=Math.sqrt(s*a.h/a.w),l=Math.round(u),c=Math.round(a.w/a.h*u),h=function(e){if(null==e)return Math.min(l,c);var t=Math.min(l,c);t==l?l=e:c=e},d=function(e){if(null==e)return Math.max(l,c);var t=Math.max(l,c);t==l?l=e:c=e},f=t.rows,p=null!=t.cols?t.cols:t.columns;if(null!=f&&null!=p)l=f,c=p;else if(null!=f&&null==p)l=f,c=Math.ceil(s/l);else if(null==f&&null!=p)c=p,l=Math.ceil(s/c);else if(c*l>s){var v=h(),g=d();(v-1)*g>=s?h(v-1):(g-1)*v>=s&&d(g-1)}else for(;s>c*l;){var v=h(),g=d();(g+1)*v>=s?d(g+1):h(v+1)}var y=a.w/c,m=a.h/l;if(t.condense&&(y=0,m=0),t.avoidOverlap)for(var b=0;b<i.length;b++){var x=i[b],w=x._private.position;(null==w.x||null==w.y)&&(w.x=0,w.y=0);var _=x.boundingBox(),E=t.avoidOverlapPadding,k=_.w+E,S=_.h+E;y=Math.max(y,k),m=Math.max(m,S)}for(var N={},T=function(e,t){return N["c-"+e+"-"+t]?!0:!1},D=function(e,t){N["c-"+e+"-"+t]=!0},P=0,C=0,M=function(){C++,C>=c&&(C=0,P++)},A={},b=0;b<i.length;b++){var x=i[b],I=t.position(x);if(I&&(void 0!==I.row||void 0!==I.col)){var w={row:I.row,col:I.col};if(void 0===w.col)for(w.col=0;T(w.row,w.col);)w.col++;else if(void 0===w.row)for(w.row=0;T(w.row,w.col);)w.row++;A[x.id()]=w,D(w.row,w.col)}}var L=function(e,t){var n,r;if(t.locked()||t.isFullAutoParent())return!1;var i=A[t.id()];if(i)n=i.col*y+y/2+a.x1,r=i.row*m+m/2+a.y1;else{for(;T(P,C);)M();n=C*y+y/2+a.x1,r=P*m+m/2+a.y1,D(P,C),M()}return{x:n,y:r}};i.layoutPositions(this,t,L)}return this},t.exports=r},{"../../math":79,"../../util":94}],50:[function(e,t,n){"use strict";t.exports=[{name:"breadthfirst",impl:e("./breadthfirst")},{name:"circle",impl:e("./circle")},{name:"concentric",impl:e("./concentric")},{name:"cose",impl:e("./cose")},{name:"grid",impl:e("./grid")},{name:"null",impl:e("./null")},{name:"preset",impl:e("./preset")},{name:"random",impl:e("./random")}]},{"./breadthfirst":45,"./circle":46,"./concentric":47,"./cose":48,"./grid":49,"./null":51,"./preset":52,"./random":53}],51:[function(e,t,n){"use strict";function r(e){this.options=i.extend({},o,e)}var i=e("../../util"),o={ready:function(){},stop:function(){}};r.prototype.run=function(){{var e=this.options,t=e.eles,n=this;e.cy}return n.trigger("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",e.ready),n.trigger("layoutready"),n.one("layoutstop",e.stop),n.trigger("layoutstop"),this},r.prototype.stop=function(){return this},t.exports=r},{"../../util":94}],52:[function(e,t,n){"use strict";function r(e){this.options=i.extend({},a,e)}var i=e("../../util"),o=e("../../is"),a={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){function e(e){if(null==t.positions)return null;if(i)return t.positions.apply(e,[e]);var n=t.positions[e._private.data.id];return null==n?null:n}var t=this.options,n=t.eles,r=n.nodes(),i=o.fn(t.positions);return r.layoutPositions(this,t,function(t,n){var r=e(n);return n.locked()||null==r?!1:r}),this},t.exports=r},{"../../is":77,"../../util":94}],53:[function(e,t,n){"use strict";function r(e){this.options=i.extend({},a,e)}var i=e("../../util"),o=e("../../math"),a={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,ready:void 0,stop:void 0};r.prototype.run=function(){var e=this.options,t=e.cy,n=e.eles,r=n.nodes().not(":parent"),i=o.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),a=function(e,t){return{x:i.x1+Math.round(Math.random()*i.w),y:i.y1+Math.round(Math.random()*i.h)}};return r.layoutPositions(this,e,a),this},t.exports=r},{"../../math":79,"../../util":94}],54:[function(e,t,n){"use strict";var r=e("../../../math"),i=e("../../../is"),o=e("../../../util"),a={};a.arrowShapeHeight=.3,a.registerArrowShapes=function(){var e=this.arrowShapes={},t=this,n=function(e,t,n,r,i,o){var a=i.x-n/2-o,s=i.x+n/2+o,u=i.y-n/2-o,l=i.y+n/2+o,c=e>=a&&s>=e&&t>=u&&l>=t;return c},a=function(e,t,n,r,i){var o=e*Math.cos(r)-t*Math.sin(r),a=e*Math.sin(r)+t*Math.cos(r),s=o*n,u=a*n,l=s+i.x,c=u+i.y;

return{x:l,y:c}},s=function(e,t,n,r){for(var i=[],o=0;o<e.length;o+=2){var s=e[o],u=e[o+1];i.push(a(s,u,t,n,r))}return i},u=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r.x,r.y)}return t},l=function(a,l){i.string(l)&&(l=e[l]),e[a]=o.extend({name:a,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(e,t,n,i,o,a){var l=u(s(this.points,n+2*a,i,o)),c=r.pointInsidePolygonPoints(e,t,l);return c},roughCollide:n,draw:function(e,n,r,i){var o=s(this.points,n,r,i);t.arrowShapeImpl("polygon")(e,o)},spacing:function(e){return 0},gap:function(e){return 2*e._private.style.width.pfValue}},l)};l("none",{collide:o.falsify,roughCollide:o.falsify,draw:o.noop,spacing:o.zeroify,gap:o.zeroify}),l("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),l("arrow","triangle"),l("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(e,n,r,i){var o=s(this.points,n,r,i),u=this.controlPoint,l=a(u[0],u[1],n,r,i);t.arrowShapeImpl(this.name)(e,o,l)},gap:function(e){return e._private.style.width.pfValue}}),l("triangle-tee",{points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(e,t,n,i,o,a){var l=u(s(this.points,n+2*a,i,o)),c=u(s(this.pointsTee,n+2*a,i,o)),h=r.pointInsidePolygonPoints(e,t,l)||r.pointInsidePolygonPoints(e,t,c);return h},draw:function(e,n,r,i){var o=s(this.points,n,r,i),a=s(this.pointsTee,n,r,i);t.arrowShapeImpl(this.name)(e,o,a)}}),l("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(e){return e._private.style.width.pfValue}}),l("half-triangle-overshot",{points:[0,-.25,-.5,-.25,.5,.25],leavePathOpen:!0,matchEdgeWidth:!0}),l("circle",{radius:.15,collide:function(e,t,n,r,i,o){var a=i,s=Math.pow(a.x-e,2)+Math.pow(a.y-t,2)<=Math.pow((n+2*o)*this.radius,2);return s},draw:function(e,n,r,i){t.arrowShapeImpl(this.name)(e,i.x,i.y,this.radius*n)},spacing:function(e){return t.getArrowWidth(e._private.style.width.pfValue)*this.radius}}),l("inhibitor",{points:[-.25,0,-.25,-.1,.25,-.1,.25,0],spacing:function(e){return 1},gap:function(e){return 1}}),l("tee","inhibitor"),l("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),l("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(e){return e._private.style.width.pfValue}})},t.exports=a},{"../../../is":77,"../../../math":79,"../../../util":94}],55:[function(e,t,n){"use strict";var r={},i=function(e){e.eleEache=null},o=function(e){return e.eleEache||(e.eleEache={nodes:e.cy.nodes(),edges:e.cy.edges()}),e.eleEache};r.getCachedElements=function(){return o(this)},r.getCachedNodes=function(){return o(this).nodes},r.getCachedEdges=function(){return o(this).edges},r.updateElementsCache=function(){var e=this;return i(e),o(e)},t.exports=r},{}],56:[function(e,t,n){"use strict";function r(e,t){var n=function(e,t,n,r){return i.qbezierAt(e,t,n,r)},r=e._private,o=r.rstyle.bezierPts;o.push({x:n(t[0],t[2],t[4],.05),y:n(t[1],t[3],t[5],.05)}),o.push({x:n(t[0],t[2],t[4],.25),y:n(t[1],t[3],t[5],.25)}),o.push({x:n(t[0],t[2],t[4],.4),y:n(t[1],t[3],t[5],.4)}),o.push({x:n(t[0],t[2],t[4],.5),y:n(t[1],t[3],t[5],.5)}),o.push({x:n(t[0],t[2],t[4],.6),y:n(t[1],t[3],t[5],.6)}),o.push({x:n(t[0],t[2],t[4],.75),y:n(t[1],t[3],t[5],.75)}),o.push({x:n(t[0],t[2],t[4],.95),y:n(t[1],t[3],t[5],.95)})}var i=e("../../../math"),o=e("../../../is"),a=e("../../../collection/zsort"),s={};s.projectIntoViewport=function(e,t){var n=this.findContainerClientCoords(),r=n[0],i=n[1],o=e-r,a=t-i;return o-=this.cy.pan().x,a-=this.cy.pan().y,o/=this.cy.zoom(),a/=this.cy.zoom(),[o,a]},s.findContainerClientCoords=function(){var e=this.container,t=this.containerBB=this.containerBB||e.getBoundingClientRect();return[t.left,t.top,t.right-t.left,t.bottom-t.top]},s.invalidateContainerClientCoordsCache=function(){this.containerBB=null},s.findNearestElement=function(e,t,n,r){function o(r){var i=r._private;if("no"!==i.style.events.strValue){var o=r.outerWidth()+2*v,a=r.outerHeight()+2*v,s=o/2,c=a/2,d=i.position;if(d.x-s<=e&&e<=d.x+s&&d.y-c<=t&&t<=d.y+c){var f=!n||r.visible()&&!r.transparent();if(n&&!f)return;var p=l.nodeShapes[u.getNodeShape(r)];p.checkPoint(e,t,0,o,a,d.x,d.y)&&h.push(r)}}}function a(r){var a=r._private;if("no"!==a.style.events.strValue){var s,c,d=a.rscratch,v=a.style,g=v.width.pfValue/2+p,y=g*g,m=2*g,b=a.source,x=a.target,w=!1,_=function(){if(void 0!==c)return c;if(!n)return c=!0,!0;var e=r.visible()&&!r.transparent();return e?(c=!0,!0):(c=!1,!1)};if("segments"===d.edgeType||"straight"===d.edgeType||"haystack"===d.edgeType)for(var E=d.allpts,k=0;k+3<E.length;k+=2)(w=i.inLineVicinity(e,t,E[k],E[k+1],E[k+2],E[k+3],m))&&_()&&y>(s=i.sqDistanceToFiniteLine(e,t,E[k],E[k+1],E[k+2],E[k+3]))&&h.push(r);else if("bezier"===d.edgeType||"multibezier"===d.edgeType||"self"===d.edgeType||"compound"===d.edgeType)for(var E=d.allpts,k=0;k+5<d.allpts.length;k+=4)(w=i.inBezierVicinity(e,t,E[k],E[k+1],E[k+2],E[k+3],E[k+4],E[k+5],m))&&_()&&y>(s=i.sqDistanceToQuadraticBezier(e,t,E[k],E[k+1],E[k+2],E[k+3],E[k+4],E[k+5]))&&h.push(r);if(w&&_()&&0===h.length||h[h.length-1]!==r)for(var b=b||a.source,x=x||a.target,S=v.width.pfValue,N=u.getArrowWidth(S),T=[{name:"source",x:d.arrowStartX,y:d.arrowStartY,angle:d.srcArrowAngle},{name:"target",x:d.arrowEndX,y:d.arrowEndY,angle:d.tgtArrowAngle},{name:"mid-source",x:d.midX,y:d.midY,angle:d.midsrcArrowAngle},{name:"mid-target",x:d.midX,y:d.midY,angle:d.midtgtArrowAngle}],k=0;k<T.length;k++){var D=T[k],P=l.arrowShapes[v[D.name+"-arrow-shape"].value];if(P.roughCollide(e,t,N,D.angle,{x:D.x,y:D.y},p)&&P.collide(e,t,N,D.angle,{x:D.x,y:D.y},p)){h.push(r);break}}f&&h.length>0&&h[h.length-1]===r&&(o(b),o(x))}}function s(n){var r=n._private,o=g;if("no"!==r.style["text-events"].strValue)if("edges"===r.group&&"autorotate"===r.style["edge-text-rotation"].strValue){var a=r.rstyle,s=a.labelWidth+2*o,u=a.labelHeight+2*o,l=a.labelX,c=a.labelY,d=r.rscratch.labelAngle,f=Math.cos(d),p=Math.sin(d),v=function(e,t){return e-=l,t-=c,{x:e*f-t*p+l,y:e*p+t*f+c}},y=l-s/2,m=l+s/2,b=c-u/2,x=c+u/2,w=v(y,b),_=v(y,x),E=v(m,b),k=v(m,x),S=[w.x,w.y,E.x,E.y,k.x,k.y,_.x,_.y];i.pointInsidePolygonPoints(e,t,S)&&h.push(n)}else{var N=n.boundingBox({includeLabels:!0,includeNodes:!1,includeEdges:!1});N.x1-=o,N.y1-=o,N.x2+=o,N.y2+=o,N.w=N.x2-N.x1,N.h=N.y2-N.y1,i.inBoundingBox(N,e,t)&&h.push(n)}}for(var u=this,l=this,c=l.getCachedZSortedEles(),h=[],d=l.cy.zoom(),f=l.cy.hasCompoundNodes(),p=(r?24:8)/d,v=(r?8:2)/d,g=(r?8:2)/d,y=c.length-1;y>=0;y--){var m=c[y],b=m._private;if(h.length>0)break;"nodes"===b.group?o(m):a(m),s(m)}return h.length>0?h[h.length-1]:null},s.getAllInBox=function(e,t,n,r){var o=this.getCachedNodes(),a=this.getCachedEdges(),s=[],u=Math.min(e,n),l=Math.max(e,n),c=Math.min(t,r),h=Math.max(t,r);e=u,n=l,t=c,r=h;for(var d=i.makeBoundingBox({x1:e,y1:t,x2:n,y2:r}),f=0;f<o.length;f++){var p=o[f],v=p.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});i.boundingBoxesIntersect(d,v)&&s.push(o[f])}for(var g=0;g<a.length;g++){var y=a[g],m=y._private,b=m.rscratch;if((null==b.startX||null==b.startY||i.inBoundingBox(d,b.startX,b.startY))&&(null==b.endX||null==b.endY||i.inBoundingBox(d,b.endX,b.endY)))if("bezier"===b.edgeType||"multibezier"===b.edgeType||"self"===b.edgeType||"compound"===b.edgeType||"segments"===b.edgeType||"haystack"===b.edgeType){for(var x=m.rstyle.bezierPts||m.rstyle.linePts||m.rstyle.haystackPts,w=!0,f=0;f<x.length;f++)if(!i.pointInBoundingBox(d,x[f])){w=!1;break}w&&s.push(y)}else("haystack"===b.edgeType||"straight"===b.edgeType)&&s.push(y)}return s},s.getNodeShape=function(e){var t=this,n=e._private.style,r=n.shape.value;if(e.isParent())return"rectangle"===r||"roundrectangle"===r?r:"rectangle";if("polygon"===r){var i=n["shape-polygon-points"].value;return t.nodeShapes.makePolygon(i).name}return r},s.updateCachedZSortedEles=function(){this.getCachedZSortedEles(!0)},s.getCachedZSortedEles=function(e){var t=this.lastZOrderCachedNodes,n=this.lastZOrderCachedEdges,r=this.getCachedNodes(),i=this.getCachedEdges(),o=[];if(!e&&t&&n&&t===r&&n===i)o=this.cachedZSortedEles;else{for(var s=0;s<r.length;s++){var u=r[s];(u.animated()||u.visible()&&!u.transparent())&&o.push(u)}for(var s=0;s<i.length;s++){var l=i[s];(l.animated()||l.visible()&&!l.transparent())&&o.push(l)}o.sort(a),this.cachedZSortedEles=o}return this.lastZOrderCachedNodes=r,this.lastZOrderCachedEdges=i,o},s.projectLines=function(e){var t=e._private,n=t.rscratch,i=n.edgeType;if("multibezier"===i||"bezier"===i||"self"===i||"compound"===i)for(var o=(t.rstyle.bezierPts=[],0);o+5<n.allpts.length;o+=4)r(e,n.allpts.slice(o,o+6));else if("segments"===i)for(var a=t.rstyle.linePts=[],o=0;o+1<n.allpts.length;o+=2)a.push({x:n.allpts[o],y:n.allpts[o+1]});else if("haystack"===i){var s=n.haystackPts;t.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}},s.projectBezier=s.projectLines,s.recalculateNodeLabelProjection=function(e){var t=e._private.style.label.strValue;if(t&&!t.match(/^\s+$/)){var n,r,i=e.outerWidth(),o=e.outerHeight(),a=e._private.position,s=e._private.style["text-halign"].strValue,u=e._private.style["text-valign"].strValue,l=e._private.rscratch,c=e._private.rstyle;switch(s){case"left":n=a.x-i/2;break;case"right":n=a.x+i/2;break;default:n=a.x}switch(u){case"top":r=a.y-o/2;break;case"bottom":r=a.y+o/2;break;default:r=a.y}l.labelX=n,l.labelY=r,c.labelX=n,c.labelY=r,this.applyLabelDimensions(e)}},s.recalculateEdgeLabelProjection=function(e){var t=e._private.style.label.strValue;if(t&&!t.match(/^\s+$/)){var n,r,i=e._private,o=i.rscratch,a=i.rstyle;n=o.midX,r=o.midY,o.labelX=n,o.labelY=r,a.labelX=n,a.labelY=r,this.applyLabelDimensions(e)}},s.applyLabelDimensions=function(e){var t=e._private.rscratch,n=e._private.rstyle,r=this.getLabelText(e),i=this.calculateLabelDimensions(e,r);n.labelWidth=i.width,t.labelWidth=i.width,n.labelHeight=i.height,t.labelHeight=i.height},s.getLabelText=function(e){var t=e._private.style,n=e._private.style.label.strValue,r=t["text-transform"].value,i=e._private.rscratch;if("none"==r||("uppercase"==r?n=n.toUpperCase():"lowercase"==r&&(n=n.toLowerCase())),"wrap"===t["text-wrap"].value){if(i.labelWrapKey===i.labelKey)return i.labelWrapCachedText;for(var o=n.split("\n"),a=t["text-max-width"].pfValue,s=[],u=0;u<o.length;u++){var l=o[u],c=this.calculateLabelDimensions(e,l,"line="+l),h=c.width;if(h>a){for(var d=l.split(/\s+/),f="",p=0;p<d.length;p++){var v=d[p],g=0===f.length?v:f+" "+v,y=this.calculateLabelDimensions(e,g,"testLine="+g),m=y.width;a>=m?f+=v+" ":(s.push(f),f=v+" ")}f.match(/^\s+$/)||s.push(f)}else s.push(l)}i.labelWrapCachedLines=s,i.labelWrapCachedText=n=s.join("\n"),i.labelWrapKey=i.labelKey}return n},s.calculateLabelDimensions=function(e,t,n){var r=this,i=e._private.style,o=i["font-style"].strValue,a=i["font-size"].pfValue+"px",s=i["font-family"].strValue,u=i["font-weight"].strValue,l=e._private.labelKey;n&&(l+="$@$"+n);var c=r.labelDimCache||(r.labelDimCache={});if(c[l])return c[l];var h=this.labelCalcDiv;h||(h=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(h));var d=h.style;return d.fontFamily=s,d.fontStyle=o,d.fontSize=a,d.fontWeight=u,d.position="absolute",d.left="-9999px",d.top="-9999px",d.zIndex="-1",d.visibility="hidden",d.pointerEvents="none",d.padding="0",d.lineHeight="1",d.whiteSpace="wrap"===i["text-wrap"].value?"pre":"normal",h.textContent=t,c[l]={width:h.clientWidth,height:h.clientHeight},c[l]},s.recalculateRenderedStyle=function(e){for(var t=[],n=[],r={},i=0;i<e.length;i++){var o=e[i],a=o._private,s=a.style,u=a.rscratch,l=a.rstyle,c=a.data.id,h=null!=u.boundingBoxKey&&a.boundingBoxKey===u.boundingBoxKey,d=null!=u.labelKey&&a.labelKey===u.labelKey,f=h&&d;if("nodes"===a.group){var p=a.position,v=null!=l.nodeX&&null!=l.nodeY&&p.x===l.nodeX&&p.y===l.nodeY,g=null!=l.nodeW&&l.nodeW===s.width.pfValue,y=null!=l.nodeH&&l.nodeH===s.height.pfValue;v&&f&&g&&y||n.push(o),l.nodeX=p.x,l.nodeY=p.y,l.nodeW=s.width.pfValue,l.nodeH=s.height.pfValue}else{var m=a.source._private.position,b=a.target._private.position,x=null!=l.srcX&&null!=l.srcY&&m.x===l.srcX&&m.y===l.srcY,w=null!=l.tgtX&&null!=l.tgtY&&b.x===l.tgtX&&b.y===l.tgtY,_=x&&w;if(!_||!f)if("bezier"===u.edgeType||"straight"===u.edgeType||"self"===u.edgeType||"compound"===u.edgeType){if(!r[c]){t.push(o),r[c]=!0;for(var E=o.parallelEdges(),i=0;i<E.length;i++){var k=E[i],S=k._private.data.id;r[S]||(t.push(k),r[S]=!0)}}}else t.push(o);l.srcX=m.x,l.srcY=m.y,l.tgtX=b.x,l.tgtY=b.y}u.boundingBoxKey=a.boundingBoxKey,u.labelKey=a.labelKey}this.recalculateEdgeProjections(t),this.recalculateLabelProjections(n,t)},s.recalculateLabelProjections=function(e,t){for(var n=0;n<e.length;n++)this.recalculateNodeLabelProjection(e[n]);for(var n=0;n<t.length;n++)this.recalculateEdgeLabelProjection(t[n])},s.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)},s.findEdgeControlPoints=function(e){if(e&&0!==e.length){for(var t,n=this,r=n.cy,a=r.hasCompoundNodes(),s={},u=[],l=[],c=[],h=0;h<e.length;h++){var d=e[h],f=d._private,p=f.data,v=f.style,g=v["curve-style"].value,y="unbundled-bezier"===g||"segments"===g;if("none"!==v.display.value)if("autorotate"===v["edge-text-rotation"].strValue&&c.push(d),"haystack"!==g){var m=p.source,b=p.target;t=m>b?b+"$-$"+m:m+"$-$"+b,y&&(t="unbundled$-$"+p.id),null==s[t]&&(s[t]=[],u.push(t)),s[t].push(d),y&&(s[t].hasUnbundled=!0)}else l.push(d)}for(var x,w,_,E,k,S,N,T,D,P,C,M,A,I,L=0;L<u.length;L++){t=u[L];var O=s[t];if(O.sort(function(e,t){return e._private.index-t._private.index}),x=O[0]._private.source,w=O[0]._private.target,_=x._private,E=w._private,_.data.id>E.data.id){var j=x;x=w,w=j}if(k=_.position,S=E.position,N=x.outerWidth(),T=x.outerHeight(),D=w.outerWidth(),P=w.outerHeight(),C=n.nodeShapes[this.getNodeShape(x)],M=n.nodeShapes[this.getNodeShape(w)],I=!1,O.length>1&&x!==w||O.hasUnbundled){var B=C.intersectLine(k.x,k.y,N,T,S.x,S.y,0),R=M.intersectLine(S.x,S.y,D,P,k.x,k.y,0),z={x1:B[0],x2:R[0],y1:B[1],y2:R[1]},F=R[1]-B[1],V=R[0]-B[0],q=Math.sqrt(V*V+F*F),X={x:V,y:F},Y={x:X.x/q,y:X.y/q};A={x:-Y.y,y:Y.x},(M.checkPoint(B[0],B[1],0,D,P,S.x,S.y)||C.checkPoint(R[0],R[1],0,N,T,k.x,k.y))&&(A={},I=!0)}for(var d,$,G,h=0;h<O.length;h++){d=O[h],$=d._private,G=$.rscratch;var W=G.lastEdgeIndex,U=h,H=G.lastNumEdges,Z=O.length,K=$.style,v=K,g=K["curve-style"].value,J=K["control-point-distances"],Q=K["control-point-weights"],ee=J&&Q?Math.min(J.value.length,Q.value.length):1,te=K["control-point-step-size"].pfValue,ne=void 0!==J?J.pfValue[0]:void 0,re=Q.value[0],y="unbundled-bezier"===g||"segments"===g,ie=$.source!==x;ie&&y&&(ne*=-1);var oe=G.lastSrcCtlPtX,ae=k.x,se=G.lastSrcCtlPtY,ue=k.y,le=G.lastSrcCtlPtW,ce=x.outerWidth(),he=G.lastSrcCtlPtH,de=x.outerHeight(),fe=G.lastTgtCtlPtX,pe=S.x,ve=G.lastTgtCtlPtY,ge=S.y,ye=G.lastTgtCtlPtW,me=w.outerWidth(),be=G.lastTgtCtlPtH,xe=w.outerHeight(),we=G.lastW,_e=K["control-point-step-size"].pfValue;if(G.badBezier=I?!0:!1,oe!==ae||se!==ue||le!==ce||he!==de||fe!==pe||ve!==ge||ye!==me||be!==xe||we!==_e||!(W===U&&H===Z||y)){if(G.lastSrcCtlPtX=ae,G.lastSrcCtlPtY=ue,G.lastSrcCtlPtW=ce,G.lastSrcCtlPtH=de,G.lastTgtCtlPtX=pe,G.lastTgtCtlPtY=ge,G.lastTgtCtlPtW=me,G.lastTgtCtlPtH=xe,G.lastEdgeIndex=U,G.lastNumEdges=Z,G.lastWidth=_e,x===w){G.edgeType="self";var Ee=h,ke=te;y&&(Ee=0,ke=ne),G.ctrlpts=[k.x,k.y-(1+Math.pow(T,1.12)/100)*ke*(Ee/3+1),k.x-(1+Math.pow(N,1.12)/100)*ke*(Ee/3+1),k.y]}else if(a&&(x.isParent()||x.isChild()||w.isParent()||w.isChild())&&(x.parents().anySame(w)||w.parents().anySame(x))){G.edgeType="compound",G.badBezier=!1;var Ee=h,ke=te;y&&(Ee=0,ke=ne);var Se=50,Ne={x:k.x-N/2,y:k.y-T/2},Te={x:S.x-D/2,y:S.y-P/2},De={x:Math.min(Ne.x,Te.x),y:Math.min(Ne.y,Te.y)},Pe=.5,Ce=Math.max(Pe,Math.log(.01*N)),Me=Math.max(Pe,Math.log(.01*D));G.ctrlpts=[De.x,De.y-(1+Math.pow(Se,1.12)/100)*ke*(Ee/3+1)*Ce,De.x-(1+Math.pow(Se,1.12)/100)*ke*(Ee/3+1)*Me,De.y]}else if("segments"===g){G.edgeType="segments",G.segpts=[];for(var Ae=K["segment-weights"].pfValue,Ie=K["segment-distances"].pfValue,Le=Math.min(Ae.length,Ie.length),Oe=0;Le>Oe;Oe++){var je=Ae[Oe],Be=Ie[Oe],Re=1-je,ze=je,Fe={x:z.x1*Re+z.x2*ze,y:z.y1*Re+z.y2*ze};G.segpts.push(Fe.x+A.x*Be,Fe.y+A.y*Be)}}else if(O.length%2!==1||h!==Math.floor(O.length/2)||y){var Ve=y;G.edgeType=Ve?"multibezier":"bezier",G.ctrlpts=[];for(var qe=0;ee>qe;qe++){var Xe,Ye=(.5-O.length/2+h)*te,$e=i.signum(Ye);Ve&&(ne=J?J.pfValue[qe]:te,re=Q.value[qe]),Xe=y?ne:void 0!==ne?$e*ne:void 0;var Ge=void 0!==Xe?Xe:Ye,Re=!ie||y?1-re:re,ze=!ie||y?re:1-re,Fe={x:z.x1*Re+z.x2*ze,y:z.y1*Re+z.y2*ze};G.ctrlpts.push(Fe.x+A.x*Ge,Fe.y+A.y*Ge)}}else G.edgeType="straight";this.findEndpoints(d);var We=!o.number(G.startX)||!o.number(G.startY),Ue=!o.number(G.arrowStartX)||!o.number(G.arrowStartY),He=!o.number(G.endX)||!o.number(G.endY),Ze=!o.number(G.arrowEndX)||!o.number(G.arrowEndY),Ke=3,Je=this.getArrowWidth(K.width.pfValue)*this.arrowShapeHeight,Qe=Ke*Je;if("bezier"===G.edgeType){var et=i.distance({x:G.ctrlpts[0],y:G.ctrlpts[1]},{x:G.startX,y:G.startY}),tt=Qe>et,nt=i.distance({x:G.ctrlpts[0],y:G.ctrlpts[1]},{x:G.endX,y:G.endY}),rt=Qe>nt,it=!1;if(We||Ue||tt){it=!0;var ot={x:G.ctrlpts[0]-k.x,y:G.ctrlpts[1]-k.y},at=Math.sqrt(ot.x*ot.x+ot.y*ot.y),st={x:ot.x/at,y:ot.y/at},ut=Math.max(N,T),lt={x:G.ctrlpts[0]+2*st.x*ut,y:G.ctrlpts[1]+2*st.y*ut},ct=C.intersectLine(k.x,k.y,N,T,lt.x,lt.y,0);tt?(G.ctrlpts[0]=G.ctrlpts[0]+st.x*(Qe-et),G.ctrlpts[1]=G.ctrlpts[1]+st.y*(Qe-et)):(G.ctrlpts[0]=ct[0]+st.x*Qe,G.ctrlpts[1]=ct[1]+st.y*Qe)}if(He||Ze||rt){it=!0;var ot={x:G.ctrlpts[0]-S.x,y:G.ctrlpts[1]-S.y},at=Math.sqrt(ot.x*ot.x+ot.y*ot.y),st={x:ot.x/at,y:ot.y/at},ut=Math.max(N,T),lt={x:G.ctrlpts[0]+2*st.x*ut,y:G.ctrlpts[1]+2*st.y*ut},ht=M.intersectLine(S.x,S.y,D,P,lt.x,lt.y,0);rt?(G.ctrlpts[0]=G.ctrlpts[0]+st.x*(Qe-nt),G.ctrlpts[1]=G.ctrlpts[1]+st.y*(Qe-nt)):(G.ctrlpts[0]=ht[0]+st.x*Qe,G.ctrlpts[1]=ht[1]+st.y*Qe)}it&&this.findEndpoints(d)}if("multibezier"===G.edgeType||"bezier"===G.edgeType||"self"===G.edgeType||"compound"===G.edgeType){G.allpts=[],G.allpts.push(G.startX,G.startY);for(var qe=0;qe+1<G.ctrlpts.length;qe+=2)G.allpts.push(G.ctrlpts[qe],G.ctrlpts[qe+1]),qe+3<G.ctrlpts.length&&G.allpts.push((G.ctrlpts[qe]+G.ctrlpts[qe+2])/2,(G.ctrlpts[qe+1]+G.ctrlpts[qe+3])/2);G.allpts.push(G.endX,G.endY);var dt,ft;"bezier"===G.edgeType?(G.midX=i.qbezierAt(G.arrowStartX,G.ctrlpts[0],G.arrowEndX,.5),G.midY=i.qbezierAt(G.arrowStartY,G.ctrlpts[1],G.arrowEndY,.5)):G.ctrlpts.length/2%2===0?(dt=G.allpts.length/2-1,G.midX=G.allpts[dt],G.midY=G.allpts[dt+1]):(dt=G.allpts.length/2-3,ft=.5,G.midX=i.qbezierAt(G.allpts[dt],G.allpts[dt+2],G.allpts[dt+4],ft),G.midY=i.qbezierAt(G.allpts[dt+1],G.allpts[dt+3],G.allpts[dt+5],ft))}else if("straight"===G.edgeType)G.allpts=[G.startX,G.startY,G.endX,G.endY],G.midX=(G.arrowStartX+G.arrowEndX)/2,G.midY=(G.arrowStartY+G.arrowEndY)/2;else if("segments"===G.edgeType)if(G.allpts=[],G.allpts.push(G.startX,G.startY),G.allpts.push.apply(G.allpts,G.segpts),G.allpts.push(G.endX,G.endY),G.segpts.length%4===0){var pt=G.segpts.length/2,vt=pt-2;G.midX=(G.segpts[vt]+G.segpts[pt])/2,G.midY=(G.segpts[vt+1]+G.segpts[pt+1])/2}else{var vt=G.segpts.length/2-1;G.midX=G.segpts[vt],G.midY=G.segpts[vt+1]}this.projectLines(d),this.calculateArrowAngles(d),this.recalculateEdgeLabelProjection(d)}}}for(var h=0;h<l.length;h++){var d=l[h],f=d._private,v=f.style,gt=f.rscratch,G=gt;if(!gt.haystack){var yt=2*Math.random()*Math.PI;gt.source={x:Math.cos(yt),y:Math.sin(yt)};var yt=2*Math.random()*Math.PI;gt.target={x:Math.cos(yt),y:Math.sin(yt)}}var x=f.source,w=f.target,k=x._private.position,S=w._private.position,N=x.width(),D=w.width(),T=x.height(),P=w.height(),ut=v["haystack-radius"].value,mt=ut/2;G.haystackPts=G.allpts=[G.source.x*N*mt+k.x,G.source.y*T*mt+k.y,G.target.x*D*mt+S.x,G.target.y*P*mt+S.y],G.midX=(G.allpts[0]+G.allpts[2])/2,G.midY=(G.allpts[1]+G.allpts[3])/2,gt.edgeType="haystack",gt.haystack=!0,this.projectLines(d),this.calculateArrowAngles(d),this.recalculateEdgeLabelProjection(d)}for(var h=0;h<c.length;h++){var d=c[h],G=d._private.rscratch;G.labelAngle=Math.atan(G.midDispY/G.midDispX)}return s}};var u=function(e,t){return Math.atan2(t,e)-Math.PI/2};s.calculateArrowAngles=function(e){var t,n,r,o,a,s,l=e._private.rscratch,c="haystack"===l.edgeType,h="multibezier"===l.edgeType,d="segments"===l.edgeType,f="compound"===l.edgeType,p="self"===l.edgeType,v=e.source().position(),g=e.target().position();c?(r=l.haystackPts[0],o=l.haystackPts[1],a=l.haystackPts[2],s=l.haystackPts[3]):(r=l.arrowStartX,o=l.arrowStartY,a=l.arrowEndX,s=l.arrowEndY),t=v.x-r,n=v.y-o,l.srcArrowAngle=u(t,n);var y=l.midX,m=l.midY;if(c&&(y=(r+a)/2,m=(o+s)/2),t=a-r,n=s-o,p)t=-1,n=1;else if(d){var b=l.allpts;if(b.length/2%2===0){var x=b.length/2,w=x-2;t=b[x]-b[w],n=b[x+1]-b[w+1]}else{var x=b.length/2-1,w=x-2,_=x+2;t=b[x]-b[w],n=b[x+1]-b[w+1]}}else if(h||f){var E,k,S,N,b=l.allpts,T=l.ctrlpts;if(T.length/2%2===0){var D=b.length/2-1,P=D+2,C=P+2;E=i.qbezierAt(b[D],b[P],b[C],0),k=i.qbezierAt(b[D+1],b[P+1],b[C+1],0),S=i.qbezierAt(b[D],b[P],b[C],1e-4),N=i.qbezierAt(b[D+1],b[P+1],b[C+1],1e-4)}else{var P=b.length/2-1,D=P-2,C=P+2;E=i.qbezierAt(b[D],b[P],b[C],.4999),k=i.qbezierAt(b[D+1],b[P+1],b[C+1],.4999),S=i.qbezierAt(b[D],b[P],b[C],.5),N=i.qbezierAt(b[D+1],b[P+1],b[C+1],.5)}t=S-E,n=N-k}if(l.midtgtArrowAngle=u(t,n),l.midDispX=t,l.midDispY=n,t*=-1,n*=-1,d){var b=l.allpts;if(b.length/2%2===0);else{var x=b.length/2-1,_=x+2;t=-(b[_]-b[x]),n=-(b[_+1]-b[x+1])}}l.midsrcArrowAngle=u(t,n),t=g.x-a,n=g.y-s,l.tgtArrowAngle=u(t,n)},s.findEndpoints=function(e){var t,n,r,a=this,s=e.source()[0],u=e.target()[0],l=s._private,c=u._private,h=l.position,d=c.position,f=e._private.style["target-arrow-shape"].value,p=e._private.style["source-arrow-shape"].value,v=e._private.rscratch,g=v.edgeType,y="bezier"===g||"multibezier"===g||"self"===g||"compound"===g,m="bezier"!==g,b="straight"===g||"segments"===g,x="segments"===g;if(y){var w=[v.ctrlpts[0],v.ctrlpts[1]],_=m?[v.ctrlpts[v.ctrlpts.length-2],v.ctrlpts[v.ctrlpts.length-1]]:w;n=_,r=w}else if(b){var E=x?v.segpts.slice(0,2):[d.x,d.y],k=x?v.segpts.slice(v.segpts.length-2):[h.x,h.y];n=k,r=E}t=a.nodeShapes[this.getNodeShape(u)].intersectLine(d.x,d.y,u.outerWidth(),u.outerHeight(),n[0],n[1],0);var S=i.shortenIntersection(t,n,a.arrowShapes[f].spacing(e)),N=i.shortenIntersection(t,n,a.arrowShapes[f].gap(e));v.endX=N[0],v.endY=N[1],v.arrowEndX=S[0],v.arrowEndY=S[1],t=a.nodeShapes[this.getNodeShape(s)].intersectLine(h.x,h.y,s.outerWidth(),s.outerHeight(),r[0],r[1],0);var T=i.shortenIntersection(t,r,a.arrowShapes[p].spacing(e)),D=i.shortenIntersection(t,r,a.arrowShapes[p].gap(e));v.startX=D[0],v.startY=D[1],v.arrowStartX=T[0],v.arrowStartY=T[1],b&&(v.badLine=o.number(v.startX)&&o.number(v.startY)&&o.number(v.endX)&&o.number(v.endY)?!1:!0)},s.getArrowWidth=s.getArrowHeight=function(e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[e];return n?n:(n=Math.max(Math.pow(13.37*e,.9),29),t[e]=n,n)},t.exports=s},{"../../../collection/zsort":29,"../../../is":77,"../../../math":79}],57:[function(e,t,n){"use strict";var r={};r.getCachedImage=function(e,t){var n=this,r=n.imageCache=n.imageCache||{};if(r[e]&&r[e].image)return r[e].image;var i=r[e]=r[e]||{},o=i.image=new Image;return o.addEventListener("load",t),o.src=e,o},t.exports=r},{}],58:[function(e,t,n){"use strict";var r=e("../../../is"),i=e("../../../util"),o=function(){},a=o,s=a.prototype;s.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],s.init=function(e){var t=this;t.options=e,t.cy=e.cy,t.container=e.cy.container(),t.selection=[void 0,void 0,void 0,void 0,0],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.hideLabelsOnViewport=e.hideLabelsOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=e.pixelRatio,t.motionBlur=!0,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.registerNodeShapes(),t.registerArrowShapes(),t.load()},s.notify=function(e){var t,n=this;t=r.array(e.type)?e.type:[e.type];for(var i=0;i<t.length;i++){var o=t[i];switch(o){case"destroy":return void n.destroy();case"add":case"remove":case"load":n.updateElementsCache();break;case"viewport":n.redrawHint("select",!0);break;case"style":n.updateCachedZSortedEles()}("load"===o||"resize"===o)&&(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container))}n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()},s.destroy=function(){this.destroyed=!0,this.cy.stopAnimationLoop();for(var e=0;e<this.bindings.length;e++){var t=this.bindings[e],n=t;n.target.removeEventListener(n.event,n.handler,n.useCapture)}if(this.removeObserver&&this.removeObserver.disconnect(),this.labelCalcDiv)try{document.body.removeChild(this.labelCalcDiv)}catch(r){}},[e("./arrow-shapes"),e("./cached-eles"),e("./coord-ele-math"),e("./images"),e("./load-listeners"),e("./node-shapes"),e("./redraw")].forEach(function(e){i.extend(s,e)}),t.exports=a},{"../../../is":77,"../../../util":94,"./arrow-shapes":54,"./cached-eles":55,"./coord-ele-math":56,"./images":57,"./load-listeners":59,"./node-shapes":60,"./redraw":61}],59:[function(e,t,n){"use strict";var r=e("../../../is"),i=e("../../../util"),o=e("../../../event"),a=e("../../../collection"),s={};s.registerBinding=function(e,t,n,r){this.bindings.push({target:e,event:t,handler:n,useCapture:r}),e.addEventListener(t,n,r)},s.nodeIsDraggable=function(e){return 0!==e._private.style.opacity.value&&"visible"==e._private.style.visibility.value&&"element"==e._private.style.display.value&&!e.locked()&&e.grabbable()?!0:!1},s.load=function(){var e=this,t=function(t,n,r,a){null==t&&(t=e.cy);for(var s=0;s<n.length;s++){var u=n[s],l=o(r,i.extend({type:u},a));t.trigger(l)}},n=function(e){return e.shiftKey||e.metaKey||e.ctrlKey},s=function(t){var n;if(t.addToList&&e.cy.hasCompoundNodes()){if(!t.addToList.hasId){t.addToList.hasId={};for(var r=0;r<t.addToList.length;r++){var i=t.addToList[r];t.addToList.hasId[i.id()]=!0}}n=t.addToList.hasId}return n||{}},u=function(e,t){if(e._private.cy.hasCompoundNodes()&&(null!=t.inDragLayer||null!=t.addToList))for(var n=s(t),r=e.descendants(),i=0;i<r.size();i++){var o=r[i],a=o._private;t.inDragLayer&&(a.rscratch.inDragLayer=!0),t.addToList&&!n[o.id()]&&(t.addToList.push(o),n[o.id()]=!0,a.grabbed=!0);for(var u=a.edges,l=0;t.inDragLayer&&l<u.length;l++)u[l]._private.rscratch.inDragLayer=!0}},l=function(e,t){var n=e._private,r=s(t);t.inDragLayer&&(n.rscratch.inDragLayer=!0),t.addToList&&!r[e.id()]&&(t.addToList.push(e),r[e.id()]=!0,n.grabbed=!0);for(var i=n.edges,o=0;t.inDragLayer&&o<i.length;o++)i[o]._private.rscratch.inDragLayer=!0;u(e,t),h(e,{inDragLayer:t.inDragLayer})},c=function(e){if(e)for(var t=0;t<e.length;t++){var n=e[t]._private;if("nodes"===n.group){n.rscratch.inDragLayer=!1,n.grabbed=!1;for(var r=n.edges,i=0;i<r.length;i++)r[i]._private.rscratch.inDragLayer=!1;h(e[t],{inDragLayer:!1})}else"edges"===n.group&&(n.rscratch.inDragLayer=!1)}},h=function(e,t){if(null!=t.inDragLayer||null!=t.addToList){var n=e;if(e._private.cy.hasCompoundNodes()){for(;n.parent().nonempty();)n=n.parent()[0];if(n!=e){for(var r=n.descendants().merge(n).unmerge(e).unmerge(e.descendants()),i=r.connectedEdges(),o=s(t),a=0;a<r.size();a++)void 0!==t.inDragLayer&&(r[a]._private.rscratch.inDragLayer=t.inDragLayer),t.addToList&&!o[r[a].id()]&&(t.addToList.push(r[a]),o[r[a].id()]=!0,r[a]._private.grabbed=!0);for(var u=0;void 0!==t.inDragLayer&&u<i.length;u++)i[u]._private.rscratch.inDragLayer=t.inDragLayer}}}};"undefined"!=typeof MutationObserver?(e.removeObserver=new MutationObserver(function(t){for(var n=0;n<t.length;n++){var r=t[n],i=r.removedNodes;if(i)for(var o=0;o<i.length;o++){var a=i[o];if(a===e.container){e.destroy();break}}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(t){e.destroy()}),e.registerBinding(window,"resize",i.debounce(function(t){e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redraw()},100));for(var d=function(t){e.registerBinding(t,"scroll",function(t){e.invalidateContainerClientCoordsCache()})},f=e.cy.container();d(f),f.parentNode;)f=f.parentNode;e.registerBinding(e.container,"contextmenu",function(e){e.preventDefault()});var p=function(){return 0!==e.selection[4]};e.registerBinding(e.container,"mousedown",function(n){n.preventDefault(),e.hoverData.capture=!0,e.hoverData.which=n.which;var r=e.cy,i=e.projectIntoViewport(n.clientX,n.clientY),a=e.selection,s=e.findNearestElement(i[0],i[1],!0,!1),u=e.dragData.possibleDragElements;e.hoverData.mdownPos=i;var c=function(){e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var t=e.hoverData.down;t?t.trigger(o(n,{type:"taphold",cyPosition:{x:i[0],y:i[1]}})):r.trigger(o(n,{type:"taphold",cyPosition:{x:i[0],y:i[1]}}))}},e.tapholdDuration)};if(3==n.which){e.hoverData.cxtStarted=!0;var h=o(n,{type:"cxttapstart",cyPosition:{x:i[0],y:i[1]}});s?(s.activate(),s.trigger(h),e.hoverData.down=s):r.trigger(h),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==n.which){if(s&&s.activate(),null!=s&&e.nodeIsDraggable(s)){var d=o(n,{type:"grab",cyPosition:{x:i[0],y:i[1]}});if(s.isNode()&&!s.selected())u=e.dragData.possibleDragElements=[],l(s,{addToList:u}),s.trigger(d);else if(s.isNode()&&s.selected()){u=e.dragData.possibleDragElements=[];for(var f=r.$(function(){return this.isNode()&&this.selected()}),p=0;p<f.length;p++)e.nodeIsDraggable(f[p])&&l(f[p],{addToList:u});s.trigger(d)}e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=s,e.hoverData.downTime=(new Date).getTime(),t(s,["mousedown","tapstart","vmousedown"],n,{cyPosition:{x:i[0],y:i[1]}}),null==s?(a[4]=1,e.data.bgActivePosistion={x:i[0],y:i[1]},e.redrawHint("select",!0),e.redraw()):s.isEdge()&&(a[4]=1),c()}a[0]=a[2]=i[0],a[1]=a[3]=i[1]},!1),e.registerBinding(window,"mousemove",function(i){var s=!1,u=e.hoverData.capture;if(!u){var c=e.findContainerClientCoords();if(!(i.clientX>c[0]&&i.clientX<c[0]+e.canvasWidth&&i.clientY>c[1]&&i.clientY<c[1]+e.canvasHeight))return;for(var h=e.container,d=i.target,f=d.parentNode,p=!1;f;){if(f===h){p=!0;break}f=f.parentNode}if(!p)return}var v=e.cy,g=v.zoom(),y=e.projectIntoViewport(i.clientX,i.clientY),m=e.selection,b=null;e.hoverData.draggingEles||(b=e.findNearestElement(y[0],y[1],!0,!1));var x=e.hoverData.last,w=e.hoverData.down,_=[y[0]-m[2],y[1]-m[3]],E=e.dragData.possibleDragElements,k=m[2]-m[0],S=k*k,N=m[3]-m[1],T=N*N,D=S+T,P=D*g*g,C=n(i);e.hoverData.tapholdCancelled=!0;var M=function(){var t=e.hoverData.dragDelta=e.hoverData.dragDelta||[];0===t.length?(t.push(_[0]),t.push(_[1])):(t[0]+=_[0],t[1]+=_[1])};if(s=!0,t(b,["mousemove","vmousemove","tapdrag"],i,{cyPosition:{x:y[0],y:y[1]}}),3===e.hoverData.which){var A=o(i,{type:"cxtdrag",cyPosition:{x:y[0],y:y[1]}});w?w.trigger(A):v.trigger(A),e.hoverData.cxtDragged=!0,e.hoverData.cxtOver&&b===e.hoverData.cxtOver||(e.hoverData.cxtOver&&e.hoverData.cxtOver.trigger(o(i,{type:"cxtdragout",cyPosition:{x:y[0],y:y[1]}})),e.hoverData.cxtOver=b,b&&b.trigger(o(i,{type:"cxtdragover",cyPosition:{x:y[0],y:y[1]}})))}else if(e.hoverData.dragging){if(s=!0,v.panningEnabled()&&v.userPanningEnabled()){var I;if(e.hoverData.justStartedPan){var L=e.hoverData.mdownPos;

I={x:(y[0]-L[0])*g,y:(y[1]-L[1])*g},e.hoverData.justStartedPan=!1}else I={x:_[0]*g,y:_[1]*g};v.panBy(I),e.hoverData.dragged=!0}y=e.projectIntoViewport(i.clientX,i.clientY)}else if(1!=m[4]||null!=w&&!w.isEdge()){if(w&&w.isEdge()&&w.active()&&w.unactivate(),b!=x&&(x&&t(x,["mouseout","tapdragout"],i,{cyPosition:{x:y[0],y:y[1]}}),b&&t(b,["mouseover","tapdragover"],i,{cyPosition:{x:y[0],y:y[1]}}),e.hoverData.last=b),w&&w.isNode()&&e.nodeIsDraggable(w))if(P>=e.desktopTapThreshold2){var O=!e.dragData.didDrag;O&&e.redrawHint("eles",!0),e.dragData.didDrag=!0;for(var j=[],B=0;B<E.length;B++){var R=E[B];if(e.hoverData.draggingEles||l(R,{inDragLayer:!0}),R.isNode()&&e.nodeIsDraggable(R)&&R.grabbed()){var z=R._private.position;if(j.push(R),r.number(_[0])&&r.number(_[1])){var F=!R.isParent();if(F&&(z.x+=_[0],z.y+=_[1]),O){var V=e.hoverData.dragDelta;F&&r.number(V[0])&&r.number(V[1])&&(z.x+=V[0],z.y+=V[1])}}}}e.hoverData.draggingEles=!0;var q=a(v,j);q.updateCompoundBounds(),q.trigger("position drag"),e.redrawHint("drag",!0),e.redraw()}else M();s=!0}else e.hoverData.dragging||!v.boxSelectionEnabled()||!C&&v.panningEnabled()&&v.userPanningEnabled()?!e.hoverData.selecting&&v.panningEnabled()&&v.userPanningEnabled()&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,m[4]=0,e.data.bgActivePosistion={x:y[0],y:y[1]},e.redrawHint("select",!0),e.redraw()):(e.data.bgActivePosistion=void 0,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()),w&&w.isEdge()&&w.active()&&w.unactivate();return m[2]=y[0],m[3]=y[1],s?(i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault(),!1):void 0},!1),e.registerBinding(window,"mouseup",function(r){var i=e.hoverData.capture;if(i){e.hoverData.capture=!1;var s=e.cy,u=e.projectIntoViewport(r.clientX,r.clientY),l=e.selection,h=e.findNearestElement(u[0],u[1],!0,!1),d=e.dragData.possibleDragElements,f=e.hoverData.down,p=n(r);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,f&&f.unactivate(),3===e.hoverData.which){var v=o(r,{type:"cxttapend",cyPosition:{x:u[0],y:u[1]}});if(f?f.trigger(v):s.trigger(v),!e.hoverData.cxtDragged){var g=o(r,{type:"cxttap",cyPosition:{x:u[0],y:u[1]}});f?f.trigger(g):s.trigger(g)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(1===e.hoverData.which){if(null!=f||e.dragData.didDrag||e.hoverData.selecting||e.hoverData.dragged||n(r)||(s.$(function(){return this.selected()}).unselect(),d.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=d=[]),t(h,["mouseup","tapend","vmouseup"],r,{cyPosition:{x:u[0],y:u[1]}}),e.dragData.didDrag||e.hoverData.dragged||t(h,["click","tap","vclick"],r,{cyPosition:{x:u[0],y:u[1]}}),h!=f||e.dragData.didDrag||e.hoverData.selecting||null!=h&&h._private.selectable&&(e.hoverData.dragging||("additive"===s.selectionType()||p?h.selected()?h.unselect():h.select():p||(s.$(":selected").unmerge(h).unselect(),h.select())),e.redrawHint("eles",!0)),e.hoverData.selecting){var y=[],m=e.getAllInBox(l[0],l[1],l[2],l[3]);e.redrawHint("select",!0),m.length>0&&e.redrawHint("eles",!0);for(var b=0;b<m.length;b++)m[b]._private.selectable&&y.push(m[b]);var x=a(s,y);"additive"===s.selectionType()?x.select():(p||s.$(":selected").unmerge(x).unselect(),x.select()),e.redraw()}e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),l[4]||(e.redrawHint("drag",!0),e.redrawHint("eles",!0),c(d),f&&f.trigger("free"))}l[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[]}},!1);var v=function(t){if(!e.scrollingPage){var n=e.cy,r=e.projectIntoViewport(t.clientX,t.clientY),i=[r[0]*n.zoom()+n.pan().x,r[1]*n.zoom()+n.pan().y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||p())return void t.preventDefault();if(n.panningEnabled()&&n.userPanningEnabled()&&n.zoomingEnabled()&&n.userZoomingEnabled()){t.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150);var o=t.deltaY/-250||t.wheelDeltaY/1e3||t.wheelDelta/1e3;o*=e.wheelSensitivity;var a=1===t.deltaMode;a&&(o*=33),n.zoom({level:n.zoom()*Math.pow(10,o),renderedPosition:{x:i[0],y:i[1]}})}}};e.registerBinding(e.container,"wheel",v,!0),e.registerBinding(window,"scroll",function(t){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.container,"mouseout",function(t){var n=e.projectIntoViewport(t.clientX,t.clientY);e.cy.trigger(o(t,{type:"mouseout",cyPosition:{x:n[0],y:n[1]}}))},!1),e.registerBinding(e.container,"mouseover",function(t){var n=e.projectIntoViewport(t.clientX,t.clientY);e.cy.trigger(o(t,{type:"mouseover",cyPosition:{x:n[0],y:n[1]}}))},!1);var g,y,m,b,x,w,_,E,k,S,N,T,D,P,C=function(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))},M=function(e,t,n,r){return(n-e)*(n-e)+(r-t)*(r-t)};e.registerBinding(e.container,"touchstart",P=function(n){e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var r=e.cy,i=e.getCachedNodes(),a=e.getCachedEdges(),s=e.touchData.now,u=e.touchData.earlier;if(n.touches[0]){var c=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);s[0]=c[0],s[1]=c[1]}if(n.touches[1]){var c=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);s[2]=c[0],s[3]=c[1]}if(n.touches[2]){var c=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);s[4]=c[0],s[5]=c[1]}if(n.touches[1]){var h=function(e){for(var t=0;t<e.length;t++)e[t]._private.grabbed=!1,e[t]._private.rscratch.inDragLayer=!1,e[t].active()&&e[t].unactivate()};h(i),h(a);var d=e.findContainerClientCoords();k=d[0],S=d[1],N=d[2],T=d[3],g=n.touches[0].clientX-k,y=n.touches[0].clientY-S,m=n.touches[1].clientX-k,b=n.touches[1].clientY-S,D=g>=0&&N>=g&&m>=0&&N>=m&&y>=0&&T>=y&&b>=0&&T>=b;var f=r.pan(),p=r.zoom();x=C(g,y,m,b),w=M(g,y,m,b),_=[(g+m)/2,(y+b)/2],E=[(_[0]-f.x)/p,(_[1]-f.y)/p];var v=200,P=v*v;if(P>w&&!n.touches[2]){var A=e.findNearestElement(s[0],s[1],!0,!0),I=e.findNearestElement(s[2],s[3],!0,!0);return A&&A.isNode()?(A.activate().trigger(o(n,{type:"cxttapstart",cyPosition:{x:s[0],y:s[1]}})),e.touchData.start=A):I&&I.isNode()?(I.activate().trigger(o(n,{type:"cxttapstart",cyPosition:{x:s[0],y:s[1]}})),e.touchData.start=I):(r.trigger(o(n,{type:"cxttapstart",cyPosition:{x:s[0],y:s[1]}})),e.touchData.start=null),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(n.touches[2]);else if(n.touches[1]);else if(n.touches[0]){var L=e.findNearestElement(s[0],s[1],!0,!0);if(null!=L&&(L.activate(),e.touchData.start=L,L.isNode()&&e.nodeIsDraggable(L))){var O=e.dragData.touchDragEles=[];if(e.redrawHint("eles",!0),e.redrawHint("drag",!0),L.selected())for(var j=r.$(function(){return this.isNode()&&this.selected()}),B=0;B<j.length;B++){var R=j[B];e.nodeIsDraggable(R)&&l(R,{addToList:O})}else l(L,{addToList:O});L.trigger(o(n,{type:"grab",cyPosition:{x:s[0],y:s[1]}}))}t(L,["touchstart","tapstart","vmousedown"],n,{cyPosition:{x:s[0],y:s[1]}}),null==L&&(e.data.bgActivePosistion={x:c[0],y:c[1]},e.redrawHint("select",!0),e.redraw());for(var z=0;z<s.length;z++)u[z]=s[z],e.touchData.startPosition[z]=s[z];e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){e.touchData.singleTouchMoved!==!1||e.pinching||e.touchData.selecting||(t(e.touchData.start,["taphold"],n,{cyPosition:{x:s[0],y:s[1]}}),e.touchData.start||r.$(":selected").unselect())},e.tapholdDuration)}},!1);var A;e.registerBinding(window,"touchmove",A=function(n){var i=e.selection,s=e.touchData.capture,u=e.cy,c=e.touchData.now,h=e.touchData.earlier,d=u.zoom();if(n.touches[0]){var f=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);c[0]=f[0],c[1]=f[1]}if(n.touches[1]){var f=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);c[2]=f[0],c[3]=f[1]}if(n.touches[2]){var f=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);c[4]=f[0],c[5]=f[1]}for(var p=[],v=0;v<c.length;v++)p[v]=c[v]-h[v];var _=e.touchData.startPosition,N=c[0]-_[0],T=N*N,P=c[1]-_[1],A=P*P,I=T+A,L=I*d*d;if(s&&e.touchData.cxt){n.preventDefault();var O=n.touches[0].clientX-k,j=n.touches[0].clientY-S,B=n.touches[1].clientX-k,R=n.touches[1].clientY-S,z=M(O,j,B,R),F=z/w,V=150,q=V*V,X=1.5,Y=X*X;if(F>=Y||z>=q){e.touchData.cxt=!1,e.touchData.start&&(e.touchData.start.unactivate(),e.touchData.start=null),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var $=o(n,{type:"cxttapend",cyPosition:{x:c[0],y:c[1]}});e.touchData.start?e.touchData.start.trigger($):u.trigger($)}}if(s&&e.touchData.cxt){var $=o(n,{type:"cxtdrag",cyPosition:{x:c[0],y:c[1]}});e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.trigger($):u.trigger($),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var G=e.findNearestElement(c[0],c[1],!0,!0);e.touchData.cxtOver&&G===e.touchData.cxtOver||(e.touchData.cxtOver&&e.touchData.cxtOver.trigger(o(n,{type:"cxtdragout",cyPosition:{x:c[0],y:c[1]}})),e.touchData.cxtOver=G,G&&G.trigger(o(n,{type:"cxtdragover",cyPosition:{x:c[0],y:c[1]}})))}else if(s&&n.touches[2]&&u.boxSelectionEnabled())n.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting=!0,e.redrawHint("select",!0),i&&0!==i.length&&void 0!==i[0]?(i[2]=(c[0]+c[2]+c[4])/3,i[3]=(c[1]+c[3]+c[5])/3):(i[0]=(c[0]+c[2]+c[4])/3,i[1]=(c[1]+c[3]+c[5])/3,i[2]=(c[0]+c[2]+c[4])/3+1,i[3]=(c[1]+c[3]+c[5])/3+1),i[4]=1,e.touchData.selecting=!0,e.redraw();else if(s&&n.touches[1]&&u.zoomingEnabled()&&u.panningEnabled()&&u.userZoomingEnabled()&&u.userPanningEnabled()){n.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var W=e.dragData.touchDragEles;if(W){e.redrawHint("drag",!0);for(var U=0;U<W.length;U++)W[U]._private.grabbed=!1,W[U]._private.rscratch.inDragLayer=!1}var O=n.touches[0].clientX-k,j=n.touches[0].clientY-S,B=n.touches[1].clientX-k,R=n.touches[1].clientY-S,H=C(O,j,B,R),Z=H/x;if(1!=Z&&D){var K=O-g,J=j-y,Q=B-m,ee=R-b,te=(K+Q)/2,ne=(J+ee)/2,re=u.zoom(),ie=re*Z,oe=u.pan(),ae=E[0]*re+oe.x,se=E[1]*re+oe.y,ue={x:-ie/re*(ae-oe.x-te)+ae,y:-ie/re*(se-oe.y-ne)+se};if(e.touchData.start){var W=e.dragData.touchDragEles;if(W)for(var U=0;U<W.length;U++){var le=W[U]._private;le.grabbed=!1,le.rscratch.inDragLayer=!1}var ce=e.touchData.start._private;ce.active=!1,ce.grabbed=!1,ce.rscratch.inDragLayer=!1,e.redrawHint("drag",!0),e.touchData.start.trigger("free").trigger("unactivate")}u.viewport({zoom:ie,pan:ue,cancelOnFailedZoom:!0}),x=H,g=O,y=j,m=B,b=R,e.pinching=!0}if(n.touches[0]){var f=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);c[0]=f[0],c[1]=f[1]}if(n.touches[1]){var f=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);c[2]=f[0],c[3]=f[1]}if(n.touches[2]){var f=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);c[4]=f[0],c[5]=f[1]}}else if(n.touches[0]){var he=e.touchData.start,de=e.touchData.last,G=G||e.findNearestElement(c[0],c[1],!0,!0);if(null!=he&&n.preventDefault(),null!=he&&"nodes"==he._private.group&&e.nodeIsDraggable(he))if(L>=e.touchTapThreshold2){for(var W=e.dragData.touchDragEles,fe=!e.dragData.didDrag,pe=0;pe<W.length;pe++){var ve=W[pe];if(fe&&l(ve,{inDragLayer:!0}),e.nodeIsDraggable(ve)&&ve.isNode()&&ve.grabbed()){e.dragData.didDrag=!0;var ge=ve._private.position,ye=!ve.isParent();if(ye&&r.number(p[0])&&r.number(p[1])&&(ge.x+=p[0],ge.y+=p[1]),fe){e.redrawHint("eles",!0);var me=e.touchData.dragDelta;ye&&r.number(me[0])&&r.number(me[1])&&(ge.x+=me[0],ge.y+=me[1])}}}var be=a(u,W);be.updateCompoundBounds(),be.trigger("position drag"),e.hoverData.draggingEles=!0,e.redrawHint("drag",!0),e.touchData.startPosition[0]==h[0]&&e.touchData.startPosition[1]==h[1]&&e.redrawHint("eles",!0),e.redraw()}else{var me=e.touchData.dragDelta=e.touchData.dragDelta||[];0===me.length?(me.push(p[0]),me.push(p[1])):(me[0]+=p[0],me[1]+=p[1])}t(he||G,["touchmove","tapdrag","vmousemove"],n,{cyPosition:{x:c[0],y:c[1]}}),G!=de&&(de&&de.trigger(o(n,{type:"tapdragout",cyPosition:{x:c[0],y:c[1]}})),G&&G.trigger(o(n,{type:"tapdragover",cyPosition:{x:c[0],y:c[1]}}))),e.touchData.last=G;for(var U=0;U<c.length;U++)c[U]&&e.touchData.startPosition[U]&&L>e.touchTapThreshold2&&(e.touchData.singleTouchMoved=!0);if(s&&(null==he||he.isEdge())&&u.panningEnabled()&&u.userPanningEnabled()){n.preventDefault(),e.swipePanning?u.panBy({x:p[0]*d,y:p[1]*d}):L>=e.touchTapThreshold2&&(e.swipePanning=!0,u.panBy({x:N*d,y:P*d}),he&&(he.unactivate(),e.data.bgActivePosistion||(e.data.bgActivePosistion={x:c[0],y:c[1]}),e.redrawHint("select",!0),e.touchData.start=null));var f=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);c[0]=f[0],c[1]=f[1]}}for(var v=0;v<c.length;v++)h[v]=c[v]},!1);var I;e.registerBinding(window,"touchcancel",I=function(t){var n=e.touchData.start;e.touchData.capture=!1,n&&n.unactivate()});var L;if(e.registerBinding(window,"touchend",L=function(n){var r=e.touchData.start,i=e.touchData.capture;if(i){e.touchData.capture=!1,n.preventDefault();var s=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var u=e.cy,l=u.zoom(),h=e.touchData.now,d=e.touchData.earlier;if(n.touches[0]){var f=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);h[0]=f[0],h[1]=f[1]}if(n.touches[1]){var f=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);h[2]=f[0],h[3]=f[1]}if(n.touches[2]){var f=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);h[4]=f[0],h[5]=f[1]}r&&r.unactivate();var p;if(e.touchData.cxt){if(p=o(n,{type:"cxttapend",cyPosition:{x:h[0],y:h[1]}}),r?r.trigger(p):u.trigger(p),!e.touchData.cxtDragged){var v=o(n,{type:"cxttap",cyPosition:{x:h[0],y:h[1]}});r?r.trigger(v):u.trigger(v)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!n.touches[2]&&u.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var g=[],y=e.getAllInBox(s[0],s[1],s[2],s[3]);s[0]=void 0,s[1]=void 0,s[2]=void 0,s[3]=void 0,s[4]=0,e.redrawHint("select",!0);for(var m=0;m<y.length;m++)y[m]._private.selectable&&g.push(y[m]);var b=a(u,g);b.select(),b.length>0?e.redrawHint("eles",!0):e.redraw()}var x=!1;if(null!=r&&(r._private.active=!1,x=!0,r.unactivate()),n.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(n.touches[1]);else if(n.touches[0]);else if(!n.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var w=e.dragData.touchDragEles;if(null!=r){var _=r._private.grabbed;c(w),e.redrawHint("drag",!0),e.redrawHint("eles",!0),_&&r.trigger("free"),t(r,["touchend","tapend","vmouseup"],n,{cyPosition:{x:h[0],y:h[1]}}),r.unactivate(),e.touchData.start=null}else{var E=e.findNearestElement(h[0],h[1],!0,!0);t(E,["touchend","tapend","vmouseup"],n,{cyPosition:{x:h[0],y:h[1]}})}var k=e.touchData.startPosition[0]-h[0],S=k*k,N=e.touchData.startPosition[1]-h[1],T=N*N,D=S+T,P=D*l*l;null!=r&&!e.dragData.didDrag&&r._private.selectable&&P<e.touchTapThreshold2&&!e.pinching&&("single"===u.selectionType()?(u.$(":selected").unmerge(r).unselect(),r.select()):r.selected()?r.unselect():r.select(),x=!0,e.redrawHint("eles",!0)),e.touchData.singleTouchMoved||t(r,["tap","vclick"],n,{cyPosition:{x:h[0],y:h[1]}}),e.touchData.singleTouchMoved=!0}for(var C=0;C<h.length;C++)d[C]=h[C];e.dragData.didDrag=!1,0===n.touches.length&&(e.touchData.dragDelta=[]),x&&r&&r.updateStyle(!1),n.touches.length<2&&(e.pinching=!1,e.redrawHint("eles",!0),e.redraw())}},!1),"undefined"==typeof TouchEvent){var O=[],j=function(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/2,screenX:e.screenX,screenY:e.screenY,target:e.target}},B=function(e){return{event:e,touch:j(e)}},R=function(e){O.push(B(e))},z=function(e){for(var t=0;t<O.length;t++){var n=O[t];if(n.event.pointerId===e.pointerId)return void O.splice(t,1)}},F=function(e){var t=O.filter(function(t){return t.event.pointerId===e.pointerId})[0];t.event=e,t.touch=j(e)},V=function(e){e.touches=O.map(function(e){return e.touch})},q=function(e){return"mouse"===e.pointerType||4===e.pointerType};e.registerBinding(e.container,"pointerdown",function(e){q(e)||(e.preventDefault(),R(e),V(e),P(e))}),e.registerBinding(e.container,"pointerup",function(e){q(e)||(z(e),V(e),L(e))}),e.registerBinding(e.container,"pointercancel",function(e){q(e)||(z(e),V(e),I(e))}),e.registerBinding(e.container,"pointermove",function(e){q(e)||(e.preventDefault(),F(e),V(e),A(e))})}},t.exports=s},{"../../../collection":23,"../../../event":42,"../../../is":77,"../../../util":94}],60:[function(e,t,n){"use strict";var r=e("../../../math"),i={};i.registerNodeShapes=function(){function e(e,i){return t[e]={name:e,points:i,draw:function(e,t,r,i,o){n.nodeShapeImpl("polygon")(e,t,r,i,o,this.points)},intersectLine:function(e,t,n,i,o,a,s){return r.polygonIntersectLine(o,a,this.points,e,t,n/2,i/2,s)},checkPoint:function(n,i,o,a,s,u,l){return r.pointInsidePolygon(n,i,t[e].points,u,l,a,s,[0,-1],o)}}}var t=this.nodeShapes={},n=this;t.ellipse={name:"ellipse",draw:function(e,t,r,i,o){n.nodeShapeImpl(this.name)(e,t,r,i,o)},intersectLine:function(e,t,n,i,o,a,s){return r.intersectLineEllipse(o,a,e,t,n/2+s,i/2+s)},checkPoint:function(e,t,n,r,i,o,a){return e-=o,t-=a,e/=r/2+n,t/=i/2+n,1>=e*e+t*t}},e("triangle",r.generateUnitNgonPointsFitToSquare(3,0)),e("square",r.generateUnitNgonPointsFitToSquare(4,0)),t.rectangle=t.square,t.roundrectangle={name:"roundrectangle",points:r.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,r,i,o){n.nodeShapeImpl(this.name)(e,t,r,i,o)},intersectLine:function(e,t,n,i,o,a,s){return r.roundRectangleIntersectLine(o,a,e,t,n,i,s)},checkPoint:function(e,t,n,i,o,a,s){var u=r.getRoundRectangleRadius(i,o);if(r.pointInsidePolygon(e,t,this.points,a,s,i,o-2*u,[0,-1],n))return!0;if(r.pointInsidePolygon(e,t,this.points,a,s,i-2*u,o,[0,-1],n))return!0;var l=function(e,t,n,r,i,o,a){return e-=n,t-=r,e/=i/2+a,t/=o/2+a,1>=e*e+t*t};return l(e,t,a-i/2+u,s-o/2+u,2*u,2*u,n)?!0:l(e,t,a+i/2-u,s-o/2+u,2*u,2*u,n)?!0:l(e,t,a+i/2-u,s+o/2-u,2*u,2*u,n)?!0:l(e,t,a-i/2+u,s+o/2-u,2*u,2*u,n)?!0:!1}},e("diamond",[0,1,1,0,0,-1,-1,0]),e("pentagon",r.generateUnitNgonPointsFitToSquare(5,0)),e("hexagon",r.generateUnitNgonPointsFitToSquare(6,0)),e("heptagon",r.generateUnitNgonPointsFitToSquare(7,0)),e("octagon",r.generateUnitNgonPointsFitToSquare(8,0));var i=new Array(20),o=r.generateUnitNgonPoints(5,0),a=r.generateUnitNgonPoints(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var u=0;u<a.length/2;u++)a[2*u]*=s,a[2*u+1]*=s;for(var u=0;5>u;u++)i[4*u]=o[2*u],i[4*u+1]=o[2*u+1],i[4*u+2]=a[2*u],i[4*u+3]=a[2*u+1];i=r.fitPolygonToSquare(i),e("star",i),e("vee",[-1,-1,0,-.333,1,-1,0,1]),e("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),t.makePolygon=function(n){var r,i=n.join("$"),o="polygon-"+i;return(r=t[o])?r:e(o,n)}},t.exports=i},{"../../../math":79}],61:[function(e,t,n){"use strict";var r=e("../../../util"),i={};i.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};var o=1e3/60,a=1e3;i.redraw=function(e){e=e||r.staticEmptyObject();var t=this,n=e.forcedContext;void 0===t.averageRedrawTime&&(t.averageRedrawTime=0),void 0===t.lastRedrawTime&&(t.lastRedrawTime=0);var i=t.lastRedrawTime;i=o>i?o:i,i=a>i?i:a,void 0===t.lastDrawTime&&(t.lastDrawTime=0);var s=Date.now(),u=s-t.lastDrawTime,l=u>=i;return n||l&&!t.currentlyDrawing?(t.requestedFrame=!0,t.currentlyDrawing=!0,void(t.renderOptions=e)):void(t.skipFrame=!0)},i.startRenderLoop=function(){var e=this,t=function(){if(!e.destroyed){if(e.requestedFrame&&!e.skipFrame){var n=r.performanceNow();e.render(e.renderOptions);var i=e.lastRedrawTime=r.performanceNow();void 0===e.averageRedrawTime&&(e.averageRedrawTime=i-n),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var o=i-n;e.redrawTotalTime+=o,e.lastRedrawTime=o,e.averageRedrawTime=e.averageRedrawTime/2+o/2,e.requestedFrame=!1}e.skipFrame=!1,r.requestAnimationFrame(t)}};r.requestAnimationFrame(t)},t.exports=i},{"../../../util":94}],62:[function(e,t,n){"use strict";var r,i={};i.arrowShapeImpl=function(e){return(r||(r={polygon:function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.lineTo(r.x,r.y)}},"triangle-backcurve":function(e,t,n){for(var r,i=0;i<t.length;i++){var o=t[i];0===i&&(r=o),e.lineTo(o.x,o.y)}e.quadraticCurveTo(n.x,n.y,r.x,r.y)},"triangle-tee":function(e,t,n){for(var r=t,i=0;i<r.length;i++){var o=r[i];e.lineTo(o.x,o.y)}var a=n,s=n[0];e.moveTo(s.x,s.y);for(var i=0;i<a.length;i++){var o=a[i];e.lineTo(o.x,o.y)}},circle:function(e,t,n,r){e.arc(t,n,r,0,2*Math.PI,!1)}}))[e]},t.exports=i},{}],63:[function(e,t,n){"use strict";var r={};r.drawEdge=function(e,t,n){var r=t._private.rscratch,i=this.usePaths();if(!(r.badBezier||r.badLine||isNaN(r.allpts[0]))){var o=t._private.style;if(!(o.width.pfValue<=0)){var a=o["overlay-padding"].pfValue,s=o["overlay-opacity"].value,u=o["overlay-color"].value;if(n){if(0===s)return;this.strokeStyle(e,u[0],u[1],u[2],s),e.lineCap="round","self"!=r.edgeType||i||(e.lineCap="butt")}else{var l=o["line-color"].value;this.strokeStyle(e,l[0],l[1],l[2],o.opacity.value),e.lineCap="butt"}var c=o.width.pfValue+(n?2*a:0),h=n?"solid":o["line-style"].value;e.lineWidth=c;var d=o["shadow-blur"].pfValue,f=o["shadow-opacity"].value,p=o["shadow-color"].value,v=o["shadow-offset-x"].pfValue,g=o["shadow-offset-y"].pfValue;this.shadowStyle(e,p,n?0:f,d,v,g),this.drawEdgePath(t,e,r.allpts,h,c),this.drawArrowheads(e,t,n),this.shadowStyle(e,"transparent",0)}}},r.drawEdgePath=function(e,t,n,r,i){var o,a=e._private.rscratch,s=t,u=!1,l=this.usePaths();if(l){var c=n.join("$"),h=a.pathCacheKey&&a.pathCacheKey===c;h?(o=t=a.pathCache,u=!0):(o=t=new Path2D,a.pathCacheKey=c,a.pathCache=o)}if(s.setLineDash)switch(r){case"dotted":s.setLineDash([1,1]);break;case"dashed":s.setLineDash([6,3]);break;case"solid":s.setLineDash([])}if(!u)switch(t.beginPath&&t.beginPath(),t.moveTo(n[0],n[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":if(!a.badBezier)for(var d=2;d+3<n.length;d+=4)t.quadraticCurveTo(n[d],n[d+1],n[d+2],n[d+3]);break;case"straight":case"segments":case"haystack":if(!a.badLine)for(var d=2;d+1<n.length;d+=2)t.lineTo(n[d],n[d+1])}t=s,l?t.stroke(o):t.stroke(),t.setLineDash&&t.setLineDash([])},r.drawArrowheads=function(e,t,n){if(!n){var r=t._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(e,t,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle),this.drawArrowhead(e,t,"mid-target",r.midX,r.midY,r.midtgtArrowAngle),this.drawArrowhead(e,t,"mid-source",r.midX,r.midY,r.midsrcArrowAngle),i||this.drawArrowhead(e,t,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle)}},r.drawArrowhead=function(e,t,n,r,i,o){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(o)||null==o)){var a=this,s=t._private.style,u=s[n+"-arrow-shape"].value;if("none"!==u){var l=e.globalCompositeOperation,c="hollow"===s[n+"-arrow-fill"].value?"both":"filled",h=s[n+"-arrow-fill"].value;"half-triangle-overshot"===u&&(h="hollow",c="hollow"),(1!==s.opacity.value||"hollow"===h)&&(e.globalCompositeOperation="destination-out",a.fillStyle(e,255,255,255,1),a.strokeStyle(e,255,255,255,1),a.drawArrowShape(t,n,e,c,s.width.pfValue,s[n+"-arrow-shape"].value,r,i,o),e.globalCompositeOperation=l);var d=s[n+"-arrow-color"].value;a.fillStyle(e,d[0],d[1],d[2],s.opacity.value),a.strokeStyle(e,d[0],d[1],d[2],s.opacity.value),a.drawArrowShape(t,n,e,h,s.width.pfValue,s[n+"-arrow-shape"].value,r,i,o)}}},r.drawArrowShape=function(e,t,n,r,i,o,a,s,u){var l,c=this,h=this.usePaths(),d=e._private.rscratch,f=!1,p=n,v={x:a,y:s},g=this.getArrowWidth(i),y=c.arrowShapes[o];if(h){var m=g+"$"+o+"$"+u+"$"+a+"$"+s;d.arrowPathCacheKey=d.arrowPathCacheKey||{},d.arrowPathCache=d.arrowPathCache||{};var b=d.arrowPathCacheKey[t]===m;b?(l=n=d.arrowPathCache[t],f=!0):(l=n=new Path2D,d.arrowPathCacheKey[t]=m,d.arrowPathCache[t]=l)}n.beginPath&&n.beginPath(),f||y.draw(n,g,u,v),!y.leavePathOpen&&n.closePath&&n.closePath(),n=p,("filled"===r||"both"===r)&&(h?n.fill(l):n.fill()),("hollow"===r||"both"===r)&&(n.lineWidth=y.matchEdgeWidth?i:1,n.lineJoin="miter",h?n.stroke(l):n.stroke())},t.exports=r},{}],64:[function(e,t,n){"use strict";var r={};r.safeDrawImage=function(e,t,n,r,i,o,a,s,u,l){var c=this;try{e.drawImage(t,n,r,i,o,a,s,u,l)}catch(h){c.data.canvasNeedsRedraw[c.NODE]=!0,c.data.canvasNeedsRedraw[c.DRAG]=!0,c.drawingImage=!0,c.redraw()}},r.drawInscribedImage=function(e,t,n){var r=this,i=n._private.position.x,o=n._private.position.y,a=n._private.style,s=a["background-fit"].value,u=a["background-position-x"],l=a["background-position-y"],c=a["background-repeat"].value,h=n.width(),d=n.height(),f=n._private.rscratch,p=a["background-clip"].value,v="node"===p,g=a["background-image-opacity"].value,y=t.width||t.cachedW,m=t.height||t.cachedH;(null==y||null==m)&&(document.body.appendChild(t),y=t.cachedW=t.width||t.offsetWidth,m=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var b=y,x=m,w=a["background-width"];"auto"!==w.value&&(b="%"===w.units?w.value/100*h:w.pfValue);var _=a["background-height"];if("auto"!==_.value&&(x="%"===_.units?_.value/100*d:_.pfValue),0!==b&&0!==x){if("contain"===s){var E=Math.min(h/b,d/x);b*=E,x*=E}else if("cover"===s){var E=Math.max(h/b,d/x);b*=E,x*=E}var k=i-h/2;k+="%"===u.units?(h-b)*u.value/100:u.pfValue;var S=o-d/2;S+="%"===l.units?(d-x)*l.value/100:l.pfValue,f.pathCache&&(k-=i,S-=o,i=0,o=0);var N=e.globalAlpha;if(e.globalAlpha=g,"no-repeat"===c)v&&(e.save(),f.pathCache?e.clip(f.pathCache):(r.nodeShapes[r.getNodeShape(n)].draw(e,i,o,h,d),e.clip())),r.safeDrawImage(e,t,0,0,y,m,k,S,b,x),v&&e.restore();else{var T=e.createPattern(t,c);e.fillStyle=T,r.nodeShapes[r.getNodeShape(n)].draw(e,i,o,h,d),e.translate(k,S),e.fill(),e.translate(-k,-S)}e.globalAlpha=N}},t.exports=r},{}],65:[function(e,t,n){"use strict";function r(e,t,n,r,i,o){var o=o||5;e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+r-o,n),e.quadraticCurveTo(t+r,n,t+r,n+o),e.lineTo(t+r,n+i-o),e.quadraticCurveTo(t+r,n+i,t+r-o,n+i),e.lineTo(t+o,n+i),e.quadraticCurveTo(t,n+i,t,n+i-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),e.fill()}var i=e("../../../is"),o={};o.drawEdgeText=function(e,t){var n=t._private.style.label.strValue;if(!(!n||n.match(/^\s+$/)||this.hideEdgesOnViewport&&(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning))){var r=t._private.style["font-size"].pfValue*t.cy().zoom(),o=t._private.style["min-zoomed-font-size"].pfValue;if(!(o>r)){e.textAlign="center",e.textBaseline="middle";var a=t._private.rscratch;if(i.number(a.labelX)&&i.number(a.labelY)){var s,u=t._private.style,l="autorotate"===u["edge-text-rotation"].strValue;l?(s=a.labelAngle,e.translate(a.labelX,a.labelY),e.rotate(s),this.drawText(e,t,0,0),e.rotate(-s),e.translate(-a.labelX,-a.labelY)):this.drawText(e,t,a.labelX,a.labelY)}}}},o.drawNodeText=function(e,t){var n=t._private.style.label.strValue;if(n&&!n.match(/^\s+$/)){var r=t._private.style["font-size"].pfValue*t.cy().zoom(),o=t._private.style["min-zoomed-font-size"].pfValue;if(!(o>r)){var a=t._private.style["text-halign"].strValue,s=t._private.style["text-valign"].strValue,u=t._private.rscratch;if(i.number(u.labelX)&&i.number(u.labelY)){switch(a){case"left":e.textAlign="right";break;case"right":e.textAlign="left";break;default:e.textAlign="center"}switch(s){case"top":e.textBaseline="bottom";break;case"bottom":e.textBaseline="top";break;default:e.textBaseline="middle"}this.drawText(e,t,u.labelX,u.labelY)}}}},o.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if(t=this.fontCaches[n],t.context===e)return t;return t={context:e},this.fontCaches.push(t),t},o.setupTextStyle=function(e,t){var n=t.effectiveOpacity(),r=t._private.style,i=r["font-style"].strValue,o=r["font-size"].pfValue+"px",a=r["font-family"].strValue,s=r["font-weight"].strValue,u=r["text-opacity"].value*r.opacity.value*n,l=r["text-outline-opacity"].value*u,c=r.color.value,h=r["text-outline-color"].value,d=r["text-shadow-blur"].pfValue,f=r["text-shadow-opacity"].value,p=r["text-shadow-color"].value,v=r["text-shadow-offset-x"].pfValue,g=r["text-shadow-offset-y"].pfValue,y=t._private.fontKey,m=this.getFontCache(e);m.key!==y&&(e.font=i+" "+s+" "+o+" "+a,m.key=y);var b=this.getLabelText(t);return e.lineJoin="round",this.fillStyle(e,c[0],c[1],c[2],u),this.strokeStyle(e,h[0],h[1],h[2],l),this.shadowStyle(e,p,f,d,v,g),b},o.drawText=function(e,t,n,i){var o=t._private,a=o.style,s=o.rstyle,u=o.rscratch,l=t.effectiveOpacity();if(0!==l&&0!==a["text-opacity"].value){var c=this.setupTextStyle(e,t),h=a["text-halign"].value,d=a["text-valign"].value;if(t.isEdge()&&(h="center",d="center"),t.isNode()){var f=a["padding-left"].pfValue,p=a["padding-right"].pfValue,v=a["padding-top"].pfValue,g=a["padding-bottom"].pfValue;n+=f/2,n-=p/2,i+=v/2,i-=g/2}if(null!=c&&!isNaN(n)&&!isNaN(i)){var y=a["text-background-opacity"].value,m=a["text-border-opacity"].value,b=a["text-border-width"].pfValue;if(y>0||b>0&&m>0){var x=4+b/2;t.isNode()&&("top"===d?i-=x:"bottom"===d&&(i+=x),"left"===h?n-=x:"right"===h&&(n+=x));var w=s.labelWidth,_=s.labelHeight,E=n;h&&("center"==h?E-=w/2:"left"==h&&(E-=w));var k=i;if(t.isNode()?"top"==d?k-=_:"center"==d&&(k-=_/2):k-=_/2,"autorotate"===a["edge-text-rotation"].strValue?(i=0,w+=4,E=n-w/2,k=i-_/2):(E-=x,k-=x,_+=2*x,w+=2*x),y>0){var S=e.fillStyle,N=a["text-background-color"].value;e.fillStyle="rgba("+N[0]+","+N[1]+","+N[2]+","+y*l+")";var T=a["text-background-shape"].strValue;"roundrectangle"==T?r(e,E,k,w,_,2):e.fillRect(E,k,w,_),e.fillStyle=S}if(b>0&&m>0){var D=e.strokeStyle,P=e.lineWidth,C=a["text-border-color"].value,M=a["text-border-style"].value;if(e.strokeStyle="rgba("+C[0]+","+C[1]+","+C[2]+","+m*l+")",e.lineWidth=b,e.setLineDash)switch(M){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=b/4,e.setLineDash([]);break;case"solid":e.setLineDash([])}if(e.strokeRect(E,k,w,_),"double"===M){var A=b/2;e.strokeRect(E+A,k+A,w-2*A,_-2*A)}e.setLineDash&&e.setLineDash([]),e.lineWidth=P,e.strokeStyle=D}}var I=2*a["text-outline-width"].pfValue;if(I>0&&(e.lineWidth=I),"wrap"===a["text-wrap"].value){var L=u.labelWrapCachedLines,O=s.labelHeight/L.length;switch(d){case"top":i-=(L.length-1)*O;break;case"bottom":break;default:case"center":i-=(L.length-1)*O/2}for(var j=0;j<L.length;j++)I>0&&e.strokeText(L[j],n,i),e.fillText(L[j],n,i),i+=O}else I>0&&e.strokeText(c,n,i),e.fillText(c,n,i);this.shadowStyle(e,"transparent",0)}}},t.exports=o},{"../../../is":77}],66:[function(e,t,n){"use strict";var r=e("../../../is"),i={};i.drawNode=function(e,t,n){var i,o,a=this,s=t._private.style,u=t._private.rscratch,l=t._private,c=l.position;if(r.number(c.x)&&r.number(c.y)){var h,d=this.usePaths(),f=e,p=!1,v=s["overlay-padding"].pfValue,g=s["overlay-opacity"].value,y=s["overlay-color"].value;if(!n||0!==g){var m=t.effectiveOpacity();if(0!==m)if(i=t.width()+s["padding-left"].pfValue+s["padding-right"].pfValue,o=t.height()+s["padding-top"].pfValue+s["padding-bottom"].pfValue,e.lineWidth=s["border-width"].pfValue,void 0!==n&&n)g>0&&(this.fillStyle(e,y[0],y[1],y[2],g),a.nodeShapes.roundrectangle.draw(e,t._private.position.x,t._private.position.y,i+2*v,o+2*v),e.fill());else{var b,x=s["background-image"].value[2]||s["background-image"].value[1];if(void 0!==x){b=this.getCachedImage(x,function(){a.data.canvasNeedsRedraw[a.NODE]=!0,a.data.canvasNeedsRedraw[a.DRAG]=!0,a.drawingImage=!0,a.redraw()});var w=l.backgrounding;l.backgrounding=!b.complete,w!==l.backgrounding&&t.updateStyle(!1)}var _=s["background-color"].value,E=s["border-color"].value,k=s["border-style"].value;

this.fillStyle(e,_[0],_[1],_[2],s["background-opacity"].value*m),this.strokeStyle(e,E[0],E[1],E[2],s["border-opacity"].value*m);var S=s["shadow-blur"].pfValue,N=s["shadow-opacity"].value,T=s["shadow-color"].value,D=s["shadow-offset-x"].pfValue,P=s["shadow-offset-y"].pfValue;if(this.shadowStyle(e,T,N,S,D,P),e.lineJoin="miter",e.setLineDash)switch(k){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}var C=s.shape.strValue;if(d){var M=C+"$"+i+"$"+o;e.translate(c.x,c.y),u.pathCacheKey===M?(h=e=u.pathCache,p=!0):(h=e=new Path2D,u.pathCacheKey=M,u.pathCache=h)}if(!p){var A=c;d&&(A={x:0,y:0}),a.nodeShapes[this.getNodeShape(t)].draw(e,A.x,A.y,i,o)}e=f,d?e.fill(h):e.fill(),this.shadowStyle(e,"transparent",0),void 0!==x&&b.complete&&this.drawInscribedImage(e,b,t);var I=s["background-blacken"].value,L=s["border-width"].pfValue;if(this.hasPie(t)&&(this.drawPie(e,t,m),(0!==I||0!==L)&&(d||a.nodeShapes[this.getNodeShape(t)].draw(e,c.x,c.y,i,o))),I>0?(this.fillStyle(e,0,0,0,I),d?e.fill(h):e.fill()):0>I&&(this.fillStyle(e,255,255,255,-I),d?e.fill(h):e.fill()),L>0&&(d?e.stroke(h):e.stroke(),"double"===k)){e.lineWidth=s["border-width"].pfValue/3;var O=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",d?e.stroke(h):e.stroke(),e.globalCompositeOperation=O}d&&e.translate(-c.x,-c.y),e.setLineDash&&e.setLineDash([])}}}},i.hasPie=function(e){return e=e[0],e._private.hasPie},i.drawPie=function(e,t,n){t=t[0];var r=t._private,i=t.cy().style(),o=r.style,a=o["pie-size"],s=t.width(),u=t.height(),l=r.position.x,c=r.position.y,h=Math.min(s,u)/2,d=0,f=this.usePaths();f&&(l=0,c=0),"%"===a.units?h=h*a.value/100:void 0!==a.pfValue&&(h=a.pfValue/2);for(var p=1;p<=i.pieBackgroundN;p++){var v=o["pie-"+p+"-background-size"].value,g=o["pie-"+p+"-background-color"].value,y=o["pie-"+p+"-background-opacity"].value*n,m=v/100;m+d>1&&(m=1-d);var b=1.5*Math.PI+2*Math.PI*d,x=2*Math.PI*m,w=b+x;0===v||d>=1||d+m>1||(e.beginPath(),e.moveTo(l,c),e.arc(l,c,h,b,w),e.closePath(),this.fillStyle(e,g[0],g[1],g[2],y),e.fill(),d+=m)}},t.exports=i},{"../../../is":77}],67:[function(e,t,n){"use strict";var r={},i=e("../../../util"),o=e("../../../math"),a=100;r.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},r.paintCache=function(e){for(var t,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if(t=n[i],t.context===e){r=!1;break}return r&&(t={context:e},n.push(t)),t},r.fillStyle=function(e,t,n,r,i){e.fillStyle="rgba("+t+","+n+","+r+","+i+")"},r.strokeStyle=function(e,t,n,r,i){e.strokeStyle="rgba("+t+","+n+","+r+","+i+")"},r.shadowStyle=function(e,t,n,r,i,o){var a=this.cy.zoom(),s=this.paintCache(e);(0!==s.shadowOpacity||0!==n)&&(s.shadowOpacity=n,n>0?(e.shadowBlur=r*a,e.shadowColor="rgba("+t[0]+","+t[1]+","+t[2]+","+n+")",e.shadowOffsetX=i*a,e.shadowOffsetY=o*a):(e.shadowBlur=0,e.shadowColor="transparent"))},r.matchCanvasSize=function(e){var t=this,n=t.data,r=e.clientWidth,i=e.clientHeight,o=t.getPixelRatio(),a=t.motionBlurPxRatio;(e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]||e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG])&&(o=a);var s,u=r*o,l=i*o;if(u!==t.canvasWidth||l!==t.canvasHeight){t.fontCaches=null;var c=n.canvasContainer;c.style.width=r+"px",c.style.height=i+"px";for(var h=0;h<t.CANVAS_LAYERS;h++)s=n.canvases[h],(s.width!==u||s.height!==l)&&(s.width=u,s.height=l,s.style.width=r+"px",s.style.height=i+"px");for(var h=0;h<t.BUFFER_COUNT;h++)s=n.bufferCanvases[h],(s.width!==u||s.height!==l)&&(s.width=u,s.height=l,s.style.width=r+"px",s.style.height=i+"px");t.textureMult=1,1>=o&&(s=n.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,s.width=u*t.textureMult,s.height=l*t.textureMult),t.canvasWidth=u,t.canvasHeight=l}},r.renderTo=function(e,t,n,r){this.render({forcedContext:e,forcedZoom:t,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},r.render=function(e){function t(e,t,n,r,i){var o=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",d.fillStyle(e,255,255,255,d.motionBlurTransparency),e.fillRect(t,n,r,i),e.globalCompositeOperation=o}function n(e,n){var r,i,o,a;d.clearingMotionBlur||e!==v.bufferContexts[d.MOTIONBLUR_BUFFER_NODE]&&e!==v.bufferContexts[d.MOTIONBLUR_BUFFER_DRAG]?(r=P,i=T,o=d.canvasWidth,a=d.canvasHeight):(r={x:D.x*b,y:D.y*b},i=N*b,o=d.canvasWidth*b,a=d.canvasHeight*b),e.setTransform(1,0,0,1,0,0),"motionBlur"===n?t(e,0,0,o,a):s||void 0!==n&&!n||e.clearRect(0,0,o,a),u||(e.translate(r.x,r.y),e.scale(i,i)),h&&e.translate(h.x,h.y),c&&e.scale(c,c)}function r(e,t){for(var n=e.eles,r=0;r<n.length;r++){var i=n[r];i.isNode()?(d.drawNode(t,i),q||d.drawNodeText(t,i),d.drawNode(t,i,!0)):V||(d.drawEdge(t,i),q||d.drawEdgeText(t,i),d.drawEdge(t,i,!0))}}e=e||i.staticEmptyObject();var s=e.forcedContext,u=e.drawAllLayers,l=e.drawOnlyNodeLayer,c=e.forcedZoom,h=e.forcedPan,d=this,f=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,p=d.cy,v=d.data,g=v.canvasNeedsRedraw,y=d.textureOnViewport&&!s&&(d.pinching||d.hoverData.dragging||d.swipePanning||d.data.wheelZooming),m=void 0!==e.motionBlur?e.motionBlur:d.motionBlur,b=d.motionBlurPxRatio,x=p.hasCompoundNodes(),w=d.hoverData.draggingEles,_=d.hoverData.selecting||d.touchData.selecting?!0:!1;m=m&&!s&&d.motionBlurEnabled&&!_;var E=m;!s&&d.motionBlurTimeout&&clearTimeout(d.motionBlurTimeout),m&&(null==d.mbFrames&&(d.mbFrames=0),d.drawingImage||d.mbFrames++,d.mbFrames<3&&(E=!1),d.mbFrames>d.minMbLowQualFrames&&(d.motionBlurPxRatio=d.mbPxRBlurry)),d.clearingMotionBlur&&(d.motionBlurPxRatio=1),d.textureDrawLastFrame&&!y&&(g[d.NODE]=!0,g[d.SELECT_BOX]=!0);var k=d.getCachedEdges(),S=p.style()._private.coreStyle,N=p.zoom(),T=void 0!==c?c:N,D=p.pan(),P={x:D.x,y:D.y},C={zoom:N,pan:{x:D.x,y:D.y}},M=d.prevViewport,A=void 0===M||C.zoom!==M.zoom||C.pan.x!==M.pan.x||C.pan.y!==M.pan.y;A||w&&!x||(d.motionBlurPxRatio=1),h&&(P=h),T*=f,P.x*=f,P.y*=f;var I={drag:{nodes:[],edges:[],eles:[]},nondrag:{nodes:[],edges:[],eles:[]}};if(y||(d.textureDrawLastFrame=!1),y){d.textureDrawLastFrame=!0;var L;if(!d.textureCache){d.textureCache={},L=d.textureCache.bb=p.elements().boundingBox(),d.textureCache.texture=d.data.bufferCanvases[d.TEXTURE_BUFFER];var O=d.data.bufferContexts[d.TEXTURE_BUFFER];O.setTransform(1,0,0,1,0,0),O.clearRect(0,0,d.canvasWidth*d.textureMult,d.canvasHeight*d.textureMult),d.render({forcedContext:O,drawOnlyNodeLayer:!0,forcedPxRatio:f*d.textureMult});var C=d.textureCache.viewport={zoom:p.zoom(),pan:p.pan(),width:d.canvasWidth,height:d.canvasHeight};C.mpan={x:(0-C.pan.x)/C.zoom,y:(0-C.pan.y)/C.zoom}}g[d.DRAG]=!1,g[d.NODE]=!1;var j=v.contexts[d.NODE],B=d.textureCache.texture,C=d.textureCache.viewport;L=d.textureCache.bb,j.setTransform(1,0,0,1,0,0),m?t(j,0,0,C.width,C.height):j.clearRect(0,0,C.width,C.height);var R=S["outside-texture-bg-color"].value,z=S["outside-texture-bg-opacity"].value;d.fillStyle(j,R[0],R[1],R[2],z),j.fillRect(0,0,C.width,C.height);var N=p.zoom();n(j,!1),j.clearRect(C.mpan.x,C.mpan.y,C.width/C.zoom/f,C.height/C.zoom/f),j.drawImage(B,C.mpan.x,C.mpan.y,C.width/C.zoom/f,C.height/C.zoom/f)}else d.textureOnViewport&&!s&&(d.textureCache=null);var F=d.pinching||d.hoverData.dragging||d.swipePanning||d.data.wheelZooming||d.hoverData.draggingEles,V=d.hideEdgesOnViewport&&F,q=d.hideLabelsOnViewport&&F;if(g[d.DRAG]||g[d.NODE]||u||l){V||d.findEdgeControlPoints(k);for(var X=d.getCachedZSortedEles(),Y=p.extent(),$=0;$<X.length;$++){var G,W=X[$],L=s?null:W.boundingBox(),U=s?!0:o.boundingBoxesIntersect(Y,L);U&&(G=W._private.rscratch.inDragLayer?I.drag:I.nondrag,G.eles.push(W))}}var H=[];if(H[d.NODE]=!g[d.NODE]&&m&&!d.clearedForMotionBlur[d.NODE]||d.clearingMotionBlur,H[d.NODE]&&(d.clearedForMotionBlur[d.NODE]=!0),H[d.DRAG]=!g[d.DRAG]&&m&&!d.clearedForMotionBlur[d.DRAG]||d.clearingMotionBlur,H[d.DRAG]&&(d.clearedForMotionBlur[d.DRAG]=!0),g[d.NODE]||u||l||H[d.NODE]){var Z=m&&!H[d.NODE]&&1!==b,j=s||(Z?d.data.bufferContexts[d.MOTIONBLUR_BUFFER_NODE]:v.contexts[d.NODE]),K=m&&!Z?"motionBlur":void 0;n(j,K),r(I.nondrag,j),u||m||(g[d.NODE]=!1)}if(!l&&(g[d.DRAG]||u||H[d.DRAG])){var Z=m&&!H[d.DRAG]&&1!==b,j=s||(Z?d.data.bufferContexts[d.MOTIONBLUR_BUFFER_DRAG]:v.contexts[d.DRAG]);n(j,m&&!Z?"motionBlur":void 0),r(I.drag,j),u||m||(g[d.DRAG]=!1)}if(d.showFps||!l&&g[d.SELECT_BOX]&&!u){var j=s||v.contexts[d.SELECT_BOX];if(n(j),1==d.selection[4]&&(d.hoverData.selecting||d.touchData.selecting)){var N=d.cy.zoom(),J=S["selection-box-border-width"].value/N;j.lineWidth=J,j.fillStyle="rgba("+S["selection-box-color"].value[0]+","+S["selection-box-color"].value[1]+","+S["selection-box-color"].value[2]+","+S["selection-box-opacity"].value+")",j.fillRect(d.selection[0],d.selection[1],d.selection[2]-d.selection[0],d.selection[3]-d.selection[1]),J>0&&(j.strokeStyle="rgba("+S["selection-box-border-color"].value[0]+","+S["selection-box-border-color"].value[1]+","+S["selection-box-border-color"].value[2]+","+S["selection-box-opacity"].value+")",j.strokeRect(d.selection[0],d.selection[1],d.selection[2]-d.selection[0],d.selection[3]-d.selection[1]))}if(v.bgActivePosistion&&!d.hoverData.selecting){var N=d.cy.zoom(),Q=v.bgActivePosistion;j.fillStyle="rgba("+S["active-bg-color"].value[0]+","+S["active-bg-color"].value[1]+","+S["active-bg-color"].value[2]+","+S["active-bg-opacity"].value+")",j.beginPath(),j.arc(Q.x,Q.y,S["active-bg-size"].pfValue/N,0,2*Math.PI),j.fill()}var ee=d.lastRedrawTime;if(d.showFps&&ee){ee=Math.round(ee);var te=Math.round(1e3/ee);j.setTransform(1,0,0,1,0,0),j.fillStyle="rgba(255, 0, 0, 0.75)",j.strokeStyle="rgba(255, 0, 0, 0.75)",j.lineWidth=1,j.fillText("1 frame = "+ee+" ms = "+te+" fps",0,20);var ne=60;j.strokeRect(0,30,250,20),j.fillRect(0,30,250*Math.min(te/ne,1),20)}u||(g[d.SELECT_BOX]=!1)}if(m&&1!==b){var re=v.contexts[d.NODE],ie=d.data.bufferCanvases[d.MOTIONBLUR_BUFFER_NODE],oe=v.contexts[d.DRAG],ae=d.data.bufferCanvases[d.MOTIONBLUR_BUFFER_DRAG],se=function(e,n,r){e.setTransform(1,0,0,1,0,0),r||!E?e.clearRect(0,0,d.canvasWidth,d.canvasHeight):t(e,0,0,d.canvasWidth,d.canvasHeight);var i=b;e.drawImage(n,0,0,d.canvasWidth*i,d.canvasHeight*i,0,0,d.canvasWidth,d.canvasHeight)};(g[d.NODE]||H[d.NODE])&&(se(re,ie,H[d.NODE]),g[d.NODE]=!1),(g[d.DRAG]||H[d.DRAG])&&(se(oe,ae,H[d.DRAG]),g[d.DRAG]=!1)}d.currentlyDrawing=!1,d.prevViewport=C,d.clearingMotionBlur&&(d.clearingMotionBlur=!1,d.motionBlurCleared=!0,d.motionBlur=!0),m&&(d.motionBlurTimeout=setTimeout(function(){d.motionBlurTimeout=null,d.clearedForMotionBlur[d.NODE]=!1,d.clearedForMotionBlur[d.DRAG]=!1,d.motionBlur=!1,d.clearingMotionBlur=!y,d.mbFrames=0,g[d.NODE]=!0,g[d.DRAG]=!0,d.redraw()},a)),d.drawingImage=!1,s||d.initrender||(d.initrender=!0,p.trigger("initrender")),s||p.triggerOnRender()},t.exports=r},{"../../../math":79,"../../../util":94}],68:[function(e,t,n){"use strict";var r=e("../../../math"),i={};i.drawPolygonPath=function(e,t,n,r,i,o){var a=r/2,s=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+a*o[0],n+s*o[1]);for(var u=1;u<o.length/2;u++)e.lineTo(t+a*o[2*u],n+s*o[2*u+1]);e.closePath()},i.drawRoundRectanglePath=function(e,t,n,i,o,a){var s=i/2,u=o/2,l=r.getRoundRectangleRadius(i,o);e.beginPath&&e.beginPath(),e.moveTo(t,n-u),e.arcTo(t+s,n-u,t+s,n,l),e.arcTo(t+s,n+u,t,n+u,l),e.arcTo(t-s,n+u,t-s,n,l),e.arcTo(t-s,n-u,t,n-u,l),e.lineTo(t,n-u),e.closePath()};for(var o=Math.sin(0),a=Math.cos(0),s={},u={},l=Math.PI/40,c=0*Math.PI;c<2*Math.PI;c+=l)s[c]=Math.sin(c),u[c]=Math.cos(c);i.drawEllipsePath=function(e,t,n,r,i){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,n,r/2,i/2,0,0,2*Math.PI);else for(var c,h,d=r/2,f=i/2,p=0*Math.PI;p<2*Math.PI;p+=l)c=t-d*s[p]*o+d*u[p]*a,h=n+f*u[p]*o+f*s[p]*a,0===p?e.moveTo(c,h):e.lineTo(c,h);e.closePath()},t.exports=i},{"../../../math":79}],69:[function(e,t,n){"use strict";var r=e("../../../is"),i={};i.createBuffer=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,[n,n.getContext("2d")]},i.bufferCanvasImage=function(e){var t=this.cy,n=t.elements().boundingBox(),i=e.full?Math.ceil(n.w):this.container.clientWidth,o=e.full?Math.ceil(n.h):this.container.clientHeight,a=1;if(void 0!==e.scale)i*=e.scale,o*=e.scale,a=e.scale;else if(r.number(e.maxWidth)||r.number(e.maxHeight)){var s=1/0,u=1/0;r.number(e.maxWidth)&&(s=a*e.maxWidth/i),r.number(e.maxHeight)&&(u=a*e.maxHeight/o),a=Math.min(s,u),i*=a,o*=a}var l=document.createElement("canvas");l.width=i,l.height=o,l.style.width=i+"px",l.style.height=o+"px";var c=l.getContext("2d");if(i>0&&o>0)if(c.clearRect(0,0,i,o),e.bg&&(c.fillStyle=e.bg,c.rect(0,0,i,o),c.fill()),c.globalCompositeOperation="source-over",e.full)this.render({forcedContext:c,drawAllLayers:!0,forcedZoom:a,forcedPan:{x:-n.x1*a,y:-n.y1*a},forcedPxRatio:1});else{var h=t.pan(),d={x:h.x*a,y:h.y*a},f=t.zoom()*a;this.render({forcedContext:c,drawAllLayers:!0,forcedZoom:f,forcedPan:d,forcedPxRatio:1})}return l},i.png=function(e){return this.bufferCanvasImage(e).toDataURL("image/png")},i.jpg=function(e){return this.bufferCanvasImage(e).toDataURL("image/jpeg")},t.exports=i},{"../../../is":77}],70:[function(e,t,n){"use strict";function r(e){var t=this;t.data={canvases:new Array(s.CANVAS_LAYERS),contexts:new Array(s.CANVAS_LAYERS),canvasNeedsRedraw:new Array(s.CANVAS_LAYERS),bufferCanvases:new Array(s.BUFFER_COUNT),bufferContexts:new Array(s.CANVAS_LAYERS)},t.data.canvasContainer=document.createElement("div");var n=t.data.canvasContainer.style;t.data.canvasContainer.setAttribute("style","-webkit-tap-highlight-color: rgba(0,0,0,0);"),n.position="relative",n.zIndex="0",n.overflow="hidden";var r=e.cy.container();r.appendChild(t.data.canvasContainer),r.setAttribute("style",(r.getAttribute("style")||"")+"-webkit-tap-highlight-color: rgba(0,0,0,0);");for(var i=0;i<s.CANVAS_LAYERS;i++){var a=t.data.canvases[i]=document.createElement("canvas");t.data.contexts[i]=a.getContext("2d"),a.setAttribute("style","-webkit-user-select: none; -moz-user-select: -moz-none; user-select: none; -webkit-tap-highlight-color: rgba(0,0,0,0); outline-style: none;"+(o.ms()?" -ms-touch-action: none; touch-action: none; ":"")),a.style.position="absolute",a.setAttribute("data-id","layer"+i),a.style.zIndex=String(s.CANVAS_LAYERS-i),t.data.canvasContainer.appendChild(a),t.data.canvasNeedsRedraw[i]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[s.NODE].setAttribute("data-id","layer"+s.NODE+"-node"),t.data.canvases[s.SELECT_BOX].setAttribute("data-id","layer"+s.SELECT_BOX+"-selectbox"),t.data.canvases[s.DRAG].setAttribute("data-id","layer"+s.DRAG+"-drag");for(var i=0;i<s.BUFFER_COUNT;i++)t.data.bufferCanvases[i]=document.createElement("canvas"),t.data.bufferContexts[i]=t.data.bufferCanvases[i].getContext("2d"),t.data.bufferCanvases[i].style.position="absolute",t.data.bufferCanvases[i].setAttribute("data-id","buffer"+i),t.data.bufferCanvases[i].style.zIndex=String(-i-1),t.data.bufferCanvases[i].style.visibility="hidden";t.pathsEnabled=!0}var i=e("../../../util"),o=e("../../../is"),a=r,s=r.prototype;s.CANVAS_LAYERS=3,s.SELECT_BOX=0,s.DRAG=1,s.NODE=2,s.BUFFER_COUNT=3,s.TEXTURE_BUFFER=0,s.MOTIONBLUR_BUFFER_NODE=1,s.MOTIONBLUR_BUFFER_DRAG=2,s.redrawHint=function(e,t){var n=this;switch(e){case"eles":n.data.canvasNeedsRedraw[s.NODE]=t;break;case"drag":n.data.canvasNeedsRedraw[s.DRAG]=t;break;case"select":n.data.canvasNeedsRedraw[s.SELECT_BOX]=t}};var u="undefined"!=typeof Path2D;s.path2dEnabled=function(e){return void 0===e?this.pathsEnabled:void(this.pathsEnabled=e?!0:!1)},s.usePaths=function(){return u&&this.pathsEnabled},[e("./arrow-shapes"),e("./drawing-edges"),e("./drawing-images"),e("./drawing-label-text"),e("./drawing-nodes"),e("./drawing-redraw"),e("./drawing-shapes"),e("./export-image"),e("./node-shapes")].forEach(function(e){i.extend(s,e)}),t.exports=a},{"../../../is":77,"../../../util":94,"./arrow-shapes":62,"./drawing-edges":63,"./drawing-images":64,"./drawing-label-text":65,"./drawing-nodes":66,"./drawing-redraw":67,"./drawing-shapes":68,"./export-image":69,"./node-shapes":71}],71:[function(e,t,n){"use strict";var r,i={};i.nodeShapeImpl=function(e){var t=this;return(r||(r={ellipse:function(e,n,r,i,o){t.drawEllipsePath(e,n,r,i,o)},polygon:function(e,n,r,i,o,a){t.drawPolygonPath(e,n,r,i,o,a)},roundrectangle:function(e,n,r,i,o){t.drawRoundRectanglePath(e,n,r,i,o,10)}}))[e]},t.exports=i},{}],72:[function(e,t,n){"use strict";t.exports=[{name:"null",impl:e("./null")},{name:"base",impl:e("./base")},{name:"canvas",impl:e("./canvas")}]},{"./base":58,"./canvas":70,"./null":73}],73:[function(e,t,n){"use strict";function r(e){this.options=e,this.notifications=0}var i=function(){};r.prototype={recalculateRenderedStyle:i,notify:function(){this.notifications++},init:i},t.exports=r},{}],74:[function(e,t,n){"use strict";var r=e("./is"),i=e("./util"),o=e("./thread"),a=e("./promise"),s=e("./define"),u=function(t){if(!(this instanceof u))return new u(t);this._private={pass:[]};var n=4;if(r.number(t),"undefined"!=typeof navigator&&null!=navigator.hardwareConcurrency)t=navigator.hardwareConcurrency;else try{t=e("os").cpus().length}catch(i){t=n}for(var a=0;t>a;a++)this[a]=new o;this.length=t},l=u.prototype;i.extend(l,{instanceString:function(){return"fabric"},require:function(e,t){for(var n=0;n<this.length;n++){var r=this[n];r.require(e,t)}return this},random:function(){var e=Math.round((this.length-1)*Math.random()),t=this[e];return t},run:function(e){var t=this._private.pass.shift();return this.random().pass(t).run(e)},message:function(e){return this.random().message(e)},broadcast:function(e){for(var t=0;t<this.length;t++){var n=this[t];n.message(e)}return this},stop:function(){for(var e=0;e<this.length;e++){var t=this[e];t.stop()}return this},pass:function(e){var t=this._private.pass;if(!r.array(e))throw"Only arrays may be used with fabric.pass()";return t.push(e),this},spreadSize:function(){var e=Math.ceil(this._private.pass[0].length/this.length);return e=Math.max(1,e)},spread:function(e){for(var t=this,n=t._private,r=t.spreadSize(),i=n.pass.shift().concat([]),o=[],s=0;s<this.length;s++){var u=this[s],l=i.splice(0,r),c=u.pass(l).run(e);o.push(c);var h=0===i.length;if(h)break}return a.all(o).then(function(e){for(var t=[],n=0,r=0;r<e.length;r++)for(var i=e[r],o=0;o<i.length;o++){var a=i[o];t[n++]=a}return t})},map:function(e){var t=this;return t.require(e,"_$_$_fabmap"),t.spread(function(e){var t=[],n=resolve;resolve=function(e){t.push(e)};for(var r=0;r<e.length;r++){var i=t.length,o=_$_$_fabmap(e[r]),a=i===t.length;a&&t.push(o)}return resolve=n,t})},filter:function(e){var t=this._private,n=t.pass[0];return this.map(e).then(function(e){for(var t=[],r=0;r<n.length;r++){var i=n[r],o=e[r];o&&t.push(i)}return t})},sort:function(e){var t=this,n=this._private.pass[0].length,r=this.spreadSize();return e=e||function(e,t){return t>e?-1:e>t?1:0},t.require(e,"_$_$_cmp"),t.spread(function(e){var t=e.sort(_$_$_cmp);resolve(t)}).then(function(t){for(var i=function(r,i,o){i=Math.min(i,n),o=Math.min(o,n);for(var a=r,s=i,u=[],l=a;o>l;l++){var c=t[r],h=t[i];s>r&&(i>=o||e(c,h)<=0)?(u.push(c),r++):(u.push(h),i++)}for(var l=0;l<u.length;l++){var d=a+l;t[d]=u[l]}},o=r;n>o;o*=2)for(var a=0;n>a;a+=2*o)i(a,a+o,a+2*o);return t})}});var c=function(e){return e=e||{},function(t,n){var r=this._private.pass.shift();return this.random().pass(r)[e.threadFn](t,n)}};i.extend(l,{randomMap:c({threadFn:"map"}),reduce:c({threadFn:"reduce"}),reduceRight:c({threadFn:"reduceRight"})});var h=l;h.promise=h.run,h.terminate=h.halt=h.stop,h.include=h.require,i.extend(l,{on:s.on(),one:s.on({unbindSelfOnTrigger:!0}),off:s.off(),trigger:s.trigger()}),s.eventAliasesOn(l),t.exports=u},{"./define":41,"./is":77,"./promise":80,"./thread":92,"./util":94,os:void 0}],75:[function(e,t,n){"use strict";(function(){var e,r,i,o,a,s,u,l,c,h,d,f,p,v,g;i=Math.floor,h=Math.min,r=function(e,t){return t>e?-1:e>t?1:0},c=function(e,t,n,o,a){var s;if(null==n&&(n=0),null==a&&(a=r),0>n)throw new Error("lo must be non-negative");for(null==o&&(o=e.length);o>n;)s=i((n+o)/2),a(t,e[s])<0?o=s:n=s+1;return[].splice.apply(e,[n,n-n].concat(t)),t},s=function(e,t,n){return null==n&&(n=r),e.push(t),v(e,0,e.length-1,n)},a=function(e,t){var n,i;return null==t&&(t=r),n=e.pop(),e.length?(i=e[0],e[0]=n,g(e,0,t)):i=n,i},l=function(e,t,n){var i;return null==n&&(n=r),i=e[0],e[0]=t,g(e,0,n),i},u=function(e,t,n){var i;return null==n&&(n=r),e.length&&n(e[0],t)<0&&(i=[e[0],t],t=i[0],e[0]=i[1],g(e,0,n)),t},o=function(e,t){var n,o,a,s,u,l;for(null==t&&(t=r),s=function(){l=[];for(var t=0,n=i(e.length/2);n>=0?n>t:t>n;n>=0?t++:t--)l.push(t);return l}.apply(this).reverse(),u=[],o=0,a=s.length;a>o;o++)n=s[o],u.push(g(e,n,t));return u},p=function(e,t,n){var i;return null==n&&(n=r),i=e.indexOf(t),-1!==i?(v(e,0,i,n),g(e,i,n)):void 0},d=function(e,t,n){var i,a,s,l,c;if(null==n&&(n=r),a=e.slice(0,t),!a.length)return a;for(o(a,n),c=e.slice(t),s=0,l=c.length;l>s;s++)i=c[s],u(a,i,n);return a.sort(n).reverse()},f=function(e,t,n){var i,s,u,l,d,f,p,v,g,y;if(null==n&&(n=r),10*t<=e.length){if(l=e.slice(0,t).sort(n),!l.length)return l;for(u=l[l.length-1],v=e.slice(t),d=0,p=v.length;p>d;d++)i=v[d],n(i,u)<0&&(c(l,i,0,null,n),l.pop(),u=l[l.length-1]);return l}for(o(e,n),y=[],s=f=0,g=h(t,e.length);g>=0?g>f:f>g;s=g>=0?++f:--f)y.push(a(e,n));return y},v=function(e,t,n,i){var o,a,s;for(null==i&&(i=r),o=e[n];n>t&&(s=n-1>>1,a=e[s],i(o,a)<0);)e[n]=a,n=s;return e[n]=o},g=function(e,t,n){var i,o,a,s,u;for(null==n&&(n=r),o=e.length,u=t,a=e[t],i=2*t+1;o>i;)s=i+1,o>s&&!(n(e[i],e[s])<0)&&(i=s),e[t]=e[i],t=i,i=2*t+1;return e[t]=a,v(e,u,t,n)},e=function(){function e(e){this.cmp=null!=e?e:r,this.nodes=[]}return e.push=s,e.pop=a,e.replace=l,e.pushpop=u,e.heapify=o,e.updateItem=p,e.nlargest=d,e.nsmallest=f,e.prototype.push=function(e){return s(this.nodes,e,this.cmp)},e.prototype.pop=function(){return a(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return l(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return u(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return o(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return p(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return t=new e,t.nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),function(e,r){return"function"==typeof define&&define.amd?define([],r):"object"==typeof n?t.exports=r():e.Heap=r()}(this,function(){return e})}).call(this)},{}],76:[function(e,t,n){"use strict";var r=e("./window"),i=e("./is"),o=e("./core"),a=e("./extension"),s=e("./jquery-plugin"),u=e("./stylesheet"),l=e("./thread"),c=e("./fabric"),h=function(e){return void 0===e&&(e={}),i.plainObject(e)?new o(e):i.string(e)?a.apply(a,arguments):void 0};h.version="2.6.0",r&&r.jQuery&&s(r.jQuery,h),h.registerJquery=function(e){s(e,h)},h.stylesheet=h.Stylesheet=u,h.thread=h.Thread=l,h.fabric=h.Fabric=c,t.exports=h},{"./core":34,"./extension":43,"./fabric":74,"./is":77,"./jquery-plugin":78,"./stylesheet":91,"./thread":92,"./window":100}],77:[function(e,t,n){"use strict";var r=e("./window"),i=r?r.navigator:null,o="string",a=typeof{},s="function",u=typeof HTMLElement,l=function(e){return e&&e.instanceString&&c.fn(e.instanceString)?e.instanceString():null},c={defined:function(e){return null!=e},string:function(e){return null!=e&&typeof e==o},fn:function(e){return null!=e&&typeof e===s},array:function(e){return Array.isArray?Array.isArray(e):null!=e&&e instanceof Array},plainObject:function(e){return null!=e&&typeof e===a&&!c.array(e)&&e.constructor===Object},object:function(e){return null!=e&&typeof e===a},number:function(e){return null!=e&&"number"==typeof e&&!isNaN(e)},integer:function(e){return c.number(e)&&Math.floor(e)===e},bool:function(e){return null!=e&&typeof e==typeof!0},htmlElement:function(e){return"undefined"===u?void 0:null!=e&&e instanceof HTMLElement},elementOrCollection:function(e){return c.element(e)||c.collection(e)},element:function(e){return"collection"===l(e)&&e._private.single},collection:function(e){return"collection"===l(e)&&!e._private.single},core:function(e){return"core"===l(e)},style:function(e){return"style"===l(e)},stylesheet:function(e){return"stylesheet"===l(e)},event:function(e){return"event"===l(e)},thread:function(e){return"thread"===l(e)},fabric:function(e){return"fabric"===l(e)},emptyString:function(e){return e?c.string(e)&&(""===e||e.match(/^\s+$/))?!0:!1:!0},nonemptyString:function(e){return e&&c.string(e)&&""!==e&&!e.match(/^\s+$/)?!0:!1},domElement:function(e){return"undefined"==typeof HTMLElement?!1:e instanceof HTMLElement},boundingBox:function(e){return c.plainObject(e)&&c.number(e.x1)&&c.number(e.x2)&&c.number(e.y1)&&c.number(e.y2)},promise:function(e){return c.object(e)&&c.fn(e.then)},touch:function(){return r&&("ontouchstart"in r||r.DocumentTouch&&document instanceof DocumentTouch)},gecko:function(){return"undefined"!=typeof InstallTrigger||"MozAppearance"in document.documentElement.style},webkit:function(){return"undefined"!=typeof webkitURL||"WebkitAppearance"in document.documentElement.style},chromium:function(){return"undefined"!=typeof chrome},khtml:function(){return i&&i.vendor.match(/kde/i)},khtmlEtc:function(){return c.khtml()||c.webkit()||c.chromium()},ms:function(){return i&&i.userAgent.match(/msie|trident|edge/i)},windows:function(){return i&&i.appVersion.match(/Win/i)},mac:function(){return i&&i.appVersion.match(/Mac/i)},linux:function(){return i&&i.appVersion.match(/Linux/i)},unix:function(){return i&&i.appVersion.match(/X11/i)}};t.exports=c},{"./window":100}],78:[function(e,t,n){"use strict";var r=e("./is"),i=function(e){var t=e[0]._cyreg=e[0]._cyreg||{};return t},o=function(e,t){e&&(e.fn.cytoscape||(e.fn.cytoscape=function(n){var o=e(this);if("get"===n)return i(o).cy;if(r.fn(n)){var a=n,s=i(o).cy;if(s&&s.isReady())s.trigger("ready",[],a);else{var u=i(o),l=u.readies=u.readies||[];l.push(a)}}else if(r.plainObject(n))return o.each(function(){var r=e.extend({},n,{container:e(this)[0]});t(r)})},e.cytoscape=t,null==e.fn.cy&&null==e.cy&&(e.fn.cy=e.fn.cytoscape,e.cy=e.cytoscape)))};t.exports=o},{"./is":77}],79:[function(e,t,n){"use strict";var r={};r.signum=function(e){return e>0?1:0>e?-1:0},r.distance=function(e,t){return Math.sqrt(r.sqDistance(e,t))},r.sqDistance=function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},r.qbezierAt=function(e,t,n,r){return(1-r)*(1-r)*e+2*(1-r)*r*t+r*r*n},r.qbezierPtAt=function(e,t,n,i){return{x:r.qbezierAt(e.x,t.x,n.x,i),y:r.qbezierAt(e.y,t.y,n.y,i)}},r.makeBoundingBox=function(e){if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},r.boundingBoxesIntersect=function(e,t){return e.x1>t.x2?!1:t.x1>e.x2?!1:e.x2<t.x1?!1:t.x2<e.x1?!1:e.y2<t.y1?!1:t.y2<e.y1?!1:e.y1>t.y2?!1:t.y1>e.y2?!1:!0},r.inBoundingBox=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},r.pointInBoundingBox=function(e,t){return this.inBoundingBox(e,t.x,t.y)},r.roundRectangleIntersectLine=function(e,t,n,r,i,o,a){var s,u=this.getRoundRectangleRadius(i,o),l=i/2,c=o/2,h=n-l+u-a,d=r-c-a,f=n+l-u+a,p=d;if(s=this.finiteLinesIntersect(e,t,n,r,h,d,f,p,!1),s.length>0)return s;var v=n+l+a,g=r-c+u-a,y=v,m=r+c-u+a;if(s=this.finiteLinesIntersect(e,t,n,r,v,g,y,m,!1),s.length>0)return s;var b=n-l+u-a,x=r+c+a,w=n+l-u+a,_=x;if(s=this.finiteLinesIntersect(e,t,n,r,b,x,w,_,!1),s.length>0)return s;var E=n-l-a,k=r-c+u-a,S=E,N=r+c-u+a;if(s=this.finiteLinesIntersect(e,t,n,r,E,k,S,N,!1),s.length>0)return s;var T,D=n-l+u,P=r-c+u;if(T=this.intersectLineCircle(e,t,n,r,D,P,u+a),T.length>0&&T[0]<=D&&T[1]<=P)return[T[0],T[1]];var C=n+l-u,M=r-c+u;if(T=this.intersectLineCircle(e,t,n,r,C,M,u+a),T.length>0&&T[0]>=C&&T[1]<=M)return[T[0],T[1]];var A=n+l-u,I=r+c-u;if(T=this.intersectLineCircle(e,t,n,r,A,I,u+a),T.length>0&&T[0]>=A&&T[1]>=I)return[T[0],T[1]];var L=n-l+u,O=r+c-u;return T=this.intersectLineCircle(e,t,n,r,L,O,u+a),T.length>0&&T[0]<=L&&T[1]>=O?[T[0],T[1]]:[]},r.inLineVicinity=function(e,t,n,r,i,o,a){var s=a,u=Math.min(n,i),l=Math.max(n,i),c=Math.min(r,o),h=Math.max(r,o);return e>=u-s&&l+s>=e&&t>=c-s&&h+s>=t},r.inBezierVicinity=function(e,t,n,r,i,o,a,s,u){var l={x1:Math.min(n,a,i)-u,x2:Math.max(n,a,i)+u,y1:Math.min(r,s,o)-u,y2:Math.max(r,s,o)+u};return e<l.x1||e>l.x2||t<l.y1||t>l.y2?!1:!0},r.solveCubic=function(e,t,n,r,i){t/=e,n/=e,r/=e;var o,a,s,u,l,c,h,d;return a=(3*n-t*t)/9,s=-(27*r)+t*(9*n-2*t*t),s/=54,o=a*a*a+s*s,i[1]=0,h=t/3,o>0?(l=s+Math.sqrt(o),l=0>l?-Math.pow(-l,1/3):Math.pow(l,1/3),c=s-Math.sqrt(o),c=0>c?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-h+l+c,h+=(l+c)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-c+l)/2,i[3]=h,void(i[5]=-h)):(i[5]=i[3]=0,0===o?(d=0>s?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=-h+2*d,void(i[4]=i[2]=-(d+h))):(a=-a,u=a*a*a,u=Math.acos(s/Math.sqrt(u)),d=2*Math.sqrt(a),i[0]=-h+d*Math.cos(u/3),i[2]=-h+d*Math.cos((u+2*Math.PI)/3),void(i[4]=-h+d*Math.cos((u+4*Math.PI)/3))))},r.sqDistanceToQuadraticBezier=function(e,t,n,r,i,o,a,s){var u=1*n*n-4*n*i+2*n*a+4*i*i-4*i*a+a*a+r*r-4*r*o+2*r*s+4*o*o-4*o*s+s*s,l=9*n*i-3*n*n-3*n*a-6*i*i+3*i*a+9*r*o-3*r*r-3*r*s-6*o*o+3*o*s,c=3*n*n-6*n*i+n*a-n*e+2*i*i+2*i*e-a*e+3*r*r-6*r*o+r*s-r*t+2*o*o+2*o*t-s*t,h=1*n*i-n*n+n*e-i*e+r*o-r*r+r*t-o*t,d=[];this.solveCubic(u,l,c,h,d);for(var f=1e-7,p=[],v=0;6>v;v+=2)Math.abs(d[v+1])<f&&d[v]>=0&&d[v]<=1&&p.push(d[v]);p.push(1),p.push(0);for(var g,y,m,b,x=-1,w=0;w<p.length;w++)y=Math.pow(1-p[w],2)*n+2*(1-p[w])*p[w]*i+p[w]*p[w]*a,m=Math.pow(1-p[w],2)*r+2*(1-p[w])*p[w]*o+p[w]*p[w]*s,b=Math.pow(y-e,2)+Math.pow(m-t,2),x>=0?x>b&&(x=b,g=p[w]):(x=b,g=p[w]);return x},r.sqDistanceToFiniteLine=function(e,t,n,r,i,o){var a=[e-n,t-r],s=[i-n,o-r],u=s[0]*s[0]+s[1]*s[1],l=a[0]*a[0]+a[1]*a[1],c=a[0]*s[0]+a[1]*s[1],h=c*c/u;return 0>c?l:h>u?(e-i)*(e-i)+(t-o)*(t-o):l-h},r.pointInsidePolygonPoints=function(e,t,n){for(var r,i,o,a,s,u=0,l=0,c=0;c<n.length/2;c++)if(r=n[2*c],i=n[2*c+1],c+1<n.length/2?(o=n[2*(c+1)],a=n[2*(c+1)+1]):(o=n[2*(c+1-n.length/2)],a=n[2*(c+1-n.length/2)+1]),r==e&&o==e);else{if(!(r>=e&&e>=o||e>=r&&o>=e))continue;s=(e-r)/(o-r)*(a-i)+i,s>t&&u++,t>s&&l++}return u%2===0?!1:!0},r.pointInsidePolygon=function(e,t,n,i,o,a,s,u,l){var c,h=new Array(n.length);null!=u[0]?(c=Math.atan(u[1]/u[0]),u[0]<0?c+=Math.PI/2:c=-c-Math.PI/2):c=u;for(var d=Math.cos(-c),f=Math.sin(-c),p=0;p<h.length/2;p++)h[2*p]=a/2*(n[2*p]*d-n[2*p+1]*f),h[2*p+1]=s/2*(n[2*p+1]*d+n[2*p]*f),h[2*p]+=i,h[2*p+1]+=o;var v;if(l>0){var g=this.expandPolygon(h,-l);v=this.joinLines(g)}else v=h;return r.pointInsidePolygonPoints(e,t,v)},r.joinLines=function(e){for(var t,n,r,i,o,a,s,u,l=new Array(e.length/2),c=0;c<e.length/4;c++){t=e[4*c],n=e[4*c+1],r=e[4*c+2],i=e[4*c+3],c<e.length/4-1?(o=e[4*(c+1)],a=e[4*(c+1)+1],s=e[4*(c+1)+2],u=e[4*(c+1)+3]):(o=e[0],a=e[1],s=e[2],u=e[3]);var h=this.finiteLinesIntersect(t,n,r,i,o,a,s,u,!0);l[2*c]=h[0],l[2*c+1]=h[1]}return l},r.expandPolygon=function(e,t){for(var n,r,i,o,a=new Array(2*e.length),s=0;s<e.length/2;s++){n=e[2*s],r=e[2*s+1],s<e.length/2-1?(i=e[2*(s+1)],o=e[2*(s+1)+1]):(i=e[0],o=e[1]);var u=o-r,l=-(i-n),c=Math.sqrt(u*u+l*l),h=u/c,d=l/c;a[4*s]=n+h*t,a[4*s+1]=r+d*t,a[4*s+2]=i+h*t,a[4*s+3]=o+d*t}return a},r.intersectLineEllipse=function(e,t,n,r,i,o){var a=n-e,s=r-t;a/=i,s/=o;var u=Math.sqrt(a*a+s*s),l=u-1;if(0>l)return[];var c=l/u;return[(n-e)*c+e,(r-t)*c+t]},r.intersectLineCircle=function(e,t,n,r,i,o,a){var s=[n-e,r-t],u=[i,o],l=[e-i,t-o],c=s[0]*s[0]+s[1]*s[1],h=2*(l[0]*s[0]+l[1]*s[1]),u=l[0]*l[0]+l[1]*l[1]-a*a,d=h*h-4*c*u;

if(0>d)return[];var f=(-h+Math.sqrt(d))/(2*c),p=(-h-Math.sqrt(d))/(2*c),v=Math.min(f,p),g=Math.max(f,p),y=[];if(v>=0&&1>=v&&y.push(v),g>=0&&1>=g&&y.push(g),0===y.length)return[];var m=y[0]*s[0]+e,b=y[0]*s[1]+t;if(y.length>1){if(y[0]==y[1])return[m,b];var x=y[1]*s[0]+e,w=y[1]*s[1]+t;return[m,b,x,w]}return[m,b]},r.findCircleNearPoint=function(e,t,n,r,i){var o=r-e,a=i-t,s=Math.sqrt(o*o+a*a),u=o/s,l=a/s;return[e+u*n,t+l*n]},r.findMaxSqDistanceToOrigin=function(e){for(var t,n=1e-6,r=0;r<e.length/2;r++)t=e[2*r]*e[2*r]+e[2*r+1]*e[2*r+1],t>n&&(n=t);return n},r.finiteLinesIntersect=function(e,t,n,r,i,o,a,s,u){var l=(a-i)*(t-o)-(s-o)*(e-i),c=(n-e)*(t-o)-(r-t)*(e-i),h=(s-o)*(n-e)-(a-i)*(r-t);if(0!==h){var d=l/h,f=c/h;return d>=0&&1>=d&&f>=0&&1>=f?[e+d*(n-e),t+d*(r-t)]:u?[e+d*(n-e),t+d*(r-t)]:[]}return 0===l||0===c?[e,n,a].sort()[1]===a?[a,s]:[e,n,i].sort()[1]===i?[i,o]:[i,a,n].sort()[1]===n?[n,r]:[]:[]},r.polygonIntersectLine=function(e,t,n,i,o,a,s,u){for(var l,c=[],h=new Array(n.length),d=0;d<h.length/2;d++)h[2*d]=n[2*d]*a+i,h[2*d+1]=n[2*d+1]*s+o;var f;if(u>0){var p=r.expandPolygon(h,-u);f=r.joinLines(p)}else f=h;for(var v,g,y,m,d=0;d<f.length/2;d++)v=f[2*d],g=f[2*d+1],d<f.length/2-1?(y=f[2*(d+1)],m=f[2*(d+1)+1]):(y=f[0],m=f[1]),l=this.finiteLinesIntersect(e,t,i,o,v,g,y,m),0!==l.length&&c.push(l[0],l[1]);return c},r.shortenIntersection=function(e,t,n){var r=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=(i-n)/i;return 0>o&&(o=1e-5),[t[0]+o*r[0],t[1]+o*r[1]]},r.generateUnitNgonPointsFitToSquare=function(e,t){var n=r.generateUnitNgonPoints(e,t);return n=r.fitPolygonToSquare(n)},r.fitPolygonToSquare=function(e){for(var t,n,r=e.length/2,i=1/0,o=1/0,a=-(1/0),s=-(1/0),u=0;r>u;u++)t=e[2*u],n=e[2*u+1],i=Math.min(i,t),a=Math.max(a,t),o=Math.min(o,n),s=Math.max(s,n);for(var l=2/(a-i),c=2/(s-o),u=0;r>u;u++)t=e[2*u]=e[2*u]*l,n=e[2*u+1]=e[2*u+1]*c,i=Math.min(i,t),a=Math.max(a,t),o=Math.min(o,n),s=Math.max(s,n);if(-1>o)for(var u=0;r>u;u++)n=e[2*u+1]=e[2*u+1]+(-1-o);return e},r.generateUnitNgonPoints=function(e,t){var n=1/e*2*Math.PI,r=e%2===0?Math.PI/2+n/2:Math.PI/2;r+=t;for(var i,o,a,s=new Array(2*e),u=0;e>u;u++)i=u*n+r,o=s[2*u]=Math.cos(i),a=s[2*u+1]=Math.sin(-i);return s},r.getRoundRectangleRadius=function(e,t){return Math.min(e/4,t/4,8)},t.exports=r},{}],80:[function(e,t,n){"use strict";var r=0,i=1,o=2,a=function(e){return this instanceof a?(this.id="Thenable/1.0.7",this.state=r,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new a(e)};a.prototype={fulfill:function(e){return s(this,i,"fulfillValue",e)},reject:function(e){return s(this,o,"rejectReason",e)},then:function(e,t){var n=this,r=new a;return n.onFulfilled.push(c(e,r,"fulfill")),n.onRejected.push(c(t,r,"reject")),u(n),r.proxy}};var s=function(e,t,n,i){return e.state===r&&(e.state=t,e[n]=i,u(e)),e},u=function(e){e.state===i?l(e,"onFulfilled",e.fulfillValue):e.state===o&&l(e,"onRejected",e.rejectReason)},l=function(e,t,n){if(0!==e[t].length){var r=e[t];e[t]=[];var i=function(){for(var e=0;e<r.length;e++)r[e](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},c=function(e,t,n){return function(r){if("function"!=typeof e)t[n].call(t,r);else{var i;try{i=e(r)}catch(o){return void t.reject(o)}h(t,i)}}},h=function(e,t){if(e===t||e.proxy===t)return void e.reject(new TypeError("cannot resolve promise with itself"));var n;if("object"==typeof t&&null!==t||"function"==typeof t)try{n=t.then}catch(r){return void e.reject(r)}if("function"!=typeof n)e.fulfill(t);else{var i=!1;try{n.call(t,function(n){i||(i=!0,n===t?e.reject(new TypeError("circular thenable chain")):h(e,n))},function(t){i||(i=!0,e.reject(t))})}catch(r){i||e.reject(r)}}},d="undefined"==typeof d?a:d;d.all=d.all||function(e){return new d(function(t,n){for(var r=new Array(e.length),i=0,o=function(n,o){r[n]=o,i++,i===e.length&&t(r)},a=0;a<e.length;a++)!function(t){var r=e[t],i=null!=r.then;if(i)r.then(function(e){o(t,e)},function(e){n(e)});else{var a=r;o(t,a)}}(a)})},t.exports=d},{}],81:[function(e,t,n){"use strict";var r=e("./is"),i=e("./util"),o=function(e,t){if(!(this instanceof o))return new o(e,t);void 0===t&&void 0!==e&&(t=e,e=void 0);var n=this;if(n._private={selectorText:null,invalid:!0},!t||r.string(t)&&t.match(/^\s*$/))null==e?n.length=0:(n[0]=u(),n[0].group=e,n.length=1);else if(r.elementOrCollection(t)){var a=t.collection();n[0]=u(),n[0].collection=a,n.length=1}else if(r.fn(t))n[0]=u(),n[0].filter=t,n.length=1;else{if(!r.string(t))return void i.error("A selector must be created from a string; found "+t);var s=null,u=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}},l={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])+"|'+"'(?:\\\\'|[^'])+'",number:i.regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$"};l.variable="(?:[\\w-]|(?:\\\\"+l.metaChar+"))+",l.value=l.string+"|"+l.number,l.className=l.variable,l.id=l.variable;for(var c=function(e){return e.replace(new RegExp("\\\\("+l.metaChar+")","g"),function(e,t,n,r){return t})},h=l.comparatorOp.split("|"),d=0;d<h.length;d++){var f=h[d];l.comparatorOp+="|@"+f}for(var h=l.comparatorOp.split("|"),d=0;d<h.length;d++){var f=h[d];f.indexOf("!")>=0||"="!==f&&(l.comparatorOp+="|\\!"+f)}var p=[{name:"group",query:!0,regex:"(node|edge|\\*)",populate:function(e){this.group="*"==e?e:e+"s"}},{name:"state",query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:transparent|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:orphan|:nonorphan|:parent|:child|:loop|:simple|:active|:inactive|:touch|:backgrounding|:nonbackgrounding)",populate:function(e){this.colonSelectors.push(e)}},{name:"id",query:!0,regex:"\\#("+l.id+")",populate:function(e){this.ids.push(c(e))}},{name:"className",query:!0,regex:"\\.("+l.className+")",populate:function(e){this.classes.push(c(e))}},{name:"dataExists",query:!0,regex:"\\[\\s*("+l.variable+")\\s*\\]",populate:function(e){this.data.push({field:c(e)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+l.variable+")\\s*("+l.comparatorOp+")\\s*("+l.value+")\\s*\\]",populate:function(e,t,n){var r=null!=new RegExp("^"+l.string+"$").exec(n);n=r?n.substring(1,n.length-1):parseFloat(n),this.data.push({field:c(e),operator:t,value:n})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+l.boolOp+")\\s*("+l.variable+")\\s*\\]",populate:function(e,t){this.data.push({field:c(t),operator:e})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+l.meta+")\\s*("+l.comparatorOp+")\\s*("+l.number+")\\s*\\]\\]",populate:function(e,t,n){this.meta.push({field:c(e),operator:t,value:parseFloat(n)})}},{name:"nextQuery",separator:!0,regex:l.separator,populate:function(){n[++d]=u(),s=null}},{name:"child",separator:!0,regex:l.child,populate:function(){var e=u();e.parent=this,e.subject=s,n[d]=e}},{name:"descendant",separator:!0,regex:l.descendant,populate:function(){var e=u();e.ancestor=this,e.subject=s,n[d]=e}},{name:"subject",modifier:!0,regex:l.subject,populate:function(){return null!=s&&this.subject!=this?(i.error("Redefinition of subject in selector `"+t+"`"),!1):(s=this,void(this.subject=this))}}];n._private.selectorText=t;var v=t,d=0,g=function(e){for(var t,n,i,o=0;o<p.length;o++){var a=p[o],s=a.name;if(!r.fn(e)||e(s,a)){var u=v.match(new RegExp("^"+a.regex));if(null!=u){n=u,t=a,i=s;var l=u[0];v=v.substring(l.length);break}}}return{expr:t,match:n,name:i}},y=function(){var e=v.match(/^\s+/);if(e){var t=e[0];v=v.substring(t.length)}};for(n[0]=u(),y();;){var m=g();if(null==m.expr)return void i.error("The selector `"+t+"`is invalid");for(var b=[],x=1;x<m.match.length;x++)b.push(m.match[x]);var w=m.expr.populate.apply(n[d],b);if(w===!1)return;if(v.match(/^\s*$/))break}n.length=d+1;for(var x=0;x<n.length;x++){var _=n[x];if(null!=_.subject){for(;_.subject!=_;)if(null!=_.parent){var E=_.parent,k=_;k.parent=null,E.child=k,_=E}else{if(null==_.ancestor){i.error("When adjusting references for the selector `"+_+"`, neither parent nor ancestor was found");break}var S=_.ancestor,N=_;N.ancestor=null,S.descendant=N,_=S}n[x]=_.subject}}if(null!=e)for(var x=0;x<n.length;x++){if(null!=n[x].group&&n[x].group!=e)return void i.error("Group `"+n[x].group+"` conflicts with implicit group `"+e+"` in selector `"+t+"`");n[x].group=e}}n._private.invalid=!1},a=o.prototype;a.size=function(){return this.length},a.eq=function(e){return this[e]};var s=function(e,t){if(null!=e.group&&"*"!=e.group&&e.group!=t._private.group)return!1;for(var n=t.cy(),i=!0,o=0;o<e.colonSelectors.length;o++){var a=e.colonSelectors[o];switch(a){case":selected":i=t.selected();break;case":unselected":i=!t.selected();break;case":selectable":i=t.selectable();break;case":unselectable":i=!t.selectable();break;case":locked":i=t.locked();break;case":unlocked":i=!t.locked();break;case":visible":i=t.visible();break;case":hidden":i=!t.visible();break;case":transparent":i=t.transparent();break;case":grabbed":i=t.grabbed();break;case":free":i=!t.grabbed();break;case":removed":i=t.removed();break;case":inside":i=!t.removed();break;case":grabbable":i=t.grabbable();break;case":ungrabbable":i=!t.grabbable();break;case":animated":i=t.animated();break;case":unanimated":i=!t.animated();break;case":parent":i=t.isNode()&&t.children().nonempty();break;case":child":case":nonorphan":i=t.isNode()&&t.parent().nonempty();break;case":orphan":i=t.isNode()&&t.parent().empty();break;case":loop":i=t.isEdge()&&t.data("source")===t.data("target");break;case":simple":i=t.isEdge()&&t.data("source")!==t.data("target");break;case":active":i=t.active();break;case":inactive":i=!t.active();break;case":touch":i=r.touch();break;case":backgrounding":i=t.backgrounding();break;case":nonbackgrounding":i=!t.backgrounding()}if(!i)break}if(!i)return!1;for(var u=!0,o=0;o<e.ids.length;o++){var l=e.ids[o],c=t._private.data.id;if(u=u&&l==c,!u)break}if(!u)return!1;for(var h=!0,o=0;o<e.classes.length;o++){var d=e.classes[o];if(h=h&&t.hasClass(d),!h)break}if(!h)return!1;var f=function(t){for(var n=!0,i=0;i<e[t.name].length;i++){var o,a=e[t.name][i],s=a.operator,u=a.value,l=a.field;if(null!=s&&null!=u){var c=t.fieldValue(l),h=r.string(c)||r.number(c)?""+c:"",d=""+u,f=!1;s.indexOf("@")>=0&&(h=h.toLowerCase(),d=d.toLowerCase(),s=s.replace("@",""),f=!0);var p=!1,v=!1;switch(s.indexOf("!")>=0&&(s=s.replace("!",""),p=!0),f&&(u=d.toLowerCase(),c=h.toLowerCase()),s){case"*=":o=h.search(d)>=0;break;case"$=":o=null!=new RegExp(d+"$").exec(h);break;case"^=":o=null!=new RegExp("^"+d).exec(h);break;case"=":o=c===u;break;case"!=":o=c!==u;break;case">":o=p?u>=c:c>u,v=!0;break;case">=":o=p?u>c:c>=u,v=!0;break;case"<":o=p?c>=u:u>c,v=!0;break;case"<=":o=p?c>u:u>=c,v=!0;break;default:o=!1}}else if(null!=s)switch(s){case"?":o=t.fieldTruthy(l);break;case"!":o=!t.fieldTruthy(l);break;case"^":o=t.fieldUndefined(l)}else o=!t.fieldUndefined(l);if(p&&!v&&(o=!o,v=!0),!o){n=!1;break}}return n},p=f({name:"data",fieldValue:function(e){return t._private.data[e]},fieldRef:function(e){return"element._private.data."+e},fieldUndefined:function(e){return void 0===t._private.data[e]},fieldTruthy:function(e){return t._private.data[e]?!0:!1}});if(!p)return!1;var v=f({name:"meta",fieldValue:function(e){return t[e]()},fieldRef:function(e){return"element."+e+"()"},fieldUndefined:function(e){return null==t[e]()},fieldTruthy:function(e){return t[e]()?!0:!1}});if(!v)return!1;if(null!=e.collection){var g=null!=e.collection._private.ids[t.id()];if(!g)return!1}if(null!=e.filter&&0===t.collection().filter(e.filter).size())return!1;var y=function(e,t){if(null!=e){var r=!1;if(!n.hasCompoundNodes())return!1;t=t();for(var i=0;i<t.length;i++)if(s(e,t[i])){r=!0;break}return r}return!0};return y(e.parent,function(){return t.parent()})&&y(e.ancestor,function(){return t.parents()})&&y(e.child,function(){return t.children()})&&y(e.descendant,function(){return t.descendants()})?!0:!1};a.filter=function(e){var t=this,n=e.cy();if(t._private.invalid)return n.collection();var r=function(e,n){for(var r=0;r<t.length;r++){var i=t[r];if(s(i,n))return!0}return!1};null==t._private.selectorText&&(r=function(){return!0});var i=e.filter(r);return i},a.matches=function(e){var t=this;if(t._private.invalid)return!1;for(var n=0;n<t.length;n++){var r=t[n];if(s(r,e))return!0}return!1},a.toString=a.selector=function(){for(var e="",t=function(e,t){return r.string(e)?t?'"'+e+'"':e:""},n=function(e){var r="";e.subject===e&&(r+="$");var o=t(e.group);r+=o.substring(0,o.length-1);for(var a=0;a<e.data.length;a++){var s=e.data[a];r+=s.value?"["+s.field+t(s.operator)+t(s.value,!0)+"]":"["+t(s.operator)+s.field+"]"}for(var a=0;a<e.meta.length;a++){var u=e.meta[a];r+="[["+u.field+t(u.operator)+t(u.value,!0)+"]]"}for(var a=0;a<e.colonSelectors.length;a++){var l=e.colonSelectors[i];r+=l}for(var a=0;a<e.ids.length;a++){var l="#"+e.ids[i];r+=l}for(var a=0;a<e.classes.length;a++){var l="."+e.classes[a];r+=l}return null!=e.parent&&(r=n(e.parent)+" > "+r),null!=e.ancestor&&(r=n(e.ancestor)+" "+r),null!=e.child&&(r+=" > "+n(e.child)),null!=e.descendant&&(r+=" "+n(e.descendant)),r},i=0;i<this.length;i++){var o=this[i];e+=n(o),this.length>1&&i<this.length-1&&(e+=", ")}return e},t.exports=o},{"./is":77,"./util":94}],82:[function(e,t,n){"use strict";var r=e("../util"),i=e("../is"),o={};o.apply=function(e){var t=this;t._private.newStyle&&(this._private.contextStyles={},this._private.propDiffs={});for(var n=0;n<e.length;n++){var r=e[n],i=t.getContextMeta(r),o=t.getContextStyle(i),a=t.applyContextStyle(i,o,r);t.updateTransitions(r,a.diffProps),t.updateStyleHints(r)}t._private.newStyle=!1},o.getPropertiesDiff=function(e,t){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},i=e+"-"+t,o=r[i];if(o)return o;for(var a=[],s={},u=0;u<n.length;u++){var l=n[u],c="t"===e[u],h="t"===t[u],d=c!==h,f=l.mappedProperties.length>0;if(d||f){var p;d&&f?p=l.properties:d?p=l.properties:f&&(p=l.mappedProperties);for(var v=0;v<p.length;v++){for(var g=p[v],y=g.name,m=!1,b=u+1;b<n.length;b++){var x=n[b],w="t"===t[b];if(w&&(m=null!=x.properties[g.name]))break}s[y]||m||(s[y]=!0,a.push(y))}}}return r[i]=a,a},o.getContextMeta=function(e){var t,n=this,r="",i=e._private.styleCxtKey||"";n._private.newStyle&&(i="");for(var o=0;o<n.length;o++){var a=n[o],s=a.selector&&a.selector.matches(e);r+=s?"t":"f"}return t=n.getPropertiesDiff(i,r),e._private.styleCxtKey=r,{key:r,diffPropNames:t}},o.getContextStyle=function(e){var t=e.key,n=this,r=this._private.contextStyles=this._private.contextStyles||{};if(r[t])return r[t];for(var i={_private:{key:t}},o=0;o<n.length;o++){var a=n[o],s="t"===t[o];if(s)for(var u=0;u<a.properties.length;u++){var l=a.properties[u],c=i[l.name]=l;c.context=a}}return r[t]=i,i},o.applyContextStyle=function(e,t,n){for(var r=this,i=e.diffPropNames,o={},a=0;a<i.length;a++){var s=i[a],u=t[s],l=n._private.style[s];if(u&&l!==u){var c=o[s]={prev:l};r.applyParsedProperty(n,u),c.next=n._private.style[s],c.next&&c.next.bypass&&(c.next=c.next.bypassed)}}return{diffProps:o}},o.updateStyleHints=function(e){var t=e._private,n=this,r=t.style;if(!e.removed()){var i=!1;if("nodes"===t.group&&n._private.hasPie)for(var o=1;o<=n.pieBackgroundN;o++){var a=t.style["pie-"+o+"-background-size"].value;if(a>0){i=!0;break}}t.hasPie=i;var s=r["text-transform"].strValue,u=r.label.strValue,l=r["font-style"].strValue,a=r["font-size"].pfValue+"px",c=r["font-family"].strValue,h=r["font-weight"].strValue,d=r["text-valign"].strValue,f=r["text-valign"].strValue,p=r["text-outline-width"].pfValue,v=r["text-wrap"].strValue,g=r["text-max-width"].pfValue;t.labelKey=l+"$"+a+"$"+c+"$"+h+"$"+u+"$"+s+"$"+d+"$"+f+"$"+p+"$"+v+"$"+g,t.fontKey=l+"$"+h+"$"+a+"$"+c;var y=r.width.pfValue,m=r.height.pfValue,b=r["border-width"].pfValue;if(t.boundingBoxKey=y+"$"+m+"$"+b,"edges"===e._private.group){var x=r["control-point-step-size"].pfValue,w=r["control-point-distances"]?r["control-point-distances"].pfValue.join("_"):void 0,_=r["control-point-weights"].value.join("_"),E=r["curve-style"].strValue,k=r["segment-distances"]?r["segment-distances"].pfValue.join("_"):void 0,S=r["segment-weights"].value.join("_");t.boundingBoxKey+="$"+x+"$"+w+"$"+_+"$"+k+"$"+S+"$"+E}t.styleKey=Date.now()}},o.applyParsedProperty=function(e,t){var n,o,a=this,s=t,u=e._private.style,l=a.types,c=a.properties[s.name].type,h=s.bypass,d=u[s.name],f=d&&d.bypass,p=e._private;if(("height"===t.name||"width"===t.name)&&e.isNode()){if("auto"===t.value&&!e.isParent())return!1;"auto"!==t.value&&e.isParent()&&(s=t=this.parse(t.name,"auto",h))}if(h&&s.deleteBypass){var v=u[s.name];return v?v.bypass&&v.bypassed?(u[s.name]=v.bypassed,!0):!1:!0}var g=function(){r.error("Do not assign mappings to elements without corresponding data (e.g. ele `"+e.id()+"` for property `"+s.name+"` with data field `"+s.field+"`); try a `["+s.field+"]` selector to limit scope to elements with `"+s.field+"` defined")};switch(s.mapped){case l.mapData:case l.mapLayoutData:case l.mapScratch:var n,y=s.mapped===l.mapLayoutData,m=s.mapped===l.mapScratch,b=s.field.split(".");n=m||y?p.scratch:p.data;for(var x=0;x<b.length&&n;x++){var w=b[x];n=n[w]}var _;if(_=i.number(n)?(n-s.fieldMin)/(s.fieldMax-s.fieldMin):0,0>_?_=0:_>1&&(_=1),c.color){var E=s.valueMin[0],k=s.valueMax[0],S=s.valueMin[1],N=s.valueMax[1],T=s.valueMin[2],D=s.valueMax[2],P=null==s.valueMin[3]?1:s.valueMin[3],C=null==s.valueMax[3]?1:s.valueMax[3],M=[Math.round(E+(k-E)*_),Math.round(S+(N-S)*_),Math.round(T+(D-T)*_),Math.round(P+(C-P)*_)];o={bypass:s.bypass,name:s.name,value:M,strValue:"rgb("+M[0]+", "+M[1]+", "+M[2]+")"}}else{if(!c.number)return!1;var A=s.valueMin+(s.valueMax-s.valueMin)*_;o=this.parse(s.name,A,s.bypass,!0)}o||(o=this.parse(s.name,d.strValue,s.bypass,!0)),o||g(),o.mapping=s,s=o;break;case l.data:case l.layoutData:case l.scratch:var n,y=s.mapped===l.layoutData,m=s.mapped===l.scratch,b=s.field.split(".");if(n=m||y?p.scratch:p.data)for(var x=0;x<b.length;x++){var w=b[x];n=n[w]}if(o=this.parse(s.name,n,s.bypass,!0),!o){var I=d?d.strValue:"";o=this.parse(s.name,I,s.bypass,!0)}o||g(),o.mapping=s,s=o;break;case l.fn:var L=s.value,O=L(e);o=this.parse(s.name,O,s.bypass,!0),o.mapping=s,s=o;break;case void 0:break;default:return!1}return h?(s.bypassed=f?d.bypassed:d,u[s.name]=s):f?d.bypassed=s:u[s.name]=s,!0},o.update=function(){var e=this._private.cy,t=e.elements();t.updateStyle()},o.updateMappers=function(e){for(var t=this,n=0;n<e.length;n++){for(var r=e[n],i=r._private.style,o=0;o<t.properties.length;o++){var a=t.properties[o],s=i[a.name];if(s&&s.mapping){var u=s.mapping;this.applyParsedProperty(r,u)}}this.updateStyleHints(r)}},o.updateTransitions=function(e,t,n){var r=this,o=e._private,a=o.style,s=a["transition-property"].value,u=a["transition-duration"].pfValue,l=a["transition-delay"].pfValue,c={};if(s.length>0&&u>0){for(var h=!1,d=0;d<s.length;d++){var f=s[d],p=a[f],v=t[f];if(v){var g,y=v.prev,m=y,b=null!=v.next?v.next:p,x=!1,w=1e-6;m&&(i.number(m.pfValue)&&i.number(b.pfValue)?(x=b.pfValue-m.pfValue,g=m.pfValue+w*x):i.number(m.value)&&i.number(b.value)?(x=b.value-m.value,g=m.value+w*x):i.array(m.value)&&i.array(b.value)&&(x=m.value[0]!==b.value[0]||m.value[1]!==b.value[1]||m.value[2]!==b.value[2],g=m.strValue),x&&(c[f]=b.strValue,this.applyBypass(e,f,g),h=!0))}}if(!h)return;o.transitioning=!0,e.stop(),l>0&&e.delay(l),e.animate({css:c},{duration:u,easing:a["transition-timing-function"].value,queue:!1,complete:function(){n||r.removeBypasses(e,s),o.transitioning=!1}})}else o.transitioning&&(e.stop(),this.removeBypasses(e,s),o.transitioning=!1)},t.exports=o},{"../is":77,"../util":94}],83:[function(e,t,n){"use strict";var r=e("../is"),i=e("../util"),o={};o.applyBypass=function(e,t,n,o){var a=this,s=[],u=!0;if("*"===t||"**"===t){if(void 0!==n)for(var l=0;l<a.properties.length;l++){var c=a.properties[l],t=c.name,h=this.parse(t,n,!0);h&&s.push(h)}}else if(r.string(t)){var h=this.parse(t,n,!0);h&&s.push(h)}else{if(!r.plainObject(t))return!1;var d=t;o=n;for(var l=0;l<a.properties.length;l++){var c=a.properties[l],t=c.name,n=d[t];if(void 0===n&&(n=d[i.dash2camel(t)]),void 0!==n){var h=this.parse(t,n,!0);h&&s.push(h)}}}if(0===s.length)return!1;for(var f=!1,l=0;l<e.length;l++){for(var p,v=e[l],g=v._private.style,y={},m=0;m<s.length;m++){var c=s[m];if(o){var b=g[c.name];p=y[c.name]={prev:b}}f=this.applyParsedProperty(v,c)||f,o&&(p.next=g[c.name])}f&&this.updateStyleHints(v),o&&this.updateTransitions(v,y,u)}return f},o.overrideBypass=function(e,t,n){t=i.camel2dash(t);for(var r=0;r<e.length;r++){var o=e[r],a=o._private.style[t],s=this.properties[t].type,u=s.color,l=s.mutiple;a.bypass?(a.value=n,null!=a.pfValue&&(a.pfValue=n),a.strValue=u?"rgb("+n.join(",")+")":l?n.join(" "):""+n):this.applyBypass(o,t,n)}},o.removeAllBypasses=function(e,t){return this.removeBypasses(e,this.propertyNames,t)},o.removeBypasses=function(e,t,n){for(var r=!0,i=0;i<e.length;i++){for(var o=e[i],a={},s=o._private.style,u=0;u<t.length;u++){var l=t[u],c=this.properties[l],h="",d=this.parse(l,h,!0),f=s[c.name],p=a[c.name]={prev:f};this.applyParsedProperty(o,d),p.next=s[c.name]}this.updateStyleHints(o),n&&this.updateTransitions(o,a,r)}},t.exports=o},{"../is":77,"../util":94}],84:[function(e,t,n){"use strict";var r=e("../window"),i={};i.getEmSizeInPixels=function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},i.containerCss=function(e){var t=this._private.cy,n=t.container();return r&&n&&r.getComputedStyle?r.getComputedStyle(n).getPropertyValue(e):void 0},t.exports=i},{"../window":100}],85:[function(e,t,n){"use strict";var r=e("../util"),i=e("../is"),o={};o.getRenderedStyle=function(e){return this.getRawStyle(e,!0)},o.getRawStyle=function(e,t){var n=this,e=e[0];if(e){for(var i={},o=0;o<n.properties.length;o++){var a=n.properties[o],s=n.getStylePropertyValue(e,a.name,t);s&&(i[a.name]=s,i[r.dash2camel(a.name)]=s)}return i}},o.getStylePropertyValue=function(e,t,n){var r=this,e=e[0];if(e){var i=e._private.style,o=r.properties[t],a=o.type,s=i[o.name],u=e.cy().zoom();if(s){var l=s.units?a.implicitUnits||"px":null,c=l?[].concat(s.pfValue).map(function(e){return e*(n?u:1)+l}).join(" "):s.strValue;return c}}},o.getValueStyle=function(e){var t,n=this,o={},a=i.element(e);if(t=a?e._private.style:e)for(var s=0;s<n.properties.length;s++){var u=n.properties[s],l=t[u.name]||t[r.dash2camel(u.name)];void 0!==l&&(l=i.plainObject(l)?this.parse(u.name,l.strValue):this.parse(u.name,l)),l&&(o[u.name]=l,o[r.dash2camel(u.name)]=l)}return o},o.getPropsList=function(e){var t=this,n=[],i=e,o=t.properties;if(i)for(var a in i){var s=i[a],u=o[a]||o[r.camel2dash(a)],l=this.parse(u.name,s);n.push(l)}return n},t.exports=o},{"../is":77,"../util":94}],86:[function(e,t,n){"use strict";var r=e("../is"),i=e("../util"),o=e("../selector"),a=function(e){return this instanceof a?r.core(e)?(this._private={cy:e,coreStyle:{},newStyle:!0},this.length=0,void this.addDefaultStylesheet()):void i.error("A style must have a core reference"):new a(e)},s=a.prototype;s.instanceString=function(){return"style"},s.clear=function(){for(var e=0;e<this.length;e++)this[e]=void 0;return this.length=0,this._private.newStyle=!0,this},s.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},s.core=function(){return this._private.coreStyle},s.selector=function(e){var t="core"===e?null:new o(e),n=this.length++;return this[n]={selector:t,properties:[],mappedProperties:[],index:n},this},s.css=function(){var e=this,t=arguments;switch(t.length){case 1:for(var n=t[0],r=0;r<e.properties.length;r++){var o=e.properties[r],a=n[o.name];void 0===a&&(a=n[i.dash2camel(o.name)]),void 0!==a&&this.cssRule(o.name,a)}break;case 2:this.cssRule(t[0],t[1])}return this},s.style=s.css,s.cssRule=function(e,t){var n=this.parse(e,t);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n);var i=!this[r].selector;i&&(this._private.coreStyle[n.name]=n)}return this},a.fromJson=function(e,t){var n=new a(e);return n.fromJson(t),n},a.fromString=function(e,t){return new a(e).fromString(t)},[e("./apply"),e("./bypass"),e("./container"),e("./get-for-ele"),e("./json"),e("./string-sheet"),e("./properties"),e("./parse")].forEach(function(e){i.extend(s,e)}),a.types=s.types,a.properties=s.properties,t.exports=a},{"../is":77,"../selector":81,"../util":94,"./apply":82,"./bypass":83,"./container":84,"./get-for-ele":85,"./json":87,"./parse":88,"./properties":89,"./string-sheet":90}],87:[function(e,t,n){"use strict";var r={};r.applyFromJson=function(e){for(var t=this,n=0;n<e.length;n++){var r=e[n],i=r.selector,o=r.style||r.css;t.selector(i);for(var a in o){var s=o[a];t.css(a,s)}}return t},r.fromJson=function(e){var t=this;return t.resetToDefault(),t.applyFromJson(e),t},r.json=function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var n=this[t],r=n.selector,i=n.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}e.push({selector:r?r.toString():"core",style:o})}return e},t.exports=r},{}],88:[function(e,t,n){"use strict";var r=e("../util"),i=e("../is"),o={};o.parse=function(e,t,n,i){var o,s=[e,t,n,i].join("$"),u=this.propCache=this.propCache||{},l=a.bind(this);return(o=u[s])||(o=u[s]=l(e,t,n,i)),o=r.copy(o),o&&(o.value=r.copy(o.value)),o};var a=function(e,t,n,o){var a=this;e=r.camel2dash(e);var s=a.properties[e],u=t,l=a.types;if(!s)return null;if(void 0===t||null===t)return null;s.alias&&(s=s.pointsTo,e=s.name);var c=i.string(t);c&&(t=t.trim());var h=s.type;if(!h)return null;if(n&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(i.fn(t))return{name:e,value:t,strValue:"fn",mapped:l.fn,bypass:n};var d,f,p,v,g,y;if(!c||o);else{if((d=new RegExp(l.data.regex).exec(t))||(p=new RegExp(l.layoutData.regex).exec(t))||(g=new RegExp(l.scratch.regex).exec(t))){if(n)return!1;var m;return m=d?l.data:p?l.layoutData:l.scratch,d=d||p||g,{name:e,value:d,strValue:""+t,mapped:m,field:d[1],bypass:n}}if((f=new RegExp(l.mapData.regex).exec(t))||(v=new RegExp(l.mapLayoutData.regex).exec(t))||(y=new RegExp(l.mapScratch.regex).exec(t))){if(n)return!1;if(h.multiple)return!1;var m;if(m=f?l.mapData:v?l.mapLayoutData:l.mapScratch,f=f||v||y,!h.color&&!h.number)return!1;var b=this.parse(e,f[4]);if(!b||b.mapped)return!1;var x=this.parse(e,f[5]);if(!x||x.mapped)return!1;if(b.value===x.value)return!1;if(h.color){var w=b.value,_=x.value,E=!(w[0]!==_[0]||w[1]!==_[1]||w[2]!==_[2]||w[3]!==_[3]&&(null!=w[3]&&1!==w[3]||null!=_[3]&&1!==_[3]));if(E)return!1}return{name:e,value:f,strValue:""+t,mapped:m,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:b.value,valueMax:x.value,bypass:n}}}if(h.multiple&&"multiple"!==o){var k;if(k=c?t.split(/\s+/):i.array(t)?t:[t],h.evenMultiple&&k.length%2!==0)return null;var S=k.map(function(t){var r=a.parse(e,t,n,"multiple");return null!=r.pfValue?r.pfValue:r.value});return{name:e,value:S,pfValue:S,strValue:S.join(" "),bypass:n,units:h.number&&!h.unitless?h.implicitUnits||"px":void 0}}var N=function(){for(var r=0;r<h.enums.length;r++){var i=h.enums[r];if(i===t)return{name:e,value:t,strValue:""+t,bypass:n}}return null};if(h.number){var T,D="px";if(h.units&&(T=h.units),h.implicitUnits&&(D=h.implicitUnits),!h.unitless)if(c){var P="px|em"+(h.allowPercent?"|\\%":"");T&&(P=T);var C=t.match("^("+r.regex.number+")("+P+")?$");C&&(t=C[1],T=C[2]||D)}else(!T||h.implicitUnits)&&(T=D);if(t=parseFloat(t),isNaN(t)&&void 0===h.enums)return null;if(isNaN(t)&&void 0!==h.enums)return t=u,N();if(h.integer&&!i.integer(t))return null;if(void 0!==h.min&&t<h.min||void 0!==h.max&&t>h.max)return null;var M={name:e,value:t,strValue:""+t+(T?T:""),units:T,bypass:n};return M.pfValue=h.unitless||"px"!==T&&"em"!==T?t:"px"!==T&&T?this.getEmSizeInPixels()*t:t,("ms"===T||"s"===T)&&(M.pfValue="ms"===T?t:1e3*t),("deg"===T||"rad"===T)&&(M.pfValue="rad"===T?t:t*Math.PI/180),M}if(h.propList){var A=[],I=""+t;if("none"===I);else{for(var L=I.split(","),O=0;O<L.length;O++){var j=L[O].trim();a.properties[j]&&A.push(j)}if(0===A.length)return null}return{name:e,value:A,strValue:0===A.length?"none":A.join(", "),bypass:n}}if(h.color){var B=r.color2tuple(t);return B?{name:e,value:B,strValue:""+t,bypass:n,roundValue:!0}:null}if(h.regex||h.regexes){if(h.enums){var R=N();if(R)return R}for(var z=h.regexes?h.regexes:[h.regex],O=0;O<z.length;O++){var F=new RegExp(z[O]),V=F.exec(t);if(V)return{name:e,value:V,strValue:""+t,bypass:n}}return null}return h.string?{name:e,value:t,strValue:""+t,bypass:n}:h.enums?N():null};t.exports=o},{"../is":77,"../util":94}],89:[function(e,t,n){"use strict";var r=e("../util"),i={};!function(){var e=r.regex.number,t=r.regex.rgbaNoBackRefs,n=r.regex.hslaNoBackRefs,o=r.regex.hex3,a=r.regex.hex6,s=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},u=function(r){var i=e+"|\\w+|"+t+"|"+n+"|"+o+"|"+a;return"^"+r+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+i+")\\s*\\,\\s*("+i+")\\)$"};i.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["auto","label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizes:{number:!0,multiple:!0},bgSize:{number:!0,min:0,allowPercent:!0},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"]},bgPos:{number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},bgFit:{enums:["none","contain","cover"]},bgClip:{enums:["none","node"]},color:{color:!0},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap"]},textBackgroundShape:{enums:["rectangle","roundrectangle"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon","star","diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-backcurve","half-triangle-overshot","vee","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:s("data")},layoutData:{mapping:!0,regex:s("layoutData")},scratch:{mapping:!0,regex:s("scratch")},mapData:{mapping:!0,regex:u("mapData")},mapLayoutData:{mapping:!0,regex:u("mapLayoutData")},mapScratch:{mapping:!0,regex:u("mapScratch")},fn:{mapping:!0,fn:!0},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],
enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]}};var l=i.types,c=i.properties=[{name:"text-valign",type:l.valign},{name:"text-halign",type:l.halign},{name:"color",type:l.color},{name:"label",type:l.text},{name:"text-outline-color",type:l.color},{name:"text-outline-width",type:l.size},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size},{name:"text-border-style",type:l.borderStyle},{name:"text-background-shape",type:l.textBackgroundShape},{name:"text-transform",type:l.textTransform},{name:"text-wrap",type:l.textWrap},{name:"text-max-width",type:l.size},{name:"text-events",type:l.bool},{name:"font-family",type:l.fontFamily},{name:"font-style",type:l.fontStyle},{name:"font-weight",type:l.fontWeight},{name:"font-size",type:l.size},{name:"min-zoomed-font-size",type:l.size},{name:"edge-text-rotation",type:l.textRotation},{name:"events",type:l.bool},{name:"display",type:l.display},{name:"visibility",type:l.visibility},{name:"opacity",type:l.zeroOneNumber},{name:"z-index",type:l.nonNegativeInt},{name:"overlay-padding",type:l.size},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber},{name:"shadow-blur",type:l.size},{name:"shadow-color",type:l.color},{name:"shadow-opacity",type:l.zeroOneNumber},{name:"shadow-offset-x",type:l.bidirectionalSize},{name:"shadow-offset-y",type:l.bidirectionalSize},{name:"text-shadow-blur",type:l.size},{name:"text-shadow-color",type:l.color},{name:"text-shadow-opacity",type:l.zeroOneNumber},{name:"text-shadow-offset-x",type:l.bidirectionalSize},{name:"text-shadow-offset-y",type:l.bidirectionalSize},{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing},{name:"height",type:l.nodeSize},{name:"width",type:l.nodeSize},{name:"shape",type:l.nodeShape},{name:"shape-polygon-points",type:l.polygonPointList},{name:"background-color",type:l.color},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"padding-left",type:l.size},{name:"padding-right",type:l.size},{name:"padding-top",type:l.size},{name:"padding-bottom",type:l.size},{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size},{name:"border-style",type:l.borderStyle},{name:"background-image",type:l.url},{name:"background-image-opacity",type:l.zeroOneNumber},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"position",type:l.position},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels},{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"curve-style",type:l.curveStyle},{name:"haystack-radius",type:l.zeroOneNumber},{name:"control-point-step-size",type:l.size},{name:"control-point-distances",type:l.bidirectionalSizes},{name:"control-point-weights",type:l.numbers},{name:"segment-distances",type:l.bidirectionalSizes},{name:"segment-weights",type:l.numbers},{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],h=i.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"}];i.pieBackgroundN=16,c.push({name:"pie-size",type:l.bgSize});for(var d=1;d<=i.pieBackgroundN;d++)c.push({name:"pie-"+d+"-background-color",type:l.color}),c.push({name:"pie-"+d+"-background-size",type:l.percent}),c.push({name:"pie-"+d+"-background-opacity",type:l.zeroOneNumber});var f=i.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill}].forEach(function(e){f.forEach(function(t){var n=t+"-"+e.name,r=e.type;c.push({name:n,type:r})})},{}),i.propertyNames=c.map(function(e){return e.name});for(var d=0;d<c.length;d++){var p=c[d];c[p.name]=p}for(var d=0;d<h.length;d++){var v=h[d],g=c[v.pointsTo],y={name:v.name,alias:!0,pointsTo:g};c.push(y),c[v.name]=y}}(),i.addDefaultStylesheet=function(){this.selector("node, edge").css(r.extend({events:"yes","text-events":"no","text-valign":"top","text-halign":"center",color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","text-background-shape":"rectangle","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"edge-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-index":0,label:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"shadow-opacity":0,"shadow-color":"#000","shadow-blur":10,"shadow-offset-x":0,"shadow-offset-y":0,"text-shadow-opacity":0,"text-shadow-color":"#000","text-shadow-blur":5,"text-shadow-offset-x":0,"text-shadow-offset-y":0,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#888","background-opacity":1,"background-image":"none","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,position:"origin","compound-sizing-wrt-labels":"include"},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(e,t){for(var n=1;n<=i.pieBackgroundN;n++){var r=t.name.replace("{{i}}",n),o=t.value;e[r]=o}return e},{}),{"line-style":"solid","line-color":"#ddd","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"curve-style":"bezier","haystack-radius":.8},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#ddd"},{name:"arrow-fill",value:"filled"}].reduce(function(e,t){return i.arrowPrefixes.forEach(function(n){var r=n+"-"+t.name,i=t.value;e[r]=i}),e},{}))).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle","padding-top":10,"padding-right":10,"padding-left":10,"padding-bottom":10}).selector("edge").css({width:1}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125}),this.defaultLength=this.length},t.exports=i},{"../util":94}],90:[function(e,t,n){"use strict";var r=e("../util"),i=e("../selector"),o={};o.applyFromString=function(e){function t(){c=c.length>o.length?c.substr(o.length):""}function n(){a=a.length>s.length?a.substr(s.length):""}var o,a,s,u=this,l=this,c=""+e;for(c=c.replace(/[\/][*](\s|.)+?[*][\/]/g,"");;){var h=c.match(/^\s*$/);if(h)break;var d=c.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!d){r.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+c);break}o=d[0];var f=d[1];if("core"!==f){var p=new i(f);if(p._private.invalid){r.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),t();continue}}var v=d[2],g=!1;a=v;for(var y=[];;){var h=a.match(/^\s*$/);if(h)break;var m=a.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!m){r.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+v),g=!0;break}s=m[0];var b=m[1],x=m[2],w=u.properties[b];if(w){var _=l.parse(b,x);_?(y.push({name:b,val:x}),n()):(r.error("Skipping property: Invalid property definition in: "+s),n())}else r.error("Skipping property: Invalid property name in: "+s),n()}if(g){t();break}l.selector(f);for(var E=0;E<y.length;E++){var w=y[E];l.css(w.name,w.val)}t()}return l},o.fromString=function(e){var t=this;return t.resetToDefault(),t.applyFromString(e),t},t.exports=o},{"../selector":81,"../util":94}],91:[function(e,t,n){"use strict";var r=e("./is"),i=e("./util"),o=e("./style"),a=function(){return this instanceof a?void(this.length=0):new a},s=a.prototype;s.instanceString=function(){return"stylesheet"},s.selector=function(e){var t=this.length++;return this[t]={selector:e,properties:[]},this},s.css=function(e,t){var n=this.length-1;if(r.string(e))this[n].properties.push({name:e,value:t});else if(r.plainObject(e))for(var a=e,s=0;s<o.properties.length;s++){var u=o.properties[s],l=a[u.name];if(void 0===l&&(l=a[i.dash2camel(u.name)]),void 0!==l){var e=u.name,t=l;this[n].properties.push({name:e,value:t})}}return this},s.style=s.css,s.generateStyle=function(e){for(var t=new o(e),n=0;n<this.length;n++){var r=this[n],i=r.selector,a=r.properties;t.selector(i);for(var s=0;s<a.length;s++){var u=a[s];t.css(u.name,u.value)}}return t},t.exports=a},{"./is":77,"./style":86,"./util":94}],92:[function(_dereq_,module,exports){"use strict";var window=_dereq_("./window"),util=_dereq_("./util"),Promise=_dereq_("./promise"),Event=_dereq_("./event"),define=_dereq_("./define"),is=_dereq_("./is"),Thread=function(e){if(!(this instanceof Thread))return new Thread(e);var t=this._private={requires:[],files:[],queue:null,pass:[],disabled:!1};is.plainObject(e)&&null!=e.disabled&&(t.disabled=!!e.disabled)},thdfn=Thread.prototype,stringifyFieldVal=function(e){var t=is.fn(e)?e.toString():"JSON.parse('"+JSON.stringify(e)+"')";return t},fnAsRequire=function(e){var t,n;is.object(e)&&e.fn?(t=fnAs(e.fn,e.name),n=e.name,e=e.fn):is.fn(e)?(t=e.toString(),n=e.name):is.string(e)?t=e:is.object(e)&&(t=e.proto?"":e.name+" = {};",n=e.name,e=e.obj),t+="\n";var r=function(e,n){if(e.prototype){var r=!1;for(var i in e.prototype){r=!0;break}r&&(t+=fnAsRequire({name:n,obj:e,proto:!0},e))}};if(e.prototype&&null!=n)for(var i in e.prototype){var o="",a=e.prototype[i],s=stringifyFieldVal(a),u=n+".prototype."+i;o+=u+" = "+s+";\n",o&&(t+=o),r(a,u)}if(!is.string(e))for(var i in e){var l="";if(e.hasOwnProperty(i)){var a=e[i],s=stringifyFieldVal(a),u=n+'["'+i+'"]';l+=u+" = "+s+";\n"}l&&(t+=l),r(a,u)}return t},isPathStr=function(e){return is.string(e)&&e.match(/\.js$/)};util.extend(thdfn,{instanceString:function(){return"thread"},require:function(e,t){var n=this._private.requires;if(isPathStr(e))return this._private.files.push(e),this;if(t)e=is.fn(e)?{name:t,fn:e}:{name:t,obj:e};else if(is.fn(e)){if(!e.name)throw'The function name could not be automatically determined.  Use thread.require( someFunction, "someFunction" )';e={name:e.name,fn:e}}return n.push(e),this},pass:function(e){return this._private.pass.push(e),this},run:function(fn,pass){var self=this,_p=this._private;if(pass=pass||_p.pass.shift(),_p.stopped)throw"Attempted to run a stopped thread!  Start a new thread or do not stop the existing thread and reuse it.";if(_p.running)return _p.queue=_p.queue.then(function(){return self.run(fn,pass)});var useWW=null!=window&&!_p.disabled,useNode=!window&&"undefined"!=typeof module&&!_p.disabled;self.trigger("run");var runP=new Promise(function(resolve,reject){_p.running=!0;var threadTechAlreadyExists=_p.ran,fnImplStr=is.string(fn)?fn:fn.toString(),fnStr="\n"+_p.requires.map(function(e){return fnAsRequire(e)}).concat(_p.files.map(function(e){if(useWW){var t=function(e){return e.match(/^\.\//)||e.match(/^\.\./)?window.location.origin+window.location.pathname+e:e.match(/^\//)?window.location.origin+"/"+e:e};return'importScripts("'+t(e)+'");'}if(useNode)return'eval( require("fs").readFileSync("'+e+'", { encoding: "utf8" }) );';throw"External file `"+e+"` can not be required without any threading technology."})).concat(["( function(){","var ret = ("+fnImplStr+")("+JSON.stringify(pass)+");","if( ret !== undefined ){ resolve(ret); }","} )()\n"]).join("\n");if(_p.requires=[],_p.files=[],useWW){var fnBlob,fnUrl;if(!threadTechAlreadyExists){var fnPre=fnStr+"";fnStr=["function _ref_(o){ return eval(o); };","function broadcast(m){ return message(m); };","function message(m){ postMessage(m); };","function listen(fn){",'  self.addEventListener("message", function(m){ ','    if( typeof m === "object" && (m.data.$$eval || m.data === "$$start") ){',"    } else { ","      fn( m.data );","    }","  });","};",'self.addEventListener("message", function(m){  if( m.data.$$eval ){ eval( m.data.$$eval ); }  });',"function resolve(v){ postMessage({ $$resolve: v }); };","function reject(v){ postMessage({ $$reject: v }); };"].join("\n"),fnStr+=fnPre,fnBlob=new Blob([fnStr],{type:"application/javascript"}),fnUrl=window.URL.createObjectURL(fnBlob)}var ww=_p.webworker=_p.webworker||new Worker(fnUrl);threadTechAlreadyExists&&ww.postMessage({$$eval:fnStr});var cb;ww.addEventListener("message",cb=function(e){var t=is.object(e)&&is.object(e.data);t&&"$$resolve"in e.data?(ww.removeEventListener("message",cb),resolve(e.data.$$resolve)):t&&"$$reject"in e.data?(ww.removeEventListener("message",cb),reject(e.data.$$reject)):self.trigger(new Event(e,{type:"message",message:e.data}))},!1),threadTechAlreadyExists||ww.postMessage("$$start")}else if(useNode){_p.child||(_p.child=_dereq_("child_process").fork(_dereq_("path").join(__dirname,"thread-node-fork")));var child=_p.child,cb;child.on("message",cb=function(e){is.object(e)&&"$$resolve"in e?(child.removeListener("message",cb),resolve(e.$$resolve)):is.object(e)&&"$$reject"in e?(child.removeListener("message",cb),reject(e.$$reject)):self.trigger(new Event({},{type:"message",message:e}))}),child.send({$$eval:fnStr})}else{var promiseResolve=resolve,promiseReject=reject,timer=_p.timer=_p.timer||{listeners:[],exec:function(){fnStr=["function _ref_(o){ return eval(o); };","function broadcast(m){ return message(m); };",'function message(m){ self.trigger( new Event({}, { type: "message", message: m }) ); };',"function listen(fn){ timer.listeners.push( fn ); };","function resolve(v){ promiseResolve(v); };","function reject(v){ promiseReject(v); };"].join("\n")+fnStr,eval(fnStr)},message:function(e){for(var t=timer.listeners,n=0;n<t.length;n++){var r=t[n];r(e)}}};timer.exec()}}).then(function(e){return _p.running=!1,_p.ran=!0,self.trigger("ran"),e});return null==_p.queue&&(_p.queue=runP),runP},message:function(e){var t=this._private;return t.webworker&&t.webworker.postMessage(e),t.child&&t.child.send(e),t.timer&&t.timer.message(e),this},stop:function(){var e=this._private;return e.webworker&&e.webworker.terminate(),e.child&&e.child.kill(),e.timer,e.stopped=!0,this.trigger("stop")},stopped:function(){return this._private.stopped}});var fnAs=function(e,t){var n=e.toString();return n=n.replace(/function\s*?\S*?\s*?\(/,"function "+t+"(")},defineFnal=function(e){return e=e||{},function(t,n){var r=fnAs(t,"_$_$_"+e.name);return this.require(r),this.run(["function( data ){","  var origResolve = resolve;","  var res = [];","  ","  resolve = function( val ){","    res.push( val );","  };","  ","  var ret = data."+e.name+"( _$_$_"+e.name+(arguments.length>1?", "+JSON.stringify(n):"")+" );","  ","  resolve = origResolve;","  resolve( res.length > 0 ? res : ret );","}"].join("\n"))}};util.extend(thdfn,{reduce:defineFnal({name:"reduce"}),reduceRight:defineFnal({name:"reduceRight"}),map:defineFnal({name:"map"})});var fn=thdfn;fn.promise=fn.run,fn.terminate=fn.halt=fn.stop,fn.include=fn.require,util.extend(thdfn,{on:define.on(),one:define.on({unbindSelfOnTrigger:!0}),off:define.off(),trigger:define.trigger()}),define.eventAliasesOn(thdfn),module.exports=Thread},{"./define":41,"./event":42,"./is":77,"./promise":80,"./util":94,"./window":100,child_process:void 0,path:void 0}],93:[function(e,t,n){"use strict";var r=e("../is");t.exports={hex2tuple:function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,n,r,i=4===e.length,o=16;return i?(t=parseInt(e[1]+e[1],o),n=parseInt(e[2]+e[2],o),r=parseInt(e[3]+e[3],o)):(t=parseInt(e[1]+e[2],o),n=parseInt(e[3]+e[4],o),r=parseInt(e[5]+e[6],o)),[t,n,r]}},hsl2tuple:function(e){function t(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+(t-e)*(2/3-n)*6:e}var n,r,i,o,a,s,u,l,c=new RegExp("^"+this.regex.hsla+"$").exec(e);if(c){if(r=parseInt(c[1]),0>r?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,i=parseFloat(c[2]),0>i||i>100)return;if(i/=100,o=parseFloat(c[3]),0>o||o>100)return;if(o/=100,a=c[4],void 0!==a&&(a=parseFloat(a),0>a||a>1))return;if(0===i)s=u=l=Math.round(255*o);else{var h=.5>o?o*(1+i):o+i-o*i,d=2*o-h;s=Math.round(255*t(d,h,r+1/3)),u=Math.round(255*t(d,h,r)),l=Math.round(255*t(d,h,r-1/3))}n=[s,u,l,a]}return n},rgb2tuple:function(e){var t,n=new RegExp("^"+this.regex.rgba+"$").exec(e);if(n){t=[];for(var r=[],i=1;3>=i;i++){var o=n[i];if("%"===o[o.length-1]&&(r[i]=!0),o=parseFloat(o),r[i]&&(o=o/100*255),0>o||o>255)return;t.push(Math.floor(o))}var a=r[1]||r[2]||r[3],s=r[1]&&r[2]&&r[3];if(a&&!s)return;var u=n[4];if(void 0!==u){if(u=parseFloat(u),0>u||u>1)return;t.push(u)}}return t},colorname2tuple:function(e){return this.colors[e.toLowerCase()]},color2tuple:function(e){return(r.array(e)?e:null)||this.colorname2tuple(e)||this.hex2tuple(e)||this.rgb2tuple(e)||this.hsl2tuple(e)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}},{"../is":77}],94:[function(e,t,n){"use strict";var r=e("../is"),i=e("../math"),o={falsify:function(){return!1},zeroify:function(){return 0},noop:function(){},error:function(e){console.error?(console.error.apply(console,arguments),console.trace&&console.trace()):(console.log.apply(console,arguments),console.trace&&console.trace())},clone:function(e){return this.extend({},e)},copy:function(e){return null==e?e:r.array(e)?e.slice():r.plainObject(e)?this.clone(e):e}};o.makeBoundingBox=i.makeBoundingBox.bind(i),o._staticEmptyObject={},o.staticEmptyObject=function(){return o._staticEmptyObject},o.extend=null!=Object.assign?Object.assign:function(e){for(var t=arguments,n=1;n<t.length;n++){var r=t[n];for(var i in r)e[i]=r[i]}return e},[e("./colors"),e("./maps"),{memoize:e("./memoize")},e("./regex"),e("./strings"),e("./timing")].forEach(function(e){o.extend(o,e)}),t.exports=o},{"../is":77,"../math":79,"./colors":93,"./maps":95,"./memoize":96,"./regex":97,"./strings":98,"./timing":99}],95:[function(e,t,n){"use strict";var r=e("../is");t.exports={mapEmpty:function(e){var t=!0;if(null!=e)for(var n in e){t=!1;break}return t},pushMap:function(e){var t=this.getMap(e);null==t?this.setMap(this.extend({},e,{value:[e.value]})):t.push(e.value)},setMap:function(e){for(var t,n=e.map,i=e.keys,o=i.length,a=0;o>a;a++){var t=i[a];r.plainObject(t)&&this.error("Tried to set map with object key"),a<i.length-1?(null==n[t]&&(n[t]={}),n=n[t]):n[t]=e.value}},getMap:function(e){for(var t=e.map,n=e.keys,i=n.length,o=0;i>o;o++){var a=n[o];if(r.plainObject(a)&&this.error("Tried to get map with object key"),t=t[a],null==t)return t}return t},deleteMap:function(e){for(var t=e.map,n=e.keys,i=n.length,o=e.keepChildren,a=0;i>a;a++){var s=n[a];r.plainObject(s)&&this.error("Tried to delete map with object key");var u=a===e.keys.length-1;if(u)if(o)for(var l in t)o[l]||(t[l]=void 0);else t[s]=void 0;else t=t[s]}}}},{"../is":77}],96:[function(e,t,n){"use strict";t.exports=function(e,t){var n=this,r={};return t||(t=function(){if(1===arguments.length)return arguments[0];for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.join("$")}),function(){var i,o=arguments,a=t.apply(n,o);return(i=r[a])||(i=r[a]=e.apply(n,o)),i}}},{}],97:[function(e,t,n){"use strict";var r="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",i="rgb[a]?\\(("+r+"[%]?)\\s*,\\s*("+r+"[%]?)\\s*,\\s*("+r+"[%]?)(?:\\s*,\\s*("+r+"))?\\)",o="rgb[a]?\\((?:"+r+"[%]?)\\s*,\\s*(?:"+r+"[%]?)\\s*,\\s*(?:"+r+"[%]?)(?:\\s*,\\s*(?:"+r+"))?\\)",a="hsl[a]?\\(("+r+")\\s*,\\s*("+r+"[%])\\s*,\\s*("+r+"[%])(?:\\s*,\\s*("+r+"))?\\)",s="hsl[a]?\\((?:"+r+")\\s*,\\s*(?:"+r+"[%])\\s*,\\s*(?:"+r+"[%])(?:\\s*,\\s*(?:"+r+"))?\\)",u="\\#[0-9a-fA-F]{3}",l="\\#[0-9a-fA-F]{6}";t.exports={regex:{number:r,rgba:i,rgbaNoBackRefs:o,hsla:a,hslaNoBackRefs:s,hex3:u,hex6:l}}},{}],98:[function(e,t,n){"use strict";var r=e("./memoize"),i=e("../is");t.exports={camel2dash:r(function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),dash2camel:r(function(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),capitalize:function(e){return i.emptyString(e)?e:e.charAt(0).toUpperCase()+e.substring(1)}}},{"../is":77,"./memoize":96}],99:[function(e,t,n){"use strict";var r=e("../window"),i=e("../is"),o=r?r.performance:null,a={},s=r?r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame:null;s=s||function(e){e&&setTimeout(function(){e(u())},1e3/60)},a.requestAnimationFrame=function(e){s(e)};var u=o&&o.now?function(){return o.now()}:function(){return Date.now()};a.performanceNow=u,a.throttle=function(e,t,n){var r=!0,o=!0;return n===!1?r=!1:i.plainObject(n)&&(r="leading"in n?n.leading:r,o="trailing"in n?n.trailing:o),n=n||{},n.leading=r,n.maxWait=t,n.trailing=o,a.debounce(e,t,n)},a.now=function(){return Date.now()},a.debounce=function(e,t,n){var r,o,a,s,u,l,c,h=this,d=0,f=!1,p=!0;if(i.fn(e)){if(t=Math.max(0,t)||0,n===!0){var v=!0;p=!1}else i.plainObject(n)&&(v=n.leading,f="maxWait"in n&&(Math.max(t,n.maxWait)||0),p="trailing"in n?n.trailing:p);var g=function(){var n=t-(h.now()-s);if(0>=n){o&&clearTimeout(o);var i=c;o=l=c=void 0,i&&(d=h.now(),a=e.apply(u,r),l||o||(r=u=null))}else l=setTimeout(g,n)},y=function(){l&&clearTimeout(l),o=l=c=void 0,(p||f!==t)&&(d=h.now(),a=e.apply(u,r),l||o||(r=u=null))};return function(){if(r=arguments,s=h.now(),u=this,c=p&&(l||!v),f===!1)var n=v&&!l;else{o||v||(d=s);var i=f-(s-d),m=0>=i;m?(o&&(o=clearTimeout(o)),d=s,a=e.apply(u,r)):o||(o=setTimeout(y,i))}return m&&l?l=clearTimeout(l):l||t===f||(l=setTimeout(g,t)),n&&(m=!0,a=e.apply(u,r)),!m||l||o||(r=u=null),a}}},t.exports=a},{"../is":77,"../window":100}],100:[function(e,t,n){t.exports="undefined"==typeof window?null:window},{}]},{},[76])(76)})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},"/node_modules/cytoscape/dist")},{}],6:[function(e,t,n){t.exports={graphlib:e("./lib/graphlib"),layout:e("./lib/layout"),debug:e("./lib/debug"),util:{time:e("./lib/util").time,notime:e("./lib/util").notime},version:e("./lib/version")}},{"./lib/debug":11,"./lib/graphlib":12,"./lib/layout":14,"./lib/util":34,"./lib/version":35}],7:[function(e,t,n){"use strict";function r(e){function t(e){return function(t){return e.edge(t).weight}}var n="greedy"===e.graph().acyclicer?s(e,t(e)):i(e);a.each(n,function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,a.uniqueId("rev"))})}function i(e){function t(o){a.has(i,o)||(i[o]=!0,r[o]=!0,a.each(e.outEdges(o),function(e){a.has(r,e.w)?n.push(e):t(e.w)}),delete r[o])}var n=[],r={},i={};return a.each(e.nodes(),t),n}function o(e){a.each(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var a=e("./lodash"),s=e("./greedy-fas");t.exports={run:r,undo:o}},{"./greedy-fas":13,"./lodash":15}],8:[function(e,t,n){function r(e){function t(n){var r=e.children(n),a=e.node(n);if(r.length&&o.each(r,t),o.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var s=a.minRank,u=a.maxRank+1;u>s;++s)i(e,"borderLeft","_bl",n,a,s),i(e,"borderRight","_br",n,a,s)}}o.each(e.children(),t)}function i(e,t,n,r,i,o){var s={width:0,height:0,rank:o,borderType:t},u=i[t][o-1],l=a.addDummyNode(e,"border",s,n);i[t][o]=l,e.setParent(l,r),u&&e.setEdge(u,l,{weight:1})}var o=e("./lodash"),a=e("./util");t.exports=r},{"./lodash":15,"./util":34}],9:[function(e,t,n){"use strict";function r(e){var t=e.graph().rankdir.toLowerCase();("lr"===t||"rl"===t)&&o(e)}function i(e){var t=e.graph().rankdir.toLowerCase();("bt"===t||"rl"===t)&&s(e),("lr"===t||"rl"===t)&&(l(e),o(e))}function o(e){h.each(e.nodes(),function(t){a(e.node(t))}),h.each(e.edges(),function(t){a(e.edge(t))})}function a(e){var t=e.width;e.width=e.height,e.height=t}function s(e){h.each(e.nodes(),function(t){u(e.node(t))}),h.each(e.edges(),function(t){var n=e.edge(t);h.each(n.points,u),h.has(n,"y")&&u(n)})}function u(e){e.y=-e.y}function l(e){h.each(e.nodes(),function(t){c(e.node(t))}),h.each(e.edges(),function(t){var n=e.edge(t);h.each(n.points,c),h.has(n,"x")&&c(n)})}function c(e){var t=e.x;e.x=e.y,e.y=t}var h=e("./lodash");t.exports={adjust:r,undo:i}},{"./lodash":15}],10:[function(e,t,n){function r(){var e={};e._next=e._prev=e,this._sentinel=e}function i(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function o(e,t){return"_next"!==e&&"_prev"!==e?t:void 0}t.exports=r,r.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;return t!==e?(i(t),t):void 0},r.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&i(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},r.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,o)),n=n._prev;return"["+e.join(", ")+"]"}},{}],11:[function(e,t,n){function r(e){var t=o.buildLayerMatrix(e),n=new a({compound:!0,multigraph:!0}).setGraph({});return i.each(e.nodes(),function(t){n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)}),i.each(e.edges(),function(e){n.setEdge(e.v,e.w,{},e.name)}),i.each(t,function(e,t){var r="layer"+t;n.setNode(r,{rank:"same"}),i.reduce(e,function(e,t){return n.setEdge(e,t,{style:"invis"}),t})}),n}var i=e("./lodash"),o=e("./util"),a=e("./graphlib").Graph;t.exports={debugOrdering:r}},{"./graphlib":12,"./lodash":15,"./util":34}],12:[function(e,t,n){var r;if("function"==typeof e)try{r=e("graphlib")}catch(i){}r||(r=window.graphlib),t.exports=r},{graphlib:37}],13:[function(e,t,n){function r(e,t){if(e.nodeCount()<=1)return[];var n=a(e,t||h),r=i(n.graph,n.buckets,n.zeroIdx);return u.flatten(u.map(r,function(t){return e.outEdges(t.v,t.w)}),!0)}function i(e,t,n){for(var r,i=[],a=t[t.length-1],s=t[0];e.nodeCount();){for(;r=s.dequeue();)o(e,t,n,r);for(;r=a.dequeue();)o(e,t,n,r);if(e.nodeCount())for(var u=t.length-2;u>0;--u)if(r=t[u].dequeue()){i=i.concat(o(e,t,n,r,!0));break}}return i}function o(e,t,n,r,i){var o=i?[]:void 0;return u.each(e.inEdges(r.v),function(r){var a=e.edge(r),u=e.node(r.v);i&&o.push({v:r.v,w:r.w}),u.out-=a,s(t,n,u)}),u.each(e.outEdges(r.v),function(r){var i=e.edge(r),o=r.w,a=e.node(o);a["in"]-=i,s(t,n,a)}),e.removeNode(r.v),o}function a(e,t){var n=new l,r=0,i=0;u.each(e.nodes(),function(e){n.setNode(e,{v:e,"in":0,out:0})}),u.each(e.edges(),function(e){var o=n.edge(e.v,e.w)||0,a=t(e),s=o+a;n.setEdge(e.v,e.w,s),i=Math.max(i,n.node(e.v).out+=a),r=Math.max(r,n.node(e.w)["in"]+=a)});var o=u.range(i+r+3).map(function(){return new c}),a=r+1;return u.each(n.nodes(),function(e){s(o,a,n.node(e))}),{graph:n,buckets:o,zeroIdx:a}}function s(e,t,n){n.out?n["in"]?e[n.out-n["in"]+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var u=e("./lodash"),l=e("./graphlib").Graph,c=e("./data/list");t.exports=r;var h=u.constant(1)},{"./data/list":10,"./graphlib":12,
"./lodash":15}],14:[function(e,t,n){"use strict";function r(e,t){var n=t&&t.debugTiming?I.time:I.notime;n("layout",function(){var t=n("  buildLayoutGraph",function(){return a(e)});n("  runLayout",function(){i(t,n)}),n("  updateInputGraph",function(){o(e,t)})})}function i(e,t){t("    makeSpaceForEdgeLabels",function(){s(e)}),t("    removeSelfEdges",function(){g(e)}),t("    acyclic",function(){_.run(e)}),t("    nestingGraph.run",function(){D.run(e)}),t("    rank",function(){k(I.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){u(e)}),t("    removeEmptyRanks",function(){T(e)}),t("    nestingGraph.cleanup",function(){D.cleanup(e)}),t("    normalizeRanks",function(){S(e)}),t("    assignRankMinMax",function(){l(e)}),t("    removeEdgeLabelProxies",function(){c(e)}),t("    normalize.run",function(){E.run(e)}),t("    parentDummyChains",function(){N(e)}),t("    addBorderSegments",function(){P(e)}),t("    order",function(){M(e)}),t("    insertSelfEdges",function(){y(e)}),t("    adjustCoordinateSystem",function(){C.adjust(e)}),t("    position",function(){A(e)}),t("    positionSelfEdges",function(){m(e)}),t("    removeBorderNodes",function(){v(e)}),t("    normalize.undo",function(){E.undo(e)}),t("    fixupEdgeLabelCoords",function(){f(e)}),t("    undoCoordinateSystem",function(){C.undo(e)}),t("    translateGraph",function(){h(e)}),t("    assignNodeIntersects",function(){d(e)}),t("    reversePoints",function(){p(e)}),t("    acyclic.undo",function(){_.undo(e)})}function o(e,t){w.each(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),w.each(e.edges(),function(n){var r=e.edge(n),i=t.edge(n);r.points=i.points,w.has(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}function a(e){var t=new L({multigraph:!0,compound:!0}),n=x(e.graph());return t.setGraph(w.merge({},j,b(n,O),w.pick(n,B))),w.each(e.nodes(),function(n){var r=x(e.node(n));t.setNode(n,w.defaults(b(r,R),z)),t.setParent(n,e.parent(n))}),w.each(e.edges(),function(n){var r=x(e.edge(n));t.setEdge(n,w.merge({},V,b(r,F),w.pick(r,q)))}),t}function s(e){var t=e.graph();t.ranksep/=2,w.each(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function u(e){w.each(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i=e.node(t.w),o={rank:(i.rank-r.rank)/2+r.rank,e:t};I.addDummyNode(e,"edge-proxy",o,"_ep")}})}function l(e){var t=0;w.each(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=w.max(t,r.maxRank))}),e.graph().maxRank=t}function c(e){w.each(e.nodes(),function(t){var n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function h(e){function t(e){var t=e.x,a=e.y,s=e.width,u=e.height;n=Math.min(n,t-s/2),r=Math.max(r,t+s/2),i=Math.min(i,a-u/2),o=Math.max(o,a+u/2)}var n=Number.POSITIVE_INFINITY,r=0,i=Number.POSITIVE_INFINITY,o=0,a=e.graph(),s=a.marginx||0,u=a.marginy||0;w.each(e.nodes(),function(n){t(e.node(n))}),w.each(e.edges(),function(n){var r=e.edge(n);w.has(r,"x")&&t(r)}),n-=s,i-=u,w.each(e.nodes(),function(t){var r=e.node(t);r.x-=n,r.y-=i}),w.each(e.edges(),function(t){var r=e.edge(t);w.each(r.points,function(e){e.x-=n,e.y-=i}),w.has(r,"x")&&(r.x-=n),w.has(r,"y")&&(r.y-=i)}),a.width=r-n+s,a.height=o-i+u}function d(e){w.each(e.edges(),function(t){var n,r,i=e.edge(t),o=e.node(t.v),a=e.node(t.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(I.intersectRect(o,n)),i.points.push(I.intersectRect(a,r))})}function f(e){w.each(e.edges(),function(t){var n=e.edge(t);if(w.has(n,"x"))switch(("l"===n.labelpos||"r"===n.labelpos)&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}function p(e){w.each(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function v(e){w.each(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),o=e.node(w.last(n.borderLeft)),a=e.node(w.last(n.borderRight));n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),w.each(e.nodes(),function(t){"border"===e.node(t).dummy&&e.removeNode(t)})}function g(e){w.each(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function y(e){var t=I.buildLayerMatrix(e);w.each(t,function(t){var n=0;w.each(t,function(t,r){var i=e.node(t);i.order=r+n,w.each(i.selfEdges,function(t){I.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:i.rank,order:r+ ++n,e:t.e,label:t.label},"_se")}),delete i.selfEdges})})}function m(e){w.each(e.nodes(),function(t){var n=e.node(t);if("selfedge"===n.dummy){var r=e.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}function b(e,t){return w.mapValues(w.pick(e,t),Number)}function x(e){var t={};return w.each(e,function(e,n){t[n.toLowerCase()]=e}),t}var w=e("./lodash"),_=e("./acyclic"),E=e("./normalize"),k=e("./rank"),S=e("./util").normalizeRanks,N=e("./parent-dummy-chains"),T=e("./util").removeEmptyRanks,D=e("./nesting-graph"),P=e("./add-border-segments"),C=e("./coordinate-system"),M=e("./order"),A=e("./position"),I=e("./util"),L=e("./graphlib").Graph;t.exports=r;var O=["nodesep","edgesep","ranksep","marginx","marginy"],j={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},B=["acyclicer","ranker","rankdir","align"],R=["width","height"],z={width:0,height:0},F=["minlen","weight","width","height","labeloffset"],V={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},q=["labelpos"]},{"./acyclic":7,"./add-border-segments":8,"./coordinate-system":9,"./graphlib":12,"./lodash":15,"./nesting-graph":16,"./normalize":17,"./order":22,"./parent-dummy-chains":27,"./position":29,"./rank":31,"./util":34}],15:[function(e,t,n){var r;if("function"==typeof e)try{r=e("lodash")}catch(i){}r||(r=window._),t.exports=r},{lodash:57}],16:[function(e,t,n){function r(e){var t=l.addDummyNode(e,"root",{},"_root"),n=o(e),r=u.max(n)-1,s=2*r+1;e.graph().nestingRoot=t,u.each(e.edges(),function(t){e.edge(t).minlen*=s});var c=a(e)+1;u.each(e.children(),function(o){i(e,t,s,c,r,n,o)}),e.graph().nodeRankFactor=s}function i(e,t,n,r,o,a,s){var c=e.children(s);if(!c.length)return void(s!==t&&e.setEdge(t,s,{weight:0,minlen:n}));var h=l.addBorderNode(e,"_bt"),d=l.addBorderNode(e,"_bb"),f=e.node(s);e.setParent(h,s),f.borderTop=h,e.setParent(d,s),f.borderBottom=d,u.each(c,function(u){i(e,t,n,r,o,a,u);var l=e.node(u),c=l.borderTop?l.borderTop:u,f=l.borderBottom?l.borderBottom:u,p=l.borderTop?r:2*r,v=c!==f?1:o-a[s]+1;e.setEdge(h,c,{weight:p,minlen:v,nestingEdge:!0}),e.setEdge(f,d,{weight:p,minlen:v,nestingEdge:!0})}),e.parent(s)||e.setEdge(t,h,{weight:0,minlen:o+a[s]})}function o(e){function t(r,i){var o=e.children(r);o&&o.length&&u.each(o,function(e){t(e,i+1)}),n[r]=i}var n={};return u.each(e.children(),function(e){t(e,1)}),n}function a(e){return u.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function s(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,u.each(e.edges(),function(t){var n=e.edge(t);n.nestingEdge&&e.removeEdge(t)})}var u=e("./lodash"),l=e("./util");t.exports={run:r,cleanup:s}},{"./lodash":15,"./util":34}],17:[function(e,t,n){"use strict";function r(e){e.graph().dummyChains=[],a.each(e.edges(),function(t){i(e,t)})}function i(e,t){var n=t.v,r=e.node(n).rank,i=t.w,o=e.node(i).rank,a=t.name,u=e.edge(t),l=u.labelRank;if(o!==r+1){e.removeEdge(t);var c,h,d;for(d=0,++r;o>r;++d,++r)u.points=[],h={width:0,height:0,edgeLabel:u,edgeObj:t,rank:r},c=s.addDummyNode(e,"edge",h,"_d"),r===l&&(h.width=u.width,h.height=u.height,h.dummy="edge-label",h.labelpos=u.labelpos),e.setEdge(n,c,{weight:u.weight},a),0===d&&e.graph().dummyChains.push(c),n=c;e.setEdge(n,i,{weight:u.weight},a)}}function o(e){a.each(e.graph().dummyChains,function(t){var n,r=e.node(t),i=r.edgeLabel;for(e.setEdge(r.edgeObj,i);r.dummy;)n=e.successors(t)[0],e.removeNode(t),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),t=n,r=e.node(t)})}var a=e("./lodash"),s=e("./util");t.exports={run:r,undo:o}},{"./lodash":15,"./util":34}],18:[function(e,t,n){function r(e,t,n){var r,o={};i.each(n,function(n){for(var i,a,s=e.parent(n);s;){if(i=e.parent(s),i?(a=o[i],o[i]=s):(a=r,r=s),a&&a!==s)return void t.setEdge(a,s);s=i}})}var i=e("../lodash");t.exports=r},{"../lodash":15}],19:[function(e,t,n){function r(e,t){return i.map(t,function(t){var n=e.inEdges(t);if(n.length){var r=i.reduce(n,function(t,n){var r=e.edge(n),i=e.node(n.v);return{sum:t.sum+r.weight*i.order,weight:t.weight+r.weight}},{sum:0,weight:0});return{v:t,barycenter:r.sum/r.weight,weight:r.weight}}return{v:t}})}var i=e("../lodash");t.exports=r},{"../lodash":15}],20:[function(e,t,n){function r(e,t,n){var r=i(e),s=new a({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(t){return e.node(t)});return o.each(e.nodes(),function(i){var a=e.node(i),u=e.parent(i);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(s.setNode(i),s.setParent(i,u||r),o.each(e[n](i),function(t){var n=t.v===i?t.w:t.v,r=s.edge(n,i),a=o.isUndefined(r)?0:r.weight;s.setEdge(n,i,{weight:e.edge(t).weight+a})}),o.has(a,"minRank")&&s.setNode(i,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),s}function i(e){for(var t;e.hasNode(t=o.uniqueId("_root")););return t}var o=e("../lodash"),a=e("../graphlib").Graph;t.exports=r},{"../graphlib":12,"../lodash":15}],21:[function(e,t,n){"use strict";function r(e,t){for(var n=0,r=1;r<t.length;++r)n+=i(e,t[r-1],t[r]);return n}function i(e,t,n){for(var r=o.zipObject(n,o.map(n,function(e,t){return t})),i=o.flatten(o.map(t,function(t){return o.chain(e.outEdges(t)).map(function(t){return{pos:r[t.w],weight:e.edge(t).weight}}).sortBy("pos").value()}),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var u=o.map(new Array(s),function(){return 0}),l=0;return o.each(i.forEach(function(e){var t=e.pos+a;u[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=u[t+1]),t=t-1>>1,u[t]+=e.weight;l+=e.weight*n})),l}var o=e("../lodash");t.exports=r},{"../lodash":15}],22:[function(e,t,n){"use strict";function r(e){var t=p.maxRank(e),n=i(e,s.range(1,t+1),"inEdges"),r=i(e,s.range(t-1,-1,-1),"outEdges"),c=u(e);a(e,c);for(var h,d=Number.POSITIVE_INFINITY,f=0,v=0;4>v;++f,++v){o(f%2?n:r,f%4>=2),c=p.buildLayerMatrix(e);var g=l(e,c);d>g&&(v=0,h=s.cloneDeep(c),d=g)}a(e,h)}function i(e,t,n){return s.map(t,function(t){return h(e,t,n)})}function o(e,t){var n=new f;s.each(e,function(e){var r=e.graph().root,i=c(e,r,n,t);s.each(i.vs,function(t,n){e.node(t).order=n}),d(e,n,i.vs)})}function a(e,t){s.each(t,function(t){s.each(t,function(t,n){e.node(t).order=n})})}var s=e("../lodash"),u=e("./init-order"),l=e("./cross-count"),c=e("./sort-subgraph"),h=e("./build-layer-graph"),d=e("./add-subgraph-constraints"),f=e("../graphlib").Graph,p=e("../util");t.exports=r},{"../graphlib":12,"../lodash":15,"../util":34,"./add-subgraph-constraints":18,"./build-layer-graph":20,"./cross-count":21,"./init-order":23,"./sort-subgraph":25}],23:[function(e,t,n){"use strict";function r(e){function t(r){if(!i.has(n,r)){n[r]=!0;var o=e.node(r);a[o.rank].push(r),i.each(e.successors(r),t)}}var n={},r=i.filter(e.nodes(),function(t){return!e.children(t).length}),o=i.max(i.map(r,function(t){return e.node(t).rank})),a=i.map(i.range(o+1),function(){return[]}),s=i.sortBy(r,function(t){return e.node(t).rank});return i.each(s,t),a}var i=e("../lodash");t.exports=r},{"../lodash":15}],24:[function(e,t,n){"use strict";function r(e,t){var n={};a.each(e,function(e,t){var r=n[e.v]={indegree:0,"in":[],out:[],vs:[e.v],i:t};a.isUndefined(e.barycenter)||(r.barycenter=e.barycenter,r.weight=e.weight)}),a.each(t.edges(),function(e){var t=n[e.v],r=n[e.w];a.isUndefined(t)||a.isUndefined(r)||(r.indegree++,t.out.push(n[e.w]))});var r=a.filter(n,function(e){return!e.indegree});return i(r)}function i(e){function t(e){return function(t){t.merged||(a.isUndefined(t.barycenter)||a.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&o(e,t)}}function n(t){return function(n){n["in"].push(t),0===--n.indegree&&e.push(n)}}for(var r=[];e.length;){var i=e.pop();r.push(i),a.each(i["in"].reverse(),t(i)),a.each(i.out,n(i))}return a.chain(r).filter(function(e){return!e.merged}).map(function(e){return a.pick(e,["vs","i","barycenter","weight"])}).value()}function o(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var a=e("../lodash");t.exports=r},{"../lodash":15}],25:[function(e,t,n){function r(e,t,n,c){var h=e.children(t),d=e.node(t),f=d?d.borderLeft:void 0,p=d?d.borderRight:void 0,v={};f&&(h=a.filter(h,function(e){return e!==f&&e!==p}));var g=s(e,h);a.each(g,function(t){if(e.children(t.v).length){var i=r(e,t.v,n,c);v[t.v]=i,a.has(i,"barycenter")&&o(t,i)}});var y=u(g,n);i(y,v);var m=l(y,c);if(f&&(m.vs=a.flatten([f,m.vs,p],!0),e.predecessors(f).length)){var b=e.node(e.predecessors(f)[0]),x=e.node(e.predecessors(p)[0]);a.has(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+b.order+x.order)/(m.weight+2),m.weight+=2}return m}function i(e,t){a.each(e,function(e){e.vs=a.flatten(e.vs.map(function(e){return t[e]?t[e].vs:e}),!0)})}function o(e,t){a.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var a=e("../lodash"),s=e("./barycenter"),u=e("./resolve-conflicts"),l=e("./sort");t.exports=r},{"../lodash":15,"./barycenter":19,"./resolve-conflicts":24,"./sort":26}],26:[function(e,t,n){function r(e,t){var n=s.partition(e,function(e){return a.has(e,"barycenter")}),r=n.lhs,u=a.sortBy(n.rhs,function(e){return-e.i}),l=[],c=0,h=0,d=0;r.sort(o(!!t)),d=i(l,u,d),a.each(r,function(e){d+=e.vs.length,l.push(e.vs),c+=e.barycenter*e.weight,h+=e.weight,d=i(l,u,d)});var f={vs:a.flatten(l,!0)};return h&&(f.barycenter=c/h,f.weight=h),f}function i(e,t,n){for(var r;t.length&&(r=a.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function o(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var a=e("../lodash"),s=e("../util");t.exports=r},{"../lodash":15,"../util":34}],27:[function(e,t,n){function r(e){var t=o(e);a.each(e.graph().dummyChains,function(n){for(var r=e.node(n),o=r.edgeObj,a=i(e,t,o.v,o.w),s=a.path,u=a.lca,l=0,c=s[l],h=!0;n!==o.w;){if(r=e.node(n),h){for(;(c=s[l])!==u&&e.node(c).maxRank<r.rank;)l++;c===u&&(h=!1)}if(!h){for(;l<s.length-1&&e.node(c=s[l+1]).minRank<=r.rank;)l++;c=s[l]}e.setParent(n,c),n=e.successors(n)[0]}})}function i(e,t,n,r){var i,o,a=[],s=[],u=Math.min(t[n].low,t[r].low),l=Math.max(t[n].lim,t[r].lim);i=n;do i=e.parent(i),a.push(i);while(i&&(t[i].low>u||l>t[i].lim));for(o=i,i=r;(i=e.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}function o(e){function t(i){var o=r;a.each(e.children(i),t),n[i]={low:o,lim:r++}}var n={},r=0;return a.each(e.children(),t),n}var a=e("./lodash");t.exports=r},{"./lodash":15}],28:[function(e,t,n){"use strict";function r(e,t){function n(t,n){var i=0,s=0,u=t.length,l=y.last(n);return y.each(n,function(t,c){var h=o(e,t),d=h?e.node(h).order:u;(h||t===l)&&(y.each(n.slice(s,c+1),function(t){y.each(e.predecessors(t),function(n){var o=e.node(n),s=o.order;!(i>s||s>d)||o.dummy&&e.node(t).dummy||a(r,n,t)})}),s=c+1,i=d)}),n}var r={};return y.reduce(t,n),r}function i(e,t){function n(t,n,r,o,s){var u;y.each(y.range(n,r),function(n){u=t[n],e.node(u).dummy&&y.each(e.predecessors(u),function(t){var n=e.node(t);n.dummy&&(n.order<o||n.order>s)&&a(i,t,u)})})}function r(t,r){var i,o=-1,a=0;return y.each(r,function(s,u){if("border"===e.node(s).dummy){var l=e.predecessors(s);l.length&&(i=e.node(l[0]).order,n(r,a,u,o,i),a=u,o=i)}n(r,a,r.length,i,t.length)}),r}var i={};return y.reduce(t,r),i}function o(e,t){return e.node(t).dummy?y.find(e.predecessors(t),function(t){return e.node(t).dummy}):void 0}function a(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function s(e,t,n){if(t>n){var r=t;t=n,n=r}return y.has(e[t],n)}function u(e,t,n,r){var i={},o={},a={};return y.each(t,function(e){y.each(e,function(e,t){i[e]=e,o[e]=e,a[e]=t})}),y.each(t,function(e){var t=-1;y.each(e,function(e){var u=r(e);if(u.length){u=y.sortBy(u,function(e){return a[e]});for(var l=(u.length-1)/2,c=Math.floor(l),h=Math.ceil(l);h>=c;++c){var d=u[c];o[e]===e&&t<a[d]&&!s(n,e,d)&&(o[d]=e,o[e]=i[e]=i[d],t=a[d])}}})}),{root:i,align:o}}function l(e,t,n,r,i){function o(e){y.has(l,e)||(l[e]=!0,s[e]=y.reduce(u.inEdges(e),function(e,t){return o(t.v),Math.max(e,s[t.v]+u.edge(t))},0))}function a(t){if(2!==l[t]){l[t]++;var n=e.node(t),r=y.reduce(u.outEdges(t),function(e,t){return a(t.w),Math.min(e,s[t.w]-u.edge(t))},Number.POSITIVE_INFINITY);r!==Number.POSITIVE_INFINITY&&n.borderType!==h&&(s[t]=Math.max(s[t],r))}}var s={},u=c(e,t,n,i),l={};y.each(u.nodes(),o);var h=i?"borderLeft":"borderRight";return y.each(u.nodes(),a),y.each(r,function(e){s[e]=s[n[e]]}),s}function c(e,t,n,r){var i=new m,o=e.graph(),a=v(o.nodesep,o.edgesep,r);return y.each(t,function(t){var r;y.each(t,function(t){var o=n[t];if(i.setNode(o),r){var s=n[r],u=i.edge(s,o);i.setEdge(s,o,Math.max(a(e,t,r),u||0))}r=t})}),i}function h(e,t){return y.min(t,function(t){var n=y.min(t,function(t,n){return t-g(e,n)/2}),r=y.max(t,function(t,n){return t+g(e,n)/2});return r-n})}function d(e,t){var n=y.min(t),r=y.max(t);y.each(["u","d"],function(i){y.each(["l","r"],function(o){var a,s=i+o,u=e[s];u!==t&&(a="l"===o?n-y.min(u):r-y.max(u),a&&(e[s]=y.mapValues(u,function(e){return e+a})))})})}function f(e,t){return y.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var i=y.sortBy(y.pluck(e,r));return(i[1]+i[2])/2})}function p(e){var t,n=b.buildLayerMatrix(e),o=y.merge(r(e,n),i(e,n)),a={};y.each(["u","d"],function(r){t="u"===r?n:y.values(n).reverse(),y.each(["l","r"],function(n){"r"===n&&(t=y.map(t,function(e){return y.values(e).reverse()}));var i=y.bind("u"===r?e.predecessors:e.successors,e),s=u(e,t,o,i),c=l(e,t,s.root,s.align,"r"===n);"r"===n&&(c=y.mapValues(c,function(e){return-e})),a[r+n]=c})});var s=h(e,a);return d(a,s),f(a,e.graph().align)}function v(e,t,n){return function(r,i,o){var a,s=r.node(i),u=r.node(o),l=0;if(l+=s.width/2,y.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(l+=n?a:-a),a=0,l+=(s.dummy?t:e)/2,l+=(u.dummy?t:e)/2,l+=u.width/2,y.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":a=u.width/2;break;case"r":a=-u.width/2}return a&&(l+=n?a:-a),a=0,l}}function g(e,t){return e.node(t).width}var y=e("../lodash"),m=e("../graphlib").Graph,b=e("../util");t.exports={positionX:p,findType1Conflicts:r,findType2Conflicts:i,addConflict:a,hasConflict:s,verticalAlignment:u,horizontalCompaction:l,alignCoordinates:d,findSmallestWidthAlignment:h,balance:f}},{"../graphlib":12,"../lodash":15,"../util":34}],29:[function(e,t,n){"use strict";function r(e){e=a.asNonCompoundGraph(e),i(e),o.each(s(e),function(t,n){e.node(n).x=t})}function i(e){var t=a.buildLayerMatrix(e),n=e.graph().ranksep,r=0;o.each(t,function(t){var i=o.max(o.map(t,function(t){return e.node(t).height}));o.each(t,function(t){e.node(t).y=r+i/2}),r+=i+n})}var o=e("../lodash"),a=e("../util"),s=e("./bk").positionX;t.exports=r},{"../lodash":15,"../util":34,"./bk":28}],30:[function(e,t,n){"use strict";function r(e){var t=new u({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var s,c;i(t,e)<r;)s=o(t,e),c=t.hasNode(s.v)?l(e,s):-l(e,s),a(t,e,c);return t}function i(e,t){function n(r){s.each(t.nodeEdges(r),function(i){var o=i.v,a=r===o?i.w:o;e.hasNode(a)||l(t,i)||(e.setNode(a,{}),e.setEdge(r,a,{}),n(a))})}return s.each(e.nodes(),n),e.nodeCount()}function o(e,t){return s.min(t.edges(),function(n){return e.hasNode(n.v)!==e.hasNode(n.w)?l(t,n):void 0})}function a(e,t,n){s.each(e.nodes(),function(e){t.node(e).rank+=n})}var s=e("../lodash"),u=e("../graphlib").Graph,l=e("./util").slack;t.exports=r},{"../graphlib":12,"../lodash":15,"./util":33}],31:[function(e,t,n){"use strict";function r(e){switch(e.graph().ranker){case"network-simplex":o(e);break;case"tight-tree":i(e);break;case"longest-path":c(e);break;default:o(e)}}function i(e){s(e),u(e)}function o(e){l(e)}var a=e("./util"),s=a.longestPath,u=e("./feasible-tree"),l=e("./network-simplex");t.exports=r;var c=s},{"./feasible-tree":30,"./network-simplex":32,"./util":33}],32:[function(e,t,n){"use strict";function r(e){e=w(e),m(e);var t=g(e);s(t),i(t,e);for(var n,r;n=l(t);)r=c(t,e,n),h(t,e,n,r)}function i(e,t){var n=x(e,e.nodes());n=n.slice(0,n.length-1),v.each(n,function(n){o(e,t,n)})}function o(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=a(e,t,n)}function a(e,t,n){var r=e.node(n),i=r.parent,o=!0,a=t.edge(n,i),s=0;return a||(o=!1,a=t.edge(i,n)),s=a.weight,v.each(t.nodeEdges(n),function(r){var a=r.v===n,u=a?r.w:r.v;if(u!==i){var l=a===o,c=t.edge(r).weight;if(s+=l?c:-c,f(e,n,u)){var h=e.edge(n,u).cutvalue;s+=l?-h:h}}}),s}function s(e,t){arguments.length<2&&(t=e.nodes()[0]),u(e,{},1,t)}function u(e,t,n,r,i){var o=n,a=e.node(r);return t[r]=!0,v.each(e.neighbors(r),function(i){v.has(t,i)||(n=u(e,t,n,i,r))}),a.low=o,a.lim=n++,i?a.parent=i:delete a.parent,n}function l(e){return v.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function c(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var o=e.node(r),a=e.node(i),s=o,u=!1;o.lim>a.lim&&(s=a,u=!0);var l=v.filter(t.edges(),function(t){return u===p(e,e.node(t.v),s)&&u!==p(e,e.node(t.w),s)});return v.min(l,function(e){return y(t,e)})}function h(e,t,n,r){var o=n.v,a=n.w;e.removeEdge(o,a),e.setEdge(r.v,r.w,{}),s(e),i(e,t),d(e,t)}function d(e,t){var n=v.find(e.nodes(),function(e){return!t.node(e).parent}),r=b(e,n);r=r.slice(1),v.each(r,function(n){var r=e.node(n).parent,i=t.edge(n,r),o=!1;i||(i=t.edge(r,n),o=!0),t.node(n).rank=t.node(r).rank+(o?i.minlen:-i.minlen)})}function f(e,t,n){return e.hasEdge(t,n)}function p(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var v=e("../lodash"),g=e("./feasible-tree"),y=e("./util").slack,m=e("./util").longestPath,b=e("../graphlib").alg.preorder,x=e("../graphlib").alg.postorder,w=e("../util").simplify;t.exports=r,r.initLowLimValues=s,r.initCutValues=i,r.calcCutValue=a,r.leaveEdge=l,r.enterEdge=c,r.exchangeEdges=h},{"../graphlib":12,"../lodash":15,"../util":34,"./feasible-tree":30,"./util":33}],33:[function(e,t,n){"use strict";function r(e){function t(r){var i=e.node(r);if(o.has(n,r))return i.rank;n[r]=!0;var a=o.min(o.map(e.outEdges(r),function(n){return t(n.w)-e.edge(n).minlen}));return a===Number.POSITIVE_INFINITY&&(a=0),i.rank=a}var n={};o.each(e.sources(),t)}function i(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var o=e("../lodash");t.exports={longestPath:r,slack:i}},{"../lodash":15}],34:[function(e,t,n){"use strict";function r(e,t,n,r){var i;do i=y.uniqueId(r);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function i(e){var t=(new m).setGraph(e.graph());return y.each(e.nodes(),function(n){t.setNode(n,e.node(n))}),y.each(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function o(e){var t=new m({multigraph:e.isMultigraph()}).setGraph(e.graph());return y.each(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),y.each(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function a(e){var t=y.map(e.nodes(),function(t){var n={};return y.each(e.outEdges(t),function(t){n[t.w]=(n[t.w]||0)+e.edge(t).weight}),n});return y.zipObject(e.nodes(),t)}function s(e){var t=y.map(e.nodes(),function(t){var n={};return y.each(e.inEdges(t),function(t){n[t.v]=(n[t.v]||0)+e.edge(t).weight}),n});return y.zipObject(e.nodes(),t)}function u(e,t){var n=e.x,r=e.y,i=t.x-n,o=t.y-r,a=e.width/2,s=e.height/2;if(!i&&!o)throw new Error("Not possible to find intersection inside of the rectangle");var u,l;return Math.abs(o)*a>Math.abs(i)*s?(0>o&&(s=-s),u=s*i/o,l=s):(0>i&&(a=-a),u=a,l=a*o/i),{x:n+u,y:r+l}}function l(e){var t=y.map(y.range(f(e)+1),function(){return[]});return y.each(e.nodes(),function(n){var r=e.node(n),i=r.rank;y.isUndefined(i)||(t[i][r.order]=n)}),t}function c(e){var t=y.min(y.map(e.nodes(),function(t){return e.node(t).rank}));y.each(e.nodes(),function(n){var r=e.node(n);y.has(r,"rank")&&(r.rank-=t)})}function h(e){var t=y.min(y.map(e.nodes(),function(t){return e.node(t).rank})),n=[];y.each(e.nodes(),function(r){var i=e.node(r).rank-t;n[i]||(n[i]=[]),n[i].push(r)});var r=0,i=e.graph().nodeRankFactor;y.each(n,function(t,n){y.isUndefined(t)&&n%i!==0?--r:r&&y.each(t,function(t){e.node(t).rank+=r})})}function d(e,t,n,i){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=i),r(e,"border",o,t)}function f(e){return y.max(y.map(e.nodes(),function(t){var n=e.node(t).rank;return y.isUndefined(n)?void 0:n}))}function p(e,t){var n={lhs:[],rhs:[]};return y.each(e,function(e){t(e)?n.lhs.push(e):n.rhs.push(e)}),n}function v(e,t){var n=y.now();try{return t()}finally{console.log(e+" time: "+(y.now()-n)+"ms")}}function g(e,t){return t()}var y=e("./lodash"),m=e("./graphlib").Graph;t.exports={addDummyNode:r,simplify:i,asNonCompoundGraph:o,successorWeights:a,predecessorWeights:s,intersectRect:u,buildLayerMatrix:l,normalizeRanks:c,removeEmptyRanks:h,addBorderNode:d,maxRank:f,partition:p,time:v,notime:g}},{"./graphlib":12,"./lodash":15}],35:[function(e,t,n){t.exports="0.7.4"},{}],36:[function(e,t,n){!function(e,n){"undefined"!=typeof t?t.exports=n():"function"==typeof define&&"object"==typeof define.amd?define(n):this[e]=n()}("domready",function(){var e,t=[],n=document,r=n.documentElement.doScroll,i="DOMContentLoaded",o=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return o||n.addEventListener(i,e=function(){for(n.removeEventListener(i,e),o=1;e=t.shift();)e()}),function(e){o?setTimeout(e,0):t.push(e)}})},{}],37:[function(e,t,n){var r=e("./lib");t.exports={Graph:r.Graph,json:e("./lib/json"),alg:e("./lib/alg"),version:r.version}},{"./lib":53,"./lib/alg":44,"./lib/json":54}],38:[function(e,t,n){function r(e){function t(o){i.has(r,o)||(r[o]=!0,n.push(o),i.each(e.successors(o),t),i.each(e.predecessors(o),t))}var n,r={},o=[];return i.each(e.nodes(),function(e){n=[],t(e),n.length&&o.push(n)}),o}var i=e("../lodash");t.exports=r},{"../lodash":55}],39:[function(e,t,n){function r(e,t,n){o.isArray(t)||(t=[t]);var r=[],a={};return o.each(t,function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);i(e,t,"post"===n,a,r)}),r}function i(e,t,n,r,a){o.has(r,t)||(r[t]=!0,n||a.push(t),o.each(e.neighbors(t),function(t){i(e,t,n,r,a)}),n&&a.push(t))}var o=e("../lodash");t.exports=r},{"../lodash":55}],40:[function(e,t,n){function r(e,t,n){return o.transform(e.nodes(),function(r,o){r[o]=i(e,o,t,n)},{})}var i=e("./dijkstra"),o=e("../lodash");t.exports=r},{"../lodash":55,"./dijkstra":41}],41:[function(e,t,n){function r(e,t,n,r){return i(e,String(t),n||s,r||function(t){return e.outEdges(t)})}function i(e,t,n,r){var i,o,s={},u=new a,l=function(e){var t=e.v!==i?e.v:e.w,r=s[t],a=n(e),l=o.distance+a;if(0>a)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+a);l<r.distance&&(r.distance=l,r.predecessor=i,u.decrease(t,l))};for(e.nodes().forEach(function(e){var n=e===t?0:Number.POSITIVE_INFINITY;s[e]={distance:n},u.add(e,n)});u.size()>0&&(i=u.removeMin(),o=s[i],o.distance!==Number.POSITIVE_INFINITY);)r(i).forEach(l);return s}var o=e("../lodash"),a=e("../data/priority-queue");t.exports=r;var s=o.constant(1)},{"../data/priority-queue":51,"../lodash":55}],42:[function(e,t,n){function r(e){return i.filter(o(e),function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])})}var i=e("../lodash"),o=e("./tarjan");t.exports=r},{"../lodash":55,"./tarjan":49}],43:[function(e,t,n){function r(e,t,n){return i(e,t||a,n||function(t){return e.outEdges(t)})}function i(e,t,n){var r={},i=e.nodes();return i.forEach(function(e){r[e]={},r[e][e]={distance:0},i.forEach(function(t){e!==t&&(r[e][t]={distance:Number.POSITIVE_INFINITY})}),n(e).forEach(function(n){var i=n.v===e?n.w:n.v,o=t(n);r[e][i]={distance:o,predecessor:e}})}),i.forEach(function(e){var t=r[e];i.forEach(function(n){var o=r[n];i.forEach(function(n){var r=o[e],i=t[n],a=o[n],s=r.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)})})}),r}var o=e("../lodash");t.exports=r;var a=o.constant(1)},{"../lodash":55}],44:[function(e,t,n){t.exports={components:e("./components"),dijkstra:e("./dijkstra"),dijkstraAll:e("./dijkstra-all"),findCycles:e("./find-cycles"),floydWarshall:e("./floyd-warshall"),isAcyclic:e("./is-acyclic"),postorder:e("./postorder"),preorder:e("./preorder"),prim:e("./prim"),tarjan:e("./tarjan"),topsort:e("./topsort")}},{"./components":38,"./dijkstra":41,"./dijkstra-all":40,"./find-cycles":42,"./floyd-warshall":43,"./is-acyclic":45,"./postorder":46,"./preorder":47,"./prim":48,"./tarjan":49,"./topsort":50}],45:[function(e,t,n){function r(e){try{i(e)}catch(t){if(t instanceof i.CycleException)return!1;throw t}return!0}var i=e("./topsort");t.exports=r},{"./topsort":50}],46:[function(e,t,n){function r(e,t){return i(e,t,"post")}var i=e("./dfs");t.exports=r},{"./dfs":39}],47:[function(e,t,n){function r(e,t){return i(e,t,"pre")}var i=e("./dfs");t.exports=r},{"./dfs":39}],48:[function(e,t,n){function r(e,t){function n(e){var n=e.v===r?e.w:e.v,i=l.priority(n);if(void 0!==i){var o=t(e);i>o&&(u[n]=r,l.decrease(n,o))}}var r,s=new o,u={},l=new a;if(0===e.nodeCount())return s;i.each(e.nodes(),function(e){l.add(e,Number.POSITIVE_INFINITY),s.setNode(e)}),l.decrease(e.nodes()[0],0);for(var c=!1;l.size()>0;){if(r=l.removeMin(),i.has(u,r))s.setEdge(r,u[r]);else{if(c)throw new Error("Input graph is not connected: "+e);c=!0}e.nodeEdges(r).forEach(n)}return s}var i=e("../lodash"),o=e("../graph"),a=e("../data/priority-queue");t.exports=r},{"../data/priority-queue":51,"../graph":52,"../lodash":55}],49:[function(e,t,n){function r(e){function t(s){var u=o[s]={onStack:!0,lowlink:n,index:n++};if(r.push(s),e.successors(s).forEach(function(e){i.has(o,e)?o[e].onStack&&(u.lowlink=Math.min(u.lowlink,o[e].index)):(t(e),u.lowlink=Math.min(u.lowlink,o[e].lowlink))}),u.lowlink===u.index){var l,c=[];do l=r.pop(),o[l].onStack=!1,c.push(l);while(s!==l);a.push(c)}}var n=0,r=[],o={},a=[];return e.nodes().forEach(function(e){i.has(o,e)||t(e)}),a}var i=e("../lodash");t.exports=r},{"../lodash":55}],50:[function(e,t,n){function r(e){function t(s){if(o.has(r,s))throw new i;o.has(n,s)||(r[s]=!0,n[s]=!0,o.each(e.predecessors(s),t),delete r[s],a.push(s))}var n={},r={},a=[];if(o.each(e.sinks(),t),o.size(n)!==e.nodeCount())throw new i;return a}function i(){}var o=e("../lodash");t.exports=r,r.CycleException=i},{"../lodash":55}],51:[function(e,t,n){function r(){this._arr=[],this._keyIndices={}}var i=e("../lodash");t.exports=r,r.prototype.size=function(){return this._arr.length},r.prototype.keys=function(){return this._arr.map(function(e){return e.key})},r.prototype.has=function(e){return i.has(this._keyIndices,e)},r.prototype.priority=function(e){var t=this._keyIndices[e];return void 0!==t?this._arr[t].priority:void 0},r.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},r.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!i.has(n,e)){var r=this._arr,o=r.length;return n[e]=o,r.push({key:e,priority:t}),this._decrease(o),!0}return!1},r.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],
this._heapify(0),e.key},r.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},r.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,i=e;n<t.length&&(i=t[n].priority<t[i].priority?n:i,r<t.length&&(i=t[r].priority<t[i].priority?r:i),i!==e&&(this._swap(e,i),this._heapify(i)))},r.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&(t=e>>1,!(n[t].priority<r));)this._swap(e,t),e=t},r.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,i=n[e],o=n[t];n[e]=o,n[t]=i,r[o.key]=e,r[i.key]=t}},{"../lodash":55}],52:[function(e,t,n){"use strict";function r(e){this._isDirected=l.has(e,"directed")?e.directed:!0,this._isMultigraph=l.has(e,"multigraph")?e.multigraph:!1,this._isCompound=l.has(e,"compound")?e.compound:!1,this._label=void 0,this._defaultNodeLabelFn=l.constant(void 0),this._defaultEdgeLabelFn=l.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[h]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function i(e,t){e[t]?e[t]++:e[t]=1}function o(e,t){--e[t]||delete e[t]}function a(e,t,n,r){var i=""+t,o=""+n;if(!e&&i>o){var a=i;i=o,o=a}return i+d+o+d+(l.isUndefined(r)?c:r)}function s(e,t,n,r){var i=""+t,o=""+n;if(!e&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return r&&(s.name=r),s}function u(e,t){return a(e,t.v,t.w,t.name)}var l=e("./lodash");t.exports=r;var c="\x00",h="\x00",d="";r.prototype._nodeCount=0,r.prototype._edgeCount=0,r.prototype.isDirected=function(){return this._isDirected},r.prototype.isMultigraph=function(){return this._isMultigraph},r.prototype.isCompound=function(){return this._isCompound},r.prototype.setGraph=function(e){return this._label=e,this},r.prototype.graph=function(){return this._label},r.prototype.setDefaultNodeLabel=function(e){return l.isFunction(e)||(e=l.constant(e)),this._defaultNodeLabelFn=e,this},r.prototype.nodeCount=function(){return this._nodeCount},r.prototype.nodes=function(){return l.keys(this._nodes)},r.prototype.sources=function(){return l.filter(this.nodes(),function(e){return l.isEmpty(this._in[e])},this)},r.prototype.sinks=function(){return l.filter(this.nodes(),function(e){return l.isEmpty(this._out[e])},this)},r.prototype.setNodes=function(e,t){var n=arguments;return l.each(e,function(e){n.length>1?this.setNode(e,t):this.setNode(e)},this),this},r.prototype.setNode=function(e,t){return l.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=h,this._children[e]={},this._children[h][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},r.prototype.node=function(e){return this._nodes[e]},r.prototype.hasNode=function(e){return l.has(this._nodes,e)},r.prototype.removeNode=function(e){var t=this;if(l.has(this._nodes,e)){var n=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],l.each(this.children(e),function(e){this.setParent(e)},this),delete this._children[e]),l.each(l.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],l.each(l.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},r.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(l.isUndefined(t))t=h;else{t+="";for(var n=t;!l.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},r.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},r.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==h)return t}},r.prototype.children=function(e){if(l.isUndefined(e)&&(e=h),this._isCompound){var t=this._children[e];if(t)return l.keys(t)}else{if(e===h)return this.nodes();if(this.hasNode(e))return[]}},r.prototype.predecessors=function(e){var t=this._preds[e];return t?l.keys(t):void 0},r.prototype.successors=function(e){var t=this._sucs[e];return t?l.keys(t):void 0},r.prototype.neighbors=function(e){var t=this.predecessors(e);return t?l.union(t,this.successors(e)):void 0},r.prototype.filterNodes=function(e){function t(e){var o=r.parent(e);return void 0===o||n.hasNode(o)?(i[e]=o,o):o in i?i[o]:t(o)}var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph()),l.each(this._nodes,function(t,r){e(r)&&n.setNode(r,t)},this),l.each(this._edgeObjs,function(e){n.hasNode(e.v)&&n.hasNode(e.w)&&n.setEdge(e,this.edge(e))},this);var r=this,i={};return this._isCompound&&l.each(n.nodes(),function(e){n.setParent(e,t(e))}),n},r.prototype.setDefaultEdgeLabel=function(e){return l.isFunction(e)||(e=l.constant(e)),this._defaultEdgeLabelFn=e,this},r.prototype.edgeCount=function(){return this._edgeCount},r.prototype.edges=function(){return l.values(this._edgeObjs)},r.prototype.setPath=function(e,t){var n=this,r=arguments;return l.reduce(e,function(e,i){return r.length>1?n.setEdge(e,i,t):n.setEdge(e,i),i}),this},r.prototype.setEdge=function(){var e,t,n,r,o=!1,u=arguments[0];"object"==typeof u&&null!==u&&"v"in u?(e=u.v,t=u.w,n=u.name,2===arguments.length&&(r=arguments[1],o=!0)):(e=u,t=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],o=!0)),e=""+e,t=""+t,l.isUndefined(n)||(n=""+n);var c=a(this._isDirected,e,t,n);if(l.has(this._edgeLabels,c))return o&&(this._edgeLabels[c]=r),this;if(!l.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[c]=o?r:this._defaultEdgeLabelFn(e,t,n);var h=s(this._isDirected,e,t,n);return e=h.v,t=h.w,Object.freeze(h),this._edgeObjs[c]=h,i(this._preds[t],e),i(this._sucs[e],t),this._in[t][c]=h,this._out[e][c]=h,this._edgeCount++,this},r.prototype.edge=function(e,t,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):a(this._isDirected,e,t,n);return this._edgeLabels[r]},r.prototype.hasEdge=function(e,t,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):a(this._isDirected,e,t,n);return l.has(this._edgeLabels,r)},r.prototype.removeEdge=function(e,t,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):a(this._isDirected,e,t,n),i=this._edgeObjs[r];return i&&(e=i.v,t=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],o(this._preds[t],e),o(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},r.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var r=l.values(n);return t?l.filter(r,function(e){return e.v===t}):r}},r.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var r=l.values(n);return t?l.filter(r,function(e){return e.w===t}):r}},r.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);return n?n.concat(this.outEdges(e,t)):void 0}},{"./lodash":55}],53:[function(e,t,n){t.exports={Graph:e("./graph"),version:e("./version")}},{"./graph":52,"./version":56}],54:[function(e,t,n){function r(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:i(e),edges:o(e)};return s.isUndefined(e.graph())||(t.value=s.clone(e.graph())),t}function i(e){return s.map(e.nodes(),function(t){var n=e.node(t),r=e.parent(t),i={v:t};return s.isUndefined(n)||(i.value=n),s.isUndefined(r)||(i.parent=r),i})}function o(e){return s.map(e.edges(),function(t){var n=e.edge(t),r={v:t.v,w:t.w};return s.isUndefined(t.name)||(r.name=t.name),s.isUndefined(n)||(r.value=n),r})}function a(e){var t=new u(e.options).setGraph(e.value);return s.each(e.nodes,function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),s.each(e.edges,function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}var s=e("./lodash"),u=e("./graph");t.exports={write:r,read:a}},{"./graph":52,"./lodash":55}],55:[function(e,t,n){t.exports=e(15)},{lodash:57}],56:[function(e,t,n){t.exports="1.0.7"},{}],57:[function(e,t,n){(function(e){(function(){function r(e,t){if(e!==t){var n=null===e,r=e===S,i=e===e,o=null===t,a=t===S,s=t===t;if(e>t&&!o||!i||n&&!a&&s||r&&s)return 1;if(t>e&&!n||!s||o&&!r&&i||a&&i)return-1}return 0}function i(e,t,n){for(var r=e.length,i=n?r:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function o(e,t,n){if(t!==t)return g(e,n);for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function a(e){return"function"==typeof e||!1}function s(e){return null==e?"":e+""}function u(e,t){for(var n=-1,r=e.length;++n<r&&t.indexOf(e.charAt(n))>-1;);return n}function l(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n}function c(e,t){return r(e.criteria,t.criteria)||e.index-t.index}function h(e,t,n){for(var i=-1,o=e.criteria,a=t.criteria,s=o.length,u=n.length;++i<s;){var l=r(o[i],a[i]);if(l){if(i>=u)return l;var c=n[i];return l*("asc"===c||c===!0?1:-1)}}return e.index-t.index}function d(e){return Ye[e]}function f(e){return $e[e]}function p(e,t,n){return t?e=Ue[e]:n&&(e=He[e]),"\\"+e}function v(e){return"\\"+He[e]}function g(e,t,n){for(var r=e.length,i=t+(n?0:-1);n?i--:++i<r;){var o=e[i];if(o!==o)return i}return-1}function y(e){return!!e&&"object"==typeof e}function m(e){return 160>=e&&e>=9&&13>=e||32==e||160==e||5760==e||6158==e||e>=8192&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function b(e,t){for(var n=-1,r=e.length,i=-1,o=[];++n<r;)e[n]===t&&(e[n]=Y,o[++i]=n);return o}function x(e,t){for(var n,r=-1,i=e.length,o=-1,a=[];++r<i;){var s=e[r],u=t?t(s,r,e):s;r&&n===u||(n=u,a[++o]=s)}return a}function w(e){for(var t=-1,n=e.length;++t<n&&m(e.charCodeAt(t)););return t}function _(e){for(var t=e.length;t--&&m(e.charCodeAt(t)););return t}function E(e){return Ge[e]}function k(e){function t(e){if(y(e)&&!Ps(e)&&!(e instanceof K)){if(e instanceof m)return e;if(ta.call(e,"__chain__")&&ta.call(e,"__wrapped__"))return fr(e)}return new m(e)}function n(){}function m(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function K(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Da,this.__views__=[]}function te(){var e=new K(this.__wrapped__);return e.__actions__=et(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=et(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=et(this.__views__),e}function re(){if(this.__filtered__){var e=new K(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Ye(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ps(e),r=0>t,i=n?e.length:0,o=Gn(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,h=c.length,d=0,f=Ea(u,this.__takeCount__);if(!n||F>i||i==u&&f==u)return nn(r&&n?e.reverse():e,this.__actions__);var p=[];e:for(;u--&&f>d;){l+=t;for(var v=-1,g=e[l];++v<h;){var y=c[v],m=y.iteratee,b=y.type,x=m(g);if(b==q)g=x;else if(!x){if(b==V)continue e;break e}}p[d++]=g}return p}function $e(){this.__data__={}}function Ge(e){return this.has(e)&&delete this.__data__[e]}function We(e){return"__proto__"==e?S:this.__data__[e]}function Ue(e){return"__proto__"!=e&&ta.call(this.__data__,e)}function He(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this}function Ze(e){var t=e?e.length:0;for(this.data={hash:ya(null),set:new ha};t--;)this.push(e[t])}function Ke(e,t){var n=e.data,r="string"==typeof t||Li(t)?n.set.has(t):n.hash[t];return r?0:-1}function Je(e){var t=this.data;"string"==typeof e||Li(e)?t.set.add(e):t.hash[e]=!0}function Qe(e,t){for(var n=-1,r=e.length,i=-1,o=t.length,a=Vo(r+o);++n<r;)a[n]=e[n];for(;++i<o;)a[n++]=t[i];return a}function et(e,t){var n=-1,r=e.length;for(t||(t=Vo(r));++n<r;)t[n]=e[n];return t}function tt(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function it(e,t){for(var n=e.length;n--&&t(e[n],n,e)!==!1;);return e}function ot(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function at(e,t,n,r){for(var i=-1,o=e.length,a=r,s=a;++i<o;){var u=e[i],l=+t(u);n(l,a)&&(a=l,s=u)}return s}function st(e,t){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[++i]=a)}return o}function ut(e,t){for(var n=-1,r=e.length,i=Vo(r);++n<r;)i[n]=t(e[n],n,e);return i}function lt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function ct(e,t,n,r){var i=-1,o=e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function ht(e,t,n,r){var i=e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function dt(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function ft(e,t){for(var n=e.length,r=0;n--;)r+=+t(e[n])||0;return r}function pt(e,t){return e===S?t:e}function vt(e,t,n,r){return e!==S&&ta.call(r,n)?e:t}function gt(e,t,n){for(var r=-1,i=Fs(t),o=i.length;++r<o;){var a=i[r],s=e[a],u=n(s,t[a],a,e,t);(u===u?u===s:s!==s)&&(s!==S||a in e)||(e[a]=u)}return e}function yt(e,t){return null==t?e:bt(t,Fs(t),e)}function mt(e,t){for(var n=-1,r=null==e,i=!r&&Kn(e),o=i?e.length:0,a=t.length,s=Vo(a);++n<a;){var u=t[n];s[n]=i?Jn(u,o)?e[u]:S:r?S:e[u]}return s}function bt(e,t,n){n||(n={});for(var r=-1,i=t.length;++r<i;){var o=t[r];n[o]=e[o]}return n}function xt(e,t,n){var r=typeof e;return"function"==r?t===S?e:an(e,t,n):null==e?Do:"object"==r?zt(e):t===S?Lo(e):Ft(e,t)}function wt(e,t,n,r,i,o,a){var s;if(n&&(s=i?n(e,r,i):n(e)),s!==S)return s;if(!Li(e))return e;var u=Ps(e);if(u){if(s=Wn(e),!t)return et(e,s)}else{var l=ra.call(e),c=l==Z;if(l!=Q&&l!=$&&(!c||i))return Xe[l]?Hn(e,l,t):i?e:{};if(s=Un(c?{}:e),!t)return yt(s,e)}o||(o=[]),a||(a=[]);for(var h=o.length;h--;)if(o[h]==e)return a[h];return o.push(e),a.push(s),(u?tt:Mt)(e,function(r,i){s[i]=wt(r,t,n,i,e,o,a)}),s}function _t(e,t,n){if("function"!=typeof e)throw new Zo(X);return da(function(){e.apply(S,n)},t)}function Et(e,t){var n=e?e.length:0,r=[];if(!n)return r;var i=-1,a=Xn(),s=a==o,u=s&&t.length>=F?vn(t):null,l=t.length;u&&(a=Ke,s=!1,t=u);e:for(;++i<n;){var c=e[i];if(s&&c===c){for(var h=l;h--;)if(t[h]===c)continue e;r.push(c)}else a(t,c,0)<0&&r.push(c)}return r}function kt(e,t){var n=!0;return ja(e,function(e,r,i){return n=!!t(e,r,i)}),n}function St(e,t,n,r){var i=r,o=i;return ja(e,function(e,a,s){var u=+t(e,a,s);(n(u,i)||u===r&&u===o)&&(i=u,o=e)}),o}function Nt(e,t,n,r){var i=e.length;for(n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r=r===S||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;i>n;)e[n++]=t;return e}function Tt(e,t){var n=[];return ja(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Dt(e,t,n,r){var i;return n(e,function(e,n,o){return t(e,n,o)?(i=r?n:e,!1):void 0}),i}function Pt(e,t,n,r){r||(r=[]);for(var i=-1,o=e.length;++i<o;){var a=e[i];y(a)&&Kn(a)&&(n||Ps(a)||Si(a))?t?Pt(a,t,n,r):lt(r,a):n||(r[r.length]=a)}return r}function Ct(e,t){return Ra(e,t,eo)}function Mt(e,t){return Ra(e,t,Fs)}function At(e,t){return za(e,t,Fs)}function It(e,t){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];Ii(e[a])&&(o[++i]=a)}return o}function Lt(e,t,n){if(null!=e){n!==S&&n in hr(e)&&(t=[n]);for(var r=0,i=t.length;null!=e&&i>r;)e=e[t[r++]];return r&&r==i?e:S}}function Ot(e,t,n,r,i,o){return e===t?!0:null==e||null==t||!Li(e)&&!y(t)?e!==e&&t!==t:jt(e,t,Ot,n,r,i,o)}function jt(e,t,n,r,i,o,a){var s=Ps(e),u=Ps(t),l=G,c=G;s||(l=ra.call(e),l==$?l=Q:l!=Q&&(s=Xi(e))),u||(c=ra.call(t),c==$?c=Q:c!=Q&&(u=Xi(t)));var h=l==Q,d=c==Q,f=l==c;if(f&&!s&&!h)return zn(e,t,l);if(!i){var p=h&&ta.call(e,"__wrapped__"),v=d&&ta.call(t,"__wrapped__");if(p||v)return n(p?e.value():e,v?t.value():t,r,i,o,a)}if(!f)return!1;o||(o=[]),a||(a=[]);for(var g=o.length;g--;)if(o[g]==e)return a[g]==t;o.push(e),a.push(t);var y=(s?Rn:Fn)(e,t,n,r,i,o,a);return o.pop(),a.pop(),y}function Bt(e,t,n){var r=t.length,i=r,o=!n;if(null==e)return!i;for(e=hr(e);r--;){var a=t[r];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++r<i;){a=t[r];var s=a[0],u=e[s],l=a[1];if(o&&a[2]){if(u===S&&!(s in e))return!1}else{var c=n?n(u,l,s):S;if(!(c===S?Ot(l,u,n,!0):c))return!1}}return!0}function Rt(e,t){var n=-1,r=Kn(e)?Vo(e.length):[];return ja(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function zt(e){var t=Yn(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null==e?!1:e[n]===r&&(r!==S||n in hr(e))}}return function(e){return Bt(e,t)}}function Ft(e,t){var n=Ps(e),r=er(e)&&rr(t),i=e+"";return e=dr(e),function(o){if(null==o)return!1;var a=i;if(o=hr(o),!(!n&&r||a in o)){if(o=1==e.length?o:Lt(o,Ut(e,0,-1)),null==o)return!1;a=Nr(e),o=hr(o)}return o[a]===t?t!==S||a in o:Ot(t,o[a],S,!0)}}function Vt(e,t,n,r,i){if(!Li(e))return e;var o=Kn(t)&&(Ps(t)||Xi(t)),a=o?S:Fs(t);return tt(a||t,function(s,u){if(a&&(u=s,s=t[u]),y(s))r||(r=[]),i||(i=[]),qt(e,t,u,Vt,n,r,i);else{var l=e[u],c=n?n(l,s,u,e,t):S,h=c===S;h&&(c=s),c===S&&(!o||u in e)||!h&&(c===c?c===l:l!==l)||(e[u]=c)}}),e}function qt(e,t,n,r,i,o,a){for(var s=o.length,u=t[n];s--;)if(o[s]==u)return void(e[n]=a[s]);var l=e[n],c=i?i(l,u,n,e,t):S,h=c===S;h&&(c=u,Kn(u)&&(Ps(u)||Xi(u))?c=Ps(l)?l:Kn(l)?et(l):[]:Fi(u)||Si(u)?c=Si(l)?Ui(l):Fi(l)?l:{}:h=!1),o.push(u),a.push(c),h?e[n]=r(c,u,i,o,a):(c===c?c!==l:l===l)&&(e[n]=c)}function Xt(e){return function(t){return null==t?S:t[e]}}function Yt(e){var t=e+"";return e=dr(e),function(n){return Lt(n,e,t)}}function $t(e,t){for(var n=e?t.length:0;n--;){var r=t[n];if(r!=i&&Jn(r)){var i=r;fa.call(e,r,1)}}return e}function Gt(e,t){return e+ma(Na()*(t-e+1))}function Wt(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function Ut(e,t,n){var r=-1,i=e.length;t=null==t?0:+t||0,0>t&&(t=-t>i?0:i+t),n=n===S||n>i?i:+n||0,0>n&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Vo(i);++r<i;)o[r]=e[r+t];return o}function Ht(e,t){var n;return ja(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function Zt(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Kt(e,t,n){var r=Vn(),i=-1;t=ut(t,function(e){return r(e)});var o=Rt(e,function(e){var n=ut(t,function(t){return t(e)});return{criteria:n,index:++i,value:e}});return Zt(o,function(e,t){return h(e,t,n)})}function Jt(e,t){var n=0;return ja(e,function(e,r,i){n+=+t(e,r,i)||0}),n}function Qt(e,t){var n=-1,r=Xn(),i=e.length,a=r==o,s=a&&i>=F,u=s?vn():null,l=[];u?(r=Ke,a=!1):(s=!1,u=t?[]:l);e:for(;++n<i;){var c=e[n],h=t?t(c,n,e):c;if(a&&c===c){for(var d=u.length;d--;)if(u[d]===h)continue e;t&&u.push(h),l.push(c)}else r(u,h,0)<0&&((t||s)&&u.push(h),l.push(c))}return l}function en(e,t){for(var n=-1,r=t.length,i=Vo(r);++n<r;)i[n]=e[t[n]];return i}function tn(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Ut(e,r?0:o,r?o+1:i):Ut(e,r?o+1:0,r?i:o)}function nn(e,t){var n=e;n instanceof K&&(n=n.value());for(var r=-1,i=t.length;++r<i;){var o=t[r];n=o.func.apply(o.thisArg,lt([n],o.args))}return n}function rn(e,t,n){var r=0,i=e?e.length:r;if("number"==typeof t&&t===t&&Ma>=i){for(;i>r;){var o=r+i>>>1,a=e[o];(n?t>=a:t>a)&&null!==a?r=o+1:i=o}return i}return on(e,t,Do,n)}function on(e,t,n,r){t=n(t);for(var i=0,o=e?e.length:0,a=t!==t,s=null===t,u=t===S;o>i;){var l=ma((i+o)/2),c=n(e[l]),h=c!==S,d=c===c;if(a)var f=d||r;else f=s?d&&h&&(r||null!=c):u?d&&(r||h):null==c?!1:r?t>=c:t>c;f?i=l+1:o=l}return Ea(o,Ca)}function an(e,t,n){if("function"!=typeof e)return Do;if(t===S)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)};case 5:return function(n,r,i,o,a){return e.call(t,n,r,i,o,a)}}return function(){return e.apply(t,arguments)}}function sn(e){var t=new aa(e.byteLength),n=new pa(t);return n.set(new pa(e)),t}function un(e,t,n){for(var r=n.length,i=-1,o=_a(e.length-r,0),a=-1,s=t.length,u=Vo(s+o);++a<s;)u[a]=t[a];for(;++i<r;)u[n[i]]=e[i];for(;o--;)u[a++]=e[i++];return u}function ln(e,t,n){for(var r=-1,i=n.length,o=-1,a=_a(e.length-i,0),s=-1,u=t.length,l=Vo(a+u);++o<a;)l[o]=e[o];for(var c=o;++s<u;)l[c+s]=t[s];for(;++r<i;)l[c+n[r]]=e[o++];return l}function cn(e,t){return function(n,r,i){var o=t?t():{};if(r=Vn(r,i,3),Ps(n))for(var a=-1,s=n.length;++a<s;){var u=n[a];e(o,u,r(u,a,n),n)}else ja(n,function(t,n,i){e(o,t,r(t,n,i),i)});return o}}function hn(e){return yi(function(t,n){var r=-1,i=null==t?0:n.length,o=i>2?n[i-2]:S,a=i>2?n[2]:S,s=i>1?n[i-1]:S;for("function"==typeof o?(o=an(o,s,5),i-=2):(o="function"==typeof s?s:S,i-=o?1:0),a&&Qn(n[0],n[1],a)&&(o=3>i?S:o,i=1);++r<i;){var u=n[r];u&&e(t,u,o)}return t})}function dn(e,t){return function(n,r){var i=n?qa(n):0;if(!nr(i))return e(n,r);for(var o=t?i:-1,a=hr(n);(t?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function fn(e){return function(t,n,r){for(var i=hr(t),o=r(t),a=o.length,s=e?a:-1;e?s--:++s<a;){var u=o[s];if(n(i[u],u,i)===!1)break}return t}}function pn(e,t){function n(){var i=this&&this!==nt&&this instanceof n?r:e;return i.apply(t,arguments)}var r=yn(e);return n}function vn(e){return ya&&ha?new Ze(e):null}function gn(e){return function(t){for(var n=-1,r=So(co(t)),i=r.length,o="";++n<i;)o=e(o,r[n],n);return o}}function yn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Oa(e.prototype),r=e.apply(n,t);return Li(r)?r:n}}function mn(e){function t(n,r,i){i&&Qn(n,r,i)&&(r=S);var o=Bn(n,e,S,S,S,S,S,r);return o.placeholder=t.placeholder,o}return t}function bn(e,t){return yi(function(n){var r=n[0];return null==r?r:(n.push(t),e.apply(S,n))})}function xn(e,t){return function(n,r,i){if(i&&Qn(n,r,i)&&(r=S),r=Vn(r,i,3),1==r.length){n=Ps(n)?n:cr(n);var o=at(n,r,e,t);if(!n.length||o!==t)return o}return St(n,r,e,t)}}function wn(e,t){return function(n,r,o){if(r=Vn(r,o,3),Ps(n)){var a=i(n,r,t);return a>-1?n[a]:S}return Dt(n,r,e)}}function _n(e){return function(t,n,r){return t&&t.length?(n=Vn(n,r,3),i(t,n,e)):-1}}function En(e){return function(t,n,r){return n=Vn(n,r,3),Dt(t,n,e,!0)}}function kn(e){return function(){for(var t,n=arguments.length,r=e?n:-1,i=0,o=Vo(n);e?r--:++r<n;){var a=o[i++]=arguments[r];if("function"!=typeof a)throw new Zo(X);!t&&m.prototype.thru&&"wrapper"==qn(a)&&(t=new m([],!0))}for(r=t?-1:n;++r<n;){a=o[r];var s=qn(a),u="wrapper"==s?Va(a):S;t=u&&tr(u[0])&&u[1]==(L|C|A|O)&&!u[4].length&&1==u[9]?t[qn(u[0])].apply(t,u[3]):1==a.length&&tr(a)?t[s]():t.thru(a)}return function(){var e=arguments,r=e[0];if(t&&1==e.length&&Ps(r)&&r.length>=F)return t.plant(r).value();for(var i=0,a=n?o[i].apply(this,e):r;++i<n;)a=o[i].call(this,a);return a}}}function Sn(e,t){return function(n,r,i){return"function"==typeof r&&i===S&&Ps(n)?e(n,r):t(n,an(r,i,3))}}function Nn(e){return function(t,n,r){return("function"!=typeof n||r!==S)&&(n=an(n,r,3)),e(t,n,eo)}}function Tn(e){return function(t,n,r){return("function"!=typeof n||r!==S)&&(n=an(n,r,3)),e(t,n)}}function Dn(e){return function(t,n,r){var i={};return n=Vn(n,r,3),Mt(t,function(t,r,o){var a=n(t,r,o);r=e?a:r,t=e?t:a,i[r]=t}),i}}function Pn(e){return function(t,n,r){return t=s(t),(e?t:"")+In(t,n,r)+(e?"":t)}}function Cn(e){var t=yi(function(n,r){var i=b(r,t.placeholder);return Bn(n,e,S,r,i)});return t}function Mn(e,t){return function(n,r,i,o){var a=arguments.length<3;return"function"==typeof r&&o===S&&Ps(n)?e(n,r,i,a):Wt(n,Vn(r,o,4),i,a,t)}}function An(e,t,n,r,i,o,a,s,u,l){function c(){for(var m=arguments.length,x=m,w=Vo(m);x--;)w[x]=arguments[x];if(r&&(w=un(w,r,i)),o&&(w=ln(w,o,a)),p||g){var _=c.placeholder,E=b(w,_);if(m-=E.length,l>m){var k=s?et(s):S,N=_a(l-m,0),P=p?E:S,C=p?S:E,M=p?w:S,L=p?S:w;t|=p?A:I,t&=~(p?I:A),v||(t&=~(T|D));var O=[e,t,n,M,P,L,C,k,u,N],j=An.apply(S,O);return tr(e)&&Xa(j,O),j.placeholder=_,j}}var B=d?n:this,R=f?B[e]:e;return s&&(w=ur(w,s)),h&&u<w.length&&(w.length=u),this&&this!==nt&&this instanceof c&&(R=y||yn(e)),R.apply(B,w)}var h=t&L,d=t&T,f=t&D,p=t&C,v=t&P,g=t&M,y=f?S:yn(e);return c}function In(e,t,n){var r=e.length;if(t=+t,r>=t||!xa(t))return"";var i=t-r;return n=null==n?" ":n+"",yo(n,ga(i/n.length)).slice(0,i)}function Ln(e,t,n,r){function i(){for(var t=-1,s=arguments.length,u=-1,l=r.length,c=Vo(l+s);++u<l;)c[u]=r[u];for(;s--;)c[u++]=arguments[++t];var h=this&&this!==nt&&this instanceof i?a:e;return h.apply(o?n:this,c)}var o=t&T,a=yn(e);return i}function On(e){var t=$o[e];return function(e,n){return n=n===S?0:+n||0,n?(n=la(10,n),t(e*n)/n):t(e)}}function jn(e){return function(t,n,r,i){var o=Vn(r);return null==r&&o===xt?rn(t,n,e):on(t,n,o(r,i,1),e)}}function Bn(e,t,n,r,i,o,a,s){var u=t&D;if(!u&&"function"!=typeof e)throw new Zo(X);var l=r?r.length:0;if(l||(t&=~(A|I),r=i=S),l-=i?i.length:0,t&I){var c=r,h=i;r=i=S}var d=u?S:Va(e),f=[e,t,n,r,i,c,h,o,a,s];if(d&&(ir(f,d),t=f[1],s=f[9]),f[9]=null==s?u?0:e.length:_a(s-l,0)||0,t==T)var p=pn(f[0],f[2]);else p=t!=A&&t!=(T|A)||f[4].length?An.apply(S,f):Ln.apply(S,f);var v=d?Fa:Xa;return v(p,f)}function Rn(e,t,n,r,i,o,a){var s=-1,u=e.length,l=t.length;if(u!=l&&!(i&&l>u))return!1;for(;++s<u;){var c=e[s],h=t[s],d=r?r(i?h:c,i?c:h,s):S;if(d!==S){if(d)continue;return!1}if(i){if(!dt(t,function(e){return c===e||n(c,e,r,i,o,a)}))return!1}else if(c!==h&&!n(c,h,r,i,o,a))return!1}return!0}function zn(e,t,n){switch(n){case W:case U:return+e==+t;case H:return e.name==t.name&&e.message==t.message;case J:return e!=+e?t!=+t:e==+t;case ee:case ne:return e==t+""}return!1}function Fn(e,t,n,r,i,o,a){var s=Fs(e),u=s.length,l=Fs(t),c=l.length;if(u!=c&&!i)return!1;for(var h=u;h--;){var d=s[h];if(!(i?d in t:ta.call(t,d)))return!1}for(var f=i;++h<u;){d=s[h];var p=e[d],v=t[d],g=r?r(i?v:p,i?p:v,d):S;if(!(g===S?n(p,v,r,i,o,a):g))return!1;f||(f="constructor"==d)}if(!f){var y=e.constructor,m=t.constructor;if(y!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof m&&m instanceof m))return!1}return!0}function Vn(e,n,r){var i=t.callback||No;return i=i===No?xt:i,r?i(e,n,r):i}function qn(e){for(var t=e.name,n=La[t],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Xn(e,n,r){var i=t.indexOf||kr;return i=i===kr?o:i,e?i(e,n,r):i}function Yn(e){for(var t=to(e),n=t.length;n--;)t[n][2]=rr(t[n][1]);return t}function $n(e,t){var n=null==e?S:e[t];return Bi(n)?n:S}function Gn(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Ea(t,e+a);break;case"takeRight":e=_a(e,t-a)}}return{start:e,end:t}}function Wn(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&ta.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Un(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Wo),new t}function Hn(e,t,n){var r=e.constructor;switch(t){case ie:return sn(e);case W:case U:return new r(+e);case oe:case ae:case se:case ue:case le:case ce:case he:case de:case fe:var i=e.buffer;return new r(n?sn(i):i,e.byteOffset,e.length);case J:case ne:return new r(e);case ee:var o=new r(e.source,Ae.exec(e));o.lastIndex=e.lastIndex}return o}function Zn(e,t,n){null==e||er(t,e)||(t=dr(t),e=1==t.length?e:Lt(e,Ut(t,0,-1)),t=Nr(t));var r=null==e?e:e[t];return null==r?S:r.apply(e,n)}function Kn(e){return null!=e&&nr(qa(e))}function Jn(e,t){return e="number"==typeof e||Oe.test(e)?+e:-1,t=null==t?Aa:t,e>-1&&e%1==0&&t>e}function Qn(e,t,n){if(!Li(n))return!1;var r=typeof t;if("number"==r?Kn(n)&&Jn(t,n.length):"string"==r&&t in n){var i=n[t];return e===e?e===i:i!==i}return!1}function er(e,t){var n=typeof e;if("string"==n&&Se.test(e)||"number"==n)return!0;if(Ps(e))return!1;var r=!ke.test(e);return r||null!=t&&e in hr(t)}function tr(e){var n=qn(e);if(!(n in K.prototype))return!1;var r=t[n];if(e===r)return!0;var i=Va(r);return!!i&&e===i[0]}function nr(e){return"number"==typeof e&&e>-1&&e%1==0&&Aa>=e}function rr(e){return e===e&&!Li(e)}function ir(e,t){var n=e[1],r=t[1],i=n|r,o=L>i,a=r==L&&n==C||r==L&&n==O&&e[7].length<=t[8]||r==(L|O)&&n==C;if(!o&&!a)return e;r&T&&(e[2]=t[2],i|=n&T?0:P);var s=t[3];if(s){var u=e[3];e[3]=u?un(u,s,t[4]):et(s),e[4]=u?b(e[3],Y):et(t[4])}return s=t[5],s&&(u=e[5],e[5]=u?ln(u,s,t[6]):et(s),e[6]=u?b(e[5],Y):et(t[6])),s=t[7],s&&(e[7]=et(s)),r&L&&(e[8]=null==e[8]?t[8]:Ea(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function or(e,t){return e===S?t:Cs(e,t,or)}function ar(e,t){e=hr(e);for(var n=-1,r=t.length,i={};++n<r;){var o=t[n];o in e&&(i[o]=e[o])}return i}function sr(e,t){var n={};return Ct(e,function(e,r,i){t(e,r,i)&&(n[r]=e)}),n}function ur(e,t){for(var n=e.length,r=Ea(t.length,n),i=et(e);r--;){var o=t[r];e[r]=Jn(o,n)?i[o]:S}return e}function lr(e){for(var t=eo(e),n=t.length,r=n&&e.length,i=!!r&&nr(r)&&(Ps(e)||Si(e)),o=-1,a=[];++o<n;){var s=t[o];(i&&Jn(s,r)||ta.call(e,s))&&a.push(s)}return a}function cr(e){return null==e?[]:Kn(e)?Li(e)?e:Wo(e):oo(e)}function hr(e){return Li(e)?e:Wo(e)}function dr(e){if(Ps(e))return e;var t=[];return s(e).replace(Ne,function(e,n,r,i){t.push(r?i.replace(Ce,"$1"):n||e)}),t}function fr(e){return e instanceof K?e.clone():new m(e.__wrapped__,e.__chain__,et(e.__actions__))}function pr(e,t,n){t=(n?Qn(e,t,n):null==t)?1:_a(ma(t)||1,1);for(var r=0,i=e?e.length:0,o=-1,a=Vo(ga(i/t));i>r;)a[++o]=Ut(e,r,r+=t);return a}function vr(e){for(var t=-1,n=e?e.length:0,r=-1,i=[];++t<n;){var o=e[t];o&&(i[++r]=o)}return i}function gr(e,t,n){var r=e?e.length:0;return r?((n?Qn(e,t,n):null==t)&&(t=1),Ut(e,0>t?0:t)):[]}function yr(e,t,n){var r=e?e.length:0;return r?((n?Qn(e,t,n):null==t)&&(t=1),t=r-(+t||0),Ut(e,0,0>t?0:t)):[]}function mr(e,t,n){return e&&e.length?tn(e,Vn(t,n,3),!0,!0):[]}function br(e,t,n){return e&&e.length?tn(e,Vn(t,n,3),!0):[]}function xr(e,t,n,r){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&Qn(e,t,n)&&(n=0,r=i),Nt(e,t,n,r)):[]}function wr(e){return e?e[0]:S}function _r(e,t,n){var r=e?e.length:0;return n&&Qn(e,t,n)&&(t=!1),r?Pt(e,t):[]}function Er(e){var t=e?e.length:0;return t?Pt(e,!0):[]}function kr(e,t,n){var r=e?e.length:0;if(!r)return-1;if("number"==typeof n)n=0>n?_a(r+n,0):n;else if(n){var i=rn(e,t);return r>i&&(t===t?t===e[i]:e[i]!==e[i])?i:-1}return o(e,t,n||0)}function Sr(e){return yr(e,1)}function Nr(e){var t=e?e.length:0;return t?e[t-1]:S}function Tr(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(0>n?_a(r+n,0):Ea(n||0,r-1))+1;else if(n){i=rn(e,t,!0)-1;var o=e[i];return(t===t?t===o:o!==o)?i:-1}if(t!==t)return g(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1}function Dr(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,r=Xn(),i=e.length;++n<i;)for(var o=0,a=e[n];(o=r(t,a,o))>-1;)fa.call(t,o,1);return t}function Pr(e,t,n){var r=[];if(!e||!e.length)return r;var i=-1,o=[],a=e.length;for(t=Vn(t,n,3);++i<a;){var s=e[i];t(s,i,e)&&(r.push(s),o.push(i))}return $t(e,o),r}function Cr(e){return gr(e,1)}function Mr(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&Qn(e,t,n)&&(t=0,n=r),Ut(e,t,n)):[]}function Ar(e,t,n){var r=e?e.length:0;return r?((n?Qn(e,t,n):null==t)&&(t=1),Ut(e,0,0>t?0:t)):[]}function Ir(e,t,n){var r=e?e.length:0;return r?((n?Qn(e,t,n):null==t)&&(t=1),t=r-(+t||0),Ut(e,0>t?0:t)):[]}function Lr(e,t,n){return e&&e.length?tn(e,Vn(t,n,3),!1,!0):[]}function Or(e,t,n){return e&&e.length?tn(e,Vn(t,n,3)):[]}function jr(e,t,n,r){var i=e?e.length:0;if(!i)return[];null!=t&&"boolean"!=typeof t&&(r=n,n=Qn(e,t,r)?S:t,t=!1);var a=Vn();return(null!=n||a!==xt)&&(n=a(n,r,3)),t&&Xn()==o?x(e,n):Qt(e,n)}function Br(e){if(!e||!e.length)return[];var t=-1,n=0;e=st(e,function(e){return Kn(e)?(n=_a(e.length,n),!0):void 0});for(var r=Vo(n);++t<n;)r[t]=ut(e,Xt(t));return r}function Rr(e,t,n){var r=e?e.length:0;if(!r)return[];var i=Br(e);return null==t?i:(t=an(t,n,4),ut(i,function(e){return ct(e,t,S,!0)}))}function zr(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Kn(n))var r=r?lt(Et(r,n),Et(n,r)):n;

}return r?Qt(r):[]}function Fr(e,t){var n=-1,r=e?e.length:0,i={};for(!r||t||Ps(e[0])||(t=[]);++n<r;){var o=e[n];t?i[o]=t[n]:o&&(i[o[0]]=o[1])}return i}function Vr(e){var n=t(e);return n.__chain__=!0,n}function qr(e,t,n){return t.call(n,e),e}function Xr(e,t,n){return t.call(n,e)}function Yr(){return Vr(this)}function $r(){return new m(this.value(),this.__chain__)}function Gr(e){for(var t,r=this;r instanceof n;){var i=fr(r);t?o.__wrapped__=i:t=i;var o=i;r=r.__wrapped__}return o.__wrapped__=e,t}function Wr(){var e=this.__wrapped__,t=function(e){return n&&n.__dir__<0?e:e.reverse()};if(e instanceof K){var n=e;return this.__actions__.length&&(n=new K(this)),n=n.reverse(),n.__actions__.push({func:Xr,args:[t],thisArg:S}),new m(n,this.__chain__)}return this.thru(t)}function Ur(){return this.value()+""}function Hr(){return nn(this.__wrapped__,this.__actions__)}function Zr(e,t,n){var r=Ps(e)?ot:kt;return n&&Qn(e,t,n)&&(t=S),("function"!=typeof t||n!==S)&&(t=Vn(t,n,3)),r(e,t)}function Kr(e,t,n){var r=Ps(e)?st:Tt;return t=Vn(t,n,3),r(e,t)}function Jr(e,t){return is(e,zt(t))}function Qr(e,t,n,r){var i=e?qa(e):0;return nr(i)||(e=oo(e),i=e.length),n="number"!=typeof n||r&&Qn(t,n,r)?0:0>n?_a(i+n,0):n||0,"string"==typeof e||!Ps(e)&&qi(e)?i>=n&&e.indexOf(t,n)>-1:!!i&&Xn(e,t,n)>-1}function ei(e,t,n){var r=Ps(e)?ut:Rt;return t=Vn(t,n,3),r(e,t)}function ti(e,t){return ei(e,Lo(t))}function ni(e,t,n){var r=Ps(e)?st:Tt;return t=Vn(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})}function ri(e,t,n){if(n?Qn(e,t,n):null==t){e=cr(e);var r=e.length;return r>0?e[Gt(0,r-1)]:S}var i=-1,o=Wi(e),r=o.length,a=r-1;for(t=Ea(0>t?0:+t||0,r);++i<t;){var s=Gt(i,a),u=o[s];o[s]=o[i],o[i]=u}return o.length=t,o}function ii(e){return ri(e,Da)}function oi(e){var t=e?qa(e):0;return nr(t)?t:Fs(e).length}function ai(e,t,n){var r=Ps(e)?dt:Ht;return n&&Qn(e,t,n)&&(t=S),("function"!=typeof t||n!==S)&&(t=Vn(t,n,3)),r(e,t)}function si(e,t,n){if(null==e)return[];n&&Qn(e,t,n)&&(t=S);var r=-1;t=Vn(t,n,3);var i=Rt(e,function(e,n,i){return{criteria:t(e,n,i),index:++r,value:e}});return Zt(i,c)}function ui(e,t,n,r){return null==e?[]:(r&&Qn(t,n,r)&&(n=S),Ps(t)||(t=null==t?[]:[t]),Ps(n)||(n=null==n?[]:[n]),Kt(e,t,n))}function li(e,t){return Kr(e,zt(t))}function ci(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new Zo(X);var n=e;e=t,t=n}return e=xa(e=+e)?e:0,function(){return--e<1?t.apply(this,arguments):void 0}}function hi(e,t,n){return n&&Qn(e,t,n)&&(t=S),t=e&&null==t?e.length:_a(+t||0,0),Bn(e,L,S,S,S,S,t)}function di(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new Zo(X);var r=e;e=t,t=r}return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=S),n}}function fi(e,t,n){function r(){f&&sa(f),l&&sa(l),v=0,l=f=p=S}function i(t,n){n&&sa(n),l=f=p=S,t&&(v=vs(),c=e.apply(d,u),f||l||(u=d=S))}function o(){var e=t-(vs()-h);0>=e||e>t?i(p,l):f=da(o,e)}function a(){i(y,f)}function s(){if(u=arguments,h=vs(),d=this,p=y&&(f||!m),g===!1)var n=m&&!f;else{l||m||(v=h);var r=g-(h-v),i=0>=r||r>g;i?(l&&(l=sa(l)),v=h,c=e.apply(d,u)):l||(l=da(a,r))}return i&&f?f=sa(f):f||t===g||(f=da(o,t)),n&&(i=!0,c=e.apply(d,u)),!i||f||l||(u=d=S),c}var u,l,c,h,d,f,p,v=0,g=!1,y=!0;if("function"!=typeof e)throw new Zo(X);if(t=0>t?0:+t||0,n===!0){var m=!0;y=!1}else Li(n)&&(m=!!n.leading,g="maxWait"in n&&_a(+n.maxWait||0,t),y="trailing"in n?!!n.trailing:y);return s.cancel=r,s}function pi(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new Zo(X);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new pi.Cache,n}function vi(e){if("function"!=typeof e)throw new Zo(X);return function(){return!e.apply(this,arguments)}}function gi(e){return di(2,e)}function yi(e,t){if("function"!=typeof e)throw new Zo(X);return t=_a(t===S?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,i=_a(n.length-t,0),o=Vo(i);++r<i;)o[r]=n[t+r];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,n[0],o);case 2:return e.call(this,n[0],n[1],o)}var a=Vo(t+1);for(r=-1;++r<t;)a[r]=n[r];return a[t]=o,e.apply(this,a)}}function mi(e){if("function"!=typeof e)throw new Zo(X);return function(t){return e.apply(this,t)}}function bi(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Zo(X);return n===!1?r=!1:Li(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),fi(e,t,{leading:r,maxWait:+t,trailing:i})}function xi(e,t){return t=null==t?Do:t,Bn(t,A,S,[e],[])}function wi(e,t,n,r){return t&&"boolean"!=typeof t&&Qn(e,t,n)?t=!1:"function"==typeof t&&(r=n,n=t,t=!1),"function"==typeof n?wt(e,t,an(n,r,1)):wt(e,t)}function _i(e,t,n){return"function"==typeof t?wt(e,!0,an(t,n,1)):wt(e,!0)}function Ei(e,t){return e>t}function ki(e,t){return e>=t}function Si(e){return y(e)&&Kn(e)&&ta.call(e,"callee")&&!ca.call(e,"callee")}function Ni(e){return e===!0||e===!1||y(e)&&ra.call(e)==W}function Ti(e){return y(e)&&ra.call(e)==U}function Di(e){return!!e&&1===e.nodeType&&y(e)&&!Fi(e)}function Pi(e){return null==e?!0:Kn(e)&&(Ps(e)||qi(e)||Si(e)||y(e)&&Ii(e.splice))?!e.length:!Fs(e).length}function Ci(e,t,n,r){n="function"==typeof n?an(n,r,3):S;var i=n?n(e,t):S;return i===S?Ot(e,t,n):!!i}function Mi(e){return y(e)&&"string"==typeof e.message&&ra.call(e)==H}function Ai(e){return"number"==typeof e&&xa(e)}function Ii(e){return Li(e)&&ra.call(e)==Z}function Li(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Oi(e,t,n,r){return n="function"==typeof n?an(n,r,3):S,Bt(e,Yn(t),n)}function ji(e){return zi(e)&&e!=+e}function Bi(e){return null==e?!1:Ii(e)?oa.test(ea.call(e)):y(e)&&Le.test(e)}function Ri(e){return null===e}function zi(e){return"number"==typeof e||y(e)&&ra.call(e)==J}function Fi(e){var t;if(!y(e)||ra.call(e)!=Q||Si(e)||!ta.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var n;return Ct(e,function(e,t){n=t}),n===S||ta.call(e,n)}function Vi(e){return Li(e)&&ra.call(e)==ee}function qi(e){return"string"==typeof e||y(e)&&ra.call(e)==ne}function Xi(e){return y(e)&&nr(e.length)&&!!qe[ra.call(e)]}function Yi(e){return e===S}function $i(e,t){return t>e}function Gi(e,t){return t>=e}function Wi(e){var t=e?qa(e):0;return nr(t)?t?et(e):[]:oo(e)}function Ui(e){return bt(e,eo(e))}function Hi(e,t,n){var r=Oa(e);return n&&Qn(e,t,n)&&(t=S),t?yt(r,t):r}function Zi(e){return It(e,eo(e))}function Ki(e,t,n){var r=null==e?S:Lt(e,dr(t),t+"");return r===S?n:r}function Ji(e,t){if(null==e)return!1;var n=ta.call(e,t);if(!n&&!er(t)){if(t=dr(t),e=1==t.length?e:Lt(e,Ut(t,0,-1)),null==e)return!1;t=Nr(t),n=ta.call(e,t)}return n||nr(e.length)&&Jn(t,e.length)&&(Ps(e)||Si(e))}function Qi(e,t,n){n&&Qn(e,t,n)&&(t=S);for(var r=-1,i=Fs(e),o=i.length,a={};++r<o;){var s=i[r],u=e[s];t?ta.call(a,u)?a[u].push(s):a[u]=[s]:a[u]=s}return a}function eo(e){if(null==e)return[];Li(e)||(e=Wo(e));var t=e.length;t=t&&nr(t)&&(Ps(e)||Si(e))&&t||0;for(var n=e.constructor,r=-1,i="function"==typeof n&&n.prototype===e,o=Vo(t),a=t>0;++r<t;)o[r]=r+"";for(var s in e)a&&Jn(s,t)||"constructor"==s&&(i||!ta.call(e,s))||o.push(s);return o}function to(e){e=hr(e);for(var t=-1,n=Fs(e),r=n.length,i=Vo(r);++t<r;){var o=n[t];i[t]=[o,e[o]]}return i}function no(e,t,n){var r=null==e?S:e[t];return r===S&&(null==e||er(t,e)||(t=dr(t),e=1==t.length?e:Lt(e,Ut(t,0,-1)),r=null==e?S:e[Nr(t)]),r=r===S?n:r),Ii(r)?r.call(e):r}function ro(e,t,n){if(null==e)return e;var r=t+"";t=null!=e[r]||er(t,e)?[r]:dr(t);for(var i=-1,o=t.length,a=o-1,s=e;null!=s&&++i<o;){var u=t[i];Li(s)&&(i==a?s[u]=n:null==s[u]&&(s[u]=Jn(t[i+1])?[]:{})),s=s[u]}return e}function io(e,t,n,r){var i=Ps(e)||Xi(e);if(t=Vn(t,r,4),null==n)if(i||Li(e)){var o=e.constructor;n=i?Ps(e)?new o:[]:Oa(Ii(o)?o.prototype:S)}else n={};return(i?tt:Mt)(e,function(e,r,i){return t(n,e,r,i)}),n}function oo(e){return en(e,Fs(e))}function ao(e){return en(e,eo(e))}function so(e,t,n){return t=+t||0,n===S?(n=t,t=0):n=+n||0,e>=Ea(t,n)&&e<_a(t,n)}function uo(e,t,n){n&&Qn(e,t,n)&&(t=n=S);var r=null==e,i=null==t;if(null==n&&(i&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,i=!0)),r&&i&&(t=1,i=!1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1){var o=Na();return Ea(e+o*(t-e+ua("1e-"+((o+"").length-1))),t)}return Gt(e,t)}function lo(e){return e=s(e),e&&e.charAt(0).toUpperCase()+e.slice(1)}function co(e){return e=s(e),e&&e.replace(je,d).replace(Pe,"")}function ho(e,t,n){e=s(e),t+="";var r=e.length;return n=n===S?r:Ea(0>n?0:+n||0,r),n-=t.length,n>=0&&e.indexOf(t,n)==n}function fo(e){return e=s(e),e&&xe.test(e)?e.replace(me,f):e}function po(e){return e=s(e),e&&De.test(e)?e.replace(Te,p):e||"(?:)"}function vo(e,t,n){e=s(e),t=+t;var r=e.length;if(r>=t||!xa(t))return e;var i=(t-r)/2,o=ma(i),a=ga(i);return n=In("",a,n),n.slice(0,o)+e+n}function go(e,t,n){return(n?Qn(e,t,n):null==t)?t=0:t&&(t=+t),e=xo(e),Sa(e,t||(Ie.test(e)?16:10))}function yo(e,t){var n="";if(e=s(e),t=+t,1>t||!e||!xa(t))return n;do t%2&&(n+=e),t=ma(t/2),e+=e;while(t);return n}function mo(e,t,n){return e=s(e),n=null==n?0:Ea(0>n?0:+n||0,e.length),e.lastIndexOf(t,n)==n}function bo(e,n,r){var i=t.templateSettings;r&&Qn(e,n,r)&&(n=r=S),e=s(e),n=gt(yt({},r||n),i,vt);var o,a,u=gt(yt({},n.imports),i.imports,vt),l=Fs(u),c=en(u,l),h=0,d=n.interpolate||Be,f="__p += '",p=Uo((n.escape||Be).source+"|"+d.source+"|"+(d===Ee?Me:Be).source+"|"+(n.evaluate||Be).source+"|$","g"),g="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Ve+"]")+"\n";e.replace(p,function(t,n,r,i,s,u){return r||(r=i),f+=e.slice(h,u).replace(Re,v),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=u+t.length,t}),f+="';\n";var y=n.variable;y||(f="with (obj) {\n"+f+"\n}\n"),f=(a?f.replace(pe,""):f).replace(ve,"$1").replace(ge,"$1;"),f="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=Ks(function(){return Yo(l,g+"return "+f).apply(S,c)});if(m.source=f,Mi(m))throw m;return m}function xo(e,t,n){var r=e;return(e=s(e))?(n?Qn(r,t,n):null==t)?e.slice(w(e),_(e)+1):(t+="",e.slice(u(e,t),l(e,t)+1)):e}function wo(e,t,n){var r=e;return e=s(e),e?e.slice((n?Qn(r,t,n):null==t)?w(e):u(e,t+"")):e}function _o(e,t,n){var r=e;return e=s(e),e?(n?Qn(r,t,n):null==t)?e.slice(0,_(e)+1):e.slice(0,l(e,t+"")+1):e}function Eo(e,t,n){n&&Qn(e,t,n)&&(t=S);var r=j,i=B;if(null!=t)if(Li(t)){var o="separator"in t?t.separator:o;r="length"in t?+t.length||0:r,i="omission"in t?s(t.omission):i}else r=+t||0;if(e=s(e),r>=e.length)return e;var a=r-i.length;if(1>a)return i;var u=e.slice(0,a);if(null==o)return u+i;if(Vi(o)){if(e.slice(a).search(o)){var l,c,h=e.slice(0,a);for(o.global||(o=Uo(o.source,(Ae.exec(o)||"")+"g")),o.lastIndex=0;l=o.exec(h);)c=l.index;u=u.slice(0,null==c?a:c)}}else if(e.indexOf(o,a)!=a){var d=u.lastIndexOf(o);d>-1&&(u=u.slice(0,d))}return u+i}function ko(e){return e=s(e),e&&be.test(e)?e.replace(ye,E):e}function So(e,t,n){return n&&Qn(e,t,n)&&(t=S),e=s(e),e.match(t||ze)||[]}function No(e,t,n){return n&&Qn(e,t,n)&&(t=S),y(e)?Po(e):xt(e,t)}function To(e){return function(){return e}}function Do(e){return e}function Po(e){return zt(wt(e,!0))}function Co(e,t){return Ft(e,wt(t,!0))}function Mo(e,t,n){if(null==n){var r=Li(t),i=r?Fs(t):S,o=i&&i.length?It(t,i):S;(o?o.length:r)||(o=!1,n=t,t=e,e=this)}o||(o=It(t,Fs(t)));var a=!0,s=-1,u=Ii(e),l=o.length;n===!1?a=!1:Li(n)&&"chain"in n&&(a=n.chain);for(;++s<l;){var c=o[s],h=t[c];e[c]=h,u&&(e.prototype[c]=function(t){return function(){var n=this.__chain__;if(a||n){var r=e(this.__wrapped__),i=r.__actions__=et(this.__actions__);return i.push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}return t.apply(e,lt([this.value()],arguments))}}(h))}return e}function Ao(){return nt._=ia,this}function Io(){}function Lo(e){return er(e)?Xt(e):Yt(e)}function Oo(e){return function(t){return Lt(e,dr(t),t+"")}}function jo(e,t,n){n&&Qn(e,t,n)&&(t=n=S),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;for(var r=-1,i=_a(ga((t-e)/(n||1)),0),o=Vo(i);++r<i;)o[r]=e,e+=n;return o}function Bo(e,t,n){if(e=ma(e),1>e||!xa(e))return[];var r=-1,i=Vo(Ea(e,Pa));for(t=an(t,n,1);++r<e;)Pa>r?i[r]=t(r):t(r);return i}function Ro(e){var t=++na;return s(e)+t}function zo(e,t){return(+e||0)+(+t||0)}function Fo(e,t,n){return n&&Qn(e,t,n)&&(t=S),t=Vn(t,n,3),1==t.length?ft(Ps(e)?e:cr(e),t):Jt(e,t)}e=e?rt.defaults(nt.Object(),e,rt.pick(nt,Fe)):nt;{var Vo=e.Array,qo=e.Date,Xo=e.Error,Yo=e.Function,$o=e.Math,Go=e.Number,Wo=e.Object,Uo=e.RegExp,Ho=e.String,Zo=e.TypeError,Ko=Vo.prototype,Jo=Wo.prototype,Qo=Ho.prototype,ea=Yo.prototype.toString,ta=Jo.hasOwnProperty,na=0,ra=Jo.toString,ia=nt._,oa=Uo("^"+ea.call(ta).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aa=e.ArrayBuffer,sa=e.clearTimeout,ua=e.parseFloat,la=$o.pow,ca=Jo.propertyIsEnumerable,ha=$n(e,"Set"),da=e.setTimeout,fa=Ko.splice,pa=e.Uint8Array,va=$n(e,"WeakMap"),ga=$o.ceil,ya=$n(Wo,"create"),ma=$o.floor,ba=$n(Vo,"isArray"),xa=e.isFinite,wa=$n(Wo,"keys"),_a=$o.max,Ea=$o.min,ka=$n(qo,"now"),Sa=e.parseInt,Na=$o.random,Ta=Go.NEGATIVE_INFINITY,Da=Go.POSITIVE_INFINITY,Pa=4294967295,Ca=Pa-1,Ma=Pa>>>1,Aa=9007199254740991,Ia=va&&new va,La={};t.support={}}t.templateSettings={escape:we,evaluate:_e,interpolate:Ee,variable:"",imports:{_:t}};var Oa=function(){function e(){}return function(t){if(Li(t)){e.prototype=t;var n=new e;e.prototype=S}return n||{}}}(),ja=dn(Mt),Ba=dn(At,!0),Ra=fn(),za=fn(!0),Fa=Ia?function(e,t){return Ia.set(e,t),e}:Do,Va=Ia?function(e){return Ia.get(e)}:Io,qa=Xt("length"),Xa=function(){var e=0,t=0;return function(n,r){var i=vs(),o=z-(i-t);if(t=i,o>0){if(++e>=R)return n}else e=0;return Fa(n,r)}}(),Ya=yi(function(e,t){return y(e)&&Kn(e)?Et(e,Pt(t,!1,!0)):[]}),$a=_n(),Ga=_n(!0),Wa=yi(function(e){for(var t=e.length,n=t,r=Vo(h),i=Xn(),a=i==o,s=[];n--;){var u=e[n]=Kn(u=e[n])?u:[];r[n]=a&&u.length>=120?vn(n&&u):null}var l=e[0],c=-1,h=l?l.length:0,d=r[0];e:for(;++c<h;)if(u=l[c],(d?Ke(d,u):i(s,u,0))<0){for(var n=t;--n;){var f=r[n];if((f?Ke(f,u):i(e[n],u,0))<0)continue e}d&&d.push(u),s.push(u)}return s}),Ua=yi(function(e,t){t=Pt(t);var n=mt(e,t);return $t(e,t.sort(r)),n}),Ha=jn(),Za=jn(!0),Ka=yi(function(e){return Qt(Pt(e,!1,!0))}),Ja=yi(function(e,t){return Kn(e)?Et(e,t):[]}),Qa=yi(Br),es=yi(function(e){var t=e.length,n=t>2?e[t-2]:S,r=t>1?e[t-1]:S;return t>2&&"function"==typeof n?t-=2:(n=t>1&&"function"==typeof r?(--t,r):S,r=S),e.length=t,Rr(e,n,r)}),ts=yi(function(e){return e=Pt(e),this.thru(function(t){return Qe(Ps(t)?t:[hr(t)],e)})}),ns=yi(function(e,t){return mt(e,Pt(t))}),rs=cn(function(e,t,n){ta.call(e,n)?++e[n]:e[n]=1}),is=wn(ja),os=wn(Ba,!0),as=Sn(tt,ja),ss=Sn(it,Ba),us=cn(function(e,t,n){ta.call(e,n)?e[n].push(t):e[n]=[t]}),ls=cn(function(e,t,n){e[n]=t}),cs=yi(function(e,t,n){var r=-1,i="function"==typeof t,o=er(t),a=Kn(e)?Vo(e.length):[];return ja(e,function(e){var s=i?t:o&&null!=e?e[t]:S;a[++r]=s?s.apply(e,n):Zn(e,t,n)}),a}),hs=cn(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),ds=Mn(ct,ja),fs=Mn(ht,Ba),ps=yi(function(e,t){if(null==e)return[];var n=t[2];return n&&Qn(t[0],t[1],n)&&(t.length=1),Kt(e,Pt(t),[])}),vs=ka||function(){return(new qo).getTime()},gs=yi(function(e,t,n){var r=T;if(n.length){var i=b(n,gs.placeholder);r|=A}return Bn(e,r,t,n,i)}),ys=yi(function(e,t){t=t.length?Pt(t):Zi(e);for(var n=-1,r=t.length;++n<r;){var i=t[n];e[i]=Bn(e[i],T,e)}return e}),ms=yi(function(e,t,n){var r=T|D;if(n.length){var i=b(n,ms.placeholder);r|=A}return Bn(t,r,e,n,i)}),bs=mn(C),xs=mn(M),ws=yi(function(e,t){return _t(e,1,t)}),_s=yi(function(e,t,n){return _t(e,t,n)}),Es=kn(),ks=kn(!0),Ss=yi(function(e,t){if(t=Pt(t),"function"!=typeof e||!ot(t,a))throw new Zo(X);var n=t.length;return yi(function(r){for(var i=Ea(r.length,n);i--;)r[i]=t[i](r[i]);return e.apply(this,r)})}),Ns=Cn(A),Ts=Cn(I),Ds=yi(function(e,t){return Bn(e,O,S,S,S,Pt(t))}),Ps=ba||function(e){return y(e)&&nr(e.length)&&ra.call(e)==G},Cs=hn(Vt),Ms=hn(function(e,t,n){return n?gt(e,t,n):yt(e,t)}),As=bn(Ms,pt),Is=bn(Cs,or),Ls=En(Mt),Os=En(At),js=Nn(Ra),Bs=Nn(za),Rs=Tn(Mt),zs=Tn(At),Fs=wa?function(e){var t=null==e?S:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&Kn(e)?lr(e):Li(e)?wa(e):[]}:lr,Vs=Dn(!0),qs=Dn(),Xs=yi(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=ut(Pt(t),Ho);return ar(e,Et(eo(e),t))}var n=an(t[0],t[1],3);return sr(e,function(e,t,r){return!n(e,t,r)})}),Ys=yi(function(e,t){return null==e?{}:"function"==typeof t[0]?sr(e,an(t[0],t[1],3)):ar(e,Pt(t))}),$s=gn(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),Gs=gn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Ws=Pn(),Us=Pn(!0),Hs=gn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Zs=gn(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Ks=yi(function(e,t){try{return e.apply(S,t)}catch(n){return Mi(n)?n:new Xo(n)}}),Js=yi(function(e,t){return function(n){return Zn(n,e,t)}}),Qs=yi(function(e,t){return function(n){return Zn(e,n,t)}}),eu=On("ceil"),tu=On("floor"),nu=xn(Ei,Ta),ru=xn($i,Da),iu=On("round");return t.prototype=n.prototype,m.prototype=Oa(n.prototype),m.prototype.constructor=m,K.prototype=Oa(n.prototype),K.prototype.constructor=K,$e.prototype["delete"]=Ge,$e.prototype.get=We,$e.prototype.has=Ue,$e.prototype.set=He,Ze.prototype.push=Je,pi.Cache=$e,t.after=ci,t.ary=hi,t.assign=Ms,t.at=ns,t.before=di,t.bind=gs,t.bindAll=ys,t.bindKey=ms,t.callback=No,t.chain=Vr,t.chunk=pr,t.compact=vr,t.constant=To,t.countBy=rs,t.create=Hi,t.curry=bs,t.curryRight=xs,t.debounce=fi,t.defaults=As,t.defaultsDeep=Is,t.defer=ws,t.delay=_s,t.difference=Ya,t.drop=gr,t.dropRight=yr,t.dropRightWhile=mr,t.dropWhile=br,t.fill=xr,t.filter=Kr,t.flatten=_r,t.flattenDeep=Er,t.flow=Es,t.flowRight=ks,t.forEach=as,t.forEachRight=ss,t.forIn=js,t.forInRight=Bs,t.forOwn=Rs,t.forOwnRight=zs,t.functions=Zi,t.groupBy=us,t.indexBy=ls,t.initial=Sr,t.intersection=Wa,t.invert=Qi,t.invoke=cs,t.keys=Fs,t.keysIn=eo,t.map=ei,t.mapKeys=Vs,t.mapValues=qs,t.matches=Po,t.matchesProperty=Co,t.memoize=pi,t.merge=Cs,t.method=Js,t.methodOf=Qs,t.mixin=Mo,t.modArgs=Ss,t.negate=vi,t.omit=Xs,t.once=gi,t.pairs=to,t.partial=Ns,t.partialRight=Ts,t.partition=hs,t.pick=Ys,t.pluck=ti,t.property=Lo,t.propertyOf=Oo,t.pull=Dr,t.pullAt=Ua,t.range=jo,t.rearg=Ds,t.reject=ni,t.remove=Pr,t.rest=Cr,t.restParam=yi,t.set=ro,t.shuffle=ii,t.slice=Mr,t.sortBy=si,t.sortByAll=ps,t.sortByOrder=ui,t.spread=mi,t.take=Ar,t.takeRight=Ir,t.takeRightWhile=Lr,t.takeWhile=Or,t.tap=qr,t.throttle=bi,t.thru=Xr,t.times=Bo,t.toArray=Wi,t.toPlainObject=Ui,t.transform=io,t.union=Ka,t.uniq=jr,t.unzip=Br,t.unzipWith=Rr,t.values=oo,t.valuesIn=ao,t.where=li,t.without=Ja,t.wrap=xi,t.xor=zr,t.zip=Qa,t.zipObject=Fr,t.zipWith=es,t.backflow=ks,t.collect=ei,t.compose=ks,t.each=as,t.eachRight=ss,t.extend=Ms,t.iteratee=No,t.methods=Zi,t.object=Fr,t.select=Kr,t.tail=Cr,t.unique=jr,Mo(t,t),t.add=zo,t.attempt=Ks,t.camelCase=$s,t.capitalize=lo,t.ceil=eu,t.clone=wi,t.cloneDeep=_i,t.deburr=co,t.endsWith=ho,t.escape=fo,t.escapeRegExp=po,t.every=Zr,t.find=is,t.findIndex=$a,t.findKey=Ls,t.findLast=os,t.findLastIndex=Ga,t.findLastKey=Os,t.findWhere=Jr,t.first=wr,t.floor=tu,t.get=Ki,t.gt=Ei,t.gte=ki,t.has=Ji,t.identity=Do,t.includes=Qr,t.indexOf=kr,t.inRange=so,t.isArguments=Si,t.isArray=Ps,t.isBoolean=Ni,t.isDate=Ti,t.isElement=Di,t.isEmpty=Pi,t.isEqual=Ci,t.isError=Mi,t.isFinite=Ai,t.isFunction=Ii,t.isMatch=Oi,t.isNaN=ji,t.isNative=Bi,t.isNull=Ri,t.isNumber=zi,t.isObject=Li,t.isPlainObject=Fi,t.isRegExp=Vi,t.isString=qi,t.isTypedArray=Xi,t.isUndefined=Yi,t.kebabCase=Gs,t.last=Nr,t.lastIndexOf=Tr,t.lt=$i,t.lte=Gi,t.max=nu,t.min=ru,t.noConflict=Ao,t.noop=Io,t.now=vs,t.pad=vo,t.padLeft=Ws,t.padRight=Us,t.parseInt=go,t.random=uo,t.reduce=ds,t.reduceRight=fs,t.repeat=yo,t.result=no,t.round=iu,t.runInContext=k,t.size=oi,t.snakeCase=Hs,t.some=ai,t.sortedIndex=Ha,t.sortedLastIndex=Za,t.startCase=Zs,t.startsWith=mo,t.sum=Fo,t.template=bo,t.trim=xo,t.trimLeft=wo,t.trimRight=_o,t.trunc=Eo,t.unescape=ko,t.uniqueId=Ro,t.words=So,t.all=Zr,t.any=ai,t.contains=Qr,t.eq=Ci,t.detect=is,t.foldl=ds,t.foldr=fs,t.head=wr,t.include=Qr,t.inject=ds,Mo(t,function(){var e={};return Mt(t,function(n,r){t.prototype[r]||(e[r]=n)}),e}(),!1),t.sample=ri,t.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return ri(t,e)}):ri(this.value())},t.VERSION=N,tt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){t[e].placeholder=t}),tt(["drop","take"],function(e,t){K.prototype[e]=function(n){var r=this.__filtered__;if(r&&!t)return new K(this);n=null==n?1:_a(ma(n)||0,0);var i=this.clone();return r?i.__takeCount__=Ea(i.__takeCount__,n):i.__views__.push({size:n,type:e+(i.__dir__<0?"Right":"")}),i},K.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),tt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n!=q;K.prototype[e]=function(e,t){var i=this.clone();return i.__iteratees__.push({iteratee:Vn(e,t,1),type:n}),i.__filtered__=i.__filtered__||r,i}}),tt(["first","last"],function(e,t){var n="take"+(t?"Right":"");K.prototype[e]=function(){return this[n](1).value()[0]}}),tt(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");K.prototype[e]=function(){return this.__filtered__?new K(this):this[n](1)}}),tt(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?zt:Lo;K.prototype[e]=function(e){return this[n](r(e))}}),K.prototype.compact=function(){return this.filter(Do)},K.prototype.reject=function(e,t){return e=Vn(e,t,1),this.filter(function(t){return!e(t)})},K.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return n.__filtered__&&(e>0||0>t)?new K(n):(0>e?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==S&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n)},K.prototype.takeRightWhile=function(e,t){return this.reverse().takeWhile(e,t).reverse()},K.prototype.toArray=function(){return this.take(Da)},Mt(K.prototype,function(e,n){var r=/^(?:filter|map|reject)|While$/.test(n),i=/^(?:first|last)$/.test(n),o=t[i?"take"+("last"==n?"Right":""):n];o&&(t.prototype[n]=function(){var t=i?[1]:arguments,n=this.__chain__,a=this.__wrapped__,s=!!this.__actions__.length,u=a instanceof K,l=t[0],c=u||Ps(a);c&&r&&"function"==typeof l&&1!=l.length&&(u=c=!1);var h=function(e){return i&&n?o(e,1)[0]:o.apply(S,lt([e],t))},d={func:Xr,args:[h],thisArg:S},f=u&&!s;if(i&&!n)return f?(a=a.clone(),a.__actions__.push(d),e.call(a)):o.call(S,this.value())[0];if(!i&&c){a=f?a:new K(this);var p=e.apply(a,t);return p.__actions__.push(d),new m(p,n)}return this.thru(h)})}),tt(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var n=(/^(?:replace|split)$/.test(e)?Qo:Ko)[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(e);t.prototype[e]=function(){var e=arguments;return i&&!this.__chain__?n.apply(this.value(),e):this[r](function(t){return n.apply(t,e)})}}),Mt(K.prototype,function(e,n){var r=t[n];if(r){var i=r.name,o=La[i]||(La[i]=[]);o.push({name:n,func:r})}}),La[An(S,D).name]=[{name:"wrapper",func:S}],K.prototype.clone=te,K.prototype.reverse=re,K.prototype.value=Ye,t.prototype.chain=Yr,t.prototype.commit=$r,t.prototype.concat=ts,t.prototype.plant=Gr,t.prototype.reverse=Wr,t.prototype.toString=Ur,t.prototype.run=t.prototype.toJSON=t.prototype.valueOf=t.prototype.value=Hr,t.prototype.collect=t.prototype.map,t.prototype.head=t.prototype.first,t.prototype.select=t.prototype.filter,t.prototype.tail=t.prototype.rest,t}var S,N="3.10.1",T=1,D=2,P=4,C=8,M=16,A=32,I=64,L=128,O=256,j=30,B="...",R=150,z=16,F=200,V=1,q=2,X="Expected a function",Y="__lodash_placeholder__",$="[object Arguments]",G="[object Array]",W="[object Boolean]",U="[object Date]",H="[object Error]",Z="[object Function]",K="[object Map]",J="[object Number]",Q="[object Object]",ee="[object RegExp]",te="[object Set]",ne="[object String]",re="[object WeakMap]",ie="[object ArrayBuffer]",oe="[object Float32Array]",ae="[object Float64Array]",se="[object Int8Array]",ue="[object Int16Array]",le="[object Int32Array]",ce="[object Uint8Array]",he="[object Uint8ClampedArray]",de="[object Uint16Array]",fe="[object Uint32Array]",pe=/\b__p \+= '';/g,ve=/\b(__p \+=) '' \+/g,ge=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ye=/&(?:amp|lt|gt|quot|#39|#96);/g,me=/[&<>"'`]/g,be=RegExp(ye.source),xe=RegExp(me.source),we=/<%-([\s\S]+?)%>/g,_e=/<%([\s\S]+?)%>/g,Ee=/<%=([\s\S]+?)%>/g,ke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Se=/^\w*$/,Ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Te=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,De=RegExp(Te.source),Pe=/[\u0300-\u036f\ufe20-\ufe23]/g,Ce=/\\(\\)?/g,Me=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ae=/\w*$/,Ie=/^0[xX]/,Le=/^\[object .+?Constructor\]$/,Oe=/^\d+$/,je=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Be=/($^)/,Re=/['\n\r\u2028\u2029\\]/g,ze=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"+(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),Fe=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Ve=-1,qe={};qe[oe]=qe[ae]=qe[se]=qe[ue]=qe[le]=qe[ce]=qe[he]=qe[de]=qe[fe]=!0,qe[$]=qe[G]=qe[ie]=qe[W]=qe[U]=qe[H]=qe[Z]=qe[K]=qe[J]=qe[Q]=qe[ee]=qe[te]=qe[ne]=qe[re]=!1;var Xe={};Xe[$]=Xe[G]=Xe[ie]=Xe[W]=Xe[U]=Xe[oe]=Xe[ae]=Xe[se]=Xe[ue]=Xe[le]=Xe[J]=Xe[Q]=Xe[ee]=Xe[ne]=Xe[ce]=Xe[he]=Xe[de]=Xe[fe]=!0,Xe[H]=Xe[Z]=Xe[K]=Xe[te]=Xe[re]=!1;var Ye={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},$e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ge={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},We={"function":!0,object:!0},Ue={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},He={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ze=We[typeof n]&&n&&!n.nodeType&&n,Ke=We[typeof t]&&t&&!t.nodeType&&t,Je=Ze&&Ke&&"object"==typeof e&&e&&e.Object&&e,Qe=We[typeof self]&&self&&self.Object&&self,et=We[typeof window]&&window&&window.Object&&window,tt=Ke&&Ke.exports===Ze&&Ze,nt=Je||et!==(this&&this.window)&&et||Qe||this,rt=k();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(nt._=rt,define(function(){return rt})):Ze&&Ke?tt?(Ke.exports=rt)._=rt:Ze._=rt:nt._=rt}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],58:[function(e,t,n){function r(){}var i=t.exports={};i.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=r,i.addListener=r,i.once=r,i.off=r,i.removeListener=r,i.removeAllListeners=r,i.emit=r,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],59:[function(e,t,n){!function(e,r){"function"==typeof define&&define.amd?define(function(){return e.returnExportsGlobal=r()}):"object"==typeof n?t.exports=r():e.Springy=r()}(this,function(){var e={},t=e.Graph=function(){this.nodeSet={},this.nodes=[],this.edges=[],this.adjacency={},this.nextNodeId=0,this.nextEdgeId=0,this.eventListeners=[]},n=e.Node=function(e,t){this.id=e,this.data=void 0!==t?t:{}},r=e.Edge=function(e,t,n,r){this.id=e,this.source=t,this.target=n,this.data=void 0!==r?r:{}};t.prototype.addNode=function(e){return e.id in this.nodeSet||this.nodes.push(e),this.nodeSet[e.id]=e,this.notify(),e},t.prototype.addNodes=function(){for(var e=0;e<arguments.length;e++){var t=arguments[e],r=new n(t,{label:t});this.addNode(r)}},t.prototype.addEdge=function(e){var t=!1;return this.edges.forEach(function(n){e.id===n.id&&(t=!0)}),t||this.edges.push(e),e.source.id in this.adjacency||(this.adjacency[e.source.id]={}),e.target.id in this.adjacency[e.source.id]||(this.adjacency[e.source.id][e.target.id]=[]),t=!1,this.adjacency[e.source.id][e.target.id].forEach(function(n){e.id===n.id&&(t=!0)}),t||this.adjacency[e.source.id][e.target.id].push(e),this.notify(),e},t.prototype.addEdges=function(){for(var e=0;e<arguments.length;e++){var t=arguments[e],n=this.nodeSet[t[0]];if(void 0==n)throw new TypeError("invalid node name: "+t[0]);var r=this.nodeSet[t[1]];if(void 0==r)throw new TypeError("invalid node name: "+t[1]);var i=t[2];this.newEdge(n,r,i)}},t.prototype.newNode=function(e){var t=new n(this.nextNodeId++,e);return this.addNode(t),t},t.prototype.newEdge=function(e,t,n){var i=new r(this.nextEdgeId++,e,t,n);return this.addEdge(i),i},t.prototype.loadJSON=function(e){("string"==typeof e||e instanceof String)&&(e=JSON.parse(e)),("nodes"in e||"edges"in e)&&(this.addNodes.apply(this,e.nodes),this.addEdges.apply(this,e.edges))},t.prototype.getEdges=function(e,t){return e.id in this.adjacency&&t.id in this.adjacency[e.id]?this.adjacency[e.id][t.id]:[]},t.prototype.removeNode=function(e){e.id in this.nodeSet&&delete this.nodeSet[e.id];for(var t=this.nodes.length-1;t>=0;t--)this.nodes[t].id===e.id&&this.nodes.splice(t,1);this.detachNode(e)},t.prototype.detachNode=function(e){var t=this.edges.slice();t.forEach(function(t){(t.source.id===e.id||t.target.id===e.id)&&this.removeEdge(t)},this),this.notify()},t.prototype.removeEdge=function(e){for(var t=this.edges.length-1;t>=0;t--)this.edges[t].id===e.id&&this.edges.splice(t,1);for(var n in this.adjacency){for(var r in this.adjacency[n]){for(var i=this.adjacency[n][r],o=i.length-1;o>=0;o--)this.adjacency[n][r][o].id===e.id&&this.adjacency[n][r].splice(o,1);0==this.adjacency[n][r].length&&delete this.adjacency[n][r]}u(this.adjacency[n])&&delete this.adjacency[n]}this.notify()},t.prototype.merge=function(e){var t=[];e.nodes.forEach(function(e){t.push(this.addNode(new n(e.id,e.data)))},this),e.edges.forEach(function(e){var n=t[e.from],i=t[e.to],o=e.directed?o=e.type+"-"+n.id+"-"+i.id:n.id<i.id?e.type+"-"+n.id+"-"+i.id:e.type+"-"+i.id+"-"+n.id,a=this.addEdge(new r(o,n,i,e.data));a.data.type=e.type},this)},t.prototype.filterNodes=function(e){var t=this.nodes.slice();t.forEach(function(t){e(t)||this.removeNode(t)},this)},t.prototype.filterEdges=function(e){var t=this.edges.slice();t.forEach(function(t){e(t)||this.removeEdge(t)},this)},t.prototype.addGraphListener=function(e){this.eventListeners.push(e)},t.prototype.notify=function(){this.eventListeners.forEach(function(e){e.graphChanged()})};var i=e.Layout={};i.ForceDirected=function(e,t,n,r,i){this.graph=e,this.stiffness=t,this.repulsion=n,this.damping=r,this.minEnergyThreshold=i||.01,this.nodePoints={},this.edgeSprings={}},i.ForceDirected.prototype.point=function(e){if(!(e.id in this.nodePoints)){var t=void 0!==e.data.mass?e.data.mass:1;this.nodePoints[e.id]=new i.ForceDirected.Point(a.random(),t);

}return this.nodePoints[e.id]},i.ForceDirected.prototype.spring=function(e){if(!(e.id in this.edgeSprings)){var t=void 0!==e.data.length?e.data.length:1,n=!1,r=this.graph.getEdges(e.source,e.target);if(r.forEach(function(e){n===!1&&e.id in this.edgeSprings&&(n=this.edgeSprings[e.id])},this),n!==!1)return new i.ForceDirected.Spring(n.point1,n.point2,0,0);{this.graph.getEdges(e.target,e.source)}if(r.forEach(function(e){n===!1&&e.id in this.edgeSprings&&(n=this.edgeSprings[e.id])},this),n!==!1)return new i.ForceDirected.Spring(n.point2,n.point1,0,0);this.edgeSprings[e.id]=new i.ForceDirected.Spring(this.point(e.source),this.point(e.target),t,this.stiffness)}return this.edgeSprings[e.id]},i.ForceDirected.prototype.eachNode=function(e){var t=this;this.graph.nodes.forEach(function(n){e.call(t,n,t.point(n))})},i.ForceDirected.prototype.eachEdge=function(e){var t=this;this.graph.edges.forEach(function(n){e.call(t,n,t.spring(n))})},i.ForceDirected.prototype.eachSpring=function(e){var t=this;this.graph.edges.forEach(function(n){e.call(t,t.spring(n))})},i.ForceDirected.prototype.applyCoulombsLaw=function(){this.eachNode(function(e,t){this.eachNode(function(e,n){if(t!==n){var r=t.p.subtract(n.p),i=r.magnitude()+.1,o=r.normalise();t.applyForce(o.multiply(this.repulsion).divide(i*i*.5)),n.applyForce(o.multiply(this.repulsion).divide(i*i*-.5))}})})},i.ForceDirected.prototype.applyHookesLaw=function(){this.eachSpring(function(e){var t=e.point2.p.subtract(e.point1.p),n=e.length-t.magnitude(),r=t.normalise();e.point1.applyForce(r.multiply(e.k*n*-.5)),e.point2.applyForce(r.multiply(e.k*n*.5))})},i.ForceDirected.prototype.attractToCentre=function(){this.eachNode(function(e,t){var n=t.p.multiply(-1);t.applyForce(n.multiply(this.repulsion/50))})},i.ForceDirected.prototype.updateVelocity=function(e){this.eachNode(function(t,n){n.v=n.v.add(n.a.multiply(e)).multiply(this.damping),n.a=new a(0,0)})},i.ForceDirected.prototype.updatePosition=function(e){this.eachNode(function(t,n){n.p=n.p.add(n.v.multiply(e))})},i.ForceDirected.prototype.totalEnergy=function(e){var t=0;return this.eachNode(function(e,n){var r=n.v.magnitude();t+=.5*n.m*r*r}),t};var o=function(e,t){return function(){return e.apply(t,arguments)}};e.requestAnimationFrame=o(this.requestAnimationFrame||this.webkitRequestAnimationFrame||this.mozRequestAnimationFrame||this.oRequestAnimationFrame||this.msRequestAnimationFrame||function(e,t){this.setTimeout(e,10)},this),i.ForceDirected.prototype.start=function(t,n,r){var i=this;this._started||(this._started=!0,this._stop=!1,void 0!==r&&r(),e.requestAnimationFrame(function o(){i.tick(.03),void 0!==t&&t(),i._stop||i.totalEnergy()<i.minEnergyThreshold?(i._started=!1,void 0!==n&&n()):e.requestAnimationFrame(o)}))},i.ForceDirected.prototype.stop=function(){this._stop=!0},i.ForceDirected.prototype.tick=function(e){this.applyCoulombsLaw(),this.applyHookesLaw(),this.attractToCentre(),this.updateVelocity(e),this.updatePosition(e)},i.ForceDirected.prototype.nearest=function(e){var t={node:null,point:null,distance:null},n=this;return this.graph.nodes.forEach(function(r){var i=n.point(r),o=i.p.subtract(e).magnitude();(null===t.distance||o<t.distance)&&(t={node:r,point:i,distance:o})}),t},i.ForceDirected.prototype.getBoundingBox=function(){var e=new a(-2,-2),t=new a(2,2);this.eachNode(function(n,r){r.p.x<e.x&&(e.x=r.p.x),r.p.y<e.y&&(e.y=r.p.y),r.p.x>t.x&&(t.x=r.p.x),r.p.y>t.y&&(t.y=r.p.y)});var n=t.subtract(e).multiply(.07);return{bottomleft:e.subtract(n),topright:t.add(n)}};var a=e.Vector=function(e,t){this.x=e,this.y=t};a.random=function(){return new a(10*(Math.random()-.5),10*(Math.random()-.5))},a.prototype.add=function(e){return new a(this.x+e.x,this.y+e.y)},a.prototype.subtract=function(e){return new a(this.x-e.x,this.y-e.y)},a.prototype.multiply=function(e){return new a(this.x*e,this.y*e)},a.prototype.divide=function(e){return new a(this.x/e||0,this.y/e||0)},a.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},a.prototype.normal=function(){return new a(-this.y,this.x)},a.prototype.normalise=function(){return this.divide(this.magnitude())},i.ForceDirected.Point=function(e,t){this.p=e,this.m=t,this.v=new a(0,0),this.a=new a(0,0)},i.ForceDirected.Point.prototype.applyForce=function(e){this.a=this.a.add(e.divide(this.m))},i.ForceDirected.Spring=function(e,t,n,r){this.point1=e,this.point2=t,this.length=n,this.k=r};var s=e.Renderer=function(e,t,n,r,i,o){this.layout=e,this.clear=t,this.drawEdge=n,this.drawNode=r,this.onRenderStop=i,this.onRenderStart=o,this.layout.graph.addGraphListener(this)};s.prototype.graphChanged=function(e){this.start()},s.prototype.start=function(e){var t=this;this.layout.start(function(){t.clear(),t.layout.eachEdge(function(e,n){t.drawEdge(e,n.point1.p,n.point2.p)}),t.layout.eachNode(function(e,n){t.drawNode(e,n.p)})},this.onRenderStop,this.onRenderStart)},s.prototype.stop=function(){this.layout.stop()},Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,r;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),o=i.length>>>0;if("[object Function]"!={}.toString.call(e))throw new TypeError(e+" is not a function");for(t&&(n=t),r=0;o>r;){var a;r in i&&(a=i[r],e.call(n,a,r,i)),r++}});var u=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};return e})},{}],60:[function(e,t,n){(function(){function e(e){function t(t,n,r,i,o,a){for(;o>=0&&a>o;o+=e){var s=i?i[o]:o;r=n(r,t[s],s,t)}return r}return function(n,r,i,o){r=w(r,o,4);var a=!D(n)&&x.keys(n),s=(a||n).length,u=e>0?0:s-1;return arguments.length<3&&(i=n[a?a[u]:u],u+=e),t(n,r,i,a,u,s)}}function r(e){return function(t,n,r){n=_(n,r);for(var i=T(t),o=e>0?0:i-1;o>=0&&i>o;o+=e)if(n(t[o],o,t))return o;return-1}}function i(e,t,n){return function(r,i,o){var a=0,s=T(r);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=t(d.call(r,a,s),x.isNaN),o>=0?o+a:-1;for(o=e>0?a:s-1;o>=0&&s>o;o+=e)if(r[o]===i)return o;return-1}}function o(e,t){var n=I.length,r=e.constructor,i=x.isFunction(r)&&r.prototype||l,o="constructor";for(x.has(e,o)&&!x.contains(t,o)&&t.push(o);n--;)o=I[n],o in e&&e[o]!==i[o]&&!x.contains(t,o)&&t.push(o)}var a=this,s=a._,u=Array.prototype,l=Object.prototype,c=Function.prototype,h=u.push,d=u.slice,f=l.toString,p=l.hasOwnProperty,v=Array.isArray,g=Object.keys,y=c.bind,m=Object.create,b=function(){},x=function(e){return e instanceof x?e:this instanceof x?void(this._wrapped=e):new x(e)};"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=x),n._=x):a._=x,x.VERSION="1.8.3";var w=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},_=function(e,t,n){return null==e?x.identity:x.isFunction(e)?w(e,t,n):x.isObject(e)?x.matcher(e):x.property(e)};x.iteratee=function(e,t){return _(e,t,1/0)};var E=function(e,t){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var o=arguments[i],a=e(o),s=a.length,u=0;s>u;u++){var l=a[u];t&&void 0!==n[l]||(n[l]=o[l])}return n}},k=function(e){if(!x.isObject(e))return{};if(m)return m(e);b.prototype=e;var t=new b;return b.prototype=null,t},S=function(e){return function(t){return null==t?void 0:t[e]}},N=Math.pow(2,53)-1,T=S("length"),D=function(e){var t=T(e);return"number"==typeof t&&t>=0&&N>=t};x.each=x.forEach=function(e,t,n){t=w(t,n);var r,i;if(D(e))for(r=0,i=e.length;i>r;r++)t(e[r],r,e);else{var o=x.keys(e);for(r=0,i=o.length;i>r;r++)t(e[o[r]],o[r],e)}return e},x.map=x.collect=function(e,t,n){t=_(t,n);for(var r=!D(e)&&x.keys(e),i=(r||e).length,o=Array(i),a=0;i>a;a++){var s=r?r[a]:a;o[a]=t(e[s],s,e)}return o},x.reduce=x.foldl=x.inject=e(1),x.reduceRight=x.foldr=e(-1),x.find=x.detect=function(e,t,n){var r;return r=D(e)?x.findIndex(e,t,n):x.findKey(e,t,n),void 0!==r&&-1!==r?e[r]:void 0},x.filter=x.select=function(e,t,n){var r=[];return t=_(t,n),x.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},x.reject=function(e,t,n){return x.filter(e,x.negate(_(t)),n)},x.every=x.all=function(e,t,n){t=_(t,n);for(var r=!D(e)&&x.keys(e),i=(r||e).length,o=0;i>o;o++){var a=r?r[o]:o;if(!t(e[a],a,e))return!1}return!0},x.some=x.any=function(e,t,n){t=_(t,n);for(var r=!D(e)&&x.keys(e),i=(r||e).length,o=0;i>o;o++){var a=r?r[o]:o;if(t(e[a],a,e))return!0}return!1},x.contains=x.includes=x.include=function(e,t,n,r){return D(e)||(e=x.values(e)),("number"!=typeof n||r)&&(n=0),x.indexOf(e,t,n)>=0},x.invoke=function(e,t){var n=d.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){var i=r?t:e[t];return null==i?i:i.apply(e,n)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matcher(t))},x.findWhere=function(e,t){return x.find(e,x.matcher(t))},x.max=function(e,t,n){var r,i,o=-(1/0),a=-(1/0);if(null==t&&null!=e){e=D(e)?e:x.values(e);for(var s=0,u=e.length;u>s;s++)r=e[s],r>o&&(o=r)}else t=_(t,n),x.each(e,function(e,n,r){i=t(e,n,r),(i>a||i===-(1/0)&&o===-(1/0))&&(o=e,a=i)});return o},x.min=function(e,t,n){var r,i,o=1/0,a=1/0;if(null==t&&null!=e){e=D(e)?e:x.values(e);for(var s=0,u=e.length;u>s;s++)r=e[s],o>r&&(o=r)}else t=_(t,n),x.each(e,function(e,n,r){i=t(e,n,r),(a>i||i===1/0&&o===1/0)&&(o=e,a=i)});return o},x.shuffle=function(e){for(var t,n=D(e)?e:x.values(e),r=n.length,i=Array(r),o=0;r>o;o++)t=x.random(0,o),t!==o&&(i[o]=i[t]),i[t]=n[o];return i},x.sample=function(e,t,n){return null==t||n?(D(e)||(e=x.values(e)),e[x.random(e.length-1)]):x.shuffle(e).slice(0,Math.max(0,t))},x.sortBy=function(e,t,n){return t=_(t,n),x.pluck(x.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var P=function(e){return function(t,n,r){var i={};return n=_(n,r),x.each(t,function(r,o){var a=n(r,o,t);e(i,r,a)}),i}};x.groupBy=P(function(e,t,n){x.has(e,n)?e[n].push(t):e[n]=[t]}),x.indexBy=P(function(e,t,n){e[n]=t}),x.countBy=P(function(e,t,n){x.has(e,n)?e[n]++:e[n]=1}),x.toArray=function(e){return e?x.isArray(e)?d.call(e):D(e)?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:D(e)?e.length:x.keys(e).length},x.partition=function(e,t,n){t=_(t,n);var r=[],i=[];return x.each(e,function(e,n,o){(t(e,n,o)?r:i).push(e)}),[r,i]},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:x.initial(e,e.length-t)},x.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:x.rest(e,Math.max(0,e.length-t))},x.rest=x.tail=x.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var C=function(e,t,n,r){for(var i=[],o=0,a=r||0,s=T(e);s>a;a++){var u=e[a];if(D(u)&&(x.isArray(u)||x.isArguments(u))){t||(u=C(u,t,n));var l=0,c=u.length;for(i.length+=c;c>l;)i[o++]=u[l++]}else n||(i[o++]=u)}return i};x.flatten=function(e,t){return C(e,t,!1)},x.without=function(e){return x.difference(e,d.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=_(n,r));for(var i=[],o=[],a=0,s=T(e);s>a;a++){var u=e[a],l=n?n(u,a,e):u;t?(a&&o===l||i.push(u),o=l):n?x.contains(o,l)||(o.push(l),i.push(u)):x.contains(i,u)||i.push(u)}return i},x.union=function(){return x.uniq(C(arguments,!0,!0))},x.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=T(e);i>r;r++){var o=e[r];if(!x.contains(t,o)){for(var a=1;n>a&&x.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},x.difference=function(e){var t=C(arguments,!0,!0,1);return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){return x.unzip(arguments)},x.unzip=function(e){for(var t=e&&x.max(e,T).length||0,n=Array(t),r=0;t>r;r++)n[r]=x.pluck(e,r);return n},x.object=function(e,t){for(var n={},r=0,i=T(e);i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.findIndex=r(1),x.findLastIndex=r(-1),x.sortedIndex=function(e,t,n,r){n=_(n,r,1);for(var i=n(t),o=0,a=T(e);a>o;){var s=Math.floor((o+a)/2);n(e[s])<i?o=s+1:a=s}return o},x.indexOf=i(1,x.findIndex,x.sortedIndex),x.lastIndexOf=i(-1,x.findLastIndex),x.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;r>o;o++,e+=n)i[o]=e;return i};var M=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=k(e.prototype),a=e.apply(o,i);return x.isObject(a)?a:o};x.bind=function(e,t){if(y&&e.bind===y)return y.apply(e,d.call(arguments,1));if(!x.isFunction(e))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),r=function(){return M(e,r,t,this,n.concat(d.call(arguments)))};return r},x.partial=function(e){var t=d.call(arguments,1),n=function(){for(var r=0,i=t.length,o=Array(i),a=0;i>a;a++)o[a]=t[a]===x?arguments[r++]:t[a];for(;r<arguments.length;)o.push(arguments[r++]);return M(e,n,this,this,o)};return n},x.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=x.bind(e[n],e);return e},x.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return x.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},x.delay=function(e,t){var n=d.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=x.partial(x.delay,x,1),x.throttle=function(e,t,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:x.now(),a=null,o=e.apply(r,i),a||(r=i=null)};return function(){var l=x.now();s||n.leading!==!1||(s=l);var c=t-(l-s);return r=this,i=arguments,0>=c||c>t?(a&&(clearTimeout(a),a=null),s=l,o=e.apply(r,i),a||(r=i=null)):a||n.trailing===!1||(a=setTimeout(u,c)),o}},x.debounce=function(e,t,n){var r,i,o,a,s,u=function(){var l=x.now()-a;t>l&&l>=0?r=setTimeout(u,t-l):(r=null,n||(s=e.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=x.now();var l=n&&!r;return r||(r=setTimeout(u,t)),l&&(s=e.apply(o,i),o=i=null),s}},x.wrap=function(e,t){return x.partial(t,e)},x.negate=function(e){return function(){return!e.apply(this,arguments)}},x.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},x.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},x.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},x.once=x.partial(x.before,2);var A=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];x.keys=function(e){if(!x.isObject(e))return[];if(g)return g(e);var t=[];for(var n in e)x.has(e,n)&&t.push(n);return A&&o(e,t),t},x.allKeys=function(e){if(!x.isObject(e))return[];var t=[];for(var n in e)t.push(n);return A&&o(e,t),t},x.values=function(e){for(var t=x.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},x.mapObject=function(e,t,n){t=_(t,n);for(var r,i=x.keys(e),o=i.length,a={},s=0;o>s;s++)r=i[s],a[r]=t(e[r],r,e);return a},x.pairs=function(e){for(var t=x.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},x.invert=function(e){for(var t={},n=x.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=E(x.allKeys),x.extendOwn=x.assign=E(x.keys),x.findKey=function(e,t,n){t=_(t,n);for(var r,i=x.keys(e),o=0,a=i.length;a>o;o++)if(r=i[o],t(e[r],r,e))return r},x.pick=function(e,t,n){var r,i,o={},a=e;if(null==a)return o;x.isFunction(t)?(i=x.allKeys(a),r=w(t,n)):(i=C(arguments,!1,!1,1),r=function(e,t,n){return t in n},a=Object(a));for(var s=0,u=i.length;u>s;s++){var l=i[s],c=a[l];r(c,l,a)&&(o[l]=c)}return o},x.omit=function(e,t,n){if(x.isFunction(t))t=x.negate(t);else{var r=x.map(C(arguments,!1,!1,1),String);t=function(e,t){return!x.contains(r,t)}}return x.pick(e,t,n)},x.defaults=E(x.allKeys,!0),x.create=function(e,t){var n=k(e);return t&&x.extendOwn(n,t),n},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e},x.isMatch=function(e,t){var n=x.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;r>o;o++){var a=n[o];if(t[a]!==i[a]||!(a in i))return!1}return!0};var L=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!==f.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),o){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!L(e[u],t[u],n,r))return!1}else{var l,c=x.keys(e);if(u=c.length,x.keys(t).length!==u)return!1;for(;u--;)if(l=c[u],!x.has(t,l)||!L(e[l],t[l],n,r))return!1}return n.pop(),r.pop(),!0};x.isEqual=function(e,t){return L(e,t)},x.isEmpty=function(e){return null==e?!0:D(e)&&(x.isArray(e)||x.isString(e)||x.isArguments(e))?0===e.length:0===x.keys(e).length},x.isElement=function(e){return!(!e||1!==e.nodeType)},x.isArray=v||function(e){return"[object Array]"===f.call(e)},x.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},x.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){x["is"+e]=function(t){return f.call(t)==="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return x.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(x.isFunction=function(e){return"function"==typeof e||!1}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!==+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===f.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return void 0===e},x.has=function(e,t){return null!=e&&p.call(e,t)},x.noConflict=function(){return a._=s,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.noop=function(){},x.property=S,x.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},x.matcher=x.matches=function(e){return e=x.extendOwn({},e),function(t){return x.isMatch(t,e)}},x.times=function(e,t,n){var r=Array(Math.max(0,e));t=w(t,n,1);for(var i=0;e>i;i++)r[i]=t(i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},j=x.invert(O),B=function(e){var t=function(t){return e[t]},n="(?:"+x.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};x.escape=B(O),x.unescape=B(j),x.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),x.isFunction(r)?r.call(e):r};var R=0;x.uniqueId=function(e){var t=++R+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,q=function(e){return"\\"+F[e]};x.template=function(e,t,n){!t&&n&&(t=n),t=x.defaults({},t,x.templateSettings);var r=RegExp([(t.escape||z).source,(t.interpolate||z).source,(t.evaluate||z).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,a,s){return o+=e.slice(i,s).replace(V,q),i=s+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(t.variable||"obj","_",o)}catch(s){throw s.source=o,s}var u=function(e){return a.call(this,e,x)},l=t.variable||"obj";return u.source="function("+l+"){\n"+o+"}",u},x.chain=function(e){var t=x(e);return t._chain=!0,t};var X=function(e,t){return e._chain?x(t).chain():t};x.mixin=function(e){x.each(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return h.apply(e,arguments),X(this,n.apply(x,e))}})},x.mixin(x),x.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=u[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],X(this,n)}}),x.each(["concat","join","slice"],function(e){var t=u[e];x.prototype[e]=function(){return X(this,t.apply(this._wrapped,arguments))}}),x.prototype.value=function(){return this._wrapped},x.prototype.valueOf=x.prototype.toJSON=x.prototype.value,x.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}).call(this)},{}],61:[function(e,t,n){var r;!function(e){function t(e,t,n,i,o){function a(e){function t(e){var t=Number.MAX_VALUE,n=Number.MAX_VALUE,r=0,o=0;e.array.forEach(function(e){var a="undefined"!=typeof e.width?e.width:i,s="undefined"!=typeof e.height?e.height:i;a/=2,s/=2,r=Math.max(e.x+a,r),t=Math.min(e.x-a,t),o=Math.max(e.y+s,o),n=Math.min(e.y-s,n)}),e.width=r-t,e.height=o-n}e.forEach(function(e){t(e)})}function s(e){e.forEach(function(e){var t={x:0,y:0};e.array.forEach(function(e){t.x+=e.x,t.y+=e.y}),t.x/=e.array.length,t.y/=e.array.length;var n={x:t.x-e.width/2,y:t.y-e.height/2},r={x:e.x-n.x+v/2-y/2,y:e.y-n.y+g/2-m/2};e.array.forEach(function(e){e.x+=r.x,e.y+=r.y})})}function u(e,t){var n=Number.POSITIVE_INFINITY,i=0;e.sort(function(e,t){return t.height-e.height}),b=e.reduce(function(e,t){return e.width<t.width?e.width:t.width});for(var o=v=b,a=g=h(e),s=0,u=Number.MAX_VALUE,c=Number.MAX_VALUE,d=-1,f=Number.MAX_VALUE,p=Number.MAX_VALUE;f>b||p>r.FLOAT_EPSILON;){if(1!=d)var v=a-(a-o)/r.GOLDEN_SECTION,u=l(e,v);if(0!=d)var g=o+(a-o)/r.GOLDEN_SECTION,c=l(e,g);if(f=Math.abs(v-g),p=Math.abs(u-c),n>u&&(n=u,i=v),n>c&&(n=c,i=g),u>c?(o=v,v=g,u=c,d=1):(a=g,g=v,c=u,d=0),s++>100)break}l(e,i)}function l(e,t){w=[],y=0,m=0,x=p;for(var n=0;n<e.length;n++){var r=e[n];c(r,t)}return Math.abs(d()-o)}function c(e,t){for(var n=void 0,i=0;i<w.length;i++)if(w[i].space_left>=e.height&&w[i].x+w[i].width+e.width+r.PADDING-t<=r.FLOAT_EPSILON){n=w[i];break}w.push(e),void 0!==n?(e.x=n.x+n.width+r.PADDING,e.y=n.bottom,e.space_left=e.height,e.bottom=e.y,n.space_left-=e.height+r.PADDING,n.bottom+=e.height+r.PADDING):(e.y=x,x+=e.height+r.PADDING,e.x=f,e.bottom=e.y,e.space_left=e.height),e.y+e.height-m>-r.FLOAT_EPSILON&&(m=e.y+e.height-p),e.x+e.width-y>-r.FLOAT_EPSILON&&(y=e.x+e.width-f)}function h(e){var t=0;return e.forEach(function(e){return t+=e.width+r.PADDING}),t}function d(){return y/m}void 0===o&&(o=1);var f=0,p=0,v=t,g=n,o="undefined"!=typeof o?o:1,i="undefined"!=typeof i?i:0,y=0,m=0,b=0,x=0,w=[];0!=e.length&&(a(e),u(e,o),s(e))}function n(e,t){function n(e,t){if(void 0===r[e.index]){t&&(a++,o.push({array:[]})),r[e.index]=a,o[a-1].array.push(e);var s=i[e.index];if(s)for(var u=0;u<s.length;u++)n(s[u],!1)}}for(var r={},i={},o=[],a=0,s=0;s<t.length;s++){var u=t[s],l=u.source,c=u.target;i[l.index]?i[l.index].push(c):i[l.index]=[c],i[c.index]?i[c.index].push(l):i[c.index]=[l]}for(var s=0;s<e.length;s++){var h=e[s];r[h.index]||n(h,!0)}return o}var r={PADDING:10,GOLDEN_SECTION:(1+Math.sqrt(5))/2,FLOAT_EPSILON:1e-4,MAX_INERATIONS:100};e.applyPacking=t,e.separateGraphs=n}(r||(r={}));var r;!function(e){var t;!function(e){var t=function(){function e(e){this.scale=e,this.AB=0,this.AD=0,this.A2=0}return e.prototype.addVariable=function(e){var t=this.scale/e.scale,n=e.offset/e.scale,r=e.weight;this.AB+=r*t*n,this.AD+=r*t*e.desiredPosition,this.A2+=r*t*t},e.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},e}();e.PositionStats=t;var n=function(){function e(e,t,n,r){void 0===r&&(r=!1),this.left=e,this.right=t,this.gap=n,this.equality=r,this.active=!1,this.unsatisfiable=!1,this.left=e,this.right=t,this.gap=n,this.equality=r}return e.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},e}();e.Constraint=n;var r=function(){function e(e,t,n){void 0===t&&(t=1),void 0===n&&(n=1),this.desiredPosition=e,this.weight=t,this.scale=n,this.offset=0}return e.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},e.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},e.prototype.visitNeighbours=function(e,t){var n=function(n,r){return n.active&&e!==r&&t(n,r)};this.cOut.forEach(function(e){return n(e,e.right)}),this.cIn.forEach(function(e){return n(e,e.left)})},e}();e.Variable=r;var i=function(){function e(e){this.vars=[],e.offset=0,this.ps=new t(e.scale),this.addVariable(e)}return e.prototype.addVariable=function(e){e.block=this,this.vars.push(e),this.ps.addVariable(e),this.posn=this.ps.getPosn()},e.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var e=0,t=this.vars.length;t>e;++e)this.ps.addVariable(this.vars[e]);this.posn=this.ps.getPosn()},e.prototype.compute_lm=function(e,t,n){var r=this,i=e.dfdv();return e.visitNeighbours(t,function(t,o){var a=r.compute_lm(o,e,n);o===t.right?(i+=a*t.left.scale,t.lm=a):(i+=a*t.right.scale,t.lm=-a),n(t)}),i/e.scale},e.prototype.populateSplitBlock=function(e,t){var n=this;e.visitNeighbours(t,function(t,r){r.offset=e.offset+(r===t.right?t.gap:-t.gap),n.addVariable(r),n.populateSplitBlock(r,e)})},e.prototype.traverse=function(e,t,n,r){var i=this;void 0===n&&(n=this.vars[0]),void 0===r&&(r=null),n.visitNeighbours(r,function(r,o){t.push(e(r)),i.traverse(e,t,o,n)})},e.prototype.findMinLM=function(){var e=null;return this.compute_lm(this.vars[0],null,function(t){!t.equality&&(null===e||t.lm<e.lm)&&(e=t)}),e},e.prototype.findMinLMBetween=function(e,t){this.compute_lm(e,null,function(){});var n=null;return this.findPath(e,null,t,function(e,t){!e.equality&&e.right===t&&(null===n||e.lm<n.lm)&&(n=e)}),n},e.prototype.findPath=function(e,t,n,r){var i=this,o=!1;return e.visitNeighbours(t,function(t,a){o||a!==n&&!i.findPath(a,e,n,r)||(o=!0,r(t,a))}),o},e.prototype.isActiveDirectedPathBetween=function(e,t){if(e===t)return!0;for(var n=e.cOut.length;n--;){var r=e.cOut[n];if(r.active&&this.isActiveDirectedPathBetween(r.right,t))return!0}return!1},e.split=function(t){return t.active=!1,[e.createSplitBlock(t.left),e.createSplitBlock(t.right)]},e.createSplitBlock=function(t){var n=new e(t);return n.populateSplitBlock(t,null),n},e.prototype.splitBetween=function(t,n){var r=this.findMinLMBetween(t,n);if(null!==r){var i=e.split(r);return{constraint:r,lb:i[0],rb:i[1]}}return null},e.prototype.mergeAcross=function(e,t,n){t.active=!0;for(var r=0,i=e.vars.length;i>r;++r){var o=e.vars[r];o.offset+=n,this.addVariable(o)}this.posn=this.ps.getPosn()},e.prototype.cost=function(){for(var e=0,t=this.vars.length;t--;){var n=this.vars[t],r=n.position()-n.desiredPosition;e+=r*r*n.weight}return e},e}();e.Block=i;var o=function(){function e(e){this.vs=e;var t=e.length;for(this.list=new Array(t);t--;){var n=new i(e[t]);this.list[t]=n,n.blockInd=t}}return e.prototype.cost=function(){for(var e=0,t=this.list.length;t--;)e+=this.list[t].cost();return e},e.prototype.insert=function(e){e.blockInd=this.list.length,this.list.push(e)},e.prototype.remove=function(e){var t=this.list.length-1,n=this.list[t];this.list.length=t,e!==n&&(this.list[e.blockInd]=n,n.blockInd=e.blockInd)},e.prototype.merge=function(e){var t=e.left.block,n=e.right.block,r=e.right.offset-e.left.offset-e.gap;t.vars.length<n.vars.length?(n.mergeAcross(t,e,r),this.remove(t)):(t.mergeAcross(n,e,-r),this.remove(n))},e.prototype.forEach=function(e){this.list.forEach(e)},e.prototype.updateBlockPositions=function(){this.list.forEach(function(e){return e.updateWeightedPosition()})},e.prototype.split=function(e){var t=this;this.updateBlockPositions(),this.list.forEach(function(n){var r=n.findMinLM();null!==r&&r.lm<a.LAGRANGIAN_TOLERANCE&&(n=r.left.block,i.split(r).forEach(function(e){return t.insert(e)}),t.remove(n),e.push(r))})},e}();e.Blocks=o;var a=function(){function e(e,t){this.vs=e,this.cs=t,this.vs=e,e.forEach(function(e){e.cIn=[],e.cOut=[]}),this.cs=t,t.forEach(function(e){e.left.cOut.push(e),e.right.cIn.push(e)}),this.inactive=t.map(function(e){return e.active=!1,e}),this.bs=null}return e.prototype.cost=function(){return this.bs.cost()},e.prototype.setStartingPositions=function(e){this.inactive=this.cs.map(function(e){return e.active=!1,e}),this.bs=new o(this.vs),this.bs.forEach(function(t,n){return t.posn=e[n]})},e.prototype.setDesiredPositions=function(e){this.vs.forEach(function(t,n){return t.desiredPosition=e[n]})},e.prototype.mostViolated=function(){for(var t=Number.MAX_VALUE,n=null,r=this.inactive,i=r.length,o=i,a=0;i>a;++a){var s=r[a];if(!s.unsatisfiable){var u=s.slack();if((s.equality||t>u)&&(t=u,n=s,o=a,s.equality))break}}return o!==i&&(t<e.ZERO_UPPERBOUND&&!n.active||n.equality)&&(r[o]=r[i-1],r.length=i-1),n},e.prototype.satisfy=function(){null==this.bs&&(this.bs=new o(this.vs)),this.bs.split(this.inactive);for(var t=null;(t=this.mostViolated())&&(t.equality||t.slack()<e.ZERO_UPPERBOUND&&!t.active);){var n=t.left.block,r=t.right.block;if(n!==r)this.bs.merge(t);else{if(n.isActiveDirectedPathBetween(t.right,t.left)){t.unsatisfiable=!0;continue}var i=n.splitBetween(t.left,t.right);if(null===i){t.unsatisfiable=!0;continue}this.bs.insert(i.lb),this.bs.insert(i.rb),this.bs.remove(n),this.inactive.push(i.constraint),t.slack()>=0?this.inactive.push(t):this.bs.merge(t)}}},e.prototype.solve=function(){this.satisfy();for(var e=Number.MAX_VALUE,t=this.bs.cost();Math.abs(e-t)>1e-4;)this.satisfy(),e=t,t=this.bs.cost();return t},e.LAGRANGIAN_TOLERANCE=-1e-4,e.ZERO_UPPERBOUND=-1e-10,e}();e.Solver=a}(t=e.vpsc||(e.vpsc={}))}(r||(r={}));var r,i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};!function(e){var t;!function(e){var t=function(){function e(){this.findIter=function(e){for(var t=this._root,n=this.iterator();null!==t;){var r=this._comparator(e,t.data);if(0===r)return n._cursor=t,n;n._ancestors.push(t),t=t.get_child(r>0)}return null}}return e.prototype.clear=function(){this._root=null,this.size=0},e.prototype.find=function(e){for(var t=this._root;null!==t;){var n=this._comparator(e,t.data);if(0===n)return t.data;t=t.get_child(n>0)}return null},e.prototype.lowerBound=function(e){return this._bound(e,this._comparator)},e.prototype.upperBound=function(e){function t(e,t){return n(t,e)}var n=this._comparator;return this._bound(e,t)},e.prototype.min=function(){var e=this._root;if(null===e)return null;for(;null!==e.left;)e=e.left;return e.data},e.prototype.max=function(){var e=this._root;if(null===e)return null;for(;null!==e.right;)e=e.right;return e.data},e.prototype.iterator=function(){return new n(this)},e.prototype.each=function(e){for(var t,n=this.iterator();null!==(t=n.next());)e(t)},e.prototype.reach=function(e){for(var t,n=this.iterator();null!==(t=n.prev());)e(t)},e.prototype._bound=function(e,t){for(var n=this._root,r=this.iterator();null!==n;){var i=this._comparator(e,n.data);if(0===i)return r._cursor=n,r;r._ancestors.push(n),n=n.get_child(i>0);

}for(var o=r._ancestors.length-1;o>=0;--o)if(n=r._ancestors[o],t(e,n.data)>0)return r._cursor=n,r._ancestors.length=o,r;return r._ancestors.length=0,r},e}();e.TreeBase=t;var n=function(){function e(e){this._tree=e,this._ancestors=[],this._cursor=null}return e.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},e.prototype.next=function(){if(null===this._cursor){var e=this._tree._root;null!==e&&this._minNode(e)}else if(null===this._cursor.right){var t;do{if(t=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===t)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},e.prototype.prev=function(){if(null===this._cursor){var e=this._tree._root;null!==e&&this._maxNode(e)}else if(null===this._cursor.left){var t;do{if(t=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===t)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},e.prototype._minNode=function(e){for(;null!==e.left;)this._ancestors.push(e),e=e.left;this._cursor=e},e.prototype._maxNode=function(e){for(;null!==e.right;)this._ancestors.push(e),e=e.right;this._cursor=e},e}();e.Iterator=n;var r=function(){function e(e){this.data=e,this.left=null,this.right=null,this.red=!0}return e.prototype.get_child=function(e){return e?this.right:this.left},e.prototype.set_child=function(e,t){e?this.right=t:this.left=t},e}(),o=function(e){function t(t){e.call(this),this._root=null,this._comparator=t,this.size=0}return i(t,e),t.prototype.insert=function(e){var n=!1;if(null===this._root)this._root=new r(e),n=!0,this.size++;else{var i=new r(void 0),o=!1,a=!1,s=null,u=i,l=null,c=this._root;for(u.right=this._root;;){if(null===c?(c=new r(e),l.set_child(o,c),n=!0,this.size++):t.is_red(c.left)&&t.is_red(c.right)&&(c.red=!0,c.left.red=!1,c.right.red=!1),t.is_red(c)&&t.is_red(l)){var h=u.right===s;c===l.get_child(a)?u.set_child(h,t.single_rotate(s,!a)):u.set_child(h,t.double_rotate(s,!a))}var d=this._comparator(c.data,e);if(0===d)break;a=o,o=0>d,null!==s&&(u=s),s=l,l=c,c=c.get_child(o)}this._root=i.right}return this._root.red=!1,n},t.prototype.remove=function(e){if(null===this._root)return!1;var n=new r(void 0),i=n;i.right=this._root;for(var o=null,a=null,s=null,u=!0;null!==i.get_child(u);){var l=u;a=o,o=i,i=i.get_child(u);var c=this._comparator(e,i.data);if(u=c>0,0===c&&(s=i),!t.is_red(i)&&!t.is_red(i.get_child(u)))if(t.is_red(i.get_child(!u))){var h=t.single_rotate(i,u);o.set_child(l,h),o=h}else if(!t.is_red(i.get_child(!u))){var d=o.get_child(!l);if(null!==d)if(t.is_red(d.get_child(!l))||t.is_red(d.get_child(l))){var f=a.right===o;t.is_red(d.get_child(l))?a.set_child(f,t.double_rotate(o,l)):t.is_red(d.get_child(!l))&&a.set_child(f,t.single_rotate(o,l));var p=a.get_child(f);p.red=!0,i.red=!0,p.left.red=!1,p.right.red=!1}else o.red=!1,d.red=!0,i.red=!0}}return null!==s&&(s.data=i.data,o.set_child(o.right===i,i.get_child(null===i.left)),this.size--),this._root=n.right,null!==this._root&&(this._root.red=!1),null!==s},t.is_red=function(e){return null!==e&&e.red},t.single_rotate=function(e,t){var n=e.get_child(!t);return e.set_child(!t,n.get_child(t)),n.set_child(t,e),e.red=!0,n.red=!1,n},t.double_rotate=function(e,n){return e.set_child(!n,t.single_rotate(e.get_child(!n),!n)),t.single_rotate(e,n)},t}(t);e.RBTree=o}(t=e.vpsc||(e.vpsc={}))}(r||(r={}));var r;!function(e){var t;!function(e){function t(e){return e.bounds="undefined"!=typeof e.leaves?e.leaves.reduce(function(e,t){return t.bounds.union(e)},g.empty()):g.empty(),"undefined"!=typeof e.groups&&(e.bounds=e.groups.reduce(function(e,n){return t(n).union(e)},e.bounds)),e.bounds=e.bounds.inflate(e.padding),e.bounds}function n(e,t,n){var r=e.rayIntersection(t.cx(),t.cy())||{x:e.cx(),y:e.cy()},i=t.rayIntersection(e.cx(),e.cy())||{x:t.cx(),y:t.cy()},o=i.x-r.x,a=i.y-r.y,s=Math.sqrt(o*o+a*a),u=s-n;return{sourceIntersection:r,targetIntersection:i,arrowStart:{x:r.x+u*o/s,y:r.y+u*a/s}}}function r(e,t,n){var r=t.rayIntersection(e.x,e.y);r||(r={x:t.cx(),y:t.cy()});var i=r.x-e.x,o=r.y-e.y,a=Math.sqrt(i*i+o*o);return{x:r.x-n*i/a,y:r.y-n*o/a}}function o(e,t){return e.pos>t.pos?1:e.pos<t.pos?-1:e.isOpen?-1:t.isOpen?1:0}function a(){return new e.RBTree(function(e,t){return e.pos-t.pos})}function s(e,t,n,r){void 0===r&&(r=!1);var i=e.padding,o="undefined"!=typeof e.groups?e.groups.length:0,a="undefined"!=typeof e.leaves?e.leaves.length:0,l=o?e.groups.reduce(function(e,r){return e.concat(s(r,t,n,!0))},[]):[],c=(r?2:0)+a+o,h=new Array(c),d=new Array(c),f=0,p=function(e,t){d[f]=e,h[f++]=t};if(r){var v=e.bounds,g=t.getCentre(v),y=t.getSize(v)/2,m=t.getOpen(v),b=t.getClose(v),x=g-y+i/2,w=g+y-i/2;e.minVar.desiredPosition=x,p(t.makeRect(m,b,x,i),e.minVar),e.maxVar.desiredPosition=w,p(t.makeRect(m,b,w,i),e.maxVar)}a&&e.leaves.forEach(function(e){return p(e.bounds,e.variable)}),o&&e.groups.forEach(function(e){var n=e.bounds;p(t.makeRect(t.getOpen(n),t.getClose(n),t.getCentre(n),t.getSize(n)),e.minVar)});var _=u(d,h,t,n);return o&&(h.forEach(function(e){e.cOut=[],e.cIn=[]}),_.forEach(function(e){e.left.cOut.push(e),e.right.cIn.push(e)}),e.groups.forEach(function(e){var n=(e.padding-t.getSize(e.bounds))/2;e.minVar.cIn.forEach(function(e){return e.gap+=n}),e.minVar.cOut.forEach(function(t){t.left=e.maxVar,t.gap+=n})})),l.concat(_)}function u(t,n,r,i){var s,u=t.length,l=2*u;console.assert(n.length>=u);var c=new Array(l);for(s=0;u>s;++s){var h=t[s],d=new y(n[s],h,r.getCentre(h));c[s]=new m(!0,d,r.getOpen(h)),c[s+u]=new m(!1,d,r.getClose(h))}c.sort(o);var f=new Array,p=a();for(s=0;l>s;++s){var v=c[s],d=v.v;if(v.isOpen)p.insert(d),r.findNeighbours(d,p);else{p.remove(d);var g=function(t,n){var o=(r.getSize(t.r)+r.getSize(n.r))/2+i;f.push(new e.Constraint(t.v,n.v,o))},b=function(e,t,n){for(var r,i=d[e].iterator();null!==(r=i[e]());)n(r,d),r[t].remove(d)};b("prev","next",function(e,t){return g(e,t)}),b("next","prev",function(e,t){return g(t,e)})}}return console.assert(0===p.size),f}function l(e,t){var n=function(n,r){for(var i,o=t.findIter(e);null!==(i=o[n]());){var a=i.r.overlapX(e.r);if((0>=a||a<=i.r.overlapY(e.r))&&(e[n].insert(i),i[r].insert(e)),0>=a)break}};n("next","prev"),n("prev","next")}function c(e,t){var n=function(n,r){var i=t.findIter(e)[n]();null!==i&&i.r.overlapX(e.r)>0&&(e[n].insert(i),i[r].insert(e))};n("next","prev"),n("prev","next")}function h(e,t){return u(e,t,b,1e-6)}function d(e,t){return u(e,t,x,1e-6)}function f(e){return s(e,b,1e-6)}function p(e){return s(e,x,1e-6)}function v(t){var n=t.map(function(t){return new e.Variable(t.cx())}),r=e.generateXConstraints(t,n),i=new e.Solver(n,r);i.solve(),n.forEach(function(e,n){return t[n].setXCentre(e.position())}),n=t.map(function(t){return new e.Variable(t.cy())}),r=e.generateYConstraints(t,n),i=new e.Solver(n,r),i.solve(),n.forEach(function(e,n){return t[n].setYCentre(e.position())})}e.computeGroupBounds=t;var g=function(){function e(e,t,n,r){this.x=e,this.X=t,this.y=n,this.Y=r}return e.empty=function(){return new e(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},e.prototype.cx=function(){return(this.x+this.X)/2},e.prototype.cy=function(){return(this.y+this.Y)/2},e.prototype.overlapX=function(e){var t=this.cx(),n=e.cx();return n>=t&&e.x<this.X?this.X-e.x:t>=n&&this.x<e.X?e.X-this.x:0},e.prototype.overlapY=function(e){var t=this.cy(),n=e.cy();return n>=t&&e.y<this.Y?this.Y-e.y:t>=n&&this.y<e.Y?e.Y-this.y:0},e.prototype.setXCentre=function(e){var t=e-this.cx();this.x+=t,this.X+=t},e.prototype.setYCentre=function(e){var t=e-this.cy();this.y+=t,this.Y+=t},e.prototype.width=function(){return this.X-this.x},e.prototype.height=function(){return this.Y-this.y},e.prototype.union=function(t){return new e(Math.min(this.x,t.x),Math.max(this.X,t.X),Math.min(this.y,t.y),Math.max(this.Y,t.Y))},e.prototype.lineIntersections=function(t,n,r,i){for(var o=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],a=[],s=0;4>s;++s){var u=e.lineIntersection(t,n,r,i,o[s][0],o[s][1],o[s][2],o[s][3]);null!==u&&a.push({x:u.x,y:u.y})}return a},e.prototype.rayIntersection=function(e,t){var n=this.lineIntersections(this.cx(),this.cy(),e,t);return n.length>0?n[0]:null},e.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y},{x:this.x,y:this.y}]},e.lineIntersection=function(e,t,n,r,i,o,a,s){var u=n-e,l=a-i,c=r-t,h=s-o,d=h*u-l*c;if(0==d)return null;var f=e-i,p=t-o,v=l*p-h*f,g=v/d,y=u*p-c*f,m=y/d;return g>=0&&1>=g&&m>=0&&1>=m?{x:e+g*u,y:t+g*c}:null},e.prototype.inflate=function(t){return new e(this.x-t,this.X+t,this.y-t,this.Y+t)},e}();e.Rectangle=g,e.makeEdgeBetween=n,e.makeEdgeTo=r;var y=function(){function e(e,t,n){this.v=e,this.r=t,this.pos=n,this.prev=a(),this.next=a()}return e}(),m=function(){function e(e,t,n){this.isOpen=e,this.v=t,this.pos=n}return e}(),b={getCentre:function(e){return e.cx()},getOpen:function(e){return e.y},getClose:function(e){return e.Y},getSize:function(e){return e.width()},makeRect:function(e,t,n,r){return new g(n-r/2,n+r/2,e,t)},findNeighbours:l},x={getCentre:function(e){return e.cy()},getOpen:function(e){return e.x},getClose:function(e){return e.X},getSize:function(e){return e.height()},makeRect:function(e,t,n,r){return new g(e,t,n-r/2,n+r/2)},findNeighbours:c};e.generateXConstraints=h,e.generateYConstraints=d,e.generateXGroupConstraints=f,e.generateYGroupConstraints=p,e.removeOverlaps=v;var w=function(e){function t(t,n){e.call(this,0,n),this.index=t}return i(t,e),t}(e.Variable);e.IndexedVariable=w;var _=function(){function n(n,r,i,o,a){var s=this;if(void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=!1),this.nodes=n,this.groups=r,this.rootGroup=i,this.avoidOverlaps=a,this.variables=n.map(function(e,t){return e.variable=new w(t,1)}),o&&this.createConstraints(o),a&&i&&"undefined"!=typeof i.groups){n.forEach(function(t){if(!t.width||!t.height)return void(t.bounds=new e.Rectangle(t.x,t.x,t.y,t.y));var n=t.width/2,r=t.height/2;t.bounds=new e.Rectangle(t.x-n,t.x+n,t.y-r,t.y+r)}),t(i);var u=n.length;r.forEach(function(e){s.variables[u]=e.minVar=new w(u++,"undefined"!=typeof e.stiffness?e.stiffness:.01),s.variables[u]=e.maxVar=new w(u++,"undefined"!=typeof e.stiffness?e.stiffness:.01)})}}return n.prototype.createSeparation=function(t){return new e.Constraint(this.nodes[t.left].variable,this.nodes[t.right].variable,t.gap,"undefined"!=typeof t.equality?t.equality:!1)},n.prototype.makeFeasible=function(e){var t=this;if(this.avoidOverlaps){var n="x",r="width";"x"===e.axis&&(n="y",r="height");var i=e.offsets.map(function(e){return t.nodes[e.node]}).sort(function(e,t){return e[n]-t[n]}),o=null;i.forEach(function(e){o&&(e[n]=o[n]+o[r]+1),o=e})}},n.prototype.createAlignment=function(t){var n=this,r=this.nodes[t.offsets[0].node].variable;this.makeFeasible(t);var i="x"===t.axis?this.xConstraints:this.yConstraints;t.offsets.slice(1).forEach(function(t){var o=n.nodes[t.node].variable;i.push(new e.Constraint(r,o,t.offset,!0))})},n.prototype.createConstraints=function(e){var t=this,n=function(e){return"undefined"==typeof e.type||"separation"===e.type};this.xConstraints=e.filter(function(e){return"x"===e.axis&&n(e)}).map(function(e){return t.createSeparation(e)}),this.yConstraints=e.filter(function(e){return"y"===e.axis&&n(e)}).map(function(e){return t.createSeparation(e)}),e.filter(function(e){return"alignment"===e.type}).forEach(function(e){return t.createAlignment(e)})},n.prototype.setupVariablesAndBounds=function(e,t,n,r){this.nodes.forEach(function(i,o){i.fixed?(i.variable.weight=i.fixedWeight?i.fixedWeight:1e3,n[o]=r(i)):i.variable.weight=1;var a=(i.width||0)/2,s=(i.height||0)/2,u=e[o],l=t[o];i.bounds=new g(u-a,u+a,l-s,l+s)})},n.prototype.xProject=function(e,t,n){(this.rootGroup||this.avoidOverlaps||this.xConstraints)&&this.project(e,t,e,n,function(e){return e.px},this.xConstraints,f,function(e){return e.bounds.setXCentre(n[e.variable.index]=e.variable.position())},function(e){var t=n[e.minVar.index]=e.minVar.position(),r=n[e.maxVar.index]=e.maxVar.position(),i=e.padding/2;e.bounds.x=t-i,e.bounds.X=r+i})},n.prototype.yProject=function(e,t,n){(this.rootGroup||this.yConstraints)&&this.project(e,t,t,n,function(e){return e.py},this.yConstraints,p,function(e){return e.bounds.setYCentre(n[e.variable.index]=e.variable.position())},function(e){var t=n[e.minVar.index]=e.minVar.position(),r=n[e.maxVar.index]=e.maxVar.position(),i=e.padding/2;e.bounds.y=t-i,e.bounds.Y=r+i})},n.prototype.projectFunctions=function(){var e=this;return[function(t,n,r){return e.xProject(t,n,r)},function(t,n,r){return e.yProject(t,n,r)}]},n.prototype.project=function(e,n,r,i,o,a,s,u,l){this.setupVariablesAndBounds(e,n,i,o),this.rootGroup&&this.avoidOverlaps&&(t(this.rootGroup),a=a.concat(s(this.rootGroup))),this.solve(this.variables,a,r,i),this.nodes.forEach(u),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(l),t(this.rootGroup))},n.prototype.solve=function(t,n,r,i){var o=new e.Solver(t,n);o.setStartingPositions(r),o.setDesiredPositions(i),o.solve()},n}();e.Projection=_}(t=e.vpsc||(e.vpsc={}))}(r||(r={}));var r;!function(e){var t;!function(t){function n(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)}function r(e,t,r){return n(e,t,r)>0}function o(e,t,r){return n(e,t,r)<0}function a(e){var t,r=e.slice(0).sort(function(e,t){return e.x!==t.x?t.x-e.x:t.y-e.y}),i=e.length,o=0,a=r[0].x;for(t=1;i>t&&r[t].x===a;++t);var s=t-1,u=[];if(u.push(r[o]),s===i-1)r[s].y!==r[o].y&&u.push(r[s]);else{var l,c=i-1,h=r[i-1].x;for(t=i-2;t>=0&&r[t].x===h;t--);for(l=t+1,t=s;++t<=l;)if(!(n(r[o],r[l],r[t])>=0&&l>t)){for(;u.length>1&&!(n(u[u.length-2],u[u.length-1],r[t])>0);)u.length-=1;t!=o&&u.push(r[t])}c!=l&&u.push(r[c]);var d=u.length;for(t=l;--t>=s;)if(!(n(r[c],r[s],r[t])>=0&&t>s)){for(;u.length>d&&!(n(u[u.length-2],u[u.length-1],r[t])>0);)u.length-=1;t!=o&&u.push(r[t])}}return u}function s(e,t,n){t.slice(0).sort(function(t,n){return Math.atan2(t.y-e.y,t.x-e.x)-Math.atan2(n.y-e.y,n.x-e.x)}).forEach(n)}function u(e,t){return{rtan:l(e,t),ltan:c(e,t)}}function l(e,t){var n,i,a,s,u,l=t.length-1;if(o(e,t[1],t[0])&&!r(e,t[l-1],t[0]))return 0;for(n=0,i=l;;){if(i-n===1)return r(e,t[n],t[i])?n:i;if(a=Math.floor((n+i)/2),u=o(e,t[a+1],t[a]),u&&!r(e,t[a-1],t[a]))return a;s=r(e,t[n+1],t[n]),s?u?i=a:r(e,t[n],t[a])?i=a:n=a:u&&o(e,t[n],t[a])?i=a:n=a}}function c(e,t){var n,i,a,s,u,l=t.length-1;if(r(e,t[l-1],t[0])&&!o(e,t[1],t[0]))return 0;for(n=0,i=l;;){if(i-n===1)return o(e,t[n],t[i])?n:i;if(a=Math.floor((n+i)/2),u=o(e,t[a+1],t[a]),r(e,t[a-1],t[a])&&!u)return a;s=o(e,t[n+1],t[n]),s?u?o(e,t[n],t[a])?i=a:n=a:i=a:u?n=a:r(e,t[n],t[a])?i=a:n=a}}function h(e,t,n,r,i,o){var a,s;a=n(t[0],e),s=r(e[a],t);for(var u=!1;!u;){for(u=!0;;){if(a===e.length-1&&(a=0),i(t[s],e[a],e[a+1]))break;++a}for(;;){if(0===s&&(s=t.length-1),o(e[a],t[s],t[s-1]))break;--s,u=!1}}return{t1:a,t2:s}}function d(e,t){var n=f(t,e);return{t1:n.t2,t2:n.t1}}function f(e,t){return h(e,t,l,c,r,o)}function p(e,t){return h(e,t,c,c,o,o)}function v(e,t){return h(e,t,l,l,r,r)}function g(t,n){for(var r=[],i=1,o=n.length;o>i;++i){var a=e.vpsc.Rectangle.lineIntersection(t.x1,t.y1,t.x2,t.y2,n[i-1].x,n[i-1].y,n[i].x,n[i].y);a&&r.push(a)}return r}function y(e,t){for(var r=e.length-1,i=t.length-1,o=new S,a=0;r>a;++a)for(var s=0;i>s;++s){var u=e[0==a?r-1:a-1],l=e[a],c=e[a+1],h=t[0==s?i-1:s-1],d=t[s],f=t[s+1],p=n(u,l,d),v=n(l,h,d),g=n(l,d,f),y=n(h,d,l),m=n(d,u,l),b=n(d,l,c);p>=0&&v>=0&&0>g&&y>=0&&m>=0&&0>b?o.ll=new k(a,s):0>=p&&0>=v&&g>0&&0>=y&&0>=m&&b>0?o.rr=new k(a,s):0>=p&&v>0&&0>=g&&y>=0&&0>m&&b>=0?o.rl=new k(a,s):p>=0&&0>v&&g>=0&&0>=y&&m>0&&0>=b&&(o.lr=new k(a,s))}return o}function m(e,t){for(var n=1,r=t.length;r>n;++n)if(o(t[n-1],t[n],e))return!1;return!0}function b(e,t){return!e.every(function(e){return!m(e,t)})}function x(e,t){if(b(e,t))return!0;if(b(t,e))return!0;for(var n=1,r=e.length;r>n;++n){var i=e[n],o=e[n-1];if(g(new _(o.x,o.y,i.x,i.y),t).length>0)return!0}return!1}var w=function(){function e(){}return e}();t.Point=w;var _=function(){function e(e,t,n,r){this.x1=e,this.y1=t,this.x2=n,this.y2=r}return e}();t.LineSegment=_;var E=function(e){function t(){e.apply(this,arguments)}return i(t,e),t}(w);t.PolyPoint=E,t.isLeft=n,t.ConvexHull=a,t.clockwiseRadialSweep=s,t.tangent_PolyPolyC=h,t.LRtangent_PolyPolyC=d,t.RLtangent_PolyPolyC=f,t.LLtangent_PolyPolyC=p,t.RRtangent_PolyPolyC=v;var k=function(){function e(e,t){this.t1=e,this.t2=t}return e}();t.BiTangent=k;var S=function(){function e(){}return e}();t.BiTangents=S;var N=function(e){function t(){e.apply(this,arguments)}return i(t,e),t}(w);t.TVGPoint=N;var T=function(){function e(e,t,n,r){this.id=e,this.polyid=t,this.polyvertid=n,this.p=r,r.vv=this}return e}();t.VisibilityVertex=T;var D=function(){function e(e,t){this.source=e,this.target=t}return e.prototype.length=function(){var e=this.source.p.x-this.target.p.x,t=this.source.p.y-this.target.p.y;return Math.sqrt(e*e+t*t)},e}();t.VisibilityEdge=D;var P=function(){function e(e,n){if(this.P=e,this.V=[],this.E=[],n)this.V=n.V.slice(0),this.E=n.E.slice(0);else{for(var r=e.length,i=0;r>i;i++)for(var o=e[i],a=0;a<o.length;++a){var s=o[a],u=new T(this.V.length,i,a,s);this.V.push(u),a>0&&this.E.push(new D(o[a-1].vv,u))}for(var i=0;r-1>i;i++)for(var l=e[i],a=i+1;r>a;a++){var c=e[a],h=t.tangents(l,c);for(var d in h){var f=h[d],p=l[f.t1],v=c[f.t2];this.addEdgeIfVisible(p,v,i,a)}}}}return e.prototype.addEdgeIfVisible=function(e,t,n,r){this.intersectsPolys(new _(e.x,e.y,t.x,t.y),n,r)||this.E.push(new D(e.vv,t.vv))},e.prototype.addPoint=function(e,t){var n=this.P.length;this.V.push(new T(this.V.length,n,0,e));for(var r=0;n>r;++r)if(r!==t){var i=this.P[r],o=u(e,i);this.addEdgeIfVisible(e,i[o.ltan],t,r),this.addEdgeIfVisible(e,i[o.rtan],t,r)}return e.vv},e.prototype.intersectsPolys=function(e,t,n){for(var r=0,i=this.P.length;i>r;++r)if(r!=t&&r!=n&&g(e,this.P[r]).length>0)return!0;return!1},e}();t.TangentVisibilityGraph=P,t.tangents=y,t.polysOverlap=x}(t=e.geom||(e.geom={}))}(r||(r={}));var r;!function(e){var t=function(){function e(){this.locks={}}return e.prototype.add=function(e,t){this.locks[e]=t},e.prototype.clear=function(){this.locks={}},e.prototype.isEmpty=function(){for(var e in this.locks)return!1;return!0},e.prototype.apply=function(e){for(var t in this.locks)e(t,this.locks[t])},e}();e.Locks=t;var n=function(){function e(e,n,i){void 0===i&&(i=null),this.D=n,this.G=i,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new r,this.project=null,this.x=e,this.k=e.length;var o=this.n=e[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new t,this.minD=Number.MAX_VALUE;for(var a,s=o;s--;)for(a=o;--a>s;){var u=n[s][a];u>0&&u<this.minD&&(this.minD=u)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),s=this.k;s--;){for(this.g[s]=new Array(o),this.H[s]=new Array(o),a=o;a--;)this.H[s][a]=new Array(o);this.Hd[s]=new Array(o),this.a[s]=new Array(o),this.b[s]=new Array(o),this.c[s]=new Array(o),this.d[s]=new Array(o),this.e[s]=new Array(o),this.ia[s]=new Array(o),this.ib[s]=new Array(o),this.xtmp[s]=new Array(o)}}return e.createSquareMatrix=function(e,t){for(var n=new Array(e),r=0;e>r;++r){n[r]=new Array(e);for(var i=0;e>i;++i)n[r][i]=t(r,i)}return n},e.prototype.offsetDir=function(){for(var e=this,t=new Array(this.k),n=0,r=0;r<this.k;++r){var i=t[r]=this.random.getNextBetween(.01,1)-.5;n+=i*i}return n=Math.sqrt(n),t.map(function(t){return t*=e.minD/n})},e.prototype.computeDerivatives=function(e){var t=this,n=this.n;if(!(1>n)){for(var r,i=new Array(this.k),o=new Array(this.k),a=new Array(this.k),s=0,u=0;n>u;++u){for(r=0;r<this.k;++r)a[r]=this.g[r][u]=0;for(var l=0;n>l;++l)if(u!==l){for(var c=n;c--;){var h=0;for(r=0;r<this.k;++r){var d=i[r]=e[r][u]-e[r][l];h+=o[r]=d*d}if(h>1e-9)break;var f=this.offsetDir();for(r=0;r<this.k;++r)e[r][l]+=f[r]}var p=Math.sqrt(h),v=this.D[u][l],g=null!=this.G?this.G[u][l]:1;if(g>1&&p>v||!isFinite(v))for(r=0;r<this.k;++r)this.H[r][u][l]=0;else{g>1&&(g=1);var y=v*v,m=2*g*(p-v)/(y*p),b=p*p*p,x=2*-g/(y*b);for(isFinite(m)||console.log(m),r=0;r<this.k;++r)this.g[r][u]+=i[r]*m,a[r]-=this.H[r][u][l]=x*(b+v*(o[r]-h)+p*h)}}for(r=0;r<this.k;++r)s=Math.max(s,this.H[r][u][u]=a[r])}for(var w=this.snapGridSize/2,_=this.snapGridSize,E=this.snapStrength,k=E/(w*w),S=this.numGridSnapNodes,u=0;S>u;++u)for(r=0;r<this.k;++r){var N=this.x[r][u],T=N/_,D=T%1,P=T-D,C=Math.abs(D),d=.5>=C?N-P*_:N>0?N-(P+1)*_:N-(P-1)*_;d>-w&&w>=d&&(this.scaleSnapByMaxH?(this.g[r][u]+=s*k*d,this.H[r][u][u]+=s*k):(this.g[r][u]+=k*d,this.H[r][u][u]+=k))}this.locks.isEmpty()||this.locks.apply(function(n,i){for(r=0;r<t.k;++r)t.H[r][n][n]+=s,t.g[r][n]-=s*(i[r]-e[r][n])})}},e.dotProd=function(e,t){for(var n=0,r=e.length;r--;)n+=e[r]*t[r];return n},e.rightMultiply=function(t,n,r){for(var i=t.length;i--;)r[i]=e.dotProd(t[i],n)},e.prototype.computeStepSize=function(t){for(var n=0,r=0,i=0;i<this.k;++i)n+=e.dotProd(this.g[i],t[i]),e.rightMultiply(this.H[i],t[i],this.Hd[i]),r+=e.dotProd(t[i],this.Hd[i]);return 0!==r&&isFinite(r)?1*n/r:0},e.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var e=this.computeStepSize(this.g),t=0;t<this.k;++t)this.takeDescentStep(this.x[t],this.g[t],e);return this.computeStress()},e.copy=function(e,t){for(var n=e.length,r=t[0].length,i=0;n>i;++i)for(var o=0;r>o;++o)t[i][o]=e[i][o]},e.prototype.stepAndProject=function(t,n,r,i){e.copy(t,n),this.takeDescentStep(n[0],r[0],i),this.project&&this.project[0](t[0],t[1],n[0]),this.takeDescentStep(n[1],r[1],i),this.project&&this.project[1](n[0],t[1],n[1]);for(var o=2;o<this.k;o++)this.takeDescentStep(n[o],r[o],i)},e.mApply=function(e,t,n){for(var r=e;r-->0;)for(var i=t;i-->0;)n(r,i)},e.prototype.matrixApply=function(t){e.mApply(this.k,this.n,t)},e.prototype.computeNextPosition=function(e,t){var n=this;this.computeDerivatives(e);var r=this.computeStepSize(this.g);if(this.stepAndProject(e,t,this.g,r),this.project){this.matrixApply(function(r,i){return n.e[r][i]=e[r][i]-t[r][i]});var i=this.computeStepSize(this.e);i=Math.max(.2,Math.min(i,1)),this.stepAndProject(e,t,this.e,i)}},e.prototype.run=function(e){for(var t=Number.MAX_VALUE,n=!1;!n&&e-->0;){var r=this.rungeKutta();n=Math.abs(t/r-1)<this.threshold,t=r}return t},e.prototype.rungeKutta=function(){var t=this;this.computeNextPosition(this.x,this.a),e.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),e.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var n=0;return this.matrixApply(function(e,r){var i=(t.a[e][r]+2*t.b[e][r]+2*t.c[e][r]+t.d[e][r])/6,o=t.x[e][r]-i;n+=o*o,t.x[e][r]=i}),n},e.mid=function(t,n,r){e.mApply(t.length,t[0].length,function(e,i){return r[e][i]=t[e][i]+(n[e][i]-t[e][i])/2})},e.prototype.takeDescentStep=function(e,t,n){for(var r=0;r<this.n;++r)e[r]=e[r]-n*t[r]},e.prototype.computeStress=function(){for(var e=0,t=0,n=this.n-1;n>t;++t)for(var r=t+1,i=this.n;i>r;++r){for(var o=0,a=0;a<this.k;++a){var s=this.x[a][t]-this.x[a][r];o+=s*s}o=Math.sqrt(o);var u=this.D[t][r];if(isFinite(u)){var l=u-o,c=u*u;e+=l*l/c}}return e},e.zeroDistance=1e-10,e}();e.Descent=n;var r=function(){function e(e){void 0===e&&(e=1),this.seed=e,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return e.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},e.prototype.getNextBetween=function(e,t){return e+this.getNext()*(t-e)},e}();e.PseudoRandom=r}(r||(r={}));var r;!function(e){var t;!function(e){function t(e,n,r){e.forAll(function(e){if(e.isLeaf())n.leaves||(n.leaves=[]),n.leaves.push(e.id);else{var i=n;if(e.gid=r.length,!e.isIsland()||e.isPredefined()){if(i={id:e.gid},e.isPredefined())for(var o in e.definition)i[o]=e.definition[o];n.groups||(n.groups=[]),n.groups.push(e.gid),r.push(i)}t(e.children,i,r)}})}function n(e,t){var n={};for(var r in e)r in t&&(n[r]=e[r]);return n}function r(t,n,r,i){for(var o=t.length,a=new e.Configuration(o,n,r,i);a.greedyMerge(););var s=[],u=a.getGroupHierarchy(s);return s.forEach(function(e){var n=function(n){var r=e[n];"number"==typeof r&&(e[n]=t[r])};n("source"),n("target")}),{groups:u,powerEdges:s}}var i=function(){function e(e,t,n){this.source=e,this.target=t,this.type=n}return e}();e.PowerEdge=i;var o=function(){function e(e,t,n,r){var i=this;if(this.linkAccessor=n,this.modules=new Array(e),this.roots=[],r)this.initModulesFromGroup(r);else{this.roots.push(new s);for(var o=0;e>o;++o)this.roots[0].add(this.modules[o]=new a(o))}this.R=t.length,t.forEach(function(e){var t=i.modules[n.getSourceIndex(e)],r=i.modules[n.getTargetIndex(e)],o=n.getType(e);t.outgoing.add(o,r),r.incoming.add(o,t)})}return e.prototype.initModulesFromGroup=function(e){var t=new s;this.roots.push(t);for(var n=0;n<e.leaves.length;++n){var r=e.leaves[n],i=new a(r.id);this.modules[r.id]=i,t.add(i)}if(e.groups)for(var o=0;o<e.groups.length;++o){var l=e.groups[o],c={};for(var h in l)"leaves"!==h&&"groups"!==h&&l.hasOwnProperty(h)&&(c[h]=l[h]);t.add(new a(-1-o,new u,new u,this.initModulesFromGroup(l),c))}return t},e.prototype.merge=function(e,t,n){void 0===n&&(n=0);var r=e.incoming.intersection(t.incoming),i=e.outgoing.intersection(t.outgoing),o=new s;o.add(e),o.add(t);var u=new a(this.modules.length,i,r,o);this.modules.push(u);var l=function(n,r,i){n.forAll(function(n,o){n.forAll(function(n){var a=n[r];a.add(o,u),a.remove(o,e),a.remove(o,t),e[i].remove(o,n),t[i].remove(o,n)})})};return l(i,"incoming","outgoing"),l(r,"outgoing","incoming"),this.R-=r.count()+i.count(),this.roots[n].remove(e),this.roots[n].remove(t),this.roots[n].add(u),u},e.prototype.rootMerges=function(e){void 0===e&&(e=0);for(var t=this.roots[e].modules(),n=t.length,r=new Array(n*(n-1)),i=0,o=0,a=n-1;a>o;++o)for(var s=o+1;n>s;++s){var u=t[o],l=t[s];r[i]={id:i,nEdges:this.nEdges(u,l),a:u,b:l},i++}return r},e.prototype.greedyMerge=function(){for(var e=0;e<this.roots.length;++e)if(!(this.roots[e].modules().length<2)){var t=this.rootMerges(e).sort(function(e,t){return e.nEdges==t.nEdges?e.id-t.id:e.nEdges-t.nEdges}),n=t[0];if(!(n.nEdges>=this.R))return this.merge(n.a,n.b,e),!0}},e.prototype.nEdges=function(e,t){var n=e.incoming.intersection(t.incoming),r=e.outgoing.intersection(t.outgoing);return this.R-n.count()-r.count()},e.prototype.getGroupHierarchy=function(e){var n=this,r=[],o={};t(this.roots[0],o,r);var a=this.allEdges();return a.forEach(function(t){var o=n.modules[t.source],a=n.modules[t.target];e.push(new i("undefined"==typeof o.gid?t.source:r[o.gid],"undefined"==typeof a.gid?t.target:r[a.gid],t.type))}),r},e.prototype.allEdges=function(){var t=[];return e.getEdges(this.roots[0],t),t},e.getEdges=function(t,n){t.forAll(function(t){t.getEdges(n),e.getEdges(t.children,n)})},e}();e.Configuration=o;var a=function(){function e(e,t,n,r,i){void 0===t&&(t=new u),void 0===n&&(n=new u),void 0===r&&(r=new s),this.id=e,this.outgoing=t,this.incoming=n,this.children=r,this.definition=i}return e.prototype.getEdges=function(e){var t=this;this.outgoing.forAll(function(n,r){n.forAll(function(n){e.push(new i(t.id,n.id,r))})})},e.prototype.isLeaf=function(){return 0===this.children.count()},e.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},e.prototype.isPredefined=function(){return"undefined"!=typeof this.definition},e}();e.Module=a;var s=function(){function e(){this.table={}}return e.prototype.count=function(){return Object.keys(this.table).length},e.prototype.intersection=function(t){var r=new e;return r.table=n(this.table,t.table),r},e.prototype.intersectionCount=function(e){return this.intersection(e).count()},e.prototype.contains=function(e){return e in this.table},e.prototype.add=function(e){this.table[e.id]=e},e.prototype.remove=function(e){delete this.table[e.id]},e.prototype.forAll=function(e){for(var t in this.table)e(this.table[t])},e.prototype.modules=function(){var e=[];return this.forAll(function(t){t.isPredefined()||e.push(t)}),e},e}();e.ModuleSet=s;var u=function(){function e(){this.sets={},this.n=0}return e.prototype.count=function(){return this.n},e.prototype.contains=function(e){var t=!1;return this.forAllModules(function(n){t||n.id!=e||(t=!0)}),t},e.prototype.add=function(e,t){var n=e in this.sets?this.sets[e]:this.sets[e]=new s;n.add(t),++this.n},e.prototype.remove=function(e,t){var n=this.sets[e];n.remove(t),0===n.count()&&delete this.sets[e],--this.n},e.prototype.forAll=function(e){for(var t in this.sets)e(this.sets[t],t)},e.prototype.forAllModules=function(e){this.forAll(function(t,n){return t.forAll(e)})},e.prototype.intersection=function(t){var n=new e;return this.forAll(function(e,r){if(r in t.sets){var i=e.intersection(t.sets[r]),o=i.count();o>0&&(n.sets[r]=i,n.n+=o)}}),n},e}();e.LinkSets=u,e.getGroups=r}(t=e.powergraph||(e.powergraph={}))}(r||(r={}));var r;!function(e){function t(e,t){var n={};for(var r in e)n[r]={};for(var r in t)n[r]={};return Object.keys(n).length}function n(e,t){var n=0;for(var r in e)"undefined"!=typeof t[r]&&++n;return n}function r(e,t){var n={},r=function(e,t){"undefined"==typeof n[e]&&(n[e]={}),n[e][t]={}};return e.forEach(function(e){var n=t.getSourceIndex(e),i=t.getTargetIndex(e);r(n,i),r(i,n)}),n}function i(e,t,n,i){var o=r(e,i);e.forEach(function(e){var r=o[i.getSourceIndex(e)],a=o[i.getTargetIndex(e)];i.setLength(e,1+t*n(r,a))})}function o(e,r,o){void 0===o&&(o=1),i(e,o,function(e,r){return Math.sqrt(t(e,r)-n(e,r))},r)}function a(e,r,o){void 0===o&&(o=1),i(e,o,function(e,r){return Math.min(Object.keys(e).length,Object.keys(r).length)<1.1?0:n(e,r)/t(e,r)},r)}function s(e,t,n,r){var i=u(e,t,r),o={};i.forEach(function(e,t){return e.forEach(function(e){return o[e]=t})});var a=[];return t.forEach(function(e){var t=r.getSourceIndex(e),i=r.getTargetIndex(e),s=o[t],u=o[i];s!==u&&a.push({axis:n,left:t,right:i,gap:r.getMinSeparation(e)})}),a}function u(e,t,n){function r(e){e.index=e.lowlink=o++,a.push(e),e.onStack=!0;for(var t=0,n=e.out;t<n.length;t++){var i=n[t];"undefined"==typeof i.index?(r(i),e.lowlink=Math.min(e.lowlink,i.lowlink)):i.onStack&&(e.lowlink=Math.min(e.lowlink,i.index))}if(e.lowlink===e.index){for(var u=[];a.length&&(i=a.pop(),i.onStack=!1,u.push(i),i!==e););s.push(u.map(function(e){return e.id}))}}for(var i=[],o=0,a=[],s=[],u=0;e>u;u++)i.push({id:u,out:[]});for(var l=0;l<t.length;l++){var c=t[l],h=i[n.getSourceIndex(c)],d=i[n.getTargetIndex(c)];h.out.push(d)}for(var f=0;f<i.length;f++){var p=i[f];"undefined"==typeof p.index&&r(p)}return s}e.symmetricDiffLinkLengths=o,e.jaccardLinkLengths=a,e.generateDirectedEdgeConstraints=s,e.stronglyConnectedComponents=u}(r||(r={}));var r,o=function(){function e(e){this.elem=e,this.subheaps=[]}return e.prototype.toString=function(e){for(var t="",n=!1,r=0;r<this.subheaps.length;++r){var i=this.subheaps[r];i.elem?(n&&(t+=","),t+=i.toString(e),n=!0):n=!1}return""!==t&&(t="("+t+")"),(this.elem?e(this.elem):"")+t},e.prototype.forEach=function(e){this.empty()||(e(this.elem,this),this.subheaps.forEach(function(t){return t.forEach(e)}))},e.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(e,t){return e+t.count()},0)},e.prototype.min=function(){return this.elem},e.prototype.empty=function(){return null==this.elem},e.prototype.contains=function(e){if(this===e)return!0;for(var t=0;t<this.subheaps.length;t++)if(this.subheaps[t].contains(e))return!0;return!1},e.prototype.isHeap=function(e){var t=this;return this.subheaps.every(function(n){return e(t.elem,n.elem)&&n.isHeap(e)})},e.prototype.insert=function(t,n){return this.merge(new e(t),n)},e.prototype.merge=function(e,t){
return this.empty()?e:e.empty()?this:t(this.elem,e.elem)?(this.subheaps.push(e),this):(e.subheaps.push(this),e)},e.prototype.removeMin=function(e){return this.empty()?null:this.mergePairs(e)},e.prototype.mergePairs=function(t){if(0==this.subheaps.length)return new e(null);if(1==this.subheaps.length)return this.subheaps[0];var n=this.subheaps.pop().merge(this.subheaps.pop(),t),r=this.mergePairs(t);return n.merge(r,t)},e.prototype.decreaseKey=function(t,n,r,i){var o=t.removeMin(i);t.elem=o.elem,t.subheaps=o.subheaps,null!==r&&null!==o.elem&&r(t.elem,t);var a=new e(n);return null!==r&&r(n,a),this.merge(a,i)},e}(),a=function(){function e(e){this.lessThan=e}return e.prototype.top=function(){return this.empty()?null:this.root.elem},e.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var n,r,i=0;r=e[i];++i)n=new o(r),this.root=this.empty()?n:this.root.merge(n,this.lessThan);return n},e.prototype.empty=function(){return!this.root||!this.root.elem},e.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},e.prototype.forEach=function(e){this.root.forEach(e)},e.prototype.pop=function(){if(this.empty())return null;var e=this.root.min();return this.root=this.root.removeMin(this.lessThan),e},e.prototype.reduceKey=function(e,t,n){void 0===n&&(n=null),this.root=this.root.decreaseKey(e,t,n,this.lessThan)},e.prototype.toString=function(e){return this.root.toString(e)},e.prototype.count=function(){return this.root.count()},e}();!function(e){var t;!function(e){var t=function(){function e(e,t){this.id=e,this.distance=t}return e}(),n=function(){function e(e){this.id=e,this.neighbours=[]}return e}(),r=function(){function e(e,t,n){this.node=e,this.prev=t,this.d=n}return e}(),i=function(){function e(e,r,i,o,a){this.n=e,this.es=r,this.neighbours=new Array(this.n);for(var s=this.n;s--;)this.neighbours[s]=new n(s);for(s=this.es.length;s--;){var u=this.es[s],l=i(u),c=o(u),h=a(u);this.neighbours[l].neighbours.push(new t(c,h)),this.neighbours[c].neighbours.push(new t(l,h))}}return e.prototype.DistanceMatrix=function(){for(var e=new Array(this.n),t=0;t<this.n;++t)e[t]=this.dijkstraNeighbours(t);return e},e.prototype.DistancesFromNode=function(e){return this.dijkstraNeighbours(e)},e.prototype.PathFromNodeToNode=function(e,t){return this.dijkstraNeighbours(e,t)},e.prototype.PathFromNodeToNodeWithPrevCost=function(e,t,n){var i=new a(function(e,t){return e.d<=t.d}),o=this.neighbours[e],s=new r(o,null,0),u={};for(i.push(s);!i.empty()&&(s=i.pop(),o=s.node,o.id!==t);)for(var l=o.neighbours.length;l--;){var c=o.neighbours[l],h=this.neighbours[c.id];if(!s.prev||h.id!==s.prev.node.id){var d=h.id+","+o.id;if(!(d in u&&u[d]<=s.d)){var f=s.prev?n(s.prev.node.id,o.id,h.id):0,p=s.d+c.distance+f;u[d]=p,i.push(new r(h,s,p))}}}for(var v=[];s.prev;)s=s.prev,v.push(s.node.id);return v},e.prototype.dijkstraNeighbours=function(e,t){void 0===t&&(t=-1);for(var n=new a(function(e,t){return e.d<=t.d}),r=this.neighbours.length,i=new Array(r);r--;){var o=this.neighbours[r];o.d=r===e?0:Number.POSITIVE_INFINITY,o.q=n.push(o)}for(;!n.empty();){var s=n.pop();if(i[s.id]=s.d,s.id===t){for(var u=[],l=s;"undefined"!=typeof l.prev;)u.push(l.prev.id),l=l.prev;return u}for(r=s.neighbours.length;r--;){var c=s.neighbours[r],l=this.neighbours[c.id],h=s.d+c.distance;s.d!==Number.MAX_VALUE&&l.d>h&&(l.d=h,l.prev=s,n.reduceKey(l.q,l,function(e,t){return e.q=t}))}}return i},e}();e.Calculator=i}(t=e.shortestpaths||(e.shortestpaths={}))}(r||(r={}));var r;!function(e){function t(e){return"undefined"!=typeof e.leaves||"undefined"!=typeof e.groups}!function(e){e[e.start=0]="start",e[e.tick=1]="tick",e[e.end=2]="end"}(e.EventType||(e.EventType={}));var n=e.EventType,r=function(){function r(){var e=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:r.getSourceIndex,getTargetIndex:r.getTargetIndex,setLength:r.setLinkLength,getType:function(t){return"function"==typeof e._linkType?e._linkType(t):0}}}return r.prototype.on=function(e,t){return this.event||(this.event={}),"string"==typeof e?this.event[n[e]]=t:this.event[e]=t,this},r.prototype.trigger=function(e){this.event&&"undefined"!=typeof this.event[e.type]&&this.event[e.type](e)},r.prototype.kick=function(){for(;!this.tick(););},r.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:n.end,alpha:this._alpha=0,stress:this._lastStress}),!0;{var e,t,r=this._nodes.length;this._links.length}for(this._descent.locks.clear(),t=0;r>t;++t)if(e=this._nodes[t],e.fixed){("undefined"==typeof e.px||"undefined"==typeof e.py)&&(e.px=e.x,e.py=e.y);var i=[e.px,e.py];this._descent.locks.add(t,i)}var o=this._descent.rungeKutta();return 0===o?this._alpha=0:"undefined"!=typeof this._lastStress&&(this._alpha=o),this._lastStress=o,this.updateNodePositions(),this.trigger({type:n.tick,alpha:this._alpha,stress:this._lastStress}),!1},r.prototype.updateNodePositions=function(){for(var e,t=this._descent.x[0],n=this._descent.x[1],r=this._nodes.length;r--;)e=this._nodes[r],e.x=t[r],e.y=n[r]},r.prototype.nodes=function(e){if(!e){if(0===this._nodes.length&&this._links.length>0){var t=0;this._links.forEach(function(e){t=Math.max(t,e.source,e.target)}),this._nodes=new Array(++t);for(var n=0;t>n;++n)this._nodes[n]={}}return this._nodes}return this._nodes=e,this},r.prototype.groups=function(e){var t=this;return e?(this._groups=e,this._rootGroup={},this._groups.forEach(function(e){"undefined"==typeof e.padding&&(e.padding=1),"undefined"!=typeof e.leaves&&e.leaves.forEach(function(n,r){(e.leaves[r]=t._nodes[n]).parent=e}),"undefined"!=typeof e.groups&&e.groups.forEach(function(n,r){(e.groups[r]=t._groups[n]).parent=e})}),this._rootGroup.leaves=this._nodes.filter(function(e){return"undefined"==typeof e.parent}),this._rootGroup.groups=this._groups.filter(function(e){return"undefined"==typeof e.parent}),this):this._groups},r.prototype.powerGraphGroups=function(t){var n=e.powergraph.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(n.groups),t(n),this},r.prototype.avoidOverlaps=function(e){return arguments.length?(this._avoidOverlaps=e,this):this._avoidOverlaps},r.prototype.handleDisconnected=function(e){return arguments.length?(this._handleDisconnected=e,this):this._handleDisconnected},r.prototype.flowLayout=function(e,t){return arguments.length||(e="y"),this._directedLinkConstraints={axis:e,getMinSeparation:"number"==typeof t?function(){return t}:t},this},r.prototype.links=function(e){return arguments.length?(this._links=e,this):this._links},r.prototype.constraints=function(e){return arguments.length?(this._constraints=e,this):this._constraints},r.prototype.distanceMatrix=function(e){return arguments.length?(this._distanceMatrix=e,this):this._distanceMatrix},r.prototype.size=function(e){return e?(this._canvasSize=e,this):this._canvasSize},r.prototype.defaultNodeSize=function(e){return e?(this._defaultNodeSize=e,this):this._defaultNodeSize},r.prototype.groupCompactness=function(e){return e?(this._groupCompactness=e,this):this._groupCompactness},r.prototype.linkDistance=function(e){return e?(this._linkDistance="function"==typeof e?e:+e,this._linkLengthCalculator=null,this):this._linkDistance},r.prototype.linkType=function(e){return this._linkType=e,this},r.prototype.convergenceThreshold=function(e){return e?(this._threshold="function"==typeof e?e:+e,this):this._threshold},r.prototype.alpha=function(e){return arguments.length?(e=+e,this._alpha?this._alpha=e>0?e:0:e>0&&(this._running||(this._running=!0,this.trigger({type:n.start,alpha:this._alpha=e}),this.kick())),this):this._alpha},r.prototype.getLinkLength=function(e){return"function"==typeof this._linkDistance?+this._linkDistance(e):this._linkDistance},r.setLinkLength=function(e,t){e.length=t},r.prototype.getLinkType=function(e){return"function"==typeof this._linkType?this._linkType(e):0},r.prototype.symmetricDiffLinkLengths=function(t,n){var r=this;return void 0===n&&(n=1),this.linkDistance(function(e){return t*e.length}),this._linkLengthCalculator=function(){return e.symmetricDiffLinkLengths(r._links,r.linkAccessor,n)},this},r.prototype.jaccardLinkLengths=function(t,n){var r=this;return void 0===n&&(n=1),this.linkDistance(function(e){return t*e.length}),this._linkLengthCalculator=function(){return e.jaccardLinkLengths(r._links,r.linkAccessor,n)},this},r.prototype.start=function(t,n,i,o,a){var s=this;void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=!0);var u,l=this.nodes().length,c=l+2*this._groups.length,h=(this._links.length,this._canvasSize[0]),d=this._canvasSize[1];this._linkLengthCalculator&&this._linkLengthCalculator();var f=new Array(c),p=new Array(c),v=null,g=this._avoidOverlaps;this._nodes.forEach(function(e,t){e.index=t,"undefined"==typeof e.x&&(e.x=h/2,e.y=d/2),f[t]=e.x,p[t]=e.y});var y;this._distanceMatrix?y=this._distanceMatrix:(y=new e.shortestpaths.Calculator(c,this._links,r.getSourceIndex,r.getTargetIndex,function(e){return s.getLinkLength(e)}).DistanceMatrix(),v=e.Descent.createSquareMatrix(c,function(){return 2}),this._links.forEach(function(e){"number"==typeof e.source&&(e.source=s._nodes[e.source]),"number"==typeof e.target&&(e.target=s._nodes[e.target])}),this._links.forEach(function(e){var t=r.getSourceIndex(e),n=r.getTargetIndex(e);v[t][n]=v[n][t]=e.weight||1}));var m=e.Descent.createSquareMatrix(c,function(e,t){return y[e][t]});if(this._rootGroup&&"undefined"!=typeof this._rootGroup.groups){var u=l,b=function(e,t,n,r){v[e][t]=v[t][e]=n,m[e][t]=m[t][e]=r};this._groups.forEach(function(e){b(u,u+1,s._groupCompactness,.1),f[u]=0,p[u++]=0,f[u]=0,p[u++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var x=this._constraints||[];this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,x=x.concat(e.generateDirectedEdgeConstraints(l,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new e.Descent([f,p],m),this._descent.locks.clear();for(var u=0;l>u;++u){var w=this._nodes[u];if(w.fixed){w.px=w.x,w.py=w.y;var _=[w.x,w.y];this._descent.locks.add(u,_)}}if(this._descent.threshold=this._threshold,this.initialLayout(t,f,p),x.length>0&&(this._descent.project=new e.vpsc.Projection(this._nodes,this._groups,this._rootGroup,x).projectFunctions()),this._descent.run(n),this.separateOverlappingComponents(h,d),this.avoidOverlaps(g),g&&(this._nodes.forEach(function(e,t){e.x=f[t],e.y=p[t]}),this._descent.project=new e.vpsc.Projection(this._nodes,this._groups,this._rootGroup,x,!0).projectFunctions(),this._nodes.forEach(function(e,t){f[t]=e.x,p[t]=e.y})),this._descent.G=v,this._descent.run(i),o){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=l,this._descent.scaleSnapByMaxH=l!=c;var E=e.Descent.createSquareMatrix(c,function(e,t){return e>=l||t>=l?v[e][t]:0});this._descent.G=E,this._descent.run(o)}return this.updateNodePositions(),this.separateOverlappingComponents(h,d),a?this.resume():this},r.prototype.initialLayout=function(t,n,r){if(this._groups.length>0&&t>0){var i=this._nodes.length,o=this._links.map(function(e){return{source:e.source.index,target:e.target.index}}),a=this._nodes.map(function(e){return{index:e.index}});this._groups.forEach(function(e,t){a.push({index:e.index=i+t})}),this._groups.forEach(function(e,t){"undefined"!=typeof e.leaves&&e.leaves.forEach(function(t){return o.push({source:e.index,target:t.index})}),"undefined"!=typeof e.groups&&e.groups.forEach(function(t){return o.push({source:e.index,target:t.index})})}),(new e.Layout).size(this.size()).nodes(a).links(o).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(t,0,0,0,!1),this._nodes.forEach(function(e){n[e.index]=a[e.index].x,r[e.index]=a[e.index].y})}else this._descent.run(t)},r.prototype.separateOverlappingComponents=function(t,n){var r=this;if(!this._distanceMatrix&&this._handleDisconnected){var i=this._descent.x[0],o=this._descent.x[1];this._nodes.forEach(function(e,t){e.x=i[t],e.y=o[t]});var a=e.separateGraphs(this._nodes,this._links);e.applyPacking(a,t,n,this._defaultNodeSize),this._nodes.forEach(function(e,t){r._descent.x[0][t]=e.x,r._descent.x[1][t]=e.y,e.bounds&&(e.bounds.setXCentre(e.x),e.bounds.setYCentre(e.y))})}},r.prototype.resume=function(){return this.alpha(.1)},r.prototype.stop=function(){return this.alpha(0)},r.prototype.prepareEdgeRouting=function(t){void 0===t&&(t=0),this._visibilityGraph=new e.geom.TangentVisibilityGraph(this._nodes.map(function(e){return e.bounds.inflate(-t).vertices()}))},r.prototype.routeEdge=function(t,n){var r=[],i=new e.geom.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),o={x:t.source.x,y:t.source.y},a={x:t.target.x,y:t.target.y},s=i.addPoint(o,t.source.index),u=i.addPoint(a,t.target.index);i.addEdgeIfVisible(o,a,t.source.index,t.target.index),"undefined"!=typeof n&&n(i);var l=function(e){return e.source.id},c=function(e){return e.target.id},h=function(e){return e.length()},d=new e.shortestpaths.Calculator(i.V.length,i.E,l,c,h),f=d.PathFromNodeToNode(s.id,u.id);if(1===f.length||f.length===i.V.length){var p=e.vpsc.makeEdgeBetween(t.source.innerBounds,t.target.innerBounds,5);r=[p.sourceIntersection,p.arrowStart]}else{for(var v=f.length-2,g=i.V[f[v]].p,y=i.V[f[0]].p,r=[t.source.innerBounds.rayIntersection(g.x,g.y)],m=v;m>=0;--m)r.push(i.V[f[m]].p);r.push(e.vpsc.makeEdgeTo(y,t.target.innerBounds,5))}return r},r.getSourceIndex=function(e){return"number"==typeof e.source?e.source:e.source.index},r.getTargetIndex=function(e){return"number"==typeof e.target?e.target:e.target.index},r.linkId=function(e){return r.getSourceIndex(e)+"-"+r.getTargetIndex(e)},r.dragStart=function(e){t(e)?r.storeOffset(e,r.dragOrigin(e)):(r.stopNode(e),e.fixed|=2)},r.stopNode=function(e){e.px=e.x,e.py=e.y},r.storeOffset=function(e,t){"undefined"!=typeof e.leaves&&e.leaves.forEach(function(e){e.fixed|=2,r.stopNode(e),e._dragGroupOffsetX=e.x-t.x,e._dragGroupOffsetY=e.y-t.y}),"undefined"!=typeof e.groups&&e.groups.forEach(function(e){return r.storeOffset(e,t)})},r.dragOrigin=function(e){return t(e)?{x:e.bounds.cx(),y:e.bounds.cy()}:e},r.drag=function(e,n){t(e)?("undefined"!=typeof e.leaves&&e.leaves.forEach(function(t){e.bounds.setXCentre(n.x),e.bounds.setYCentre(n.y),t.px=t._dragGroupOffsetX+n.x,t.py=t._dragGroupOffsetY+n.y}),"undefined"!=typeof e.groups&&e.groups.forEach(function(e){return r.drag(e,n)})):(e.px=n.x,e.py=n.y)},r.dragEnd=function(e){t(e)?("undefined"!=typeof e.leaves&&e.leaves.forEach(function(e){r.dragEnd(e),delete e._dragGroupOffsetX,delete e._dragGroupOffsetY}),"undefined"!=typeof e.groups&&e.groups.forEach(r.dragEnd)):e.fixed&=-7},r.mouseOver=function(e){e.fixed|=4,e.px=e.x,e.py=e.y},r.mouseOut=function(e){e.fixed&=-5},r}();e.Layout=r}(r||(r={}));var r;!function(e){function t(){return new n}var n=function(t){function n(){t.call(this),this.event=d3.dispatch(e.EventType[e.EventType.start],e.EventType[e.EventType.tick],e.EventType[e.EventType.end]);var n=this;this.drag=function(){if(!t)var t=d3.behavior.drag().origin(e.Layout.dragOrigin).on("dragstart.d3adaptor",e.Layout.dragStart).on("drag.d3adaptor",function(t){e.Layout.drag(t,d3.event),n.resume()}).on("dragend.d3adaptor",e.Layout.dragEnd);return arguments.length?void this.call(t):t}}return i(n,t),n.prototype.trigger=function(t){var n={type:e.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event[n.type](n)},n.prototype.kick=function(){var e=this;d3.timer(function(){return t.prototype.tick.call(e)})},n.prototype.on=function(t,n){return"string"==typeof t?this.event.on(t,n):this.event.on(e.EventType[t],n),this},n}(e.Layout);e.D3StyleLayoutAdaptor=n,e.d3adaptor=t}(r||(r={}));var r;!function(e){var t=function(){function e(e,t,n){this.id=e,this.rect=t,this.children=n,this.leaf="undefined"==typeof n||0===n.length}return e}();e.NodeWrapper=t;var n=function(){function e(e,t,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null),this.id=e,this.x=t,this.y=n,this.node=r,this.line=i}return e}();e.Vert=n;var r=function(){function e(t,n){this.s=t,this.t=n;var r=e.findMatch(t,n),i=n.slice(0).reverse(),o=e.findMatch(t,i);r.length>=o.length?(this.length=r.length,this.si=r.si,this.ti=r.ti,this.reversed=!1):(this.length=o.length,this.si=o.si,this.ti=n.length-o.ti-o.length,this.reversed=!0)}return e.findMatch=function(e,t){for(var n=e.length,r=t.length,i={length:0,si:-1,ti:-1},o=new Array(n),a=0;n>a;a++){o[a]=new Array(r);for(var s=0;r>s;s++)if(e[a]===t[s]){var u=o[a][s]=0===a||0===s?1:o[a-1][s-1]+1;u>i.length&&(i.length=u,i.si=a-u+1,i.ti=s-u+1)}else o[a][s]=0}return i},e.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},e}();e.LongestCommonSubsequence=r;var i=function(){function r(r,i,o){var a=this;void 0===o&&(o=12),this.originalnodes=r,this.groupPadding=o,this.leaves=null,this.nodes=r.map(function(e,n){return new t(n,i.getBounds(e),i.getChildren(e))}),this.leaves=this.nodes.filter(function(e){return e.leaf}),this.groups=this.nodes.filter(function(e){return!e.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(e){return e.children.forEach(function(t){return a.nodes[t].parent=e})}),this.root={children:[]},this.nodes.forEach(function(e){"undefined"==typeof e.parent&&(e.parent=a.root,a.root.children.push(e.id)),e.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(e,t){return a.getDepth(e)-a.getDepth(t)});var s=this.backToFront.slice(0).reverse().filter(function(e){return!e.leaf});s.forEach(function(t){var n=e.vpsc.Rectangle.empty();t.children.forEach(function(e){return n=n.union(a.nodes[e].rect)}),t.rect=n.inflate(a.groupPadding)});var u=this.midPoints(this.cols.map(function(e){return e.pos})),l=this.midPoints(this.rows.map(function(e){return e.pos})),c=u[0],h=u[u.length-1],d=l[0],f=l[l.length-1],p=this.rows.map(function(e){return{x1:c,x2:h,y1:e.pos,y2:e.pos}}).concat(l.map(function(e){return{x1:c,x2:h,y1:e,y2:e}})),v=this.cols.map(function(e){return{x1:e.pos,x2:e.pos,y1:d,y2:f}}).concat(u.map(function(e){return{x1:e,x2:e,y1:d,y2:f}})),g=p.concat(v);g.forEach(function(e){return e.verts=[]}),this.verts=[],this.edges=[],p.forEach(function(e){return v.forEach(function(t){var r=new n(a.verts.length,t.x1,e.y1);e.verts.push(r),t.verts.push(r),a.verts.push(r);for(var i=a.backToFront.length;i-->0;){var o=a.backToFront[i],s=o.rect,u=Math.abs(r.x-s.cx()),l=Math.abs(r.y-s.cy());if(u<s.width()/2&&l<s.height()/2){r.node=o;break}}})}),g.forEach(function(e,t){a.nodes.forEach(function(t,r){t.rect.lineIntersections(e.x1,e.y1,e.x2,e.y2).forEach(function(r,i){var o=new n(a.verts.length,r.x,r.y,t,e);a.verts.push(o),e.verts.push(o),t.ports.push(o)})});var r=Math.abs(e.y1-e.y2)<.1,i=function(e,t){return r?t.x-e.x:t.y-e.y};e.verts.sort(i);for(var o=1;o<e.verts.length;o++){var s=e.verts[o-1],u=e.verts[o];s.node&&s.node===u.node&&s.node.leaf||a.edges.push({source:s.id,target:u.id,length:Math.abs(i(s,u))})}})}return r.prototype.avg=function(e){return e.reduce(function(e,t){return e+t})/e.length},r.prototype.getGridLines=function(e){for(var t=[],n=this.leaves.slice(0,this.leaves.length);n.length>0;){var r=n.filter(function(t){return t.rect["overlap"+e.toUpperCase()](n[0].rect)}),i={nodes:r,pos:this.avg(r.map(function(t){return t.rect["c"+e]()}))};t.push(i),i.nodes.forEach(function(e){return n.splice(n.indexOf(e),1)})}return t.sort(function(e,t){return e.pos-t.pos}),t},r.prototype.getDepth=function(e){for(var t=0;e.parent!==this.root;)t++,e=e.parent;return t},r.prototype.midPoints=function(e){for(var t=e[1]-e[0],n=[e[0]-t/2],r=1;r<e.length;r++)n.push((e[r]+e[r-1])/2);return n.push(e[e.length-1]+t/2),n},r.prototype.findLineage=function(e){var t=[e];do e=e.parent,t.push(e);while(e!==this.root);return t.reverse()},r.prototype.findAncestorPathBetween=function(e,t){for(var n=this.findLineage(e),r=this.findLineage(t),i=0;n[i]===r[i];)i++;return{commonAncestor:n[i-1],lineages:n.slice(i).concat(r.slice(i))}},r.prototype.siblingObstacles=function(e,t){var n=this,r=this.findAncestorPathBetween(e,t),i={};r.lineages.forEach(function(e){return i[e.id]={}});var o=r.commonAncestor.children.filter(function(e){return!(e in i)});return r.lineages.filter(function(e){return e.parent!==r.commonAncestor}).forEach(function(e){return o=o.concat(e.parent.children.filter(function(t){return t!==e.id}))}),o.map(function(e){return n.nodes[e]})},r.getSegmentSets=function(e,t,n){for(var r=[],i=0;i<e.length;i++)for(var o=e[i],a=0;a<o.length;a++){var s=o[a];s.edgeid=i,s.i=a;var u=s[1][t]-s[0][t];Math.abs(u)<.1&&r.push(s)}r.sort(function(e,n){return e[0][t]-n[0][t]});for(var l=[],c=null,h=0;h<r.length;h++){var s=r[h];(!c||Math.abs(s[0][t]-c.pos)>.1)&&(c={pos:s[0][t],segments:[]},l.push(c)),c.segments.push(s)}return l},r.nudgeSegs=function(t,n,r,i,o,a){var s=i.length;if(!(1>=s)){for(var u=i.map(function(n){return new e.vpsc.Variable(n[0][t])}),l=[],c=0;s>c;c++)for(var h=0;s>h;h++)if(c!==h){var d=i[c],f=i[h],p=d.edgeid,v=f.edgeid,g=-1,y=-1;"x"==t?o(p,v)&&(d[0][n]<d[1][n]?(g=h,y=c):(g=c,y=h)):o(p,v)&&(d[0][n]<d[1][n]?(g=c,y=h):(g=h,y=c)),g>=0&&l.push(new e.vpsc.Constraint(u[g],u[y],a))}var m=new e.vpsc.Solver(u,l);m.solve(),u.forEach(function(e,n){var o=i[n],a=e.position();o[0][t]=o[1][t]=a;var s=r[o.edgeid];o.i>0&&(s[o.i-1][1][t]=a),o.i<s.length-1&&(s[o.i+1][0][t]=a)})}},r.nudgeSegments=function(e,t,n,i,o){for(var a=r.getSegmentSets(e,t,n),s=0;s<a.length;s++){for(var u=a[s],l=[],c=0;c<u.segments.length;c++){var h=u.segments[c];l.push({type:0,s:h,pos:Math.min(h[0][n],h[1][n])}),l.push({type:1,s:h,pos:Math.max(h[0][n],h[1][n])})}l.sort(function(e,t){return e.pos-t.pos+e.type-t.type});var d=[],f=0;l.forEach(function(a){0===a.type?(d.push(a.s),f++):f--,0==f&&(r.nudgeSegs(t,n,e,d,i,o),d=[])})}},r.prototype.routeEdges=function(t,n,r,i){var o=this,a=t.map(function(e){return o.route(r(e),i(e))}),s=e.GridRouter.orderEdges(a),u=a.map(function(t){return e.GridRouter.makeSegments(t)});return e.GridRouter.nudgeSegments(u,"x","y",s,n),e.GridRouter.nudgeSegments(u,"y","x",s,n),e.GridRouter.unreverseEdges(u,a),u},r.unreverseEdges=function(e,t){e.forEach(function(e,n){var r=t[n];r.reversed&&(e.reverse(),e.forEach(function(e){e.reverse()}))})},r.angleBetween2Lines=function(e,t){var n=Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x),r=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),i=n-r;return(i>Math.PI||i<-Math.PI)&&(i=r-n),i},r.isLeft=function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)<=0},r.getOrder=function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];"undefined"==typeof t[r.l]&&(t[r.l]={}),t[r.l][r.r]=!0}return function(e,n){return"undefined"!=typeof t[e]&&t[e][n]}},r.orderEdges=function(t){for(var n=[],i=0;i<t.length-1;i++)for(var o=i+1;o<t.length;o++){var a,s,u,l=t[i],c=t[o],h=new e.LongestCommonSubsequence(l,c);0!==h.length&&(h.reversed&&(c.reverse(),c.reversed=!0,h=new e.LongestCommonSubsequence(l,c)),(h.si<=0||h.ti<=0)&&(h.si+h.length>=l.length||h.ti+h.length>=c.length)?n.push({l:i,r:o}):(h.si+h.length>=l.length||h.ti+h.length>=c.length?(a=l[h.si+1],u=l[h.si-1],s=c[h.ti-1]):(a=l[h.si+h.length-2],s=l[h.si+h.length],u=c[h.ti+h.length]),n.push(r.isLeft(a,s,u)?{l:o,r:i}:{l:i,r:o})))}return e.GridRouter.getOrder(n)},r.makeSegments=function(e){function t(e){return{x:e.x,y:e.y}}for(var n=function(e,t,n){return Math.abs((t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x))<.001},r=[],i=t(e[0]),o=1;o<e.length;o++){var a=t(e[o]),s=o<e.length-1?e[o+1]:null;s&&n(i,a,s)||(r.push([i,a]),i=a)}return r},r.prototype.route=function(t,n){var r=this,i=this.nodes[t],o=this.nodes[n];this.obstacles=this.siblingObstacles(i,o);var a={};this.obstacles.forEach(function(e){return a[e.id]=e}),this.passableEdges=this.edges.filter(function(e){var t=r.verts[e.source],n=r.verts[e.target];return!(t.node&&t.node.id in a||n.node&&n.node.id in a)});for(var s=1;s<i.ports.length;s++){var u=i.ports[0].id,l=i.ports[s].id;this.passableEdges.push({source:u,target:l,length:0})}for(var s=1;s<o.ports.length;s++){var u=o.ports[0].id,l=o.ports[s].id;this.passableEdges.push({source:u,target:l,length:0})}var c=function(e){return e.source},h=function(e){return e.target},d=function(e){return e.length},f=new e.shortestpaths.Calculator(this.verts.length,this.passableEdges,c,h,d),p=function(e,t,n){var a=r.verts[e],s=r.verts[t],u=r.verts[n],l=Math.abs(u.x-a.x),c=Math.abs(u.y-a.y);return a.node===i&&a.node===s.node||s.node===o&&s.node===u.node?0:l>1&&c>1?1e3:0},v=f.PathFromNodeToNodeWithPrevCost(i.ports[0].id,o.ports[0].id,p),g=v.reverse().map(function(e){return r.verts[e]});return g.push(this.nodes[o.id].ports[0]),g.filter(function(e,t){return!(t<g.length-1&&g[t+1].node===i&&e.node===i||t>0&&e.node===o&&g[t-1].node===o)})},r.getRoutePath=function(e,t,n,i){var o={routepath:"M "+e[0][0].x+" "+e[0][0].y+" ",arrowpath:""};if(e.length>1)for(var a=0;a<e.length;a++){var s=e[a],u=s[1].x,l=s[1].y,c=u-s[0].x,h=l-s[0].y;if(a<e.length-1){Math.abs(c)>0?u-=c/Math.abs(c)*t:l-=h/Math.abs(h)*t,o.routepath+="L "+u+" "+l+" ";var d=e[a+1],f=d[0].x,p=d[0].y,v=d[1].x,g=d[1].y;c=v-f,h=g-p;var y,m,b=r.angleBetween2Lines(s,d)<0?1:0;Math.abs(c)>0?(y=f+c/Math.abs(c)*t,m=p):(y=f,m=p+h/Math.abs(h)*t);var x=Math.abs(y-u),w=Math.abs(m-l);o.routepath+="A "+x+" "+w+" 0 0 "+b+" "+y+" "+m+" "}else{var _,E,k=[u,l];Math.abs(c)>0?(u-=c/Math.abs(c)*i,_=[u,l+n],E=[u,l-n]):(l-=h/Math.abs(h)*i,_=[u+n,l],E=[u-n,l]),o.routepath+="L "+u+" "+l+" ",i>0&&(o.arrowpath="M "+k[0]+" "+k[1]+" L "+_[0]+" "+_[1]+" L "+E[0]+" "+E[1])}}else{var _,E,s=e[0],u=s[1].x,l=s[1].y,c=u-s[0].x,h=l-s[0].y,k=[u,l];Math.abs(c)>0?(u-=c/Math.abs(c)*i,_=[u,l+n],E=[u,l-n]):(l-=h/Math.abs(h)*i,_=[u+n,l],E=[u-n,l]),o.routepath+="L "+u+" "+l+" ",i>0&&(o.arrowpath="M "+k[0]+" "+k[1]+" L "+_[0]+" "+_[1]+" L "+E[0]+" "+E[1])}return o},r}();e.GridRouter=i}(r||(r={}));var r;!function(e){var t=function(){function e(e,t){this.source=e,this.target=t}return e.prototype.actualLength=function(e){var t=this;return Math.sqrt(e.reduce(function(e,n){var r=n[t.target]-n[t.source];return e+r*r},0))},e}();e.Link3D=t;var n=function(){function e(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),this.x=e,this.y=t,this.z=n}return e}();e.Node3D=n;var r=function(){function t(e,n,r){var i=this;void 0===r&&(r=1),this.nodes=e,this.links=n,this.idealLinkLength=r,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(t.k);for(var o=0;o<t.k;++o)this.result[o]=new Array(e.length);e.forEach(function(e,n){for(var r=0,o=t.dims;r<o.length;r++){var a=o[r];"undefined"==typeof e[a]&&(e[a]=Math.random())}i.result[0][n]=e.x,i.result[1][n]=e.y,i.result[2][n]=e.z})}return t.prototype.linkLength=function(e){return e.actualLength(this.result)},t.prototype.start=function(t){var n=this;void 0===t&&(t=100);var r=this.nodes.length,o=new i;this.useJaccardLinkLengths&&e.jaccardLinkLengths(this.links,o,1.5),this.links.forEach(function(e){return e.length*=n.idealLinkLength});var a=new e.shortestpaths.Calculator(r,this.links,function(e){return e.source},function(e){return e.target},function(e){return e.length}).DistanceMatrix(),s=e.Descent.createSquareMatrix(r,function(e,t){return a[e][t]}),u=e.Descent.createSquareMatrix(r,function(){return 2});this.links.forEach(function(e){var t=e.source,n=e.target;return u[t][n]=u[n][t]=1}),this.descent=new e.Descent(this.result,s),this.descent.threshold=.001,this.descent.G=u,this.constraints&&(this.descent.project=new e.vpsc.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var l=0;l<this.nodes.length;l++){var c=this.nodes[l];c.fixed&&this.descent.locks.add(l,[c.x,c.y,c.z])}return this.descent.run(t),this},t.prototype.tick=function(){this.descent.locks.clear();for(var e=0;e<this.nodes.length;e++){var t=this.nodes[e];t.fixed&&this.descent.locks.add(e,[t.x,t.y,t.z])}return this.descent.rungeKutta()},t.dims=["x","y","z"],t.k=t.dims.length,t}();e.Layout3D=r;var i=function(){function e(){}return e.prototype.getSourceIndex=function(e){return e.source},e.prototype.getTargetIndex=function(e){return e.target},e.prototype.getLength=function(e){return e.length},e.prototype.setLength=function(e,t){e.length=t},e}()}(r||(r={})),t.exports=r},{}],62:[function(e,t,n){!function(e){"use strict";e(function(e){var t=e("./makePromise"),n=e("./Scheduler"),r=e("./env").asap;return t({scheduler:new n(r)})})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"./Scheduler":63,"./env":75,"./makePromise":77}],63:[function(e,t,n){!function(e){"use strict";e(function(){function e(e){this._async=e,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var t=this;this.drain=function(){t._drain()}}return e.prototype.enqueue=function(e){this._queue[this._queueLen++]=e,this.run()},e.prototype.afterQueue=function(e){this._afterQueue[this._afterQueueLen++]=e,this.run()},e.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},e.prototype._drain=function(){for(var e=0;e<this._queueLen;++e)this._queue[e].run(),this._queue[e]=void 0;for(this._queueLen=0,this._running=!1,e=0;e<this._afterQueueLen;++e)this._afterQueue[e].run(),this._afterQueue[e]=void 0;this._afterQueueLen=0},e})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],64:[function(e,t,n){!function(e){"use strict";e(function(){function e(t){Error.call(this),this.message=t,this.name=e.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],65:[function(e,t,n){!function(e){"use strict";e(function(){function e(e,n){function r(t,r,o){var a=e._defer(),s=o.length,u=new Array(s);return i({f:t,thisArg:r,args:o,params:u,i:s-1,call:n},a._handler),a}function i(t,r){if(t.i<0)return n(t.f,t.thisArg,t.params,r);var i=e._handler(t.args[t.i]);i.fold(o,t,void 0,r)}function o(e,t,n){e.params[e.i]=t,e.i-=1,i(e,n)}return arguments.length<2&&(n=t),r}function t(e,t,n,r){try{r.resolve(e.apply(t,n))}catch(i){r.reject(i)}}return e.tryCatchResolve=t,e})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],66:[function(e,t,n){!function(e){"use strict";e(function(e){var t=e("../state"),n=e("../apply");return function(e){function r(t){function n(e){c=null,this.resolve(e)}function r(e){this.resolved||(c.push(e),0===--l&&this.reject(c))}for(var i,o,a=e._defer(),s=a._handler,u=t.length>>>0,l=u,c=[],h=0;u>h;++h)if(o=t[h],void 0!==o||h in t){if(i=e._handler(o),i.state()>0){s.become(i),e._visitRemaining(t,h,i);break}i.visit(s,n,r)}else--l;return 0===l&&s.reject(new RangeError("any(): array must not be empty")),a}function i(t,n){function r(e){this.resolved||(c.push(e),0===--f&&(h=null,this.resolve(c)))}function i(e){this.resolved||(h.push(e),0===--o&&(c=null,this.reject(h)))}var o,a,s,u=e._defer(),l=u._handler,c=[],h=[],d=t.length>>>0,f=0;for(s=0;d>s;++s)a=t[s],(void 0!==a||s in t)&&++f;for(n=Math.max(n,0),o=f-n+1,f=Math.min(n,f),n>f?l.reject(new RangeError("some(): array must contain at least "+n+" item(s), but had "+f)):0===f&&l.resolve(c),s=0;d>s;++s)a=t[s],(void 0!==a||s in t)&&e._handler(a).visit(l,r,i,l.notify);return u}function o(t,n){return e._traverse(n,t)}function a(t,n){var r=m.call(t);return e._traverse(n,r).then(function(e){return s(r,e)})}function s(t,n){for(var r=n.length,i=new Array(r),o=0,a=0;r>o;++o)n[o]&&(i[a++]=e._handler(t[o]).value);return i.length=a,i}function u(e){return v(e.map(l))}function l(n){var r=e._handler(n);

return 0===r.state()?p(n).then(t.fulfilled,t.rejected):(r._unreport(),t.inspect(r))}function c(e,t){return arguments.length>2?g.call(e,d(t),arguments[2]):g.call(e,d(t))}function h(e,t){return arguments.length>2?y.call(e,d(t),arguments[2]):y.call(e,d(t))}function d(e){return function(t,n,r){return f(e,void 0,[t,n,r])}}var f=n(e),p=e.resolve,v=e.all,g=Array.prototype.reduce,y=Array.prototype.reduceRight,m=Array.prototype.slice;return e.any=r,e.some=i,e.settle=u,e.map=o,e.filter=a,e.reduce=c,e.reduceRight=h,e.prototype.spread=function(e){return this.then(v).then(function(t){return e.apply(this,t)})},e}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"../apply":65,"../state":78}],67:[function(e,t,n){!function(e){"use strict";e(function(){function e(){throw new TypeError("catch predicate must be a function")}function t(e,t){return n(t)?e instanceof t:t(e)}function n(e){return e===Error||null!=e&&e.prototype instanceof Error}function r(e){return("object"==typeof e||"function"==typeof e)&&null!==e}function i(e){return e}return function(n){function o(e,n){return function(r){return t(r,n)?e.call(this,r):l(r)}}function a(e,t,n,i){var o=e.call(t);return r(o)?s(o,n,i):n(i)}function s(e,t,n){return u(e).then(function(){return t(n)})}var u=n.resolve,l=n.reject,c=n.prototype["catch"];return n.prototype.done=function(e,t){this._handler.visit(this._handler.receiver,e,t)},n.prototype["catch"]=n.prototype.otherwise=function(t){return arguments.length<2?c.call(this,t):"function"!=typeof t?this.ensure(e):c.call(this,o(arguments[1],t))},n.prototype["finally"]=n.prototype.ensure=function(e){return"function"!=typeof e?this:this.then(function(t){return a(e,this,i,t)},function(t){return a(e,this,l,t)})},n.prototype["else"]=n.prototype.orElse=function(e){return this.then(void 0,function(){return e})},n.prototype["yield"]=function(e){return this.then(function(){return e})},n.prototype.tap=function(e){return this.then(e)["yield"](this)},n}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],68:[function(e,t,n){!function(e){"use strict";e(function(){return function(e){return e.prototype.fold=function(t,n){var r=this._beget();return this._handler.fold(function(n,r,i){e._handler(n).fold(function(e,n,r){r.resolve(t.call(this,n,e))},r,this,i)},n,r._handler.receiver,r._handler),r},e}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],69:[function(e,t,n){!function(e){"use strict";e(function(e){var t=e("../state").inspect;return function(e){return e.prototype.inspect=function(){return t(e._handler(this))},e}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"../state":78}],70:[function(e,t,n){!function(e){"use strict";e(function(){return function(e){function t(e,t,r,i){return n(function(t){return[t,e(t)]},t,r,i)}function n(e,t,i,o){function a(o,a){return r(i(o)).then(function(){return n(e,t,i,a)})}return r(o).then(function(n){return r(t(n)).then(function(t){return t?n:r(e(n)).spread(a)})})}var r=e.resolve;return e.iterate=t,e.unfold=n,e}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],71:[function(e,t,n){!function(e){"use strict";e(function(){return function(e){return e.prototype.progress=function(e){return this.then(void 0,void 0,e)},e}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],72:[function(e,t,n){!function(e){"use strict";e(function(e){function t(e,t,r,i){return n.setTimer(function(){e(r,i,t)},t)}var n=e("../env"),r=e("../TimeoutError");return function(e){function i(e,n,r){t(o,e,n,r)}function o(e,t){t.resolve(e)}function a(e,t,n){var i="undefined"==typeof e?new r("timed out after "+n+"ms"):e;t.reject(i)}return e.prototype.delay=function(e){var t=this._beget();return this._handler.fold(i,e,void 0,t._handler),t},e.prototype.timeout=function(e,r){var i=this._beget(),o=i._handler,s=t(a,e,r,i._handler);return this._handler.visit(o,function(e){n.clearTimer(s),this.resolve(e)},function(e){n.clearTimer(s),this.reject(e)},o.notify),i},e}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"../TimeoutError":64,"../env":75}],73:[function(e,t,n){!function(e){"use strict";e(function(e){function t(e){throw e}function n(){}var r=e("../env").setTimer,i=e("../format");return function(e){function o(e){e.handled||(f.push(e),c("Potentially unhandled rejection ["+e.id+"] "+i.formatError(e.value)))}function a(e){var t=f.indexOf(e);t>=0&&(f.splice(t,1),h("Handled previous rejection ["+e.id+"] "+i.formatObject(e.value)))}function s(e,t){d.push(e,t),null===p&&(p=r(u,0))}function u(){for(p=null;d.length>0;)d.shift()(d.shift())}var l,c=n,h=n;"undefined"!=typeof console&&(l=console,c="undefined"!=typeof l.error?function(e){l.error(e)}:function(e){l.log(e)},h="undefined"!=typeof l.info?function(e){l.info(e)}:function(e){l.log(e)}),e.onPotentiallyUnhandledRejection=function(e){s(o,e)},e.onPotentiallyUnhandledRejectionHandled=function(e){s(a,e)},e.onFatalRejection=function(e){s(t,e.value)};var d=[],f=[],p=null;return e}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"../env":75,"../format":76}],74:[function(e,t,n){!function(e){"use strict";e(function(){return function(e){return e.prototype["with"]=e.prototype.withThis=function(e){var t=this._beget(),n=t._handler;return n.receiver=e,this._handler.chain(n,e),t},e}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],75:[function(e,t,n){(function(n){!function(e){"use strict";e(function(e){function t(){return"undefined"!=typeof n&&"[object process]"===Object.prototype.toString.call(n)}function r(){return"function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver}function i(e){function t(){var e=n;n=void 0,e()}var n,r=document.createTextNode(""),i=new e(t);i.observe(r,{characterData:!0});var o=0;return function(e){n=e,r.data=o^=1}}var o,a="undefined"!=typeof setTimeout&&setTimeout,s=function(e,t){return setTimeout(e,t)},u=function(e){return clearTimeout(e)},l=function(e){return a(e,0)};if(t())l=function(e){return n.nextTick(e)};else if(o=r())l=i(o);else if(!a){var c=e,h=c("vertx");s=function(e,t){return h.setTimer(t,e)},u=h.cancelTimer,l=h.runOnLoop||h.runOnContext}return{setTimer:s,clearTimer:u,asap:l}})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})}).call(this,e("g5I+bs"))},{"g5I+bs":58}],76:[function(e,t,n){!function(e){"use strict";e(function(){function e(e){var n="object"==typeof e&&null!==e&&(e.stack||e.message)?e.stack||e.message:t(e);return e instanceof Error?n:n+" (WARNING: non-Error used)"}function t(e){var t=String(e);return"[object Object]"===t&&"undefined"!=typeof JSON&&(t=n(e,t)),t}function n(e,t){try{return JSON.stringify(e)}catch(n){return t}}return{formatError:e,formatObject:t,tryStringify:n}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],77:[function(e,t,n){(function(e){!function(t){"use strict";t(function(){return function(t){function n(e,t){this._handler=e===x?t:r(e)}function r(e){function t(e){i.resolve(e)}function n(e){i.reject(e)}function r(e){i.notify(e)}var i=new _;try{e(t,n,r)}catch(o){n(o)}return i}function i(e){return O(e)?e:new n(x,new E(y(e)))}function o(e){return new n(x,new E(new N(e)))}function a(){return ee}function s(){return new n(x,new _)}function u(e,t){var n=new _(e.receiver,e.join().context);return new t(x,n)}function l(e){return h($,null,e)}function c(e,t){return h(F,e,t)}function h(e,t,r){function i(n,i,a){a.resolved||d(r,o,n,e(t,i,n),a)}function o(e,t,n){c[e]=t,0===--l&&n.become(new S(c))}for(var a,s="function"==typeof t?i:o,u=new _,l=r.length>>>0,c=new Array(l),h=0;h<r.length&&!u.resolved;++h)a=r[h],void 0!==a||h in r?d(r,s,h,a,u):--l;return 0===l&&u.become(new S(c)),new n(x,u)}function d(e,t,n,r,i){if(j(r)){var o=m(r),a=o.state();0===a?o.fold(t,n,void 0,i):a>0?t(n,o.value,i):(i.become(o),f(e,n+1,o))}else t(n,r,i)}function f(e,t,n){for(var r=t;r<e.length;++r)p(y(e[r]),n)}function p(e,t){if(e!==t){var n=e.state();0===n?e.visit(e,void 0,e._unreport):0>n&&e._unreport()}}function v(e){return"object"!=typeof e||null===e?o(new TypeError("non-iterable passed to race()")):0===e.length?a():1===e.length?i(e[0]):g(e)}function g(e){var t,r,i,o=new _;for(t=0;t<e.length;++t)if(r=e[t],void 0!==r||t in e){if(i=y(r),0!==i.state()){o.become(i),f(e,t+1,i);break}i.visit(o,o.resolve,o.reject)}return new n(x,o)}function y(e){return O(e)?e._handler.join():j(e)?b(e):new S(e)}function m(e){return O(e)?e._handler.join():b(e)}function b(e){try{var t=e.then;return"function"==typeof t?new k(t,e):new S(e)}catch(n){return new N(n)}}function x(){}function w(){}function _(e,t){n.createContext(this,t),this.consumers=void 0,this.receiver=e,this.handler=void 0,this.resolved=!1}function E(e){this.handler=e}function k(e,t){_.call(this),U.enqueue(new A(e,t,this))}function S(e){n.createContext(this),this.value=e}function N(e){n.createContext(this),this.id=++J,this.value=e,this.handled=!1,this.reported=!1,this._report()}function T(e,t){this.rejection=e,this.context=t}function D(e){this.rejection=e}function P(){return new N(new TypeError("Promise cycle"))}function C(e,t){this.continuation=e,this.handler=t}function M(e,t){this.handler=t,this.value=e}function A(e,t,n){this._then=e,this.thenable=t,this.resolver=n}function I(e,t,n,r,i){try{e.call(t,n,r,i)}catch(o){r(o)}}function L(e,t,n,r){this.f=e,this.z=t,this.c=n,this.to=r,this.resolver=K,this.receiver=this}function O(e){return e instanceof n}function j(e){return("object"==typeof e||"function"==typeof e)&&null!==e}function B(e,t,r,i){return"function"!=typeof e?i.become(t):(n.enterContext(t),V(e,t.value,r,i),void n.exitContext())}function R(e,t,r,i,o){return"function"!=typeof e?o.become(r):(n.enterContext(r),q(e,t,r.value,i,o),void n.exitContext())}function z(e,t,r,i,o){return"function"!=typeof e?o.notify(t):(n.enterContext(r),X(e,t,i,o),void n.exitContext())}function F(e,t,n){try{return e(t,n)}catch(r){return o(r)}}function V(e,t,n,r){try{r.become(y(e.call(n,t)))}catch(i){r.become(new N(i))}}function q(e,t,n,r,i){try{e.call(r,t,n,i)}catch(o){i.become(new N(o))}}function X(e,t,n,r){try{r.notify(e.call(n,t))}catch(i){r.notify(i)}}function Y(e,t){t.prototype=Z(e.prototype),t.prototype.constructor=t}function $(e,t){return t}function G(){}function W(){return"undefined"!=typeof e&&null!==e&&"function"==typeof e.emit?function(t,n){return"unhandledRejection"===t?e.emit(t,n.value,n):e.emit(t,n)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(e,t,n){var r=!1;try{var i=new n("unhandledRejection");r=i instanceof n}catch(o){}return r?function(e,r){var i=new n(e,{detail:{reason:r.value,key:r},bubbles:!1,cancelable:!0});return!t.dispatchEvent(i)}:e}(G,self,CustomEvent):G}var U=t.scheduler,H=W(),Z=Object.create||function(e){function t(){}return t.prototype=e,new t};n.resolve=i,n.reject=o,n.never=a,n._defer=s,n._handler=y,n.prototype.then=function(e,t,n){var r=this._handler,i=r.join().state();if("function"!=typeof e&&i>0||"function"!=typeof t&&0>i)return new this.constructor(x,r);var o=this._beget(),a=o._handler;return r.chain(a,r.receiver,e,t,n),o},n.prototype["catch"]=function(e){return this.then(void 0,e)},n.prototype._beget=function(){return u(this._handler,this.constructor)},n.all=l,n.race=v,n._traverse=c,n._visitRemaining=f,x.prototype.when=x.prototype.become=x.prototype.notify=x.prototype.fail=x.prototype._unreport=x.prototype._report=G,x.prototype._state=0,x.prototype.state=function(){return this._state},x.prototype.join=function(){for(var e=this;void 0!==e.handler;)e=e.handler;return e},x.prototype.chain=function(e,t,n,r,i){this.when({resolver:e,receiver:t,fulfilled:n,rejected:r,progress:i})},x.prototype.visit=function(e,t,n,r){this.chain(K,e,t,n,r)},x.prototype.fold=function(e,t,n,r){this.when(new L(e,t,n,r))},Y(x,w),w.prototype.become=function(e){e.fail()};var K=new w;Y(x,_),_.prototype._state=0,_.prototype.resolve=function(e){this.become(y(e))},_.prototype.reject=function(e){this.resolved||this.become(new N(e))},_.prototype.join=function(){if(!this.resolved)return this;for(var e=this;void 0!==e.handler;)if(e=e.handler,e===this)return this.handler=P();return e},_.prototype.run=function(){var e=this.consumers,t=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var n=0;n<e.length;++n)t.when(e[n])},_.prototype.become=function(e){this.resolved||(this.resolved=!0,this.handler=e,void 0!==this.consumers&&U.enqueue(this),void 0!==this.context&&e._report(this.context))},_.prototype.when=function(e){this.resolved?U.enqueue(new C(e,this.handler)):void 0===this.consumers?this.consumers=[e]:this.consumers.push(e)},_.prototype.notify=function(e){this.resolved||U.enqueue(new M(e,this))},_.prototype.fail=function(e){var t="undefined"==typeof e?this.context:e;this.resolved&&this.handler.join().fail(t)},_.prototype._report=function(e){this.resolved&&this.handler.join()._report(e)},_.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},Y(x,E),E.prototype.when=function(e){U.enqueue(new C(e,this))},E.prototype._report=function(e){this.join()._report(e)},E.prototype._unreport=function(){this.join()._unreport()},Y(_,k),Y(x,S),S.prototype._state=1,S.prototype.fold=function(e,t,n,r){R(e,t,this,n,r)},S.prototype.when=function(e){B(e.fulfilled,this,e.receiver,e.resolver)};var J=0;Y(x,N),N.prototype._state=-1,N.prototype.fold=function(e,t,n,r){r.become(this)},N.prototype.when=function(e){"function"==typeof e.rejected&&this._unreport(),B(e.rejected,this,e.receiver,e.resolver)},N.prototype._report=function(e){U.afterQueue(new T(this,e))},N.prototype._unreport=function(){this.handled||(this.handled=!0,U.afterQueue(new D(this)))},N.prototype.fail=function(e){this.reported=!0,H("unhandledRejection",this),n.onFatalRejection(this,void 0===e?this.context:e)},T.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,H("unhandledRejection",this.rejection)||n.onPotentiallyUnhandledRejection(this.rejection,this.context))},D.prototype.run=function(){this.rejection.reported&&(H("rejectionHandled",this.rejection)||n.onPotentiallyUnhandledRejectionHandled(this.rejection))},n.createContext=n.enterContext=n.exitContext=n.onPotentiallyUnhandledRejection=n.onPotentiallyUnhandledRejectionHandled=n.onFatalRejection=G;var Q=new x,ee=new n(x,Q);return C.prototype.run=function(){this.handler.join().when(this.continuation)},M.prototype.run=function(){var e=this.handler.consumers;if(void 0!==e)for(var t,n=0;n<e.length;++n)t=e[n],z(t.progress,this.value,this.handler,t.receiver,t.resolver)},A.prototype.run=function(){function e(e){r.resolve(e)}function t(e){r.reject(e)}function n(e){r.notify(e)}var r=this.resolver;I(this._then,this.thenable,e,t,n)},L.prototype.fulfilled=function(e){this.f.call(this.c,this.z,e,this.to)},L.prototype.rejected=function(e){this.to.reject(e)},L.prototype.progress=function(e){this.to.notify(e)},n}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})}).call(this,e("g5I+bs"))},{"g5I+bs":58}],78:[function(e,t,n){!function(e){"use strict";e(function(){function e(){return{state:"pending"}}function t(e){return{state:"rejected",reason:e}}function n(e){return{state:"fulfilled",value:e}}function r(r){var i=r.state();return 0===i?e():i>0?n(r.value):t(r.value)}return{pending:e,fulfilled:n,rejected:t,inspect:r}})}("function"==typeof define&&define.amd?define:function(e){t.exports=e()})},{}],79:[function(e,t,n){!function(e){"use strict";e(function(e){function t(e,t,n,r){var i=E.resolve(e);return arguments.length<2?i:i.then(t,n,r)}function n(e){return new E(e)}function r(e){return function(){for(var t=0,n=arguments.length,r=new Array(n);n>t;++t)r[t]=arguments[t];return k(e,this,r)}}function i(e){for(var t=0,n=arguments.length-1,r=new Array(n);n>t;++t)r[t]=arguments[t+1];return k(e,this,r)}function o(){return new a}function a(){function e(e){r._handler.resolve(e)}function t(e){r._handler.reject(e)}function n(e){r._handler.notify(e)}var r=E._defer();this.promise=r,this.resolve=e,this.reject=t,this.notify=n,this.resolver={resolve:e,reject:t,notify:n}}function s(e){return e&&"function"==typeof e.then}function u(){return E.all(arguments)}function l(e){return t(e,E.all)}function c(e){return t(e,E.settle)}function h(e,n){return t(e,function(e){return E.map(e,n)})}function d(e,n){return t(e,function(e){return E.filter(e,n)})}var f=e("./lib/decorators/timed"),p=e("./lib/decorators/array"),v=e("./lib/decorators/flow"),g=e("./lib/decorators/fold"),y=e("./lib/decorators/inspect"),m=e("./lib/decorators/iterate"),b=e("./lib/decorators/progress"),x=e("./lib/decorators/with"),w=e("./lib/decorators/unhandledRejection"),_=e("./lib/TimeoutError"),E=[p,v,g,m,b,y,x,f,w].reduce(function(e,t){return t(e)},e("./lib/Promise")),k=e("./lib/apply")(E);return t.promise=n,t.resolve=E.resolve,t.reject=E.reject,t.lift=r,t["try"]=i,t.attempt=i,t.iterate=E.iterate,t.unfold=E.unfold,t.join=u,t.all=l,t.settle=c,t.any=r(E.any),t.some=r(E.some),t.race=r(E.race),t.map=h,t.filter=d,t.reduce=r(E.reduce),t.reduceRight=r(E.reduceRight),t.isPromiseLike=s,t.Promise=E,t.defer=o,t.TimeoutError=_,t})}("function"==typeof define&&define.amd?define:function(n){t.exports=n(e)})},{"./lib/Promise":62,"./lib/TimeoutError":64,"./lib/apply":65,"./lib/decorators/array":66,"./lib/decorators/flow":67,"./lib/decorators/fold":68,"./lib/decorators/inspect":69,"./lib/decorators/iterate":70,"./lib/decorators/progress":71,"./lib/decorators/timed":72,"./lib/decorators/unhandledRejection":73,"./lib/decorators/with":74}]},{},[1]);